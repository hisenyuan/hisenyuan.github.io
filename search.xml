<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>1103 host &#39;xxx&#39; is not allowed to connect to this mysql</title>
    <url>/20170311-1103%20host%20%E2%80%98xxx%E2%80%99%20is%20not%20allowed%20to%20connect%20to%20this%20mysql/</url>
    <content><![CDATA[<p>出现原因：<br>这是由于mysql服务端root用户所对应的客户端权限设置问题。</p>
<p>默认所对应的客户端地址只有localhost（也就是服务端的机器），</p>
<p>我们目的是任何地址都可以用root访问mysql服务端。</p>
<p>解决办法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ mysql -u root -p</span><br><span class="line">#进入mysql交互界面</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">#使用mysql这个库</span><br><span class="line">mysql&gt; grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;hisen&#x27;;</span><br><span class="line">#让root可以在任何ip登陆，密码为：hisen</span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">#刷新</span><br><span class="line">mysql&gt; exit;</span><br><span class="line">#退出</span><br><span class="line">$ service mysql restart</span><br><span class="line">#重启mysql</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>关于学习英语</title>
    <url>/20210605-About-learning-English/</url>
    <content><![CDATA[<h2 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h2><p>作为一个软件开发工程师，日常很多机会和英文打交道。<br>特别是上一份工作，做全球支付项目，需要用到英文与国际友人沟通。<br>奈何自己的英语水平捉襟见肘，于是经常会有意地去收集相关的文章。</p>
<p>今天心血来潮，再次看了一下之前收藏的相关文章，感觉收获不少。<br>于是就想写一篇文章归集一下相关的内容，方便日后翻阅，顺便分享给有需要的人。</p>
<h2 id="二、资源"><a href="#二、资源" class="headerlink" title="二、资源"></a>二、资源</h2><p>复旦大学中文系教授<em>严峰</em></p>
<ul>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzI3NTMwNjQyMg==&mid=2247485689&idx=1&sn=9943d4a9c8da6de232a68a4b0ecec6b1">严老师的英语学习硬核秘诀</a><br>学习英语最重要的还是兴趣，推荐听广播，背课文，背单词。</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/-kFnIWl6_1sJU-LErGI8_Q">学外语有什么用</a><br>关于学习外语的一些用途，方便大家思考自己学习的目的。</p>
</li>
</ul>
<span id="more"></span>

<p>程序员圈”名”人<em>王垠</em> :</p>
<ul>
<li><p><a href="https://www.yinwang.org/blog-cn/2018/11/23/grammar">解谜英语语法</a><br>语法、动词比较重要<br>推荐：练习造句。分析句子。<br>语法树的概念蛮好理解，我让我明白了什么叫宾补~</p>
</li>
<li><p><a href="https://www.yinwang.org/blog-cn/2020/03/06/english-learning-tips">英语学习的一些经验</a><br>语法和句子结构是关键，其次才是词汇量。<br>如果你的词汇量足够阅读技术文档，那就可以开始看了。<br>遇到不懂的单词，查询之，使用英英字典，记录在本子上，加强记忆。</p>
</li>
</ul>
<p>GitHub 上的成功人士：</p>
<ul>
<li><a href="https://github.com/byoungd/English-level-up-tips-for-Chinese">可能是让你受益匪浅的英语进阶指南(GitHub)</a></li>
<li><a href="https://byoungd.gitbook.io/english-level-up-tips/">可能是让你受益匪浅的英语进阶指南(GitBook)</a></li>
</ul>
<h2 id="三、后话"><a href="#三、后话" class="headerlink" title="三、后话"></a>三、后话</h2><p>还是得坚持看文档，背单词。</p>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>English</tag>
      </tags>
  </entry>
  <entry>
    <title>Agent CGlib VS JDK | 动态代理比较</title>
    <url>/20190330-Agent%20CGlib%20VS%20JDK%20%7C%20%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%AF%94%E8%BE%83/</url>
    <content><![CDATA[<h1 id="一、代理简介"><a href="#一、代理简介" class="headerlink" title="一、代理简介"></a>一、代理简介</h1><h2 id="1-1-代理是什么"><a href="#1-1-代理是什么" class="headerlink" title="1.1 代理是什么"></a>1.1 代理是什么</h2><p>举个例子：快到吃饭的点了，你有两种选择：1)自己做,2)叫外卖<br>1.1.1 自己做你嫌麻烦，那就叫外卖，只管收外卖其它不关注(解耦);<br>1.1.2 自己做的不好吃，那厨师上门，厨师给你增强菜的味道(增强);</p>
<p>官方定义：对其他对象提供一种代理以控制对这个对象的访问。</p>
<h2 id="1-2-使用场景是什么"><a href="#1-2-使用场景是什么" class="headerlink" title="1.2 使用场景是什么"></a>1.2 使用场景是什么</h2><p>1.2.1 设计模式中有一个设计原则是开闭原则，是说对修改关闭对扩展开放，我们在工作中有时会接手很多前人的代码，里面代码逻辑让人摸不着头脑(sometimes the code is really like shit)，这时就很难去下手修改代码，那么这时我们就可以通过代理对类进行增强。</p>
<p>1.2.2 我们在使用RPC框架的时候，框架本身并不能提前知道各个业务方要调用哪些接口的哪些方法 。那么这个时候，就可用通过动态代理的方式来建立一个中间人给客户端使用，也方便框架进行搭建逻辑，某种程度上也是客户端代码和框架松耦合的一种表现。</p>
<p>1.2.3 Spring的AOP机制就是采用动态代理的机制来实现切面编程。</p>
<h1 id="二、CGlib-VS-JDK-两种方式实现代理"><a href="#二、CGlib-VS-JDK-两种方式实现代理" class="headerlink" title="二、CGlib VS JDK 两种方式实现代理"></a>二、CGlib VS JDK 两种方式实现代理</h1><h2 id="2-1-差异"><a href="#2-1-差异" class="headerlink" title="2.1 差异"></a>2.1 差异</h2><p>2.1.1 JDK：只能代理接口<br>2.1.2 CGlib：直接代理类</p>
<h2 id="2-2-简单demo"><a href="#2-2-简单demo" class="headerlink" title="2.2 简单demo"></a>2.2 简单demo</h2><span id="more"></span>
<p>完整代码：<a href="https://github.com/hisenyuan/IDEAPractice/tree/master/src/main/Java/com/hisen/jdk/agent">https://github.com/hisenyuan/IDEAPractice/tree/master/src/main/Java/com/hisen/jdk/agent</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;===CGlibAgentTest===&quot;</span>);</span><br><span class="line">    cGlibAgentTest();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;\n===JDKDynamicAgentTest===&quot;</span>);</span><br><span class="line">    jdkDynamicAgentTest();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">cGlibAgentTest</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">CGlibAgent</span> <span class="variable">cGlibAgent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CGlibAgent</span>();</span><br><span class="line">    <span class="type">Apple</span> <span class="variable">apple</span> <span class="operator">=</span> (Apple) cGlibAgent.getInstance(Apple.class);</span><br><span class="line">    apple.show();</span><br><span class="line"></span><br><span class="line">    System.out.println();</span><br><span class="line"></span><br><span class="line">    <span class="type">Orange</span> <span class="variable">orange</span> <span class="operator">=</span> (Orange) cGlibAgent.getInstance(Orange.class);</span><br><span class="line">    orange.show();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">jdkDynamicAgentTest</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// must be return interface</span></span><br><span class="line">    <span class="type">Fruit</span> <span class="variable">apple</span> <span class="operator">=</span> (Fruit) DynamicAgent.agent(Fruit.class, <span class="keyword">new</span> <span class="title class_">Apple</span>());</span><br><span class="line">    apple.show();</span><br><span class="line"></span><br><span class="line">    System.out.println();</span><br><span class="line"></span><br><span class="line">    <span class="type">Fruit</span> <span class="variable">orange</span> <span class="operator">=</span> (Fruit) DynamicAgent.agent(Fruit.class, <span class="keyword">new</span> <span class="title class_">Orange</span>());</span><br><span class="line">    orange.show();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//===CGlibAgentTest===</span></span><br><span class="line"><span class="comment">//-&gt; before invoking</span></span><br><span class="line"><span class="comment">//Apple show method is invoked</span></span><br><span class="line"><span class="comment">//-&gt; after invoking</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//-&gt; before invoking</span></span><br><span class="line"><span class="comment">//    Orange show method is invoked</span></span><br><span class="line"><span class="comment">//-&gt; after invoking</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//===JDKDynamicAgentTest===</span></span><br><span class="line"><span class="comment">//-&gt; before invoking</span></span><br><span class="line"><span class="comment">//    Apple show method is invoked</span></span><br><span class="line"><span class="comment">//-&gt; after invoking</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//-&gt; before invoking</span></span><br><span class="line"><span class="comment">//    Orange show method is invoked</span></span><br><span class="line"><span class="comment">//-&gt; after invoking</span></span><br></pre></td></tr></table></figure>

<h1 id="三、参考连接"><a href="#三、参考连接" class="headerlink" title="三、参考连接"></a>三、参考连接</h1><p><a href="http://www.cnblogs.com/puyangsky/p/6218925.html">http://www.cnblogs.com/puyangsky/p/6218925.html</a><br><a href="https://blog.csdn.net/u011784767/article/details/78281384">https://blog.csdn.net/u011784767/article/details/78281384</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>jdk</tag>
      </tags>
  </entry>
  <entry>
    <title>Autowire、Resource的区别 | Java注解</title>
    <url>/20190722-Autowire%E3%80%81Resource%E7%9A%84%E5%8C%BA%E5%88%AB%20%7C%20Java%E6%B3%A8%E8%A7%A3/</url>
    <content><![CDATA[<h1 id="零、本文背景"><a href="#零、本文背景" class="headerlink" title="零、本文背景"></a>零、本文背景</h1><p>项目中看到有一个缓存接口存在多个实现类,<br>但是在代码中使用@Resource注解注入,<br>之前有了解过@Autowire @Resource的区别,<br>于是就尝试着搜索@@Resource，于是就有本文的总结了。</p>
<h1 id="一、两个注解"><a href="#一、两个注解" class="headerlink" title="一、两个注解"></a>一、两个注解</h1><h2 id="1-1-Autowire"><a href="#1-1-Autowire" class="headerlink" title="1.1 @Autowire"></a>1.1 @Autowire</h2><p>1.1.1 Spring开发;<br>1.1.2 按照type来注入;</p>
<h2 id="1-2-Resource"><a href="#1-2-Resource" class="headerlink" title="1.2 @Resource"></a>1.2 @Resource</h2><p>1.2.1 JDK开发；<br>1.2.2 按照名称注入，若无，则按type来注入(未指定name的情况下);</p>
<h1 id="二、后记"><a href="#二、后记" class="headerlink" title="二、后记"></a>二、后记</h1><ol>
<li>做事情要有计划，得主动;</li>
<li>需要想清楚自己想要什么样的生活，然后朝着目标奋斗;</li>
<li>使用现成的代码尽量搞清楚来龙去脉，可以学习知识，更能避免被坑;</li>
<li>每天的学习时间需要保证，坚持很重要;</li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>BeanCreationException: Error creating bean with name &#39;xxxService&#39;</title>
    <url>/20170223-BeanCreationException-Error-creating-bean-with-name-xxxService/</url>
    <content><![CDATA[<p>出现的问题：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[platform] ERROR 2017-02-22 17:46:05,756 [RMI TCP Connection(4)-127.0.0.1] org.springframework.web.context.ContextLoader.() | Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#x27;pmTranLimitLiteServiceImpl&#x27;: Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [com.msds.zkutil.ZkLockFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: &#123;@Javax.annotation.Resource(mappedName=, shareable=true, description=, name=, type=class Java.lang.Object, authenticationType=CONTAINER, lookup=)&#125;</span><br><span class="line">	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.Java:306) ~[spring-context-3.2.4.RELEASE.jar:3.2.4.RELEASE]</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.Java:1116) ~[spring-beans-3.2.4.RELEASE.jar:3.2.4.RELEASE]</span><br></pre></td></tr></table></figure>
<p>最重要的是这句</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">org.springframework.beans.factory.BeanCreationException:</span><br><span class="line">Error creating bean with name&#x27;pmTranLimitLiteServiceImpl&#x27;</span><br></pre></td></tr></table></figure>
<p>出现的原因：<br>缺少相关的jar包或者依赖</p>
<p>建议不要自己配置idea的module和artificts</p>
<p>直接在pom.xml文件添加</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;artifactId&gt;hisen-project&lt;/artifactId&gt;&lt;!--加在这句话后面--&gt;</span><br><span class="line">  &lt;packaging&gt;war&lt;/packaging&gt;&lt;!--加上这句话就会自动给你打war包--&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p>其他原因</p>
<p>开始不知道什么问题，后来搜索这个服务。</p>
<p>发现这跟dubbo有关，于是百度搜索进了官网</p>
<p>没想到常见问题里面就有说这个事情</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">13. 出现org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#x27;xxxService&#x27;: Initialization of bean failed; nested exception is Java.lang.IllegalArgumentException: Method must not be null怎么办？</span><br><span class="line"></span><br><span class="line">通常是classpath下存在spring多个版本的jar包，排除掉不需要的spring包即可。</span><br></pre></td></tr></table></figure>
<p>更多dubbo问题：<a href="http://dubbo.io/FAQ-zh.htm" target="_blank">点击查看</a></p>
]]></content>
  </entry>
  <entry>
    <title>BeanUtils 对象拷贝 - 仅拷贝指定属性 - 接口性能优化</title>
    <url>/20200926-BeanUtils-copyLimitedProperties-for-better-performance-of-response/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>很多时候我们调用接口并不是需要接口返回的所有信息;<br>就像查询数据库很少使用 select * from table; 一样;</p>
<p>为了使现有的存储结构以及代码逻辑改动最少<br>想办法在最外层的接口对返回的对象进行精简</p>
<p>目的使为了提高接口性能：减少 RPC 传输时间、节省网络带宽、节省序列化开销</p>
<h1 id="一、方案"><a href="#一、方案" class="headerlink" title="一、方案"></a>一、方案</h1><ol>
<li>直接创建一个对象，根据入参传入的所需字段，写一堆 if else 进行 get set;</li>
<li>使用序列化工具，转为类似 Map 结构，取值拼装;</li>
<li>使用 BeanWrapper 操作对象;</li>
</ol>
<p>前面两种比较呆板，属于定制化开发;</p>
<h1 id="二、实践"><a href="#二、实践" class="headerlink" title="二、实践"></a>二、实践</h1><p>Spring BeanWrapper 方案处理非集合对象比较完美，输出对象小不少;<br>基本数据类型有默认值，无法去除，不过这种对大小影响不大;<br>完整代码：<a href="https://github.com/hisenyuan/IDEAPractice/blob/master/src/main/Java/com/hisen/copy/smaller/utils/CopyLimitedPropertiesUtil.Java">github.com</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> getOrder();</span><br><span class="line">    <span class="type">Order</span> <span class="variable">smallerOrder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Order</span>();</span><br><span class="line">    List&lt;String&gt; keepFields = Lists.newArrayList();</span><br><span class="line">    keepFields.add(<span class="string">&quot;orderId&quot;</span>);</span><br><span class="line">    keepFields.add(<span class="string">&quot;address.province&quot;</span>);</span><br><span class="line">    <span class="comment">// i want get all names, not only index 1, how to do ?</span></span><br><span class="line">    keepFields.add(<span class="string">&quot;productInfos[1].name&quot;</span>);</span><br><span class="line">    copyLimitedProperties(order, smallerOrder, keepFields);</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    System.out.println(<span class="string">&quot;src:&quot;</span> + gson.toJson(order));</span><br><span class="line">    System.out.println(<span class="string">&quot;des&quot;</span> + gson.toJson(smallerOrder));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>输出 src:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;province&quot;</span><span class="punctuation">:</span> <span class="string">&quot;B&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;county&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;productInfos&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;productId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;name0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;num&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;imgUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;url1&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;productId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;name1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;num&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;imgUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;url1&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;productId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;name2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;num&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;imgUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;url1&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>输出dst</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;province&quot;</span><span class="punctuation">:</span> <span class="string">&quot;B&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;productInfos&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;productId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;num&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;productId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;name1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;num&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="三、缺点"><a href="#三、缺点" class="headerlink" title="三、缺点"></a>三、缺点</h1><p>目前 Spring BeanWrapper 处理集合类型比较费劲，需要告知一个个具体的路径<br>比如：productInfos[1].name<br>如果能做到 productInfos[any].name 这种，然后取出所有 index 的属性，就比较完美<br>(目前解决方法：通过自定义处理，遇到 any 标识，自动补全所有 index 的 key 即可，只是不那么优雅)</p>
<p>缺陷原因：内部逻辑直接用 key 转换为 index ，没有 any 逻辑。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">else if (value instanceof List) &#123;</span><br><span class="line">     index = Integer.parseInt(key);</span><br><span class="line">     List&lt;Object&gt; list = (List)value;</span><br><span class="line">     this.growCollectionIfNecessary(list, index, indexedPropertyName, ph, i + 1);</span><br><span class="line">     value = list.get(index);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>代码位置：org.springframework.beans.AbstractNestablePropertyAccessor#getPropertyValue</p>
<h1 id="四、参考"><a href="#四、参考" class="headerlink" title="四、参考"></a>四、参考</h1><p>Spring 官方文档：<a href="https://docs.spring.io/spring-framework/docs/5.1.18.RELEASE/spring-framework-reference/core.html">Bean Manipulation and the BeanWrapper</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>字节码增强 - 初识链路追踪 - ByteBuddy</title>
    <url>/20230226-Bytecode_enhancement_part_1/</url>
    <content><![CDATA[<h1 id="1-简单介绍"><a href="#1-简单介绍" class="headerlink" title="1. 简单介绍"></a>1. 简单介绍</h1><h2 id="1-1-背景"><a href="#1-1-背景" class="headerlink" title="1.1 背景"></a>1.1 背景</h2><ul>
<li>不能通过 -Javaagent 方式启动</li>
<li>需要增强非业务代码( Spring AOP 不够用)</li>
<li>业务方尽量少改动代码</li>
</ul>
<h2 id="1-2-效果"><a href="#1-2-效果" class="headerlink" title="1.2 效果"></a>1.2 效果</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Byte Buddy] BEFORE_INSTALL net.bytebuddy.agent.builder.AgentBuilder$Default$ExecutingTransformer@87f383f on sun.instrument.InstrumentationImpl@4eb7f003</span><br><span class="line">[Byte Buddy] INSTALL net.bytebuddy.agent.builder.AgentBuilder$Default$ExecutingTransformer@87f383f on sun.instrument.InstrumentationImpl@4eb7f003</span><br><span class="line">[Byte Buddy] TRANSFORM com.hisen.agent.util.Hisen [sun.misc.Launcher$AppClassLoader@18b4aac2, null, Thread[main,5,main], loaded=false]</span><br><span class="line">name before:hisen</span><br><span class="line">hello: hisen1677417020466</span><br><span class="line">public static void com.hisen.agent.util.Hisen.hello(Java.lang.String): took 0 millisecond</span><br><span class="line">HisenAdvice exit. time use:0</span><br></pre></td></tr></table></figure>
<h1 id="2-代码逻辑"><a href="#2-代码逻辑" class="headerlink" title="2. 代码逻辑"></a>2. 代码逻辑</h1><h2 id="2-1-启动类"><a href="#2-1-启动类" class="headerlink" title="2.1 启动类"></a>2.1 启动类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hisenyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/2/6 21:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Start</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        startTraceAgent();</span><br><span class="line">        Hisen.hello(<span class="string">&quot;hisen&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">startTraceAgent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Instrumentation</span> <span class="variable">install</span> <span class="operator">=</span> ByteBuddyAgent.install();</span><br><span class="line">        HisenInterceptor.init(install);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HisenInstrumentation</span>().init(install);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h2 id="2-2-拦截方式"><a href="#2-2-拦截方式" class="headerlink" title="2.2 拦截方式"></a>2.2 拦截方式</h2><p>会改变程序执行的堆栈</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hisenyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/2/8 21:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HisenInterceptor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(Instrumentation instrumentation)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">AgentBuilder</span>.Default()</span><br><span class="line">                .type(ElementMatchers.nameEndsWith(<span class="string">&quot;Hisen&quot;</span>))</span><br><span class="line">                .transform((builder, type, classLoader, <span class="keyword">module</span>, protectionDomain) -&gt; builder.method(ElementMatchers.any()).intercept(MethodDelegation.to(TimeInterceptor.class)))</span><br><span class="line">                .installOn(instrumentation);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">TimeInterceptor</span> &#123;</span><br><span class="line">        <span class="meta">@RuntimeType</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">intercept</span><span class="params">(<span class="meta">@Origin</span> Method method, <span class="meta">@SuperCall</span> Callable&lt;?&gt; callable)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> callable.call();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="comment">// 进行异常信息上报</span></span><br><span class="line">                System.out.println(<span class="string">&quot;方法执行发生异常&quot;</span> + e.getMessage());</span><br><span class="line">                <span class="keyword">throw</span> e;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                System.out.println(method + <span class="string">&quot;: took &quot;</span> + (System.currentTimeMillis() - start) + <span class="string">&quot; millisecond&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-代码注入"><a href="#2-3-代码注入" class="headerlink" title="2.3 代码注入"></a>2.3 代码注入</h2><p>不会改变代码堆栈流<br>这种方式也可以增强系统类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hisenyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/2/8 20:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HisenInstrumentation</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(Instrumentation instrumentation)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">AgentBuilder</span>.Default()</span><br><span class="line">                .disableClassFormatChanges()</span><br><span class="line">                .with(RETRANSFORMATION)</span><br><span class="line">                <span class="comment">// Make sure we see helpful logs</span></span><br><span class="line">                .with(AgentBuilder.RedefinitionStrategy.Listener.StreamWriting.toSystemError())</span><br><span class="line">                .with(AgentBuilder.Listener.StreamWriting.toSystemError().withTransformationsOnly())</span><br><span class="line">                .with(AgentBuilder.InstallationListener.StreamWriting.toSystemError())</span><br><span class="line">                .ignore(none())</span><br><span class="line">                <span class="comment">// Ignore Byte Buddy and JDK classes we are not interested in</span></span><br><span class="line">                .ignore(</span><br><span class="line">                        nameStartsWith(<span class="string">&quot;net.bytebuddy.&quot;</span>)</span><br><span class="line">                                .or(nameStartsWith(<span class="string">&quot;jdk.internal.reflect.&quot;</span>))</span><br><span class="line">                                .or(nameStartsWith(<span class="string">&quot;Java.lang.invoke.&quot;</span>))</span><br><span class="line">                                .or(nameStartsWith(<span class="string">&quot;com.sun.proxy.&quot;</span>))</span><br><span class="line">                )</span><br><span class="line">                .disableClassFormatChanges()</span><br><span class="line">                .with(AgentBuilder.RedefinitionStrategy.RETRANSFORMATION)</span><br><span class="line">                .with(AgentBuilder.InitializationStrategy.NoOp.INSTANCE)</span><br><span class="line">                .with(AgentBuilder.TypeStrategy.Default.REDEFINE)</span><br><span class="line">                .type(nameEndsWith(<span class="string">&quot;Hisen&quot;</span>))</span><br><span class="line">                .transform(</span><br><span class="line">                        (builder, type, classLoader, transformer, <span class="keyword">module</span>) -&gt;</span><br><span class="line">                                builder.visit(Advice.to(HisenAdvice.class).on(isMethod().and(named(<span class="string">&quot;hello&quot;</span>)))))</span><br><span class="line">                .installOn(instrumentation);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">HisenAdvice</span> &#123;</span><br><span class="line">        <span class="meta">@Advice</span>.OnMethodEnter</span><br><span class="line">        <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">enter</span><span class="params">(<span class="meta">@Advice</span>.Argument(value = <span class="number">0</span>, typing = DYNAMIC, readOnly = <span class="literal">false</span>)</span> String name) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;name before:&quot;</span> + name);</span><br><span class="line">            <span class="comment">// change name</span></span><br><span class="line">            name += System.currentTimeMillis();</span><br><span class="line">            <span class="keyword">return</span> System.currentTimeMillis();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Advice</span>.OnMethodExit(onThrowable = RuntimeException.class)</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">exit</span><span class="params">(</span></span><br><span class="line"><span class="params">                <span class="meta">@Advice</span>.Enter</span></span><br><span class="line"><span class="params">                <span class="type">long</span> startTime)</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;HisenAdvice exit. time use:&quot;</span> + (System.currentTimeMillis() - startTime));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Could not initialize class io.jsonwebtoken.impl.DefaultJwtBuilder</title>
    <url>/20181015-Could%20not%20initialize%20class%20io.jsonwebtoken.impl.DefaultJwtBuilder/</url>
    <content><![CDATA[<p>使用jsonwebtoken出现如下错误</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Could not initialize class io.jsonwebtoken.impl.DefaultJwtBuilder</span><br><span class="line">Java.lang.NoClassDefFoundError: Could not initialize class io.jsonwebtoken.impl.DefaultJwtBuilder</span><br><span class="line">	at io.jsonwebtoken.Jwts.builder(Jwts.Java:116) ~[jjwt-0.7.0.jar:0.7.0]</span><br></pre></td></tr></table></figure>
<p>原因,因为jackson-databindb版本冲突，直接去掉了依赖</p>
<p>jwt必须依赖Jackson所以报错了</p>
<p>出错时候的配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.7.0&lt;/version&gt;</span><br><span class="line">    &lt;exclusions&gt;</span><br><span class="line">        &lt;exclusion&gt;</span><br><span class="line">            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;</span><br><span class="line">            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;</span><br><span class="line">        &lt;/exclusion&gt;</span><br><span class="line">    &lt;/exclusions&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>解决办法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.7.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>jsonwebtoken</tag>
      </tags>
  </entry>
  <entry>
    <title>Curator - 封装分布式锁等 | ZooKeeper目前最好用的客户端</title>
    <url>/20190425-Curator%20-%20ZooKeeper%E7%9B%AE%E5%89%8D%E6%9C%80%E5%A5%BD%E7%94%A8%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF/</url>
    <content><![CDATA[<h1 id="一、什么是Curator"><a href="#一、什么是Curator" class="headerlink" title="一、什么是Curator"></a>一、什么是Curator</h1><p>Apache Curator is a Java&#x2F;JVM client library for Apache ZooKeeper, a distributed coordination service.<br>It includes a highlevel API framework and utilities to make using Apache ZooKeeper much easier and more reliable.<br>It also includes recipes for common use cases and extensions such as service discovery and a Java 8 asynchronous DSL.</p>
<p>特别说明：Guava is to Java What Curator is to ZooKeeper</p>
<h1 id="二、常见用法"><a href="#二、常见用法" class="headerlink" title="二、常见用法"></a>二、常见用法</h1><p>后期补上自己的一些demo，其实官方文档已经介绍很全了<br><a href="http://curator.apache.org/getting-started.html">http://curator.apache.org/getting-started.html</a></p>
<h1 id="三、其它说明"><a href="#三、其它说明" class="headerlink" title="三、其它说明"></a>三、其它说明</h1><p>了解这个客户端是在《从Paxos到Zookeeper:分布式一致性原理与实战》这本书里面看到的(<a href="/booklist/">书单</a>)<br>Curator号称是世界上最好用的zk客户端，相比zkClinet来说拥有更好的封装<br>让我想起Redisson和Jedis的模样</p>
<p>昨天一个做移动端的前同事截图问我那些代码什么意思，用的就是Curator封装的分布式锁</p>
<p>相比于Redis分布式存在超时问题，zookeeper分布式锁利用临时节点可以避免</p>
<p>目前dubbo master上使用的是Curator 4.0.1</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>DBeaver-连接全部数据库工具-DBeaver快捷键</title>
    <url>/20170402-DBeaver-%E8%BF%9E%E6%8E%A5%E5%85%A8%E9%83%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B7%A5%E5%85%B7-DBeaver%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    <content><![CDATA[<p>Windows、Linux、Mac OS X多个平台都可以用</p>
<p>据我观察这个数据库可视化工具很不错，基于Java</p>
<p>以各种驱动来连接数据库，也就是说Java支持的数据库都可以用他连接</p>
<p>挺好用的，免费！！！</p>
<p>安装之后新建连接，选择你要链接的数据库，配置一下就好了。</p>
<h2 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h2><p><a href="http://dbeaver.jkiss.org/download/" target="_blank">官网下载地址</a></p>
<h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#Shift + Home选中当前光标到行首</span><br><span class="line">#Shift + End选中当前光标到行尾</span><br><span class="line">#Shift + ↑/↓/←/→ 移动光标并且选中</span><br><span class="line">#Alt + X 执行选中的sql</span><br><span class="line">#Ctrl + Enter 执行当前光标所在行的sql</span><br><span class="line">#Ctrl + Alt + F 格式化SQL（file -&gt; properties -&gt; +SQL Editor -&gt; SQL formatting）</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>Data URI scheme 利用base64字符串通过image标签显示图片</title>
    <url>/20170512-Data%20URI%20scheme%20%E5%88%A9%E7%94%A8base64%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%80%9A%E8%BF%87image%E6%A0%87%E7%AD%BE%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<p>目前，Data URI scheme支持的类型有：</p>
<ol>
<li>data:,文本数据</li>
<li>data:text&#x2F;plain,文本数据</li>
<li>data:text&#x2F;html,HTML代码</li>
<li>data:text&#x2F;html;base64,base64编码的HTML代码</li>
<li>data:text&#x2F;css,CSS代码</li>
<li>data:text&#x2F;css;base64,base64编码的CSS代码</li>
<li>data:text&#x2F;Javascript,Javascript代码</li>
<li>data:text&#x2F;Javascript;base64,base64编码的Javascript代码</li>
<li>data:image&#x2F;gif;base64,base64编码的gif图片数据</li>
<li>data:image&#x2F;png;base64,base64编码的png图片数据</li>
<li>data:image&#x2F;jpeg;base64,base64编码的jpeg图片数据</li>
<li>data:image&#x2F;x-icon;base64,base64编码的icon图片数据</li>
</ol>
<p>Data URL是在本地直接绘制图片，不是从服务器加载，所以节省了HTTP连接，起到加速网页的作用。</p>
<p>也无法获取到图片在服务器上的真实地址</p>
<p>注意：本方法适合于小图片，大图片就不要考虑了，另外IE8以下浏览器不支持这种方法。</p>
<p>用这种方法会加重客户端的CPU和内存负担，总之有利有弊。</p>
<p>前台代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;%@ page import=&quot;com.hisen.image.ShowImageByBase64&quot; %&gt;&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Administrator</span><br><span class="line">  Date: 2017/5/11</span><br><span class="line">  Time: 18:55</span><br><span class="line">  To change this template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;Java&quot; %&gt;</span><br><span class="line">&lt;% String imageStr = ShowImageByBase64.showimage();%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;img src=&quot;data:image/png;base64,&lt;%=imageStr%&gt;&quot; alt=&quot;base64图片&quot;/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>后台代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.image;</span><br><span class="line"></span><br><span class="line">import com.hisen.utils.Base64Util;</span><br><span class="line">import com.hisen.utils.File2ByteArraysUtil;</span><br><span class="line">import Java.io.ByteArrayOutputStream;</span><br><span class="line">import Java.io.File;</span><br><span class="line">import Java.io.FileInputStream;</span><br><span class="line">import Java.io.FileNotFoundException;</span><br><span class="line">import Java.io.IOException;</span><br><span class="line">import sun.misc.BASE64Encoder;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &lt;img src=&quot;data:image/png;base64,&lt;%=imageStr%&gt;&quot; alt=&quot;base64image&quot;/&gt;</span><br><span class="line"> * Created by hisenyuan on 2017/5/11 at 18:44.</span><br><span class="line"> */</span><br><span class="line">public class ShowImageByBase64 &#123;</span><br><span class="line"></span><br><span class="line">  public static String showimage() &#123;</span><br><span class="line">    //写相对路径会报错，暂时不知道如何解决</span><br><span class="line">    String imagePath = &quot;C:\\1\\830.jpg&quot;;</span><br><span class="line">    byte[] bytes = File2ByteArraysUtil.file2Bytes(imagePath);</span><br><span class="line">    String s = Base64Util.encodeBase64(bytes);</span><br><span class="line">    return s;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * sun.misc.BASE64Encoder</span><br><span class="line">   */</span><br><span class="line">  public static String encodeBase64(byte[] str) &#123;</span><br><span class="line">    if (str == null) &#123;</span><br><span class="line">      return null;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      BASE64Encoder encoder = new BASE64Encoder();</span><br><span class="line">      try &#123;</span><br><span class="line">        return encoder.encode(str);</span><br><span class="line">      &#125; catch (Exception var3) &#123;</span><br><span class="line">        return null;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /***</span><br><span class="line">   * file2byte[]</span><br><span class="line">   * @param path</span><br><span class="line">   * @return</span><br><span class="line">   */</span><br><span class="line">  public static byte[] file2Bytes(String path) &#123;</span><br><span class="line">    byte[] buffer = null;</span><br><span class="line">    File file = new File(path);</span><br><span class="line">    try &#123;</span><br><span class="line">      FileInputStream fis = new FileInputStream(file);</span><br><span class="line">      ByteArrayOutputStream bos = new ByteArrayOutputStream(1000);</span><br><span class="line">      byte[] b = new byte[1000];</span><br><span class="line">      int n;</span><br><span class="line">      while ((n = fis.read(b)) != -1) &#123;</span><br><span class="line">        bos.write(b, 0, n);</span><br><span class="line">      &#125;</span><br><span class="line">      fis.close();</span><br><span class="line">      bos.close();</span><br><span class="line">      buffer = bos.toByteArray();</span><br><span class="line">    &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    return buffer;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>jsp</tag>
      </tags>
  </entry>
  <entry>
    <title>Debian丨Ubuntu丨shadowsocks-libev一键安装脚本</title>
    <url>/20170904-Debian%E4%B8%A8Ubuntu%E4%B8%A8shadowsocks-libev%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<p>执行命令：(装完就开机启动)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget --no-check-certificate -O shadowsocks-libev-debian.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-libev-debian.sh</span><br><span class="line">chmod +x shadowsocks-libev-debian.sh</span><br><span class="line">./shadowsocks-libev-debian.sh 2&gt;&amp;1 | tee shadowsocks-libev-debian.log</span><br></pre></td></tr></table></figure>
<p>默认设置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">服务器端口：自己设定（如不设定，默认为 8989）</span><br><span class="line">密码：自己设定（如不设定，默认为 teddysun.com）</span><br><span class="line">加密方式：自己设定（如不设定，默认为 aes-256-gcm）</span><br></pre></td></tr></table></figure>
<p>管理命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">启动：/etc/init.d/shadowsocks start</span><br><span class="line">停止：/etc/init.d/shadowsocks stop</span><br><span class="line">重启：/etc/init.d/shadowsocks restart</span><br><span class="line">查看状态：/etc/init.d/shadowsocks status</span><br></pre></td></tr></table></figure>
<p>修改配置文件(端口、密码)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/shadowsocks-libe/config.json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;server_port&quot;:9090,</span><br><span class="line">    &quot;local_address&quot;:&quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;:1080,</span><br><span class="line">    &quot;password&quot;:&quot;password&quot;,</span><br><span class="line">    &quot;timeout&quot;:600,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-gcm&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>卸载命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./shadowsocks-libev-debian.sh uninstall</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>network</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker 入门实践</title>
    <url>/20170929-Docker%20%E5%85%A5%E9%97%A8%E5%AE%9E%E8%B7%B5/</url>
    <content><![CDATA[<p>早些天不忙的时候看的入门，从有道云笔记搬过来的</p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从Apache2.0协议开源。<br>Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。<br>容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。</p>
<h2 id="Docker的应用场景"><a href="#Docker的应用场景" class="headerlink" title="Docker的应用场景"></a>Docker的应用场景</h2><ol>
<li>Web 应用的自动化打包和发布。</li>
<li>自动化测试和持续集成、发布。</li>
<li>在服务型环境中部署和调整数据库或其他的后台应用。</li>
<li>从头编译或者扩展现有的OpenShift或Cloud Foundry平台来搭建自己的PaaS环境。</li>
</ol>
<span id="more"></span>
<h2 id="Docker的优点"><a href="#Docker的优点" class="headerlink" title="Docker的优点"></a>Docker的优点</h2><ol>
<li><strong>简化程序</strong>：Docker 让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 Linux 机器上，便可以实现虚拟化。Docker改变了虚拟化的方式，使开发者可以直接将自己的成果放入Docker中进行管理。方便快捷已经是 Docker的最大优势，过去需要用数天乃至数周的	任务，在Docker容器的处理下，只需要数秒就能完成。</li>
<li><strong>避免选择恐惧症</strong>：如果你有选择恐惧症，还是资深患者。Docker 帮你	打包你的纠结！比如 Docker 镜像；Docker 镜像中包含了运行环境和配置，所以 Docker 可以简化部署多种应用实例工作。比如 Web 应用、后台应用、数据库应用、大数据应用比如 Hadoop 集群、消息队列等等都可以打包成一个镜像部署。</li>
<li><strong>节省开支</strong>：一方面，云计算时代到来，使开发者不必为了追求效果而配置高额的硬件，Docker 改变了高性能必然高价格的思维定势。Docker 与云的结合，让云空间得到更充分的利用。不仅解决了硬件管理的问题，也改变了虚拟化的方式。</li>
</ol>
<h2 id="Docker-架构"><a href="#Docker-架构" class="headerlink" title="Docker 架构"></a>Docker 架构</h2><table>
<thead>
<tr>
<th align="left">中文</th>
<th align="left">英文</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">镜像</td>
<td align="left">Docker Images</td>
<td align="left">Docker 镜像是用于创建 Docker 容器的模板。</td>
</tr>
<tr>
<td align="left">容器</td>
<td align="left">Docker Container</td>
<td align="left">容器是独立运行的一个或一组应用。</td>
</tr>
<tr>
<td align="left">客户端</td>
<td align="left">Docker Client</td>
<td align="left">Docker 客户端通过命令行或者其他工具使用 Docker API (<a href="https://docs.docker.com/reference/api/docker_remote_api">查看API</a>) 与 Docker 的守护进程通信。</td>
</tr>
<tr>
<td align="left">主机</td>
<td align="left">Docker Host</td>
<td align="left">一个物理或者虚拟的机器用于执行 Docker 守护进程和容器。</td>
</tr>
<tr>
<td align="left">仓库</td>
<td align="left">Docker Registry</td>
<td align="left">Docker 仓库用来保存镜像，可以理解为代码控制中的代码仓库。Docker Hub(<a href="https://hub.docker.com/">查看镜像</a>) 提供了庞大的镜像集合供使用。</td>
</tr>
<tr>
<td align="left">工具</td>
<td align="left">Docker Machine</td>
<td align="left">Docker Machine是一个简化Docker安装的命令行工具，通过一个简单的命令行即可在相应的平台上安装Docker，比如VirtualBox、 Digital Ocean、Microsoft Azure。</td>
</tr>
</tbody></table>
<h1 id="Ubuntu-Docker-安装"><a href="#Ubuntu-Docker-安装" class="headerlink" title="Ubuntu Docker 安装"></a>Ubuntu Docker 安装</h1><h2 id="使用脚本安装"><a href="#使用脚本安装" class="headerlink" title="使用脚本安装"></a>使用脚本安装</h2><h3 id="下载最新的安装包"><a href="#下载最新的安装包" class="headerlink" title="下载最新的安装包"></a>下载最新的安装包</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@hisen-pc:~$ wget -qO- https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure>
<h3 id="hello-world"><a href="#hello-world" class="headerlink" title="hello-world"></a>hello-world</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#启动</span><br><span class="line">sudo service docker start</span><br><span class="line"></span><br><span class="line">#运行hello-world</span><br><span class="line">docker run hello-world</span><br><span class="line">##报错</span><br><span class="line">docker: Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post http://%2Fvar%2Frun%2Fdocker.sock/v1.31/containers/create: dial unix /var/run/docker.sock: connect: permission denied.</span><br><span class="line">##解决:su 以root方式运行</span><br><span class="line"></span><br><span class="line">#docker run hello-world</span><br><span class="line">##提示:没有image,然后自动下载</span><br><span class="line">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">b04784fba78d: Pull complete </span><br><span class="line">Digest: sha256:f3b3b28a45160805bb16542c9531888519430e9e6d6ffc09d72261b0d26ff74f</span><br><span class="line">Status: Downloaded newer image for hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">#已经启动成功</span><br></pre></td></tr></table></figure>
<h1 id="Docker-使用"><a href="#Docker-使用" class="headerlink" title="Docker 使用"></a>Docker 使用</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#启动某个指定的镜像,运行hello-world</span><br><span class="line">root@hisen-pc:/home/hisen# docker run ubuntu:15.10 /bin/echo &quot;Hello world&quot;</span><br><span class="line">Unable to find image &#x27;ubuntu:15.10&#x27; locally</span><br><span class="line">15.10: Pulling from library/ubuntu</span><br><span class="line">7dcf5a444392: Downloading   6.29MB/51.07MB</span><br><span class="line">759aa75f3cee: Download complete </span><br><span class="line">3fa871dc8a2b: Download complete </span><br><span class="line">224c42ae46e7: Download complete </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="各个参数解析"><a href="#各个参数解析" class="headerlink" title="各个参数解析"></a>各个参数解析</h2><p>docker run ubuntu:15.10 &#x2F;bin&#x2F;echo “Hello world”</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">docker</td>
<td align="left">Docker 的二进制执行文件</td>
</tr>
<tr>
<td align="left">run</td>
<td align="left">与前面的 docker 组合来运行一个容器</td>
</tr>
<tr>
<td align="left">ubuntu:15.10</td>
<td align="left">指定要运行的镜像，Docker首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓库 Docker Hub 下载公共镜像。</td>
</tr>
<tr>
<td align="left">&#x2F;bin&#x2F;echo “Hello world”</td>
<td align="left">在启动的容器里执行的命令</td>
</tr>
</tbody></table>
<p>以上命令完整的意思可以解释为：Docker 以 ubuntu15.10 镜像创建一个新容器，然后在容器里执行 bin&#x2F;echo “Hello world”，然后输出结果。</p>
<h2 id="运行交互式的容器"><a href="#运行交互式的容器" class="headerlink" title="运行交互式的容器"></a>运行交互式的容器</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@hisen-pc:/home/hisen# docker run -i -t ubuntu:15.10 /bin/bash</span><br><span class="line">##这时,我们已经进入了ubuntu:15.10的系统</span><br><span class="line">##这时就是进入了命令行,可以执行相关命令</span><br><span class="line">root@6265d70f44d2:/# </span><br><span class="line">##</span><br><span class="line">运行exit命令或者使用CTRL+D来退出容器</span><br></pre></td></tr></table></figure>
<p>-t:在新容器内指定一个伪终端或终端。<br>-i:允许你对容器内的标准输入 (STDIN) 进行交互。</p>
<h2 id="启动容器（后台模式）"><a href="#启动容器（后台模式）" class="headerlink" title="启动容器（后台模式）"></a>启动容器（后台模式）</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@hisen-pc:/home/hisen# docker run -d ubuntu:15.10 /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;</span><br><span class="line">8c2a843273608eb155279ce4e4f9f4c5442c2af3524ba50ca2d6c8ccbd207081</span><br></pre></td></tr></table></figure>
<p>后台启动完成,会返回一串容器的ID</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">##查看是否有容器启动</span><br><span class="line">root@hisen-pc:/home/hisen# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS               NAMES</span><br><span class="line">8c2a84327360        ubuntu:15.10        &quot;/bin/sh -c &#x27;while...&quot;   About a minute ago   Up About a minute </span><br></pre></td></tr></table></figure>
<p>CONTAINER ID:容器ID(这里是:&#x3D;&#x3D;8c2a84327360&#x3D;&#x3D;)</p>
<p>NAMES:自动分配的容器名称</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 查看上面那个ID的容器的log</span><br><span class="line">root@hisen-pc:/home/hisen# docker logs 8c2a84327360</span><br><span class="line">## 输出内容</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line">## 停止容器(指定ID:8c2a84327360)</span><br><span class="line">root@hisen-pc:/home/hisen# docker stop 8c2a84327360</span><br><span class="line">## 输出ID,说明已经停止成功</span><br><span class="line">8c2a84327360</span><br><span class="line"></span><br><span class="line">## 检查是否真的关闭</span><br><span class="line">root@hisen-pc:/home/hisen# docker ps</span><br><span class="line">## 输出没有,说明真的关闭了</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="Docker-客户端"><a href="#Docker-客户端" class="headerlink" title="Docker 客户端"></a>Docker 客户端</h2><p>docker 客户端非常简单 ,我们可以直接输入 docker 命令来查看到 Docker 客户端的所有命令选项。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 调出帮助</span><br><span class="line">root@hisen-pc:/home/hisen# docker</span><br><span class="line">##　输出帮助信息</span><br><span class="line">Usage:	docker COMMAND</span><br><span class="line"></span><br><span class="line">A self-sufficient runtime for containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --config string      Location of client config files (default &quot;/root/.docker&quot;)</span><br><span class="line">  -D, --debug              Enable debug mode</span><br><span class="line">      --help               Print usage</span><br><span class="line">  -H, --host list          Daemon socket(s) to connect to</span><br><span class="line">  -l, --log-level string   Set the logging level</span><br><span class="line"></span><br><span class="line">## 了解更详细的帮助信息</span><br><span class="line">root@hisen-pc:/home/hisen#docker　stats --help</span><br><span class="line"></span><br><span class="line">## 输出详细帮助信息</span><br><span class="line">Usage:	docker stats [OPTIONS] [CONTAINER...]</span><br><span class="line"></span><br><span class="line">Display a live stream of container(s) resource usage statistics</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -a, --all             Show all containers (default shows just running)</span><br><span class="line">      --format string   Pretty-print images using a Go template</span><br><span class="line">      --help            Print usage</span><br><span class="line">      --no-stream       Disable streaming stats and only pull the first result</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="运行一个WEB容器"><a href="#运行一个WEB容器" class="headerlink" title="运行一个WEB容器"></a>运行一个WEB容器</h2><p>运行一个 Python Flask 应用 来搭建一个web应用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## -d:让容器在后台运行。</span><br><span class="line">## -P:将容器内部使用的网络端口映射到我们使用的主机上。</span><br><span class="line">root@hisen-pc:/home/hisen# docker run -d -P training/webapp python app.py</span><br><span class="line">## 提示本地没有,远程下载</span><br><span class="line">Unable to find image &#x27;training/webapp:latest&#x27; locally</span><br><span class="line">latest: Pulling from training/webapp</span><br><span class="line">e190868d63f8: Pull complete </span><br><span class="line">909cd34c6fd7: Pull complete </span><br><span class="line">0b9bfabab7c1: Pull complete </span><br><span class="line">a3ed95caeb02: Pull complete </span><br><span class="line">10bbbc0fc0ff: Pull complete </span><br><span class="line">fca59b508e9f: Pull complete </span><br><span class="line">e7ae2541b15b: Pull complete </span><br><span class="line">9dd97ef58ce9: Pull complete </span><br><span class="line">a4c1b0cb7af7: Pull complete </span><br><span class="line">Digest: sha256:06e9c1983bd6d5db5fba376ccd63bfa529e8d02f23d5079b8f74a616308fb11d</span><br><span class="line">Status: Downloaded newer image for training/webapp:latest</span><br><span class="line"></span><br><span class="line">## 下载完成直接后台运行了,打印id</span><br><span class="line">b03903d6abf3d65a4e6469a57d11ae539aaad1f166078591e7315ca2fb2611ff</span><br><span class="line"></span><br><span class="line">## 查看运行的docker</span><br><span class="line">root@hisen-pc:/home/hisen# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES</span><br><span class="line">b03903d6abf3        training/webapp     &quot;python app.py&quot;     9 minutes ago       Up 9 minutes        0.0.0.0:32768-&gt;5000/tcp   nifty_mirzakhani</span><br></pre></td></tr></table></figure>
<p>0.0.0.0:32768-&gt;5000&#x2F;tcp<br>docker使用的端口5000</p>
<p>映射到本地端口32768</p>
<p>本地可以访问:<a href="127.0.0.1:32768">127.0.0.1:32768</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 访问:http://localhost:32768/</span><br><span class="line">## 输出</span><br><span class="line">Hello world!</span><br><span class="line"></span><br><span class="line">## 可以指定端口 8060为自映射端口,5000为容器端口</span><br><span class="line">root@hisen-pc:/home/hisen# docker run -d -p 8060:5000 training/webapp python app.py</span><br><span class="line">0d68d3d4baf61248129ede721cc6004649ebddaaace8c23f16b677fbe2b2ce7d</span><br><span class="line">root@hisen-pc:/home/hisen# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">0d68d3d4baf6        training/webapp     &quot;python app.py&quot;     5 seconds ago       Up 4 seconds        0.0.0.0:8060-&gt;5000/tcp   ecstatic_jang</span><br><span class="line"></span><br><span class="line">## 查看端口映射情况(可以通过id,或者名字)</span><br><span class="line">## 这里用ID测试</span><br><span class="line">root@hisen-pc:/home/hisen# docker port 0d68d3d4baf6</span><br><span class="line">## 输出信息,后面为映射到本地的端口</span><br><span class="line">5000/tcp -&gt; 0.0.0.0:8060</span><br></pre></td></tr></table></figure>
<h3 id="查看WEB应用程序日志"><a href="#查看WEB应用程序日志" class="headerlink" title="查看WEB应用程序日志"></a>查看WEB应用程序日志</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 带上 -f 参数,动态输出日志</span><br><span class="line">root@hisen-pc:/home/hisen# docker logs -f 0d68d3d4baf6</span><br><span class="line"> * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)</span><br><span class="line"></span><br><span class="line">## 刷新页面之后的日志</span><br><span class="line">172.17.0.1 - - [01/Sep/2017 14:09:01] &quot;GET / HTTP/1.1&quot; 200 -</span><br><span class="line">172.17.0.1 - - [01/Sep/2017 14:09:01] &quot;GET /favicon.ico HTTP/1.1&quot; 404 -</span><br></pre></td></tr></table></figure>
<h3 id="查看WEB应用程序容器的进程"><a href="#查看WEB应用程序容器的进程" class="headerlink" title="查看WEB应用程序容器的进程"></a>查看WEB应用程序容器的进程</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## top后面是跟着id或者name</span><br><span class="line">root@hisen-pc:/home/hisen# docker top 0d68d3d4baf6</span><br><span class="line">## 输出的信息</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root                19372               19352               0                   21:39               ?                   00:00:00            python app.py</span><br></pre></td></tr></table></figure>
<h3 id="检查WEB应用程序"><a href="#检查WEB应用程序" class="headerlink" title="检查WEB应用程序"></a>检查WEB应用程序</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 会输出一大串JSON形式的字符串</span><br><span class="line">## 记录着 Docker 容器的配置和状态信息</span><br><span class="line">root@hisen-pc:/home/hisen# docker inspect 0d68d3d4baf6</span><br></pre></td></tr></table></figure>
<h3 id="WEB程序其他操作"><a href="#WEB程序其他操作" class="headerlink" title="WEB程序其他操作"></a>WEB程序其他操作</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker stop  0d68d3d4baf6</span><br><span class="line">## 移除之前必须停止,否则会报错</span><br><span class="line">docker rm 0d68d3d4baf6</span><br></pre></td></tr></table></figure>

<h1 id="Docker-镜像使用"><a href="#Docker-镜像使用" class="headerlink" title="Docker 镜像使用"></a>Docker 镜像使用</h1><h2 id="列出所有本地的镜像"><a href="#列出所有本地的镜像" class="headerlink" title="列出所有本地的镜像"></a>列出所有本地的镜像</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@hisen-pc:/home/hisen# docker images</span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">hello-world          latest              1815c82652c0        2 months ago        1.84kB</span><br><span class="line">woailuoli993/jblse   0.2.0               82099e8d7049        6 months ago        7.58MB</span><br><span class="line">ubuntu               15.10               9b9cb95443b5        13 months ago       137MB</span><br><span class="line">training/webapp      latest              6fae60ef3446        2 years ago         349MB</span><br></pre></td></tr></table></figure>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 获取一个镜像</span><br><span class="line">## ubuntu:镜像库中的TAG</span><br><span class="line">## 13.10:某个TAG的版本</span><br><span class="line">docker pull ubuntu:13.10</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 搜索某个镜像</span><br><span class="line">docker search httpd</span><br><span class="line"></span><br><span class="line">## 拖取镜像</span><br><span class="line">docker pull httpd</span><br><span class="line"></span><br><span class="line">## 运行镜像</span><br><span class="line">docker run httpd</span><br><span class="line"></span><br><span class="line">## 创建镜像</span><br><span class="line">### 进入某个镜像的bash命令行(在此镜像基础上创建自己的镜像)</span><br><span class="line">root@hisen-pc:/home/hisen# docker run -t -i ubuntu:15.10</span><br><span class="line">### 更新系统(镜像的)</span><br><span class="line">root@4a3f5f4373d8:/# apt-get update</span><br><span class="line"></span><br><span class="line">##提交容器副本</span><br><span class="line">### 退出镜像的bash命令界面</span><br><span class="line">root@4a3f5f4373d8:/# exit          </span><br><span class="line">exit</span><br><span class="line">### 提交副本</span><br><span class="line">root@hisen-pc:/home/hisen# docker commit -m=&quot;has update&quot; -a=&quot;hisen&quot; 4a3f5f4373d8 hisen/ubuntu:v2</span><br><span class="line">### 返回副本容器的id</span><br><span class="line">sha256:a94d0bdd2e31aa420c14e9886ff911354c07a7772715bd8d380bd0832f396c82</span><br><span class="line">### 查看,发现刚刚提交的副本显示出来了</span><br><span class="line">root@hisen-pc:/home/hisen# docker images</span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED              SIZE</span><br><span class="line">hisen/ubuntu         v2                  a94d0bdd2e31        About a minute ago   159MB</span><br><span class="line">hello-world          latest              1815c82652c0        2 months ago         1.84kB</span><br><span class="line">woailuoli993/jblse   0.2.0               82099e8d7049        6 months ago         7.58MB</span><br><span class="line">ubuntu               15.10               9b9cb95443b5        13 months ago        137MB</span><br><span class="line">training/webapp      latest              6fae60ef3446        2 years ago          349MB</span><br><span class="line"></span><br><span class="line">## 参数说明</span><br><span class="line">-m:提交的描述信息</span><br><span class="line">-a:指定镜像作者</span><br><span class="line">4a3f5f4373d8：容器ID(就是你修改之前的id)</span><br><span class="line">hisen/ubuntu:v2:指定要创建的目标镜像名</span><br><span class="line"></span><br><span class="line">## 进入新镜像的bash命令</span><br><span class="line">docker run -t -i hisen/ubuntu:v2 /bin/bash </span><br></pre></td></tr></table></figure>
<h2 id="构建一个全新的镜像"><a href="#构建一个全新的镜像" class="headerlink" title="构建一个全新的镜像"></a>构建一个全新的镜像</h2><p>新建一个配置文件:Dockerfile,并添加内容</p>
<p>每个指令都会在镜像上创建一个新的层</p>
<p>每一个指令的前缀都必须是大写的。</p>
<p>第一条FROM，指定使用哪个镜像源</p>
<p>RUN 指令告诉docker 在镜像内执行命令，安装了什么</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@hisen-pc:/home/hisen# vi Dockerfile </span><br><span class="line"></span><br><span class="line">FROM    ubuntu:16.04</span><br><span class="line">MAINTAINER      Fisher &quot;hisenyuan@gmail.com&quot;</span><br><span class="line"></span><br><span class="line">RUN     /bin/echo &#x27;root:123456&#x27; |chpasswd</span><br><span class="line">RUN     useradd hisen</span><br><span class="line">RUN     /bin/echo &#x27;hisen:123456&#x27; |chpasswd</span><br><span class="line">RUN     /bin/echo -e &quot;LANG=\&quot;en_US.UTF-8\&quot;&quot; &gt;/etc/default/local</span><br><span class="line">EXPOSE  22</span><br><span class="line">EXPOSE  80</span><br><span class="line">CMD     /usr/sbin/sshd -D</span><br><span class="line"></span><br><span class="line">## 保存配置文件之后,构建镜像,注意最后那个点.</span><br><span class="line">root@hisen-pc:/home/hisen# docker build -t hisen/ubuntu:16.04 .</span><br><span class="line">sending build context to Docker daemon    776MB</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>DockerFile - 创建Java开发环境镜像</title>
    <url>/20180111-DockerFile%20-%20%E5%88%9B%E5%BB%BAJava%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%95%9C%E5%83%8F/</url>
    <content><![CDATA[<p>使用ubuntu官方发布的docker镜像进行二次修改</p>
<p>这是一个菜鸟的脚本，执行命令应该是使用 &amp; 连接，一个RUN命令搞定</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM    ubuntu</span><br><span class="line">MAINTAINER      Fisher &quot;hisenyuan@gmail.com&quot;</span><br><span class="line">RUN     /bin/echo &#x27;root:hisen&#x27; |chpasswd</span><br><span class="line">RUN     useradd hisen</span><br><span class="line">RUN     /bin/echo &#x27;hisen:hisen&#x27; |chpasswd</span><br><span class="line">RUN     /bin/echo -e &quot;LANG=\&quot;en_US.UTF-8\&quot;&quot; &gt;/etc/default/local</span><br><span class="line"># 显示系统位数</span><br><span class="line">RUN		uname -p</span><br><span class="line"># 清空源 </span><br><span class="line">RUN     echo &quot;&quot; &gt; /etc/apt/sources.list</span><br><span class="line"># 更换为阿里云源</span><br><span class="line">RUN		echo &quot;deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN		echo &quot;deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN		echo &quot;deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN		echo &quot;deb http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN		echo &quot;deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN		echo &quot;deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN		echo &quot;deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN		echo &quot;deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN		echo &quot;deb-src http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN		echo &quot;deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list</span><br><span class="line"># 更新源</span><br><span class="line">RUN		apt-get update</span><br><span class="line"># 安装软件</span><br><span class="line">RUN     apt-get -y install vim</span><br><span class="line">RUN     apt-get -y install curl</span><br><span class="line">RUN     apt-get -y install wget</span><br><span class="line">RUN     apt-get -y install net-tools</span><br><span class="line">RUN     apt-get -y install iputils-ping</span><br><span class="line">RUN     apt-get -y install git</span><br><span class="line"># 创建软件文件夹</span><br><span class="line">RUN     mkdir -p /usr/hisen/soft/Java</span><br><span class="line">RUN     mkdir -p /usr/hisen/soft/tomcat</span><br><span class="line">RUN     mkdir -p /usr/hisen/soft/maven</span><br><span class="line">RUN     mkdir -p /usr/hisen/soft/download</span><br><span class="line"># 添加本地软件包到指定文件夹（会自动解压，软件压缩包必须放在docker同级目录）</span><br><span class="line">ADD jdk-8u151-linux-x64.tar.gz /usr/hisen/soft/Java/</span><br><span class="line">ADD apache-tomcat-8.5.24.tar.gz /usr/hisen/soft/tomcat/</span><br><span class="line">ADD apache-maven-3.5.2-bin.tar.gz /usr/hisen/soft/maven/</span><br><span class="line"></span><br><span class="line"># 配置环境变量</span><br><span class="line"># Java</span><br><span class="line">ENV JAVA_HOME=/usr/hisen/soft/Java/jdk1.8.0_151</span><br><span class="line">ENV JRE_HOME=$JAVA_HOME/jre</span><br><span class="line">ENV CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib</span><br><span class="line">ENV PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br><span class="line"># tomcat</span><br><span class="line">ENV CATALINA_HOME=/usr/hisen/soft/tomcat/apache-tomcat-8.5.24</span><br><span class="line">ENV CLASSPATH=.:$JAVA_HOME/lib:$CATALINA_HOME/lib</span><br><span class="line">ENV PATH=$PATH:$CATALINA_HOME/bin</span><br><span class="line"># maven</span><br><span class="line">ENV MAVEN_HOME=/usr/hisen/soft/maven/apache-maven-3.5.2</span><br><span class="line">ENV MAVEN_OPTS=&quot;-Xms256m -Xmx512m&quot;</span><br><span class="line">ENV PATH=$&#123;MAVEN_HOME&#125;/bin:$PATH</span><br><span class="line"></span><br><span class="line"># 监听端口</span><br><span class="line">EXPOSE  22</span><br><span class="line">EXPOSE  80</span><br><span class="line">EXPOSE  8080</span><br><span class="line">CMD     /usr/sbin/sshd -D</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker一键安装脚本Ubuntu-Debian-CentOS-Fedora-racleLinux</title>
    <url>/20170417-Docker%E4%B8%80%E4%BB%B6%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%ACUbuntu-Debian-CentOS-Fedora-racleLinux/</url>
    <content><![CDATA[<p>系统要求<br>Ubuntu 14.04、16.04</p>
<p>Debian 7.7、8.0</p>
<p>CentOS 7.X</p>
<p>Fedora 20、21、22</p>
<p>OracleLinux 6、7</p>
<p>安装方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh -</span><br></pre></td></tr></table></figure>
<p>详情：<a href="http://mirrors.aliyun.com/help/docker-engine" target="_blank">http://mirrors.aliyun.com/help/docker-engine</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dubbo官方中文文档|用户文档|开发者指南|源码导读|运维管理</title>
    <url>/20190325-Dubbo%E5%AE%98%E6%96%B9%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%7C%E7%94%A8%E6%88%B7%E6%96%87%E6%A1%A3%7C%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%7C%E6%BA%90%E7%A0%81%E5%AF%BC%E8%AF%BB%7C%E8%BF%90%E7%BB%B4%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h1 id="一、为什么要学Dubbo"><a href="#一、为什么要学Dubbo" class="headerlink" title="一、为什么要学Dubbo"></a>一、为什么要学Dubbo</h1><p>近几年一直在使用dubbo进行支付系统的开发;<br>作为国内比较受欢迎的一个SOA框架，Dubbo使用简单设计优雅;<br>里面用到的思想和技术，基本上涵盖大部分互联网公司用到的技术;<br>记得直属领导说过一句话，看完Dubbo他觉得设计者简直就是天才;<br>而且看完dubbo的源码，对他的影响很大，处处模仿dubbo的思想;</p>
<h1 id="二、文档地址"><a href="#二、文档地址" class="headerlink" title="二、文档地址"></a>二、文档地址</h1><p>中文文档：用户文档、开发者指南、<em>源码导读</em>、运维管理<br><a href="http://dubbo.apache.org/zh-cn/docs/user/quick-start.html">http://dubbo.apache.org/zh-cn/docs/user/quick-start.html</a><br>用户手册(比较完整)：<br><a href="https://dubbo.gitbooks.io/dubbo-user-book/demos/routing-rule.html">https://dubbo.gitbooks.io/dubbo-user-book/demos/routing-rule.html</a><br>官方博客：<br><a href="http://dubbo.apache.org/zh-cn/blog/index.html">http://dubbo.apache.org/zh-cn/blog/index.html</a></p>
<h1 id="三、Dubbo创始人博客"><a href="#三、Dubbo创始人博客" class="headerlink" title="三、Dubbo创始人博客"></a>三、Dubbo创始人博客</h1><p>最后更新于2014年<br><a href="https://javatar.iteye.com/">https://Javatar.iteye.com/</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>源码</tag>
        <tag>Dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title>王慧文(美团)：很少人知道自己在愚昧之巅</title>
    <url>/20200723-Few-people-know-that-they-are-ignorance/</url>
    <content><![CDATA[<h1 id="零、写在前面"><a href="#零、写在前面" class="headerlink" title="零、写在前面"></a>零、写在前面</h1><p>早几天在领导 JG 的朋友圈看到这篇文章<br>简单几个字的标题，让我产生了兴趣<br>一来这个标题是挺吸引人，典型的自媒体文章<br>二来JG 之前推过一些书很不错<br>三来一般领导朋友圈都不会推垃圾信息</p>
<p>全文看来其实感觉还是挺切合我的认知：</p>
<ol>
<li>人很难认清自己，很难找到方向，成长路上有他人指点会很棒</li>
<li>除了遇到的人合读过的书，十年之后你还是你</li>
<li>多与他人交流，多帮助他人，利人利己</li>
<li>运动、学习、反馈、重塑大脑</li>
</ol>
<p>离开学校<br>大部分时间都是围绕着工作<br>有些人可能觉得当前的工作不满意<br>然后想着学点什么高大上的东西为以后的工作做准备<br>极端情况下这种选择是对的，大部分情况会让自己进退两难<br>正确的选择应该是：过好当下，瞭望远方，持续学习，总结反思，慢慢进步<br>架构师同事 SGLS 说过：做好当下的事情才是最重要的，不管现在是做什么项目，设计和实现是我们自己可以控制的。</p>
<p>以下为原文</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">审视是一个特别好的词。当一个人开始审视世界、审视经历、审视自己的时候，更容易做出有担当的选择。</span><br><span class="line">作为美团“二号首长”，王慧文选择在2020年底正式“退休”，这不可分说地成为了焦点——</span><br><span class="line">王慧文，是怎么成为“王慧文”的？</span><br></pre></td></tr></table></figure>
<h1 id="一、“不自我设限”，造就无边界的王慧文"><a href="#一、“不自我设限”，造就无边界的王慧文" class="headerlink" title="一、“不自我设限”，造就无边界的王慧文"></a>一、“不自我设限”，造就无边界的王慧文</h1><p>什么是促使人成长的本质原因？<br>王慧文一直在渴求突破，也一直在探究这个问题。</p>
<h2 id="1-人要接受变化，有动荡才有进化"><a href="#1-人要接受变化，有动荡才有进化" class="headerlink" title="1. 人要接受变化，有动荡才有进化"></a>1. 人要接受变化，有动荡才有进化</h2><p>王慧文修行的开端，就是校内网。<br>2006年3月，王慧文、王兴和另外四名同伴绞尽脑汁、黑白颠倒，终于让校内网收获了一百多万用户。<br>王兴开始四处找投资，但在多数投资人眼里看来，他们仍是群“生瓜蛋子”、“杂牌军”，校内网不过是几个大学生做的小打小闹的玩意儿。<br>但在这时，千橡集团董事长陈一舟出现了，他愿意拿出一千多万人民币，收购校内网。《九败一胜：美团创始人王兴创业十年》中这样描述</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">陈一舟说，如果你们不卖，我们可以拿这钱砸到市场上推广。当然，校内网的这群狂妄的小子被这句话激怒了，拒绝跟陈一舟谈。</span><br><span class="line">回绝了陈一舟后，王兴的融资依旧不顺利，陈一舟却与王兴他们保持接触，认准了校内网这条大鱼，准备放长线，持久诱惑。</span><br><span class="line">2006年9月，陈一舟再次抬高了收购校内网的价码，校内网召开了五人的股东会。</span><br><span class="line">王慧文觉得校内网的机会难得，做成的希望很大，而且是自己一手做起来的产品，感情已经很深，所以坚决反对卖掉。王兴态度中立，但倾向于不卖。赖斌强则考虑的方面更多，他支持卖掉，以免大家背着一身巨债创业。</span><br><span class="line">除了他们三个大股东，还有另两名小股东，杨俊和付栋平。他们加入较晚，股份也较少，觉得卖不卖都行，比起被收购，他们更担心王慧文和赖斌强由于意见不合而导致团队破裂。</span><br><span class="line">这次争论后不久，陈一舟就就又开出了更高的收购价格。几人意识到，如果继续争论不休，团队的裂痕势必更深。万般无奈之下，校内网不得不同意陈一舟的条件。</span><br><span class="line">那一晚，大家都不说话，一起去吃夜宵的时候，王兴、王慧文、赖斌强全喝醉了，所有人大哭了一场。</span><br></pre></td></tr></table></figure>
<p>不论校内网是成功的，还是失败的，在王慧文和王兴的心里，它永远都是遗憾的。<br>回首往事，王慧文已经不再执着，反而觉得这段遗憾对自己的人生是件好事。他说：<br><strong>如果校内网做成了，我会变成让别人非常讨厌的人，刚愎、自负，因为挫折，所以我才懂得反省自己，能更理智客观冷静地看待自己。</strong><br>还有人问王慧文，如果当初不卖的话，校内网能不能做得成？王慧文答：<br><em>这取决于我们遇到什么样的投资商，如果投资商能够在很多地方帮助我们，是可能做成的；如果投完钱就不怎么管，让我们自己随便搞，那就不行，因为我们还不够成熟。</em><br>管理者的自我反思，会反馈在他的战略、领导力、管理、业务实操等能力上。<br><em><strong>人必须反思，是因为事物是时刻变化的，不断反思，才能不断跟上变化。</strong></em><br>王慧文在一次采访中说：美团的持续高速增长，不是我们在推动着业务发展，而是业务快速发展，我们努力地跟上，不是我们做了什么事情，只是我们跟上了，没掉队。<br>在一个快速发展的行业里，在一个快速变化的时代里， 创业者、管理者如果没有自我反思，是很难生存下来的。<br>在第一次创业修行中，王慧文就悟出一个道理：<strong>人，把事做成不易，不断成长、突破自己边界更难。</strong></p>
<h2 id="2-不设限的人生，成长机会无限"><a href="#2-不设限的人生，成长机会无限" class="headerlink" title="2. 不设限的人生，成长机会无限"></a>2. 不设限的人生，成长机会无限</h2><p>“君子不器”是王慧文的人生原则之一。<br>2019年，在极客公园创新大会上，极客公园创始人、总裁张鹏问王慧文：你觉得美团的基因是什么？<br>王慧文当时就说出了“君子不器”四个字，他面对张鹏侃侃而谈：孔子说，君子不器，君子不是一个器皿，人不要搞自我定义，自我定义就是自我设限，我不倾向于用美团的基因来自我设限。<br>他还用“基因突变”举例，基因变化变错的概率比变对的概率高几百万倍，所以大家都很恐惧基因变化，抵触变化。<br>但王慧文认为变化不可怕，自我设限才最可怕，他还幽默地说：一旦变对了呢？一旦长出翅膀了呢？<br>这种不自我设限，就是“美团无边界，专注而不专一”的根源。<br>君子不器，有两个含义：<br>一是人想要成长就不能有固化思维，事物是变化的，人也要具备动态发展的眼光，反思过去，展望未来；<br>二是人不能像器皿那样自我设限，器皿只有某一方面的用途和才能，而人应该博学多识。<br>孔子的这两点要求，王慧文都做到了，他的生活和工作就是如此。</p>
<p>《财经天下》周刊记者朱晓培这样形容“百变的王慧文”</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在王慧文的朋友圈里，总能看见他忽然想到一个问题，比如：是不是20世纪在唯心主义和唯物主义领域都没有出现过大师？如果地球上没有美洲，哥伦布的船直接西行到了亚洲，今天的世界格局又会是什么样子？为什么射雕英雄传的五绝里只有反派欧阳锋没有广招门徒？</span><br></pre></td></tr></table></figure>
<p>正如王慧文在内部信中所说，他个人的兴趣“散乱不稳定”。<br>当年创业时，王慧文和王兴都不会敲代码，但他们都觉得：没事，我们可以学。同样，后来在美团时，有一段时间王慧文要研究零售，他几乎每天都看一本关于零售的书，并且跟很多人谈论自己的心得。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">王慧文敬佩爱因斯坦，爱因斯坦曾说：科学和艺术一样，都让我们的世界更加绚丽多彩。</span><br><span class="line">爱因斯坦格外推崇西方古典音乐。这位“相对论”的创始人经常和“量子论”的创始人普朗克一起演奏贝多芬的作品，爱因斯坦拉小提琴，普朗克弹钢琴。相对论和量子论共同构成了21世纪物理学科的两大支柱，而它们的创始人不仅都对科学抱有偏执的热情，也都对艺术也怀有高涨的热爱，这真的很奇妙。</span><br></pre></td></tr></table></figure>

<p>王慧文从中体会到：爱因斯坦经常从艺术和审美的视角去探讨科学命题，人如果永远只站在一个视角来看待人生，人生就会变得特别狭隘，不够丰富，而站在不同视角来看待问题，不设限地长大，才非常重要。<br>不自我定义、不自我设限、不抗拒变化、不沉溺过去的王慧文，与“无边界”的美团极为匹配。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2012年底，美团实现盈亏平衡后，王慧文认为团购领域大局已定，又开始把目光聚焦在了外卖领域。</span><br><span class="line">2015年10月，早已在“千团大战”中站稳脚跟的美团，开始跟大众点评整合，从T型战略逐步转向餐饮、酒旅、综合三大业务架构。几次调整后，到店餐饮事业群、外卖配送事业群和餐饮生态平台被统一归进餐饮平台，总负责人仍然是王慧文。</span><br><span class="line">2017年12月，美团再次调整架构，王慧文担任大零售事业群总裁，统筹生鲜零售、外卖、配送、餐饮B2B等业务。同时，王慧文还负责出行事业部，正式和滴滴展开角逐。</span><br><span class="line">至此，美团点评已经构建了新到店事业群、大零售事业群、酒店旅游事业群和出行事业部四大业务体系，王慧文是其中两大事业群的统帅。</span><br></pre></td></tr></table></figure>
<p>如果管理者认为自己就是一个器皿，那么你就会认为自己的状态永远不会改变，也没有改变的必要。如果王慧文这样想，就不会为美团的基业立下赫赫战功。<br>只有当你明白“君子不器”的道理时，才会意识到成长的必要性，也才会清醒地看到自己过去的弱点。<br>不自我设限，多元思考人生，始终相信自己有更多机会，这样的管理者才能持续地自我突破，才能在激烈的竞争中拼杀出属于自己的战场。</p>
<h1 id="二、“练强兵，结硬寨，打呆仗”，"><a href="#二、“练强兵，结硬寨，打呆仗”，" class="headerlink" title="二、“练强兵，结硬寨，打呆仗”，"></a>二、“练强兵，结硬寨，打呆仗”，</h1><p>造就能征善战的王慧文<br>王慧文信奉曾国藩的九字箴言：练强兵，结硬寨，打呆仗。</p>
<h2 id="1-有担当的管理者，麾下自有万千雄兵"><a href="#1-有担当的管理者，麾下自有万千雄兵" class="headerlink" title="1. 有担当的管理者，麾下自有万千雄兵"></a>1. 有担当的管理者，麾下自有万千雄兵</h2><p>“练强兵”很容易理解，当时清朝腐败，太平天国武装起义，清朝的正规军竟无力抵抗，只好调动地方军事力量，多亏有曾国藩统率的湘军，才能击败太平军。此后，湘军成为了清朝军事上强有力的骨干。<br>没有强兵，则无法作战。但强兵如何练成？<br>曾国藩治理湘军，主要凭思想纪律，而不是战术技巧。<br><strong>王慧文“练强兵”，看重三点：人聪明，接地气，学习能力强（不是考试能力强）。</strong><br>其次，王慧文主张：管理者的一个重要责任，就是——担当。<br>王慧文有一句话曾经火遍全网：<br>有担当的管理者，要把下属从“愚昧之巅”推向“绝望之谷”，至于下属能否爬上“开悟之坡”，看个人造化。<br>王慧文解释，这句话的核心词是“担当”。<br>他向来不喜欢说“责任”，因为他认为：责任可以逃避，只有有担当的管理者才不会逃避责任。<br>那么，什么是“愚昧之巅”、“绝望之谷”、“开悟之坡”？<br>这些词语源于 <strong>达克效应</strong> ，王慧文说：我思考我个人的成长和周围同事的成长，每个人都希望自己最后成为智者（大师），但是，我们要承认一个事实，大部分人没有走上去。</p>
<p>愚昧之巅——人的智慧极低，但是自信度极高；<br>绝望之谷——认识到自己的不足，智慧有所增长，自信度大幅降低；<br>开悟之坡——智慧继续增长，自信度开始反弹增长；<br>持续平稳高原——智慧达到顶级，自信心也持续平稳，走上大师之路。</p>
<p>王慧文说：大部分人没能从愚昧之巅走到绝望之谷，大部分人都在这个部分遇到了困难。<br>王慧文借用“达克效应”理论，不是为了拆穿别人的智慧不足，而是为了强调管理者的担当，他认为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">大部分人都知道别人处在愚昧之巅，但是很少有人知道自己处在愚昧之巅，这就产生了非常大的信息不对称。</span><br><span class="line">为什么人不知道自己在愚昧之巅？就是因为每一个人在自己成长的过程中，没有得到有效反馈，没有人告诉他“你现在在愚昧之巅”。因此，有效反馈变得非常重要和稀缺。</span><br><span class="line">但是再进一步思考，为什么很多人没有得到这个反馈？因为别人没有这个责任反馈给你，而且戳破真相是有风险的。</span><br></pre></td></tr></table></figure>
<p>王慧文觉得他们在离开美团的环境后，很可能更没希望得到他人的有效反馈了，所以他有好几次，在同事或下属离职时，告诉了对方正处于愚昧之巅的真相，但是转眼就被拉黑了。<br>尽管王慧文承认他们是一个好人、正直的人，也是一个想成长的、对美团有过贡献的人，将来也会成为对社会有贡献的人，王慧文希望对方成长得更好，才戳破真相，但是要戳破真相、给他人有效反馈，就必须承担得罪人的风险。</p>
<p>也正因此，管理者才更需要担当。<br>王慧文说：你给别人反馈的时候，也可能你自己是一个傻×，可能我自己是在愚昧之巅，其实人家是对的，这个可能性也是很大的，通过这个行为反而证明了你可能在愚昧之巅的事实。<br>管理者能不能从善意出发，帮下属敲响警钟？又能不能在被误解时，甘愿承受来自下属的伤害？或者是在发现自己比下属更愚昧的时候，还能不能调整心态，通过努力学习来提升自己的智慧和自信？<br>回答这些问题的最好方式，就是努力向一个有担当的管理者去逼近。<br>担当，是管理者们最稀缺的能力，但却是“练强兵”必不可少的素质。</p>
<h2 id="2-优秀管理者，都在暗下笨功夫"><a href="#2-优秀管理者，都在暗下笨功夫" class="headerlink" title="2. 优秀管理者，都在暗下笨功夫"></a>2. 优秀管理者，都在暗下笨功夫</h2><p>“结硬寨，打呆仗”，是曾国藩的兵法内核。字面意思是，把军营扎得坚如磐石，打仗时不讲究技巧而是追求笨方法。<br>曾国藩带兵打仗有个规矩，他到任何地方安营扎寨之后，不论当时是刮风还是下雨，首先命令士兵们挖掘战壕，壕深约两米，而且还要筑墙，墙高约八尺高，墙外再挖一道沟。这就确保整个营盘固若金汤。<br>湘军总是要挖沟、筑墙，行军速度非常慢。由于这种打法显得特别笨，所以才叫“结硬寨，打呆仗”。<br>王慧文的工作速度并不慢，但他也爱下笨功夫，一个细节一个细节得打磨，确保每个业务流程都能稳扎稳打。<br>美团前员工这样评价王慧文：老王可能是我见过在互联网行业，大佬级别中所谓“比你聪明还更拼搏”，并且会关注很多业务细节的人。<br>工作起来，王慧文就像变成了拼命三郎，让很多比他年轻的人都心生畏惧。<br>据美团前员工回忆：每周六下午，是大团队的业务管理会，每个分支业务的负责人要详细地讲解业务进度，用数据说话，以结果为导向，绝对不让周报变成“流水账”；<br>在这个过程中，王慧文会非常认真地听每个人的讲解，绝不走过场，绝不讲废话；<br>某个员工在周报中提及“某个数据变化属于正常波动”，这是产品负责人没有特别认真思考或经验欠缺、全局感不强而惯用的一个理由，而此时王慧文则会一针见血地指出是因为什么问题、什么原因导致的数据变化，让人心服口服。<br>王兴在内部信里这样评价王慧文：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">美团精神，老王身体力行、堪称典范。回顾老王过去九年多的工作，既有冲锋在前的勇猛，又有安营扎寨的稳健；既有舍我其谁的担当，又有功成不必在我的潇洒；既有“天下兴亡，匹夫有责”的责任感，又有“我们什么都没有，但是我们有兄弟和勇气”的真性情；既长期有耐心地保持战略定力，又坚持时不我待、只争朝夕地忘情投入。</span><br><span class="line">美团人经常加班到凌晨两三点，但转天早上九点又准时坐到办公室里开会，这让很多人对美团这家公司佩服不已。</span><br></pre></td></tr></table></figure>
<p>2013年6月，美团收购猛买网，猛买网创始人张智勇在加入美团之后，曾发微博说：牛x都是苦x堆出来的，你看美团网牛x，没看到的都是苦x。原来公司没有比它做得好，就是我不够苦x，是因为我管理不好。在这里，每月每周都能学到东西，蛮好的。辛苦没关系，能学到东西就行，最怕加班没结果。</p>
<p>对王慧文来说，周六全天开会，周日半天高管会，每周留给自己的时间或许只有一个下午而已。但王慧文向外界和美团内部员工展现的，永远是一副精力充沛、充满激情的样子。<br>这就像将军带兵打仗，“跟我上”和“给我上”，一字之差，但全军的战斗力却会有天壤之别。<br>前者能把团队里每个人的心思都拧成一股绳，无往不胜；后者却永远苦于团队像一盘散沙。</p>
<h1 id="三、“不宜贪天之功，知止不殆”，"><a href="#三、“不宜贪天之功，知止不殆”，" class="headerlink" title="三、“不宜贪天之功，知止不殆”，"></a>三、“不宜贪天之功，知止不殆”，</h1><p>造就未来不可限量的王慧文<br>王慧文在今年年初的内部信里，把自己在美团拼搏的17年激情燃烧岁月，轻描淡写地说成了“我运气实在太好”。<br>低调、收敛，不是王慧文今天才有的风格，而是他始终具备的性格底色。<br>王慧文经常开玩笑地说，我是农民的孩子，只会拼命工作。玩笑的背后，是他专注做事的态度，以及不居功自傲的格局和胸襟。<br>管理者要常常怀有“清零思维”，过去的错误要变成未来的前车之鉴，不能用来惩罚自己；过去的成就要变成未来的经验和警示，不能用来炫耀自己、骄傲自满。<br>如果管理者觉得自己“满了”，也就意味着，你认为自己的成长之路到头了。<br>清零思维也是一种包容心。《九败一胜：美团创始人王兴创业十年》写道：王慧文曾去过无锡，见到88米高的灵山大佛，从远处看大佛，跟山一样高，走近大佛，人还没有大佛的脚趾头高。<br>王慧文心想，如果这尊大佛有脚臭的话，那么来观光的人就只能闻到大佛的脚臭味，而看不见整个大佛的巍巍如山。只有包容的人，心胸宽广，眼界开阔，才看得到大佛的宝相庄严。<br>该书的作者李志刚说：也只有包容的CEO，才能听到下面的真实心声，兼听则明，才能有各种奇人异士来帮你做事。<br>王慧文这17年来，已经为美团培养了大批人才，也为人才梯度建设付出了贡献，他离职后，自然也不需要人才来帮自己做事了，但是这种包容心会始终伴随他，让他的未来无法限量。<br>王慧文也包容对手，他和王兴都不认为美团是在跟同行们“争”，美团是在“竞”，他说：我们不认为千团大战是我们打赢了别人，而是我们跟上了行业节奏，他们没有跟上，这个认知是跟打仗不一样的；同向为竞，相向为争。</p>
<p>包容，就是不眷恋。</p>
<p>王慧文不眷恋名利荣誉，他说“我运气实在太好，不宜继续贪天之功，知止不殆”；<br>王慧文不眷恋自己的能力，他说“感谢我的家人，承受很多困难，无怨无尽地给我支持和包容”，还感谢了时代、王兴和所有同事；<br>王慧文不眷恋他的江湖，他说“美团十年，豪兴不浅。他日江湖相逢，再当杯酒言欢”。</p>
<p>金庸先生曾写：天上白云，散了又聚，聚了又散，人生离合，亦复如斯。</p>
<p>今天，我们预测王慧文的人生“下半场”会有怎样的风景，已经是徒劳，因为他早已选择了一条“不确定”的人生旅程。<br>王慧文说过，固定靶比移动靶更难打中。人生就像一个移动靶，我们谁也不知道自己的未来将穿梭至何处，也几乎不可能帮别人预测。<br>我们只能希望，当自己修炼出清零思维、包容心、不眷恋的人生态度时，能够跟上时代变化莫测的脚步，不要掉队。<br>不论人生的下半场将会如何，至少王慧文已经可以潇洒地说出一句——“这十年激烈精彩，不负年华”。</p>
<h1 id="四、参考"><a href="#四、参考" class="headerlink" title="四、参考"></a>四、参考</h1><p><a href="https://mp.weixin.qq.com/s/t5XGm_eOD6DxDrwtlTgjag">美团王慧文：很少人知道自己在愚昧之巅</a></p>
]]></content>
      <categories>
        <category>RandomThoughts</category>
      </categories>
      <tags>
        <tag>王慧文</tag>
      </tags>
  </entry>
  <entry>
    <title>Java 文件读取，部分中文乱码 - 分析与解决</title>
    <url>/20210731-File-reading-part-of-Chinese-garbled-code/</url>
    <content><![CDATA[<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>最近做项目有一个地址库文件需要放在后端<br>由于文件在 jar 包中的问题，一些读取文件的姿势失效(方便的 Guava Files)<br>最后通过 getResourceAsStream 解决</p>
<p>接下来遇到了一件奇怪的事情，部分汉字乱码了，<br>调整编码，重新编辑汉字都试过了，无法解决。</p>
<p>最后求助于百度搜索，得到了一些有效的信息。<br><strong>汉字是两个字节的，如果每次读固定个字节，可能会把汉字截断，造成乱码。</strong><br>再次印证了基础知识的重要性！</p>
<h1 id="二、相关代码"><a href="#二、相关代码" class="headerlink" title="二、相关代码"></a>二、相关代码</h1><h2 id="2-1-罪魁祸首"><a href="#2-1-罪魁祸首" class="headerlink" title="2.1 罪魁祸首"></a>2.1 罪魁祸首</h2><p>利用缓冲区读取文件，会出现边界情况下把汉字分割成两次来读。</p>
<span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">getAddressJson</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    log.info(<span class="string">&quot;cacheFile start. PATH:&#123;&#125;&quot;</span>, path);</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Address.class.getClassLoader().getResourceAsStream(path);</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">10240</span>];</span><br><span class="line">    <span class="type">int</span> length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ((length = Objects.requireNonNull(resourceAsStream).read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// 此处 new String 放进去了一半中文字符，导致乱码</span></span><br><span class="line">        sb.append(<span class="keyword">new</span> <span class="title class_">String</span>(buf, <span class="number">0</span>, length, StandardCharsets.UTF_8));</span><br><span class="line">    &#125;</span><br><span class="line">    resourceAsStream.close();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-2-完美运行"><a href="#2-2-完美运行" class="headerlink" title="2.2 完美运行"></a>2.2 完美运行</h2><p>据说现在很多人没法纯手写通过流读取文件了…(说的就是我!)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">getAddressJson</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    log.info(<span class="string">&quot;cacheFile start. PATH:&#123;&#125;&quot;</span>, path);</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Address.class.getClassLoader().getResourceAsStream(path);</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(Objects.requireNonNull(resourceAsStream));</span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line">    String newLine;</span><br><span class="line">    <span class="keyword">while</span> ((newLine = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">        sb.append(newLine);</span><br><span class="line">    &#125;</span><br><span class="line">    resourceAsStream.close();</span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="三、参考文章"><a href="#三、参考文章" class="headerlink" title="三、参考文章"></a>三、参考文章</h1><p>CSDN</p>
<ul>
<li><a href="https://blog.csdn.net/hskw444273663/article/details/85706136">InputStream 、InputStreamReader 和 BufferedReader</a></li>
<li><a href="https://blog.csdn.net/u013041642/article/details/80368787">Java 读取文件里面部分汉字内容乱码</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>FindLucklyGirl - 找出值班的幸运儿</title>
    <url>/20180720-FindLucklyGirl%20-%20%E6%89%BE%E5%87%BA%E5%80%BC%E7%8F%AD%E7%9A%84%E5%B9%B8%E8%BF%90%E5%84%BF/</url>
    <content><![CDATA[<h3 id="一、背景简介"><a href="#一、背景简介" class="headerlink" title="一、背景简介"></a>一、背景简介</h3><p>今天头给我们开会，说到团队对外沟通的问题。</p>
<p>谈到对外需要积极给人解决问题，而不是各种推脱，即使自己不知道，也可以给个眼神找到对的人。</p>
<p>继而谈到需要安排人轮流负责跟外部接洽</p>
<p>由于这个活呢，大伙儿认为不是什么好差事，那就抓阄决定吧</p>
<p>于是乎就感觉可以写一个简单的排班系统小bug，不过我这里只是提供一个简单的思路</p>
<h3 id="二、程序代码"><a href="#二、程序代码" class="headerlink" title="二、程序代码"></a>二、程序代码</h3><p>主要的逻辑在这，当然并没有考虑数据持久化的问题</p>
<p>性能等其他的问题，纯粹是一个思路，用hashCode取模主要是打的比较散，很均匀</p>
<p>加上日期什么的，就一个排班表出来了。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> person 目前所有的人</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> lucklys 这一轮已经值班了的人</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">findLucklyOneByHashCode</span><span class="params">(List&lt;String&gt; person, ArrayList&lt;String&gt; lucklys)</span> &#123;</span><br><span class="line">    List&lt;String&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(person);</span><br><span class="line">    result.removeAll(lucklys);</span><br><span class="line">    <span class="keyword">if</span> (result.size() == <span class="number">0</span>) &#123;</span><br><span class="line">        lucklys.clear();</span><br><span class="line">        result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> System.nanoTime() + UUID.randomUUID().toString();</span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> Math.abs(code.hashCode()) % result.size();</span><br><span class="line">    <span class="type">String</span> <span class="variable">lucklyOne</span> <span class="operator">=</span> result.get(index);</span><br><span class="line">    System.out.println(<span class="string">&quot;lucklyOne:&quot;</span> + lucklyOne);</span><br><span class="line">    lucklys.add(lucklyOne);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * hashCode随机取出来的数据</span></span><br><span class="line"><span class="comment"> * lucklyOne:G</span></span><br><span class="line"><span class="comment"> * lucklyOne:B</span></span><br><span class="line"><span class="comment"> * lucklyOne:C</span></span><br><span class="line"><span class="comment"> * lucklyOne:D</span></span><br><span class="line"><span class="comment"> * lucklyOne:H</span></span><br><span class="line"><span class="comment"> * lucklyOne:F</span></span><br><span class="line"><span class="comment"> * lucklyOne:E</span></span><br><span class="line"><span class="comment"> * lucklyOne:A</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>初识 Spring AOP 与 BeanPostProcess</title>
    <url>/20220326-Get-to-know-spring-AOP-and-BeanPostProcess/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>最近在做重构的项目<br>进入阶段性收尾阶段<br>总结记录下相关的内容<br>方便大家遇到类似问题可以想起有某个地方可以参考</p>
<h1 id="一、初识-AOP"><a href="#一、初识-AOP" class="headerlink" title="一、初识 AOP"></a>一、初识 AOP</h1><p>目前的 AOP 应用，由于公司生态体系不够完善<br>利用 AOP + ThreadLocal(transmittable-thread-local，ttl)<br>做一部分链路追踪的事情( 耗时打印，traceId 处理 )<br>这部分倒是很简单，只是之前用的很少</p>
<p>PS：链路追踪蛮重要，针对排查问题，性能监控等大有帮助，多关注开源协议&#x2F;实现( 如 CNCF )</p>
<h1 id="二、初识-BeanPostProcess"><a href="#二、初识-BeanPostProcess" class="headerlink" title="二、初识 BeanPostProcess"></a>二、初识 BeanPostProcess</h1><h2 id="2-1-应用场景"><a href="#2-1-应用场景" class="headerlink" title="2.1 应用场景"></a>2.1 应用场景</h2><p>目前做的项目当中，有一个 IDC 负载均衡的工具<br>有设置当前机器所属机房的方法，但是没有提供从配置文件读取的能力<br>因为 IDC 路由不生效，会造成跨机房访问，导致访问延迟偏高( 回头再写性能优化相关内容 )</p>
<span id="more"></span>
<p>当时发现这个问题的时候已经上线，以稳定性为主，不想升级 jar 版本<br>于是乎当时想通过 AOP 或者字节码的方式去做一个增强</p>
<p>当然，由于知识浅薄，AOP 写对了，但是不生效，工具初始化的先于 AOP 的作用时间。</p>
<p>接下来就通过搜索引起各种找，偶然发现 BeanPostProcess (之前也通过一些 spring 回调做应用预热)</p>
<p>于是就开始一番操作，果然给解决问题了。</p>
<h2 id="2-2-代码概览"><a href="#2-2-代码概览" class="headerlink" title="2.2 代码概览"></a>2.2 代码概览</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Idc</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="keyword">if</span> (bean <span class="keyword">instanceof</span> ClientFactory) &#123;</span><br><span class="line">            <span class="type">ClientFactory</span> <span class="variable">clientFactory</span> <span class="operator">=</span> (ClientFactory) bean;</span><br><span class="line">            <span class="type">String</span> <span class="variable">idc</span> <span class="operator">=</span> System.getenv(<span class="string">&quot;IDC&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isNotBlank(idc)) &#123;</span><br><span class="line">                clientFactory.setIdc(idc);</span><br><span class="line">            &#125;</span><br><span class="line">            clientFactory.setIdc(<span class="string">&quot;nj&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-2-BeanPostProcess-文档"><a href="#2-2-BeanPostProcess-文档" class="headerlink" title="2.2 BeanPostProcess 文档"></a>2.2 BeanPostProcess 文档</h2><p><a href="https://docs.spring.io/spring-framework/docs/current/Javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html">BeanPostProcess API</a></p>
<h1 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h1><p>之前一直在做业务开发<br>也很少做从零到一的项目<br>即使看过一些 spring 的书籍和文档<br>但是还是没有理解太深，没有太注意<br>果然是书到用时方恨少哇，以后还是万事深挖一步</p>
<p>spring 生命周期，启动流程，各种回调，有必要看看，跑 demo 试试。</p>
<h1 id="四、参考文档"><a href="#四、参考文档" class="headerlink" title="四、参考文档"></a>四、参考文档</h1><ul>
<li><a href="https://docs.spring.io/spring-framework/docs/2.5.x/reference/aop.html#aop-understanding-aop-proxies">AOP</a></li>
<li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-extension-bpp">BeanPostProcessor</a></li>
<li><a href="https://github.com/alibaba/transmittable-thread-local">ttl - 跨线程数据传输</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Get参数串KV与Map互转 - 利用Java8 Stream</title>
    <url>/20180713-Get%E5%8F%82%E6%95%B0%E4%B8%B2KV%E4%B8%8EMap%E4%BA%92%E8%BD%AC%20-%20%E5%88%A9%E7%94%A8Java8%20Stream/</url>
    <content><![CDATA[<h2 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h2><p>在各种系统需要加签的时<br>一般都会把参与签名的数据以get请求参数拼接起来<br>并且要求有序，这个方法会比较方便</p>
<h2 id="二、实现"><a href="#二、实现" class="headerlink" title="二、实现"></a>二、实现</h2><h3 id="2-1-拼接为有序的get请求类字符串"><a href="#2-1-拼接为有序的get请求类字符串" class="headerlink" title="2.1  拼接为有序的get请求类字符串"></a>2.1  拼接为有序的get请求类字符串</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public String getSortedStr(Map&lt;String, String&gt; unSortedStr) &#123;</span><br><span class="line">    String sortedStr= unSortedStr</span><br><span class="line">            .entrySet()</span><br><span class="line">            .stream()</span><br><span class="line">            .filter(entry -&gt; !StringUtil.isEmpty(entry.getValue()))</span><br><span class="line">            .sorted(Map.Entry.comparingByKey())</span><br><span class="line">            .map(entry -&gt; entry.getKey() + &quot;=&quot; + entry.getValue())</span><br><span class="line">            .collect(Collectors.joining(&quot;&amp;&quot;));</span><br><span class="line">    return sortedStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-把get类参数字符串转为map"><a href="#2-2-把get类参数字符串转为map" class="headerlink" title="2.2 把get类参数字符串转为map"></a>2.2 把get类参数字符串转为map</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">private Map&lt;String,String&gt; getMapData(String getStr)&#123;</span><br><span class="line">    String[] strs = getStr.split(&quot;&amp;&quot;);</span><br><span class="line">    HashMap&lt;String, String&gt; dataMap = new HashMap&lt;&gt;(16);</span><br><span class="line">    for (int i = 0; i &lt; strs.length; i++) &#123;</span><br><span class="line">        String[] str = strs[i].split(&quot;=&quot;);</span><br><span class="line">        dataMap.put(str[0], str[1]);</span><br><span class="line">    &#125;</span><br><span class="line">    return dataMap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于get类字符串没有发现比较好的方法转换为map</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Git Bash tree（windows）让windows支持tree</title>
    <url>/20170713-Git%20Bash%20tree%EF%BC%88windows%EF%BC%89/</url>
    <content><![CDATA[<p>在安装了git客户端之后，发现Git Bash挺好用</p>
<p>之前在linux shell用过tree命令感觉不错</p>
<p>发现Git Bash也可以实现，于是就记录一下</p>
<p>下载地址：<a href="http://gnuwin32.sourceforge.net/packages/tree.htm" target="_blank">点击前往</a></p>
<p>下载文件： Binaries	 	Zip</p>
<p>解压文件：bin目录下找到tree.exe</p>
<p>把这个放到git安装目录下后的路径：C:\Program Files\Git\usr\bin\tree.exe</p>
<p>测试：虽然有点丑。。。</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@HiSEN MINGW64 /c/code/SpringBootCLI/myapp</span><br><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">|-- mvnw</span><br><span class="line">|-- mvnw.cmd</span><br><span class="line">|-- pom.xml</span><br><span class="line">`-- src</span><br><span class="line">    |-- main</span><br><span class="line">    |   |-- Java</span><br><span class="line">    |   |   `-- com</span><br><span class="line">    |   |       `-- example</span><br><span class="line">    |   |           `-- myapp</span><br><span class="line">    |   |               |-- DemoApplication.Java</span><br><span class="line">    |   |               `-- ServletInitializer.Java</span><br><span class="line">    |   `-- resources</span><br><span class="line">    |       |-- application.properties</span><br><span class="line">    |       |-- static</span><br><span class="line">    |       `-- templates</span><br><span class="line">    `-- test</span><br><span class="line">        `-- Java</span><br><span class="line">            `-- com</span><br><span class="line">                `-- example</span><br><span class="line">                    `-- myapp</span><br><span class="line">                        `-- DemoApplicationTests.Java</span><br><span class="line"></span><br><span class="line">14 directories, 7 files</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Google Java工具类 - Guava - 常见用法</title>
    <url>/20170801-Google%20Java%E5%B7%A5%E5%85%B7%E7%B1%BB%20-%20Guava%20-%20%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<p>概述</p>
<p>工具类 就是封装平常用的方法，不需要你重复造轮子，节省开发人员时间，提高工作效率。谷歌作为大公司，当然会从日常的工作中提取中很多高效率的方法出来。所以就诞生了Guava。</p>
<p>高效设计良好的API，被Google的开发者设计，实现和使用</p>
<p>遵循高效的Java语法实践</p>
<p>使代码更刻度，简洁，简单</p>
<p>节约时间，资源，提高生产力 Guava工程</p>
<p>包含了若干被Google的 Java项目广泛依赖 的核心库，例如：</p>
<ol>
<li>集合 [collections]</li>
<li>缓存 [caching]</li>
<li>原生类型支持 [primitives support]</li>
<li>并发库 [concurrency libraries]</li>
<li>通用注解 [common annotations]</li>
<li>字符串处理 [string processing]</li>
<li>I&#x2F;O 等等。</li>
</ol>
<p>部分用法如下：</p>
<span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommonUsage</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 2.集合转换为特定格式的字符串</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">collection2Srt</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//List转</span></span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">    list.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;e&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;f&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> Joiner.on(<span class="string">&quot;-&quot;</span>).join(list);</span><br><span class="line">    System.out.println(result);<span class="comment">//a-b-c-d-e-f</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//Map 转</span></span><br><span class="line">    HashMap&lt;String, Integer&gt; map = Maps.newHashMap();</span><br><span class="line">    map.put(<span class="string">&quot;a&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    map.put(<span class="string">&quot;b&quot;</span>, <span class="number">2</span>);</span><br><span class="line">    map.put(<span class="string">&quot;c&quot;</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="comment">//on 分隔符，withKeyValueSeparator key value之间的分隔符</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> Joiner.on(<span class="string">&quot;,&quot;</span>).withKeyValueSeparator(<span class="string">&quot;=&quot;</span>).join(map);</span><br><span class="line">    System.out.println(s);<span class="comment">//a=1,b=2,c=3</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 3.将String 转为特定的集合</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">str2Collection</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;1,2,3,4,5,6,7,8,9&quot;</span>;</span><br><span class="line">    List&lt;String&gt; list = Splitter.on(<span class="string">&quot;,&quot;</span>).splitToList(s);</span><br><span class="line">    System.out.println(list);</span><br><span class="line"></span><br><span class="line">    s = <span class="string">&quot;1-2-3-4- 5-  6  &quot;</span>;</span><br><span class="line">    <span class="comment">//去除空串与空格</span></span><br><span class="line">    List&lt;String&gt; list1 = Splitter.on(<span class="string">&quot;-&quot;</span>).omitEmptyStrings().trimResults().splitToList(s);</span><br><span class="line">    System.out.println(list1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将String转换为map</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;a=1,b=2&quot;</span>;</span><br><span class="line">    Map&lt;String, String&gt; map = Splitter.on(<span class="string">&quot;,&quot;</span>).withKeyValueSeparator(<span class="string">&quot;=&quot;</span>).split(str);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 4.多个字符切割，或者特定的正则分隔</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">strSplit</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;aa.dd,,ff,,.&quot;</span>;</span><br><span class="line">    List&lt;String&gt; list = Splitter.onPattern(<span class="string">&quot;[.|,]&quot;</span>).omitEmptyStrings().trimResults()</span><br><span class="line">        .splitToList(input);</span><br><span class="line">    System.out.println(list);</span><br><span class="line">    <span class="comment">// 判断匹配结果</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> CharMatcher.inRange(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;z&#x27;</span>).or(CharMatcher.inRange(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;Z&#x27;</span>))</span><br><span class="line">        .matches(<span class="string">&#x27;K&#x27;</span>);<span class="comment">//true</span></span><br><span class="line">    <span class="comment">// 保留数字文本</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> CharMatcher.digit().retainFrom(<span class="string">&quot;abc 123 efg&quot;</span>);<span class="comment">//123</span></span><br><span class="line">    <span class="comment">// 删除数字文本</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> CharMatcher.digit().removeFrom(<span class="string">&quot;abc 123 efg&quot;</span>);<span class="comment">//abc  efg</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 9.计算程序开始结束用了多少时间</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">countTime</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Stopwatch</span> <span class="variable">stopwatch</span> <span class="operator">=</span> Stopwatch.createStarted();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//TimeUnit可以指定时间精度</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">nanos</span> <span class="operator">=</span> stopwatch.elapsed(TimeUnit.MILLISECONDS);</span><br><span class="line">    System.out.println(nanos);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 10.Files 文件操作</span></span><br><span class="line"><span class="comment">   * 方便，</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">filesOperation</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;./src/main/Java/com/hisen/jars/guava/test.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">      <span class="comment">//写</span></span><br><span class="line">      filesWrite(fileName, String.valueOf(i) + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//读</span></span><br><span class="line">    List&lt;String&gt; list = filesRead(fileName);</span><br><span class="line">    System.out.println(<span class="string">&quot;读取到的内容：&quot;</span> + list.toString());</span><br><span class="line"><span class="comment">//    Files.copy(sourceFile, targetFile); //复制文件</span></span><br><span class="line"><span class="comment">//    Files.equal(File,File);//比较文件内容是否完全一致</span></span><br><span class="line"><span class="comment">//    touch方法创建或者更新文件的时间戳。</span></span><br><span class="line"><span class="comment">//    createTempDir()方法创建临时目录</span></span><br><span class="line"><span class="comment">//    Files.createParentDirs(File) 创建父级目录</span></span><br><span class="line"><span class="comment">//    getChecksum(File)获得文件的checksum</span></span><br><span class="line"><span class="comment">//    hash(File)获得文件的hashmap系列方法获得文件的内存映射</span></span><br><span class="line"><span class="comment">//    getFileExtension(String)获得文件的扩展名</span></span><br><span class="line"><span class="comment">//    getNameWithoutExtension(String file)获得不带扩展名的文件名</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Files写文件</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> fileName 文件名（包括路径）</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> contents 写入的单行内容</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">filesWrite</span><span class="params">(<span class="keyword">final</span> String fileName, <span class="keyword">final</span> String contents)</span> &#123;</span><br><span class="line">    checkNotNull(fileName, <span class="string">&quot;文件名称不能为空&quot;</span>);</span><br><span class="line">    checkNotNull(contents, <span class="string">&quot;写入内容不能为空&quot;</span>);</span><br><span class="line">    <span class="keyword">final</span> <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//Files.write(contents.getBytes(), file);//覆盖</span></span><br><span class="line">      Files.append(contents, file, Charsets.UTF_8);<span class="comment">//追加</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;ERROR trying to write to file &#x27;&quot;</span> + fileName + <span class="string">&quot;&#x27; - &quot;</span></span><br><span class="line">          + e.toString());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Files 文件单行读取</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> filePath 文件名(包括路径)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">filesRead</span><span class="params">(String filePath)</span> &#123;</span><br><span class="line">    checkNotNull(filePath, <span class="string">&quot;文件名称不能为空&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(filePath);</span><br><span class="line">    List&lt;String&gt; list = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      list = Files.readLines(file, Charsets.UTF_8);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>部分摘自：<a href="http://blog.csdn.net/yyychyzzzz/article/details/54983574" target="_blank">点击查看</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>google</tag>
        <tag>jar</tag>
      </tags>
  </entry>
  <entry>
    <title>Guice Demo | solve NoSuchMethodError</title>
    <url>/20190424-Guice%20Demo%20%7C%20solve%20NoSuchMethodError/</url>
    <content><![CDATA[<h1 id="一、Guice简介"><a href="#一、Guice简介" class="headerlink" title="一、Guice简介"></a>一、Guice简介</h1><p>Google公司的Bob lee开发的轻量级IoC容器，其特点是：</p>
<ol>
<li>速度快，号称是spring的100倍速度</li>
<li>无配置文件，实用JDK5.0的annotation描述组件依赖，简单，而且有编译器检查和重构支持</li>
<li>简单，代码量很少</li>
</ol>
<h1 id="二、简单样例"><a href="#二、简单样例" class="headerlink" title="二、简单样例"></a>二、简单样例</h1><ol>
<li>详细代码：<a href="https://github.com/hisenyuan/IDEAPractice/tree/master/src/main/Java/com/hisen/jars/guice">https://github.com/hisenyuan/IDEAPractice/tree/master/src/main/Java/com/hisen/jars/guice</a></li>
<li>依赖</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.inject<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guice<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>测试类</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloApp</span> <span class="keyword">extends</span> <span class="title class_">BaseServer</span> &#123;</span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    <span class="keyword">private</span> HelloServiceImpl hello;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 方式一</span></span><br><span class="line">        <span class="type">Injector</span> <span class="variable">injector</span> <span class="operator">=</span> Guice.createInjector();</span><br><span class="line">        <span class="type">HelloService</span> <span class="variable">helloService</span> <span class="operator">=</span> injector.getInstance(HelloService.class);</span><br><span class="line">        helloService.sayHello(<span class="string">&quot;hisen&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 方式二 其实是在BaseServer中做了方式1的事情 【类似Spring的方式】</span></span><br><span class="line">        hello.sayHello(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="三、解决问题"><a href="#三、解决问题" class="headerlink" title="三、解决问题"></a>三、解决问题</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Java.lang.NoSuchMethodError: com.google.common.base.Preconditions.checkArgument(ZLJava/lang/String;LJava/lang/Object;LJava/lang/Object;)V</span><br></pre></td></tr></table></figure>
<p>github有人遇到同样的问题：<a href="https://github.com/SeleniumHQ/selenium/issues/3880">https://github.com/SeleniumHQ/selenium/issues/3880</a></p>
<p>把本地的guava版本由19.0改为21.0成功解决问题</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>全球国家和地区列表，中英文国名、国际代码、电话区号(SQL &amp; 文本)</title>
    <url>/20191120-Global-country-and-region-information-list/</url>
    <content><![CDATA[<h2 id="零、说明"><a href="#零、说明" class="headerlink" title="零、说明"></a>零、说明</h2><p>包含全球200+国家和地区的信息<br>本列表属于之前有外国人整理过<br>利用有道翻译API翻译了国家名<br>涉及到全球的业务应该会用的上</p>
<h2 id="一、SQL"><a href="#一、SQL" class="headerlink" title="一、SQL"></a>一、SQL</h2><p>sql如下：</p>
<span id="more"></span>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for `sms_country`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `sms_country`;</span><br><span class="line"><span class="keyword">CREATE TABLE</span> `sms_country` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `iso` <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">  `iso3` <span class="type">char</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">80</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">  `name_zh` <span class="type">varchar</span>(<span class="number">80</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `nicename` <span class="type">varchar</span>(<span class="number">80</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">  `numcode` <span class="type">smallint</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `phonecode` <span class="type">int</span>(<span class="number">5</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">240</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of sms_country</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;AF&#x27;</span>, <span class="string">&#x27;AFG&#x27;</span>, <span class="string">&#x27;AFGHANISTAN&#x27;</span>, <span class="string">&#x27;阿富汗&#x27;</span>, <span class="string">&#x27;Afghanistan&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;93&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;AL&#x27;</span>, <span class="string">&#x27;ALB&#x27;</span>, <span class="string">&#x27;ALBANIA&#x27;</span>, <span class="string">&#x27;阿尔巴尼亚&#x27;</span>, <span class="string">&#x27;Albania&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;355&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;DZ&#x27;</span>, <span class="string">&#x27;DZA&#x27;</span>, <span class="string">&#x27;ALGERIA&#x27;</span>, <span class="string">&#x27;阿尔及利亚&#x27;</span>, <span class="string">&#x27;Algeria&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;213&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;AS&#x27;</span>, <span class="string">&#x27;ASM&#x27;</span>, <span class="string">&#x27;AMERICAN SAMOA&#x27;</span>, <span class="string">&#x27;美属萨摩亚&#x27;</span>, <span class="string">&#x27;American Samoa&#x27;</span>, <span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;1684&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;AD&#x27;</span>, <span class="string">&#x27;AND&#x27;</span>, <span class="string">&#x27;ANDORRA&#x27;</span>, <span class="string">&#x27;安道尔&#x27;</span>, <span class="string">&#x27;Andorra&#x27;</span>, <span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;376&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;AO&#x27;</span>, <span class="string">&#x27;AGO&#x27;</span>, <span class="string">&#x27;ANGOLA&#x27;</span>, <span class="string">&#x27;安哥拉&#x27;</span>, <span class="string">&#x27;Angola&#x27;</span>, <span class="string">&#x27;24&#x27;</span>, <span class="string">&#x27;244&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;AI&#x27;</span>, <span class="string">&#x27;AIA&#x27;</span>, <span class="string">&#x27;ANGUILLA&#x27;</span>, <span class="string">&#x27;安圭拉岛&#x27;</span>, <span class="string">&#x27;Anguilla&#x27;</span>, <span class="string">&#x27;660&#x27;</span>, <span class="string">&#x27;1264&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;AQ&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;ANTARCTICA&#x27;</span>, <span class="string">&#x27;南极洲&#x27;</span>, <span class="string">&#x27;Antarctica&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;AG&#x27;</span>, <span class="string">&#x27;ATG&#x27;</span>, <span class="string">&#x27;ANTIGUA AND BARBUDA&#x27;</span>, <span class="string">&#x27;安提瓜岛和巴布达&#x27;</span>, <span class="string">&#x27;Antigua and Barbuda&#x27;</span>, <span class="string">&#x27;28&#x27;</span>, <span class="string">&#x27;1268&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;AR&#x27;</span>, <span class="string">&#x27;ARG&#x27;</span>, <span class="string">&#x27;ARGENTINA&#x27;</span>, <span class="string">&#x27;阿根廷&#x27;</span>, <span class="string">&#x27;Argentina&#x27;</span>, <span class="string">&#x27;32&#x27;</span>, <span class="string">&#x27;54&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;AM&#x27;</span>, <span class="string">&#x27;ARM&#x27;</span>, <span class="string">&#x27;ARMENIA&#x27;</span>, <span class="string">&#x27;亚美尼亚&#x27;</span>, <span class="string">&#x27;Armenia&#x27;</span>, <span class="string">&#x27;51&#x27;</span>, <span class="string">&#x27;374&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;AW&#x27;</span>, <span class="string">&#x27;ABW&#x27;</span>, <span class="string">&#x27;ARUBA&#x27;</span>, <span class="string">&#x27;阿鲁巴岛&#x27;</span>, <span class="string">&#x27;Aruba&#x27;</span>, <span class="string">&#x27;533&#x27;</span>, <span class="string">&#x27;297&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;AU&#x27;</span>, <span class="string">&#x27;AUS&#x27;</span>, <span class="string">&#x27;AUSTRALIA&#x27;</span>, <span class="string">&#x27;澳大利亚&#x27;</span>, <span class="string">&#x27;Australia&#x27;</span>, <span class="string">&#x27;36&#x27;</span>, <span class="string">&#x27;61&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;AT&#x27;</span>, <span class="string">&#x27;AUT&#x27;</span>, <span class="string">&#x27;AUSTRIA&#x27;</span>, <span class="string">&#x27;奥地利&#x27;</span>, <span class="string">&#x27;Austria&#x27;</span>, <span class="string">&#x27;40&#x27;</span>, <span class="string">&#x27;43&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;15&#x27;</span>, <span class="string">&#x27;AZ&#x27;</span>, <span class="string">&#x27;AZE&#x27;</span>, <span class="string">&#x27;AZERBAIJAN&#x27;</span>, <span class="string">&#x27;阿塞拜疆&#x27;</span>, <span class="string">&#x27;Azerbaijan&#x27;</span>, <span class="string">&#x27;31&#x27;</span>, <span class="string">&#x27;994&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;BS&#x27;</span>, <span class="string">&#x27;BHS&#x27;</span>, <span class="string">&#x27;BAHAMAS&#x27;</span>, <span class="string">&#x27;巴哈马群岛&#x27;</span>, <span class="string">&#x27;Bahamas&#x27;</span>, <span class="string">&#x27;44&#x27;</span>, <span class="string">&#x27;1242&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;17&#x27;</span>, <span class="string">&#x27;BH&#x27;</span>, <span class="string">&#x27;BHR&#x27;</span>, <span class="string">&#x27;BAHRAIN&#x27;</span>, <span class="string">&#x27;巴林&#x27;</span>, <span class="string">&#x27;Bahrain&#x27;</span>, <span class="string">&#x27;48&#x27;</span>, <span class="string">&#x27;973&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;BD&#x27;</span>, <span class="string">&#x27;BGD&#x27;</span>, <span class="string">&#x27;BANGLADESH&#x27;</span>, <span class="string">&#x27;孟加拉国&#x27;</span>, <span class="string">&#x27;Bangladesh&#x27;</span>, <span class="string">&#x27;50&#x27;</span>, <span class="string">&#x27;880&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;19&#x27;</span>, <span class="string">&#x27;BB&#x27;</span>, <span class="string">&#x27;BRB&#x27;</span>, <span class="string">&#x27;BARBADOS&#x27;</span>, <span class="string">&#x27;巴巴多斯&#x27;</span>, <span class="string">&#x27;Barbados&#x27;</span>, <span class="string">&#x27;52&#x27;</span>, <span class="string">&#x27;1246&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;BY&#x27;</span>, <span class="string">&#x27;BLR&#x27;</span>, <span class="string">&#x27;BELARUS&#x27;</span>, <span class="string">&#x27;白俄罗斯&#x27;</span>, <span class="string">&#x27;Belarus&#x27;</span>, <span class="string">&#x27;112&#x27;</span>, <span class="string">&#x27;375&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;21&#x27;</span>, <span class="string">&#x27;BE&#x27;</span>, <span class="string">&#x27;BEL&#x27;</span>, <span class="string">&#x27;BELGIUM&#x27;</span>, <span class="string">&#x27;比利时&#x27;</span>, <span class="string">&#x27;Belgium&#x27;</span>, <span class="string">&#x27;56&#x27;</span>, <span class="string">&#x27;32&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;BZ&#x27;</span>, <span class="string">&#x27;BLZ&#x27;</span>, <span class="string">&#x27;BELIZE&#x27;</span>, <span class="string">&#x27;伯利兹&#x27;</span>, <span class="string">&#x27;Belize&#x27;</span>, <span class="string">&#x27;84&#x27;</span>, <span class="string">&#x27;501&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;23&#x27;</span>, <span class="string">&#x27;BJ&#x27;</span>, <span class="string">&#x27;BEN&#x27;</span>, <span class="string">&#x27;BENIN&#x27;</span>, <span class="string">&#x27;贝宁&#x27;</span>, <span class="string">&#x27;Benin&#x27;</span>, <span class="string">&#x27;204&#x27;</span>, <span class="string">&#x27;229&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;24&#x27;</span>, <span class="string">&#x27;BM&#x27;</span>, <span class="string">&#x27;BMU&#x27;</span>, <span class="string">&#x27;BERMUDA&#x27;</span>, <span class="string">&#x27;百慕大&#x27;</span>, <span class="string">&#x27;Bermuda&#x27;</span>, <span class="string">&#x27;60&#x27;</span>, <span class="string">&#x27;1441&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;25&#x27;</span>, <span class="string">&#x27;BT&#x27;</span>, <span class="string">&#x27;BTN&#x27;</span>, <span class="string">&#x27;BHUTAN&#x27;</span>, <span class="string">&#x27;不丹&#x27;</span>, <span class="string">&#x27;Bhutan&#x27;</span>, <span class="string">&#x27;64&#x27;</span>, <span class="string">&#x27;975&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;26&#x27;</span>, <span class="string">&#x27;BO&#x27;</span>, <span class="string">&#x27;BOL&#x27;</span>, <span class="string">&#x27;BOLIVIA&#x27;</span>, <span class="string">&#x27;玻利维亚&#x27;</span>, <span class="string">&#x27;Bolivia&#x27;</span>, <span class="string">&#x27;68&#x27;</span>, <span class="string">&#x27;591&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;27&#x27;</span>, <span class="string">&#x27;BA&#x27;</span>, <span class="string">&#x27;BIH&#x27;</span>, <span class="string">&#x27;BOSNIA AND HERZEGOVINA&#x27;</span>, <span class="string">&#x27;波斯尼亚和黑塞哥维那&#x27;</span>, <span class="string">&#x27;Bosnia and Herzegovina&#x27;</span>, <span class="string">&#x27;70&#x27;</span>, <span class="string">&#x27;387&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;28&#x27;</span>, <span class="string">&#x27;BW&#x27;</span>, <span class="string">&#x27;BWA&#x27;</span>, <span class="string">&#x27;BOTSWANA&#x27;</span>, <span class="string">&#x27;博茨瓦纳&#x27;</span>, <span class="string">&#x27;Botswana&#x27;</span>, <span class="string">&#x27;72&#x27;</span>, <span class="string">&#x27;267&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;29&#x27;</span>, <span class="string">&#x27;BV&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;BOUVET ISLAND&#x27;</span>, <span class="string">&#x27;布维岛&#x27;</span>, <span class="string">&#x27;Bouvet Island&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;30&#x27;</span>, <span class="string">&#x27;BR&#x27;</span>, <span class="string">&#x27;BRA&#x27;</span>, <span class="string">&#x27;BRAZIL&#x27;</span>, <span class="string">&#x27;巴西&#x27;</span>, <span class="string">&#x27;Brazil&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;55&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;31&#x27;</span>, <span class="string">&#x27;IO&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;BRITISH INDIAN OCEAN TERRITORY&#x27;</span>, <span class="string">&#x27;英属印度洋领地&#x27;</span>, <span class="string">&#x27;British Indian Ocean Territory&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;246&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;32&#x27;</span>, <span class="string">&#x27;BN&#x27;</span>, <span class="string">&#x27;BRN&#x27;</span>, <span class="string">&#x27;BRUNEI DARUSSALAM&#x27;</span>, <span class="string">&#x27;文莱达鲁萨兰国&#x27;</span>, <span class="string">&#x27;Brunei Darussalam&#x27;</span>, <span class="string">&#x27;96&#x27;</span>, <span class="string">&#x27;673&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;33&#x27;</span>, <span class="string">&#x27;BG&#x27;</span>, <span class="string">&#x27;BGR&#x27;</span>, <span class="string">&#x27;BULGARIA&#x27;</span>, <span class="string">&#x27;保加利亚&#x27;</span>, <span class="string">&#x27;Bulgaria&#x27;</span>, <span class="string">&#x27;100&#x27;</span>, <span class="string">&#x27;359&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;34&#x27;</span>, <span class="string">&#x27;BF&#x27;</span>, <span class="string">&#x27;BFA&#x27;</span>, <span class="string">&#x27;BURKINA FASO&#x27;</span>, <span class="string">&#x27;布吉纳法索&#x27;</span>, <span class="string">&#x27;Burkina Faso&#x27;</span>, <span class="string">&#x27;854&#x27;</span>, <span class="string">&#x27;226&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;35&#x27;</span>, <span class="string">&#x27;BI&#x27;</span>, <span class="string">&#x27;BDI&#x27;</span>, <span class="string">&#x27;BURUNDI&#x27;</span>, <span class="string">&#x27;布隆迪&#x27;</span>, <span class="string">&#x27;Burundi&#x27;</span>, <span class="string">&#x27;108&#x27;</span>, <span class="string">&#x27;257&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;36&#x27;</span>, <span class="string">&#x27;KH&#x27;</span>, <span class="string">&#x27;KHM&#x27;</span>, <span class="string">&#x27;CAMBODIA&#x27;</span>, <span class="string">&#x27;柬埔寨&#x27;</span>, <span class="string">&#x27;Cambodia&#x27;</span>, <span class="string">&#x27;116&#x27;</span>, <span class="string">&#x27;855&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;37&#x27;</span>, <span class="string">&#x27;CM&#x27;</span>, <span class="string">&#x27;CMR&#x27;</span>, <span class="string">&#x27;CAMEROON&#x27;</span>, <span class="string">&#x27;喀麦隆&#x27;</span>, <span class="string">&#x27;Cameroon&#x27;</span>, <span class="string">&#x27;120&#x27;</span>, <span class="string">&#x27;237&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;38&#x27;</span>, <span class="string">&#x27;CA&#x27;</span>, <span class="string">&#x27;CAN&#x27;</span>, <span class="string">&#x27;CANADA&#x27;</span>, <span class="string">&#x27;加拿大&#x27;</span>, <span class="string">&#x27;Canada&#x27;</span>, <span class="string">&#x27;124&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;39&#x27;</span>, <span class="string">&#x27;CV&#x27;</span>, <span class="string">&#x27;CPV&#x27;</span>, <span class="string">&#x27;CAPE VERDE&#x27;</span>, <span class="string">&#x27;佛得角&#x27;</span>, <span class="string">&#x27;Cape Verde&#x27;</span>, <span class="string">&#x27;132&#x27;</span>, <span class="string">&#x27;238&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;40&#x27;</span>, <span class="string">&#x27;KY&#x27;</span>, <span class="string">&#x27;CYM&#x27;</span>, <span class="string">&#x27;CAYMAN ISLANDS&#x27;</span>, <span class="string">&#x27;开曼群岛&#x27;</span>, <span class="string">&#x27;Cayman Islands&#x27;</span>, <span class="string">&#x27;136&#x27;</span>, <span class="string">&#x27;1345&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;41&#x27;</span>, <span class="string">&#x27;CF&#x27;</span>, <span class="string">&#x27;CAF&#x27;</span>, <span class="string">&#x27;CENTRAL AFRICAN REPUBLIC&#x27;</span>, <span class="string">&#x27;中非共和国&#x27;</span>, <span class="string">&#x27;Central African Republic&#x27;</span>, <span class="string">&#x27;140&#x27;</span>, <span class="string">&#x27;236&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;42&#x27;</span>, <span class="string">&#x27;TD&#x27;</span>, <span class="string">&#x27;TCD&#x27;</span>, <span class="string">&#x27;CHAD&#x27;</span>, <span class="string">&#x27;乍得&#x27;</span>, <span class="string">&#x27;Chad&#x27;</span>, <span class="string">&#x27;148&#x27;</span>, <span class="string">&#x27;235&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;43&#x27;</span>, <span class="string">&#x27;CL&#x27;</span>, <span class="string">&#x27;CHL&#x27;</span>, <span class="string">&#x27;CHILE&#x27;</span>, <span class="string">&#x27;智利&#x27;</span>, <span class="string">&#x27;Chile&#x27;</span>, <span class="string">&#x27;152&#x27;</span>, <span class="string">&#x27;56&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;44&#x27;</span>, <span class="string">&#x27;CN&#x27;</span>, <span class="string">&#x27;CHN&#x27;</span>, <span class="string">&#x27;CHINA&#x27;</span>, <span class="string">&#x27;中国&#x27;</span>, <span class="string">&#x27;China&#x27;</span>, <span class="string">&#x27;156&#x27;</span>, <span class="string">&#x27;86&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;45&#x27;</span>, <span class="string">&#x27;CX&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;CHRISTMAS ISLAND&#x27;</span>, <span class="string">&#x27;圣诞岛&#x27;</span>, <span class="string">&#x27;Christmas Island&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;61&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;46&#x27;</span>, <span class="string">&#x27;CC&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;COCOS (KEELING) ISLANDS&#x27;</span>, <span class="string">&#x27;COCOS(KEELING)岛&#x27;</span>, <span class="string">&#x27;Cocos (Keeling) Islands&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;672&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;47&#x27;</span>, <span class="string">&#x27;CO&#x27;</span>, <span class="string">&#x27;COL&#x27;</span>, <span class="string">&#x27;COLOMBIA&#x27;</span>, <span class="string">&#x27;哥伦比亚&#x27;</span>, <span class="string">&#x27;Colombia&#x27;</span>, <span class="string">&#x27;170&#x27;</span>, <span class="string">&#x27;57&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;48&#x27;</span>, <span class="string">&#x27;KM&#x27;</span>, <span class="string">&#x27;COM&#x27;</span>, <span class="string">&#x27;COMOROS&#x27;</span>, <span class="string">&#x27;科摩罗&#x27;</span>, <span class="string">&#x27;Comoros&#x27;</span>, <span class="string">&#x27;174&#x27;</span>, <span class="string">&#x27;269&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;49&#x27;</span>, <span class="string">&#x27;CG&#x27;</span>, <span class="string">&#x27;COG&#x27;</span>, <span class="string">&#x27;CONGO&#x27;</span>, <span class="string">&#x27;刚果&#x27;</span>, <span class="string">&#x27;Congo&#x27;</span>, <span class="string">&#x27;178&#x27;</span>, <span class="string">&#x27;242&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;50&#x27;</span>, <span class="string">&#x27;CD&#x27;</span>, <span class="string">&#x27;COD&#x27;</span>, <span class="string">&#x27;CONGO, THE DEMOCRATIC REPUBLIC OF THE&#x27;</span>, <span class="string">&#x27;刚果民主共和国的&#x27;</span>, <span class="string">&#x27;Congo, the Democratic Republic of the&#x27;</span>, <span class="string">&#x27;180&#x27;</span>, <span class="string">&#x27;242&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;51&#x27;</span>, <span class="string">&#x27;CK&#x27;</span>, <span class="string">&#x27;COK&#x27;</span>, <span class="string">&#x27;COOK ISLANDS&#x27;</span>, <span class="string">&#x27;库克群岛&#x27;</span>, <span class="string">&#x27;Cook Islands&#x27;</span>, <span class="string">&#x27;184&#x27;</span>, <span class="string">&#x27;682&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;52&#x27;</span>, <span class="string">&#x27;CR&#x27;</span>, <span class="string">&#x27;CRI&#x27;</span>, <span class="string">&#x27;COSTA RICA&#x27;</span>, <span class="string">&#x27;哥斯达黎加&#x27;</span>, <span class="string">&#x27;Costa Rica&#x27;</span>, <span class="string">&#x27;188&#x27;</span>, <span class="string">&#x27;506&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;53&#x27;</span>, <span class="string">&#x27;CI&#x27;</span>, <span class="string">&#x27;CIV&#x27;</span>, <span class="string">&#x27;COTE D\&#x27;</span>IVOIRE<span class="string">&#x27;, &#x27;</span>科特迪瓦<span class="string">&#x27;, &#x27;</span>Cote D\<span class="string">&#x27;Ivoire&#x27;</span>, <span class="string">&#x27;384&#x27;</span>, <span class="string">&#x27;225&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;54&#x27;</span>, <span class="string">&#x27;HR&#x27;</span>, <span class="string">&#x27;HRV&#x27;</span>, <span class="string">&#x27;CROATIA&#x27;</span>, <span class="string">&#x27;克罗地亚&#x27;</span>, <span class="string">&#x27;Croatia&#x27;</span>, <span class="string">&#x27;191&#x27;</span>, <span class="string">&#x27;385&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;55&#x27;</span>, <span class="string">&#x27;CU&#x27;</span>, <span class="string">&#x27;CUB&#x27;</span>, <span class="string">&#x27;CUBA&#x27;</span>, <span class="string">&#x27;古巴&#x27;</span>, <span class="string">&#x27;Cuba&#x27;</span>, <span class="string">&#x27;192&#x27;</span>, <span class="string">&#x27;53&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;56&#x27;</span>, <span class="string">&#x27;CY&#x27;</span>, <span class="string">&#x27;CYP&#x27;</span>, <span class="string">&#x27;CYPRUS&#x27;</span>, <span class="string">&#x27;塞浦路斯&#x27;</span>, <span class="string">&#x27;Cyprus&#x27;</span>, <span class="string">&#x27;196&#x27;</span>, <span class="string">&#x27;357&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;57&#x27;</span>, <span class="string">&#x27;CZ&#x27;</span>, <span class="string">&#x27;CZE&#x27;</span>, <span class="string">&#x27;CZECH REPUBLIC&#x27;</span>, <span class="string">&#x27;捷克共和国&#x27;</span>, <span class="string">&#x27;Czech Republic&#x27;</span>, <span class="string">&#x27;203&#x27;</span>, <span class="string">&#x27;420&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;58&#x27;</span>, <span class="string">&#x27;DK&#x27;</span>, <span class="string">&#x27;DNK&#x27;</span>, <span class="string">&#x27;DENMARK&#x27;</span>, <span class="string">&#x27;丹麦&#x27;</span>, <span class="string">&#x27;Denmark&#x27;</span>, <span class="string">&#x27;208&#x27;</span>, <span class="string">&#x27;45&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;59&#x27;</span>, <span class="string">&#x27;DJ&#x27;</span>, <span class="string">&#x27;DJI&#x27;</span>, <span class="string">&#x27;DJIBOUTI&#x27;</span>, <span class="string">&#x27;吉布提&#x27;</span>, <span class="string">&#x27;Djibouti&#x27;</span>, <span class="string">&#x27;262&#x27;</span>, <span class="string">&#x27;253&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;60&#x27;</span>, <span class="string">&#x27;DM&#x27;</span>, <span class="string">&#x27;DMA&#x27;</span>, <span class="string">&#x27;DOMINICA&#x27;</span>, <span class="string">&#x27;多米尼加&#x27;</span>, <span class="string">&#x27;Dominica&#x27;</span>, <span class="string">&#x27;212&#x27;</span>, <span class="string">&#x27;1767&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;61&#x27;</span>, <span class="string">&#x27;DO&#x27;</span>, <span class="string">&#x27;DOM&#x27;</span>, <span class="string">&#x27;DOMINICAN REPUBLIC&#x27;</span>, <span class="string">&#x27;多米尼加共和国&#x27;</span>, <span class="string">&#x27;Dominican Republic&#x27;</span>, <span class="string">&#x27;214&#x27;</span>, <span class="string">&#x27;1809&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;62&#x27;</span>, <span class="string">&#x27;EC&#x27;</span>, <span class="string">&#x27;ECU&#x27;</span>, <span class="string">&#x27;ECUADOR&#x27;</span>, <span class="string">&#x27;厄瓜多尔&#x27;</span>, <span class="string">&#x27;Ecuador&#x27;</span>, <span class="string">&#x27;218&#x27;</span>, <span class="string">&#x27;593&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;63&#x27;</span>, <span class="string">&#x27;EG&#x27;</span>, <span class="string">&#x27;EGY&#x27;</span>, <span class="string">&#x27;EGYPT&#x27;</span>, <span class="string">&#x27;埃及&#x27;</span>, <span class="string">&#x27;Egypt&#x27;</span>, <span class="string">&#x27;818&#x27;</span>, <span class="string">&#x27;20&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;64&#x27;</span>, <span class="string">&#x27;SV&#x27;</span>, <span class="string">&#x27;SLV&#x27;</span>, <span class="string">&#x27;EL SALVADOR&#x27;</span>, <span class="string">&#x27;萨尔瓦多&#x27;</span>, <span class="string">&#x27;El Salvador&#x27;</span>, <span class="string">&#x27;222&#x27;</span>, <span class="string">&#x27;503&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;65&#x27;</span>, <span class="string">&#x27;GQ&#x27;</span>, <span class="string">&#x27;GNQ&#x27;</span>, <span class="string">&#x27;EQUATORIAL GUINEA&#x27;</span>, <span class="string">&#x27;赤道几内亚&#x27;</span>, <span class="string">&#x27;Equatorial Guinea&#x27;</span>, <span class="string">&#x27;226&#x27;</span>, <span class="string">&#x27;240&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;66&#x27;</span>, <span class="string">&#x27;ER&#x27;</span>, <span class="string">&#x27;ERI&#x27;</span>, <span class="string">&#x27;ERITREA&#x27;</span>, <span class="string">&#x27;厄立特里亚&#x27;</span>, <span class="string">&#x27;Eritrea&#x27;</span>, <span class="string">&#x27;232&#x27;</span>, <span class="string">&#x27;291&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;67&#x27;</span>, <span class="string">&#x27;EE&#x27;</span>, <span class="string">&#x27;EST&#x27;</span>, <span class="string">&#x27;ESTONIA&#x27;</span>, <span class="string">&#x27;爱沙尼亚&#x27;</span>, <span class="string">&#x27;Estonia&#x27;</span>, <span class="string">&#x27;233&#x27;</span>, <span class="string">&#x27;372&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;68&#x27;</span>, <span class="string">&#x27;ET&#x27;</span>, <span class="string">&#x27;ETH&#x27;</span>, <span class="string">&#x27;ETHIOPIA&#x27;</span>, <span class="string">&#x27;埃塞俄比亚&#x27;</span>, <span class="string">&#x27;Ethiopia&#x27;</span>, <span class="string">&#x27;231&#x27;</span>, <span class="string">&#x27;251&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;69&#x27;</span>, <span class="string">&#x27;FK&#x27;</span>, <span class="string">&#x27;FLK&#x27;</span>, <span class="string">&#x27;FALKLAND ISLANDS (MALVINAS)&#x27;</span>, <span class="string">&#x27;福克兰群岛(马尔维纳斯)&#x27;</span>, <span class="string">&#x27;Falkland Islands (Malvinas)&#x27;</span>, <span class="string">&#x27;238&#x27;</span>, <span class="string">&#x27;500&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;70&#x27;</span>, <span class="string">&#x27;FO&#x27;</span>, <span class="string">&#x27;FRO&#x27;</span>, <span class="string">&#x27;FAROE ISLANDS&#x27;</span>, <span class="string">&#x27;法罗群岛&#x27;</span>, <span class="string">&#x27;Faroe Islands&#x27;</span>, <span class="string">&#x27;234&#x27;</span>, <span class="string">&#x27;298&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;71&#x27;</span>, <span class="string">&#x27;FJ&#x27;</span>, <span class="string">&#x27;FJI&#x27;</span>, <span class="string">&#x27;FIJI&#x27;</span>, <span class="string">&#x27;斐济&#x27;</span>, <span class="string">&#x27;Fiji&#x27;</span>, <span class="string">&#x27;242&#x27;</span>, <span class="string">&#x27;679&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;72&#x27;</span>, <span class="string">&#x27;FI&#x27;</span>, <span class="string">&#x27;FIN&#x27;</span>, <span class="string">&#x27;FINLAND&#x27;</span>, <span class="string">&#x27;芬兰&#x27;</span>, <span class="string">&#x27;Finland&#x27;</span>, <span class="string">&#x27;246&#x27;</span>, <span class="string">&#x27;358&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;73&#x27;</span>, <span class="string">&#x27;FR&#x27;</span>, <span class="string">&#x27;FRA&#x27;</span>, <span class="string">&#x27;FRANCE&#x27;</span>, <span class="string">&#x27;法国&#x27;</span>, <span class="string">&#x27;France&#x27;</span>, <span class="string">&#x27;250&#x27;</span>, <span class="string">&#x27;33&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;74&#x27;</span>, <span class="string">&#x27;GF&#x27;</span>, <span class="string">&#x27;GUF&#x27;</span>, <span class="string">&#x27;FRENCH GUIANA&#x27;</span>, <span class="string">&#x27;法属圭亚那&#x27;</span>, <span class="string">&#x27;French Guiana&#x27;</span>, <span class="string">&#x27;254&#x27;</span>, <span class="string">&#x27;594&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;75&#x27;</span>, <span class="string">&#x27;PF&#x27;</span>, <span class="string">&#x27;PYF&#x27;</span>, <span class="string">&#x27;FRENCH POLYNESIA&#x27;</span>, <span class="string">&#x27;法属波利尼西亚&#x27;</span>, <span class="string">&#x27;French Polynesia&#x27;</span>, <span class="string">&#x27;258&#x27;</span>, <span class="string">&#x27;689&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;TF&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;FRENCH SOUTHERN TERRITORIES&#x27;</span>, <span class="string">&#x27;法国南部地区&#x27;</span>, <span class="string">&#x27;French Southern Territories&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;77&#x27;</span>, <span class="string">&#x27;GA&#x27;</span>, <span class="string">&#x27;GAB&#x27;</span>, <span class="string">&#x27;GABON&#x27;</span>, <span class="string">&#x27;加蓬&#x27;</span>, <span class="string">&#x27;Gabon&#x27;</span>, <span class="string">&#x27;266&#x27;</span>, <span class="string">&#x27;241&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;78&#x27;</span>, <span class="string">&#x27;GM&#x27;</span>, <span class="string">&#x27;GMB&#x27;</span>, <span class="string">&#x27;GAMBIA&#x27;</span>, <span class="string">&#x27;冈比亚&#x27;</span>, <span class="string">&#x27;Gambia&#x27;</span>, <span class="string">&#x27;270&#x27;</span>, <span class="string">&#x27;220&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;79&#x27;</span>, <span class="string">&#x27;GE&#x27;</span>, <span class="string">&#x27;GEO&#x27;</span>, <span class="string">&#x27;GEORGIA&#x27;</span>, <span class="string">&#x27;乔治亚州&#x27;</span>, <span class="string">&#x27;Georgia&#x27;</span>, <span class="string">&#x27;268&#x27;</span>, <span class="string">&#x27;995&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;80&#x27;</span>, <span class="string">&#x27;DE&#x27;</span>, <span class="string">&#x27;DEU&#x27;</span>, <span class="string">&#x27;GERMANY&#x27;</span>, <span class="string">&#x27;德国&#x27;</span>, <span class="string">&#x27;Germany&#x27;</span>, <span class="string">&#x27;276&#x27;</span>, <span class="string">&#x27;49&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;81&#x27;</span>, <span class="string">&#x27;GH&#x27;</span>, <span class="string">&#x27;GHA&#x27;</span>, <span class="string">&#x27;GHANA&#x27;</span>, <span class="string">&#x27;加纳&#x27;</span>, <span class="string">&#x27;Ghana&#x27;</span>, <span class="string">&#x27;288&#x27;</span>, <span class="string">&#x27;233&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;82&#x27;</span>, <span class="string">&#x27;GI&#x27;</span>, <span class="string">&#x27;GIB&#x27;</span>, <span class="string">&#x27;GIBRALTAR&#x27;</span>, <span class="string">&#x27;直布罗陀&#x27;</span>, <span class="string">&#x27;Gibraltar&#x27;</span>, <span class="string">&#x27;292&#x27;</span>, <span class="string">&#x27;350&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;83&#x27;</span>, <span class="string">&#x27;GR&#x27;</span>, <span class="string">&#x27;GRC&#x27;</span>, <span class="string">&#x27;GREECE&#x27;</span>, <span class="string">&#x27;希腊&#x27;</span>, <span class="string">&#x27;Greece&#x27;</span>, <span class="string">&#x27;300&#x27;</span>, <span class="string">&#x27;30&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;84&#x27;</span>, <span class="string">&#x27;GL&#x27;</span>, <span class="string">&#x27;GRL&#x27;</span>, <span class="string">&#x27;GREENLAND&#x27;</span>, <span class="string">&#x27;格陵兰岛&#x27;</span>, <span class="string">&#x27;Greenland&#x27;</span>, <span class="string">&#x27;304&#x27;</span>, <span class="string">&#x27;299&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;85&#x27;</span>, <span class="string">&#x27;GD&#x27;</span>, <span class="string">&#x27;GRD&#x27;</span>, <span class="string">&#x27;GRENADA&#x27;</span>, <span class="string">&#x27;格林纳达&#x27;</span>, <span class="string">&#x27;Grenada&#x27;</span>, <span class="string">&#x27;308&#x27;</span>, <span class="string">&#x27;1473&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;86&#x27;</span>, <span class="string">&#x27;GP&#x27;</span>, <span class="string">&#x27;GLP&#x27;</span>, <span class="string">&#x27;GUADELOUPE&#x27;</span>, <span class="string">&#x27;瓜德罗普岛&#x27;</span>, <span class="string">&#x27;Guadeloupe&#x27;</span>, <span class="string">&#x27;312&#x27;</span>, <span class="string">&#x27;590&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;87&#x27;</span>, <span class="string">&#x27;GU&#x27;</span>, <span class="string">&#x27;GUM&#x27;</span>, <span class="string">&#x27;GUAM&#x27;</span>, <span class="string">&#x27;关岛&#x27;</span>, <span class="string">&#x27;Guam&#x27;</span>, <span class="string">&#x27;316&#x27;</span>, <span class="string">&#x27;1671&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;88&#x27;</span>, <span class="string">&#x27;GT&#x27;</span>, <span class="string">&#x27;GTM&#x27;</span>, <span class="string">&#x27;GUATEMALA&#x27;</span>, <span class="string">&#x27;危地马拉&#x27;</span>, <span class="string">&#x27;Guatemala&#x27;</span>, <span class="string">&#x27;320&#x27;</span>, <span class="string">&#x27;502&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;89&#x27;</span>, <span class="string">&#x27;GN&#x27;</span>, <span class="string">&#x27;GIN&#x27;</span>, <span class="string">&#x27;GUINEA&#x27;</span>, <span class="string">&#x27;几内亚&#x27;</span>, <span class="string">&#x27;Guinea&#x27;</span>, <span class="string">&#x27;324&#x27;</span>, <span class="string">&#x27;224&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;90&#x27;</span>, <span class="string">&#x27;GW&#x27;</span>, <span class="string">&#x27;GNB&#x27;</span>, <span class="string">&#x27;GUINEA-BISSAU&#x27;</span>, <span class="string">&#x27;几内亚比绍&#x27;</span>, <span class="string">&#x27;Guinea-Bissau&#x27;</span>, <span class="string">&#x27;624&#x27;</span>, <span class="string">&#x27;245&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;91&#x27;</span>, <span class="string">&#x27;GY&#x27;</span>, <span class="string">&#x27;GUY&#x27;</span>, <span class="string">&#x27;GUYANA&#x27;</span>, <span class="string">&#x27;圭亚那&#x27;</span>, <span class="string">&#x27;Guyana&#x27;</span>, <span class="string">&#x27;328&#x27;</span>, <span class="string">&#x27;592&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;92&#x27;</span>, <span class="string">&#x27;HT&#x27;</span>, <span class="string">&#x27;HTI&#x27;</span>, <span class="string">&#x27;HAITI&#x27;</span>, <span class="string">&#x27;海地&#x27;</span>, <span class="string">&#x27;Haiti&#x27;</span>, <span class="string">&#x27;332&#x27;</span>, <span class="string">&#x27;509&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;93&#x27;</span>, <span class="string">&#x27;HM&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;HEARD ISLAND AND MCDONALD ISLANDS&#x27;</span>, <span class="string">&#x27;听到岛和麦当劳的岛屿&#x27;</span>, <span class="string">&#x27;Heard Island and Mcdonald Islands&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;94&#x27;</span>, <span class="string">&#x27;VA&#x27;</span>, <span class="string">&#x27;VAT&#x27;</span>, <span class="string">&#x27;HOLY SEE (VATICAN CITY STATE)&#x27;</span>, <span class="string">&#x27;教廷(梵蒂冈)&#x27;</span>, <span class="string">&#x27;Holy See (Vatican City State)&#x27;</span>, <span class="string">&#x27;336&#x27;</span>, <span class="string">&#x27;39&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;95&#x27;</span>, <span class="string">&#x27;HN&#x27;</span>, <span class="string">&#x27;HND&#x27;</span>, <span class="string">&#x27;HONDURAS&#x27;</span>, <span class="string">&#x27;洪都拉斯&#x27;</span>, <span class="string">&#x27;Honduras&#x27;</span>, <span class="string">&#x27;340&#x27;</span>, <span class="string">&#x27;504&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;96&#x27;</span>, <span class="string">&#x27;HK&#x27;</span>, <span class="string">&#x27;HKG&#x27;</span>, <span class="string">&#x27;HONG KONG&#x27;</span>, <span class="string">&#x27;香港&#x27;</span>, <span class="string">&#x27;Hong Kong&#x27;</span>, <span class="string">&#x27;344&#x27;</span>, <span class="string">&#x27;852&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;97&#x27;</span>, <span class="string">&#x27;HU&#x27;</span>, <span class="string">&#x27;HUN&#x27;</span>, <span class="string">&#x27;HUNGARY&#x27;</span>, <span class="string">&#x27;匈牙利&#x27;</span>, <span class="string">&#x27;Hungary&#x27;</span>, <span class="string">&#x27;348&#x27;</span>, <span class="string">&#x27;36&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;98&#x27;</span>, <span class="string">&#x27;IS&#x27;</span>, <span class="string">&#x27;ISL&#x27;</span>, <span class="string">&#x27;ICELAND&#x27;</span>, <span class="string">&#x27;冰岛&#x27;</span>, <span class="string">&#x27;Iceland&#x27;</span>, <span class="string">&#x27;352&#x27;</span>, <span class="string">&#x27;354&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;99&#x27;</span>, <span class="string">&#x27;IN&#x27;</span>, <span class="string">&#x27;IND&#x27;</span>, <span class="string">&#x27;INDIA&#x27;</span>, <span class="string">&#x27;印度&#x27;</span>, <span class="string">&#x27;India&#x27;</span>, <span class="string">&#x27;356&#x27;</span>, <span class="string">&#x27;91&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;100&#x27;</span>, <span class="string">&#x27;ID&#x27;</span>, <span class="string">&#x27;IDN&#x27;</span>, <span class="string">&#x27;INDONESIA&#x27;</span>, <span class="string">&#x27;印尼&#x27;</span>, <span class="string">&#x27;Indonesia&#x27;</span>, <span class="string">&#x27;360&#x27;</span>, <span class="string">&#x27;62&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;101&#x27;</span>, <span class="string">&#x27;IR&#x27;</span>, <span class="string">&#x27;IRN&#x27;</span>, <span class="string">&#x27;IRAN, ISLAMIC REPUBLIC OF&#x27;</span>, <span class="string">&#x27;伊朗伊斯兰共和国&#x27;</span>, <span class="string">&#x27;Iran, Islamic Republic of&#x27;</span>, <span class="string">&#x27;364&#x27;</span>, <span class="string">&#x27;98&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;102&#x27;</span>, <span class="string">&#x27;IQ&#x27;</span>, <span class="string">&#x27;IRQ&#x27;</span>, <span class="string">&#x27;IRAQ&#x27;</span>, <span class="string">&#x27;伊拉克&#x27;</span>, <span class="string">&#x27;Iraq&#x27;</span>, <span class="string">&#x27;368&#x27;</span>, <span class="string">&#x27;964&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;103&#x27;</span>, <span class="string">&#x27;IE&#x27;</span>, <span class="string">&#x27;IRL&#x27;</span>, <span class="string">&#x27;IRELAND&#x27;</span>, <span class="string">&#x27;爱尔兰&#x27;</span>, <span class="string">&#x27;Ireland&#x27;</span>, <span class="string">&#x27;372&#x27;</span>, <span class="string">&#x27;353&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;104&#x27;</span>, <span class="string">&#x27;IL&#x27;</span>, <span class="string">&#x27;ISR&#x27;</span>, <span class="string">&#x27;ISRAEL&#x27;</span>, <span class="string">&#x27;以色列&#x27;</span>, <span class="string">&#x27;Israel&#x27;</span>, <span class="string">&#x27;376&#x27;</span>, <span class="string">&#x27;972&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;105&#x27;</span>, <span class="string">&#x27;IT&#x27;</span>, <span class="string">&#x27;ITA&#x27;</span>, <span class="string">&#x27;ITALY&#x27;</span>, <span class="string">&#x27;意大利&#x27;</span>, <span class="string">&#x27;Italy&#x27;</span>, <span class="string">&#x27;380&#x27;</span>, <span class="string">&#x27;39&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;106&#x27;</span>, <span class="string">&#x27;JM&#x27;</span>, <span class="string">&#x27;JAM&#x27;</span>, <span class="string">&#x27;JAMAICA&#x27;</span>, <span class="string">&#x27;牙买加&#x27;</span>, <span class="string">&#x27;Jamaica&#x27;</span>, <span class="string">&#x27;388&#x27;</span>, <span class="string">&#x27;1876&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;107&#x27;</span>, <span class="string">&#x27;JP&#x27;</span>, <span class="string">&#x27;JPN&#x27;</span>, <span class="string">&#x27;JAPAN&#x27;</span>, <span class="string">&#x27;日本&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>, <span class="string">&#x27;392&#x27;</span>, <span class="string">&#x27;81&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;108&#x27;</span>, <span class="string">&#x27;JO&#x27;</span>, <span class="string">&#x27;JOR&#x27;</span>, <span class="string">&#x27;JORDAN&#x27;</span>, <span class="string">&#x27;约旦&#x27;</span>, <span class="string">&#x27;Jordan&#x27;</span>, <span class="string">&#x27;400&#x27;</span>, <span class="string">&#x27;962&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;109&#x27;</span>, <span class="string">&#x27;KZ&#x27;</span>, <span class="string">&#x27;KAZ&#x27;</span>, <span class="string">&#x27;KAZAKHSTAN&#x27;</span>, <span class="string">&#x27;哈萨克斯坦&#x27;</span>, <span class="string">&#x27;Kazakhstan&#x27;</span>, <span class="string">&#x27;398&#x27;</span>, <span class="string">&#x27;7&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;110&#x27;</span>, <span class="string">&#x27;KE&#x27;</span>, <span class="string">&#x27;KEN&#x27;</span>, <span class="string">&#x27;KENYA&#x27;</span>, <span class="string">&#x27;肯尼亚&#x27;</span>, <span class="string">&#x27;Kenya&#x27;</span>, <span class="string">&#x27;404&#x27;</span>, <span class="string">&#x27;254&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;111&#x27;</span>, <span class="string">&#x27;KI&#x27;</span>, <span class="string">&#x27;KIR&#x27;</span>, <span class="string">&#x27;KIRIBATI&#x27;</span>, <span class="string">&#x27;基里巴斯&#x27;</span>, <span class="string">&#x27;Kiribati&#x27;</span>, <span class="string">&#x27;296&#x27;</span>, <span class="string">&#x27;686&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;112&#x27;</span>, <span class="string">&#x27;KP&#x27;</span>, <span class="string">&#x27;PRK&#x27;</span>, <span class="string">&#x27;KOREA, DEMOCRATIC PEOPLE\&#x27;</span>S REPUBLIC <span class="keyword">OF</span><span class="string">&#x27;, &#x27;</span>朝鲜民主主义人民共和国<span class="string">&#x27;, &#x27;</span>Korea, Democratic People\<span class="string">&#x27;s Republic of&#x27;</span>, <span class="string">&#x27;408&#x27;</span>, <span class="string">&#x27;850&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;113&#x27;</span>, <span class="string">&#x27;KR&#x27;</span>, <span class="string">&#x27;KOR&#x27;</span>, <span class="string">&#x27;KOREA, REPUBLIC OF&#x27;</span>, <span class="string">&#x27;朝鲜共和国&#x27;</span>, <span class="string">&#x27;Korea, Republic of&#x27;</span>, <span class="string">&#x27;410&#x27;</span>, <span class="string">&#x27;82&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;114&#x27;</span>, <span class="string">&#x27;KW&#x27;</span>, <span class="string">&#x27;KWT&#x27;</span>, <span class="string">&#x27;KUWAIT&#x27;</span>, <span class="string">&#x27;科威特&#x27;</span>, <span class="string">&#x27;Kuwait&#x27;</span>, <span class="string">&#x27;414&#x27;</span>, <span class="string">&#x27;965&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;115&#x27;</span>, <span class="string">&#x27;KG&#x27;</span>, <span class="string">&#x27;KGZ&#x27;</span>, <span class="string">&#x27;KYRGYZSTAN&#x27;</span>, <span class="string">&#x27;吉尔吉斯斯坦&#x27;</span>, <span class="string">&#x27;Kyrgyzstan&#x27;</span>, <span class="string">&#x27;417&#x27;</span>, <span class="string">&#x27;996&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;116&#x27;</span>, <span class="string">&#x27;LA&#x27;</span>, <span class="string">&#x27;LAO&#x27;</span>, <span class="string">&#x27;LAO PEOPLE\&#x27;</span>S DEMOCRATIC REPUBLIC<span class="string">&#x27;, &#x27;</span>老挝人民民主共和国<span class="string">&#x27;, &#x27;</span>Lao People\<span class="string">&#x27;s Democratic Republic&#x27;</span>, <span class="string">&#x27;418&#x27;</span>, <span class="string">&#x27;856&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;117&#x27;</span>, <span class="string">&#x27;LV&#x27;</span>, <span class="string">&#x27;LVA&#x27;</span>, <span class="string">&#x27;LATVIA&#x27;</span>, <span class="string">&#x27;拉脱维亚&#x27;</span>, <span class="string">&#x27;Latvia&#x27;</span>, <span class="string">&#x27;428&#x27;</span>, <span class="string">&#x27;371&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;118&#x27;</span>, <span class="string">&#x27;LB&#x27;</span>, <span class="string">&#x27;LBN&#x27;</span>, <span class="string">&#x27;LEBANON&#x27;</span>, <span class="string">&#x27;黎巴嫩&#x27;</span>, <span class="string">&#x27;Lebanon&#x27;</span>, <span class="string">&#x27;422&#x27;</span>, <span class="string">&#x27;961&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;119&#x27;</span>, <span class="string">&#x27;LS&#x27;</span>, <span class="string">&#x27;LSO&#x27;</span>, <span class="string">&#x27;LESOTHO&#x27;</span>, <span class="string">&#x27;莱索托&#x27;</span>, <span class="string">&#x27;Lesotho&#x27;</span>, <span class="string">&#x27;426&#x27;</span>, <span class="string">&#x27;266&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;120&#x27;</span>, <span class="string">&#x27;LR&#x27;</span>, <span class="string">&#x27;LBR&#x27;</span>, <span class="string">&#x27;LIBERIA&#x27;</span>, <span class="string">&#x27;利比里亚&#x27;</span>, <span class="string">&#x27;Liberia&#x27;</span>, <span class="string">&#x27;430&#x27;</span>, <span class="string">&#x27;231&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;121&#x27;</span>, <span class="string">&#x27;LY&#x27;</span>, <span class="string">&#x27;LBY&#x27;</span>, <span class="string">&#x27;LIBYAN ARAB JAMAHIRIYA&#x27;</span>, <span class="string">&#x27;阿拉伯利比亚民众国&#x27;</span>, <span class="string">&#x27;Libyan Arab Jamahiriya&#x27;</span>, <span class="string">&#x27;434&#x27;</span>, <span class="string">&#x27;218&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;122&#x27;</span>, <span class="string">&#x27;LI&#x27;</span>, <span class="string">&#x27;LIE&#x27;</span>, <span class="string">&#x27;LIECHTENSTEIN&#x27;</span>, <span class="string">&#x27;列支敦斯登&#x27;</span>, <span class="string">&#x27;Liechtenstein&#x27;</span>, <span class="string">&#x27;438&#x27;</span>, <span class="string">&#x27;423&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;123&#x27;</span>, <span class="string">&#x27;LT&#x27;</span>, <span class="string">&#x27;LTU&#x27;</span>, <span class="string">&#x27;LITHUANIA&#x27;</span>, <span class="string">&#x27;立陶宛&#x27;</span>, <span class="string">&#x27;Lithuania&#x27;</span>, <span class="string">&#x27;440&#x27;</span>, <span class="string">&#x27;370&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;124&#x27;</span>, <span class="string">&#x27;LU&#x27;</span>, <span class="string">&#x27;LUX&#x27;</span>, <span class="string">&#x27;LUXEMBOURG&#x27;</span>, <span class="string">&#x27;卢森堡&#x27;</span>, <span class="string">&#x27;Luxembourg&#x27;</span>, <span class="string">&#x27;442&#x27;</span>, <span class="string">&#x27;352&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;125&#x27;</span>, <span class="string">&#x27;MO&#x27;</span>, <span class="string">&#x27;MAC&#x27;</span>, <span class="string">&#x27;MACAO&#x27;</span>, <span class="string">&#x27;澳门&#x27;</span>, <span class="string">&#x27;Macao&#x27;</span>, <span class="string">&#x27;446&#x27;</span>, <span class="string">&#x27;853&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;126&#x27;</span>, <span class="string">&#x27;MK&#x27;</span>, <span class="string">&#x27;MKD&#x27;</span>, <span class="string">&#x27;MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF&#x27;</span>, <span class="string">&#x27;前南斯拉夫马其顿共和国&#x27;</span>, <span class="string">&#x27;Macedonia, the Former Yugoslav Republic of&#x27;</span>, <span class="string">&#x27;807&#x27;</span>, <span class="string">&#x27;389&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;127&#x27;</span>, <span class="string">&#x27;MG&#x27;</span>, <span class="string">&#x27;MDG&#x27;</span>, <span class="string">&#x27;MADAGASCAR&#x27;</span>, <span class="string">&#x27;马达加斯加&#x27;</span>, <span class="string">&#x27;Madagascar&#x27;</span>, <span class="string">&#x27;450&#x27;</span>, <span class="string">&#x27;261&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;128&#x27;</span>, <span class="string">&#x27;MW&#x27;</span>, <span class="string">&#x27;MWI&#x27;</span>, <span class="string">&#x27;MALAWI&#x27;</span>, <span class="string">&#x27;马拉维&#x27;</span>, <span class="string">&#x27;Malawi&#x27;</span>, <span class="string">&#x27;454&#x27;</span>, <span class="string">&#x27;265&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;129&#x27;</span>, <span class="string">&#x27;MY&#x27;</span>, <span class="string">&#x27;MYS&#x27;</span>, <span class="string">&#x27;MALAYSIA&#x27;</span>, <span class="string">&#x27;马来西亚&#x27;</span>, <span class="string">&#x27;Malaysia&#x27;</span>, <span class="string">&#x27;458&#x27;</span>, <span class="string">&#x27;60&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;130&#x27;</span>, <span class="string">&#x27;MV&#x27;</span>, <span class="string">&#x27;MDV&#x27;</span>, <span class="string">&#x27;MALDIVES&#x27;</span>, <span class="string">&#x27;马尔代夫&#x27;</span>, <span class="string">&#x27;Maldives&#x27;</span>, <span class="string">&#x27;462&#x27;</span>, <span class="string">&#x27;960&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;131&#x27;</span>, <span class="string">&#x27;ML&#x27;</span>, <span class="string">&#x27;MLI&#x27;</span>, <span class="string">&#x27;MALI&#x27;</span>, <span class="string">&#x27;马里&#x27;</span>, <span class="string">&#x27;Mali&#x27;</span>, <span class="string">&#x27;466&#x27;</span>, <span class="string">&#x27;223&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;132&#x27;</span>, <span class="string">&#x27;MT&#x27;</span>, <span class="string">&#x27;MLT&#x27;</span>, <span class="string">&#x27;MALTA&#x27;</span>, <span class="string">&#x27;马耳他&#x27;</span>, <span class="string">&#x27;Malta&#x27;</span>, <span class="string">&#x27;470&#x27;</span>, <span class="string">&#x27;356&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;133&#x27;</span>, <span class="string">&#x27;MH&#x27;</span>, <span class="string">&#x27;MHL&#x27;</span>, <span class="string">&#x27;MARSHALL ISLANDS&#x27;</span>, <span class="string">&#x27;马绍尔群岛&#x27;</span>, <span class="string">&#x27;Marshall Islands&#x27;</span>, <span class="string">&#x27;584&#x27;</span>, <span class="string">&#x27;692&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;134&#x27;</span>, <span class="string">&#x27;MQ&#x27;</span>, <span class="string">&#x27;MTQ&#x27;</span>, <span class="string">&#x27;MARTINIQUE&#x27;</span>, <span class="string">&#x27;马提尼克岛&#x27;</span>, <span class="string">&#x27;Martinique&#x27;</span>, <span class="string">&#x27;474&#x27;</span>, <span class="string">&#x27;596&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;135&#x27;</span>, <span class="string">&#x27;MR&#x27;</span>, <span class="string">&#x27;MRT&#x27;</span>, <span class="string">&#x27;MAURITANIA&#x27;</span>, <span class="string">&#x27;毛利塔尼亚&#x27;</span>, <span class="string">&#x27;Mauritania&#x27;</span>, <span class="string">&#x27;478&#x27;</span>, <span class="string">&#x27;222&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;136&#x27;</span>, <span class="string">&#x27;MU&#x27;</span>, <span class="string">&#x27;MUS&#x27;</span>, <span class="string">&#x27;MAURITIUS&#x27;</span>, <span class="string">&#x27;毛里求斯&#x27;</span>, <span class="string">&#x27;Mauritius&#x27;</span>, <span class="string">&#x27;480&#x27;</span>, <span class="string">&#x27;230&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;137&#x27;</span>, <span class="string">&#x27;YT&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;MAYOTTE&#x27;</span>, <span class="string">&#x27;马约特岛&#x27;</span>, <span class="string">&#x27;Mayotte&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;269&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;138&#x27;</span>, <span class="string">&#x27;MX&#x27;</span>, <span class="string">&#x27;MEX&#x27;</span>, <span class="string">&#x27;MEXICO&#x27;</span>, <span class="string">&#x27;墨西哥&#x27;</span>, <span class="string">&#x27;Mexico&#x27;</span>, <span class="string">&#x27;484&#x27;</span>, <span class="string">&#x27;52&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;139&#x27;</span>, <span class="string">&#x27;FM&#x27;</span>, <span class="string">&#x27;FSM&#x27;</span>, <span class="string">&#x27;MICRONESIA, FEDERATED STATES OF&#x27;</span>, <span class="string">&#x27;密克罗尼西亚联邦&#x27;</span>, <span class="string">&#x27;Micronesia, Federated States of&#x27;</span>, <span class="string">&#x27;583&#x27;</span>, <span class="string">&#x27;691&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;140&#x27;</span>, <span class="string">&#x27;MD&#x27;</span>, <span class="string">&#x27;MDA&#x27;</span>, <span class="string">&#x27;MOLDOVA, REPUBLIC OF&#x27;</span>, <span class="string">&#x27;摩尔多瓦共和国&#x27;</span>, <span class="string">&#x27;Moldova, Republic of&#x27;</span>, <span class="string">&#x27;498&#x27;</span>, <span class="string">&#x27;373&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;141&#x27;</span>, <span class="string">&#x27;MC&#x27;</span>, <span class="string">&#x27;MCO&#x27;</span>, <span class="string">&#x27;MONACO&#x27;</span>, <span class="string">&#x27;摩纳哥&#x27;</span>, <span class="string">&#x27;Monaco&#x27;</span>, <span class="string">&#x27;492&#x27;</span>, <span class="string">&#x27;377&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;142&#x27;</span>, <span class="string">&#x27;MN&#x27;</span>, <span class="string">&#x27;MNG&#x27;</span>, <span class="string">&#x27;MONGOLIA&#x27;</span>, <span class="string">&#x27;蒙古&#x27;</span>, <span class="string">&#x27;Mongolia&#x27;</span>, <span class="string">&#x27;496&#x27;</span>, <span class="string">&#x27;976&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;143&#x27;</span>, <span class="string">&#x27;MS&#x27;</span>, <span class="string">&#x27;MSR&#x27;</span>, <span class="string">&#x27;MONTSERRAT&#x27;</span>, <span class="string">&#x27;蒙特塞拉特&#x27;</span>, <span class="string">&#x27;Montserrat&#x27;</span>, <span class="string">&#x27;500&#x27;</span>, <span class="string">&#x27;1664&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;144&#x27;</span>, <span class="string">&#x27;MA&#x27;</span>, <span class="string">&#x27;MAR&#x27;</span>, <span class="string">&#x27;MOROCCO&#x27;</span>, <span class="string">&#x27;摩洛哥&#x27;</span>, <span class="string">&#x27;Morocco&#x27;</span>, <span class="string">&#x27;504&#x27;</span>, <span class="string">&#x27;212&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;145&#x27;</span>, <span class="string">&#x27;MZ&#x27;</span>, <span class="string">&#x27;MOZ&#x27;</span>, <span class="string">&#x27;MOZAMBIQUE&#x27;</span>, <span class="string">&#x27;MOZAMBIQUE&#x27;</span>, <span class="string">&#x27;Mozambique&#x27;</span>, <span class="string">&#x27;508&#x27;</span>, <span class="string">&#x27;258&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;146&#x27;</span>, <span class="string">&#x27;MM&#x27;</span>, <span class="string">&#x27;MMR&#x27;</span>, <span class="string">&#x27;MYANMAR&#x27;</span>, <span class="string">&#x27;缅甸&#x27;</span>, <span class="string">&#x27;Myanmar&#x27;</span>, <span class="string">&#x27;104&#x27;</span>, <span class="string">&#x27;95&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;147&#x27;</span>, <span class="string">&#x27;NA&#x27;</span>, <span class="string">&#x27;NAM&#x27;</span>, <span class="string">&#x27;NAMIBIA&#x27;</span>, <span class="string">&#x27;纳米比亚&#x27;</span>, <span class="string">&#x27;Namibia&#x27;</span>, <span class="string">&#x27;516&#x27;</span>, <span class="string">&#x27;264&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;148&#x27;</span>, <span class="string">&#x27;NR&#x27;</span>, <span class="string">&#x27;NRU&#x27;</span>, <span class="string">&#x27;NAURU&#x27;</span>, <span class="string">&#x27;瑙鲁&#x27;</span>, <span class="string">&#x27;Nauru&#x27;</span>, <span class="string">&#x27;520&#x27;</span>, <span class="string">&#x27;674&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;149&#x27;</span>, <span class="string">&#x27;NP&#x27;</span>, <span class="string">&#x27;NPL&#x27;</span>, <span class="string">&#x27;NEPAL&#x27;</span>, <span class="string">&#x27;尼泊尔&#x27;</span>, <span class="string">&#x27;Nepal&#x27;</span>, <span class="string">&#x27;524&#x27;</span>, <span class="string">&#x27;977&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;150&#x27;</span>, <span class="string">&#x27;NL&#x27;</span>, <span class="string">&#x27;NLD&#x27;</span>, <span class="string">&#x27;NETHERLANDS&#x27;</span>, <span class="string">&#x27;荷兰&#x27;</span>, <span class="string">&#x27;Netherlands&#x27;</span>, <span class="string">&#x27;528&#x27;</span>, <span class="string">&#x27;31&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;151&#x27;</span>, <span class="string">&#x27;AN&#x27;</span>, <span class="string">&#x27;ANT&#x27;</span>, <span class="string">&#x27;NETHERLANDS ANTILLES&#x27;</span>, <span class="string">&#x27;荷属安的列斯群岛&#x27;</span>, <span class="string">&#x27;Netherlands Antilles&#x27;</span>, <span class="string">&#x27;530&#x27;</span>, <span class="string">&#x27;599&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;152&#x27;</span>, <span class="string">&#x27;NC&#x27;</span>, <span class="string">&#x27;NCL&#x27;</span>, <span class="string">&#x27;NEW CALEDONIA&#x27;</span>, <span class="string">&#x27;新喀里多尼亚&#x27;</span>, <span class="string">&#x27;New Caledonia&#x27;</span>, <span class="string">&#x27;540&#x27;</span>, <span class="string">&#x27;687&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;153&#x27;</span>, <span class="string">&#x27;NZ&#x27;</span>, <span class="string">&#x27;NZL&#x27;</span>, <span class="string">&#x27;NEW ZEALAND&#x27;</span>, <span class="string">&#x27;新西兰&#x27;</span>, <span class="string">&#x27;New Zealand&#x27;</span>, <span class="string">&#x27;554&#x27;</span>, <span class="string">&#x27;64&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;154&#x27;</span>, <span class="string">&#x27;NI&#x27;</span>, <span class="string">&#x27;NIC&#x27;</span>, <span class="string">&#x27;NICARAGUA&#x27;</span>, <span class="string">&#x27;尼加拉瓜&#x27;</span>, <span class="string">&#x27;Nicaragua&#x27;</span>, <span class="string">&#x27;558&#x27;</span>, <span class="string">&#x27;505&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;155&#x27;</span>, <span class="string">&#x27;NE&#x27;</span>, <span class="string">&#x27;NER&#x27;</span>, <span class="string">&#x27;NIGER&#x27;</span>, <span class="string">&#x27;尼日尔&#x27;</span>, <span class="string">&#x27;Niger&#x27;</span>, <span class="string">&#x27;562&#x27;</span>, <span class="string">&#x27;227&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;156&#x27;</span>, <span class="string">&#x27;NG&#x27;</span>, <span class="string">&#x27;NGA&#x27;</span>, <span class="string">&#x27;NIGERIA&#x27;</span>, <span class="string">&#x27;尼日利亚&#x27;</span>, <span class="string">&#x27;Nigeria&#x27;</span>, <span class="string">&#x27;566&#x27;</span>, <span class="string">&#x27;234&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;157&#x27;</span>, <span class="string">&#x27;NU&#x27;</span>, <span class="string">&#x27;NIU&#x27;</span>, <span class="string">&#x27;NIUE&#x27;</span>, <span class="string">&#x27;纽埃岛&#x27;</span>, <span class="string">&#x27;Niue&#x27;</span>, <span class="string">&#x27;570&#x27;</span>, <span class="string">&#x27;683&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;158&#x27;</span>, <span class="string">&#x27;NF&#x27;</span>, <span class="string">&#x27;NFK&#x27;</span>, <span class="string">&#x27;NORFOLK ISLAND&#x27;</span>, <span class="string">&#x27;诺福克岛&#x27;</span>, <span class="string">&#x27;Norfolk Island&#x27;</span>, <span class="string">&#x27;574&#x27;</span>, <span class="string">&#x27;672&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;159&#x27;</span>, <span class="string">&#x27;MP&#x27;</span>, <span class="string">&#x27;MNP&#x27;</span>, <span class="string">&#x27;NORTHERN MARIANA ISLANDS&#x27;</span>, <span class="string">&#x27;北马里亚纳群岛&#x27;</span>, <span class="string">&#x27;Northern Mariana Islands&#x27;</span>, <span class="string">&#x27;580&#x27;</span>, <span class="string">&#x27;1670&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;160&#x27;</span>, <span class="string">&#x27;NO&#x27;</span>, <span class="string">&#x27;NOR&#x27;</span>, <span class="string">&#x27;NORWAY&#x27;</span>, <span class="string">&#x27;挪威&#x27;</span>, <span class="string">&#x27;Norway&#x27;</span>, <span class="string">&#x27;578&#x27;</span>, <span class="string">&#x27;47&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;161&#x27;</span>, <span class="string">&#x27;OM&#x27;</span>, <span class="string">&#x27;OMN&#x27;</span>, <span class="string">&#x27;OMAN&#x27;</span>, <span class="string">&#x27;阿曼&#x27;</span>, <span class="string">&#x27;Oman&#x27;</span>, <span class="string">&#x27;512&#x27;</span>, <span class="string">&#x27;968&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;162&#x27;</span>, <span class="string">&#x27;PK&#x27;</span>, <span class="string">&#x27;PAK&#x27;</span>, <span class="string">&#x27;PAKISTAN&#x27;</span>, <span class="string">&#x27;巴基斯坦&#x27;</span>, <span class="string">&#x27;Pakistan&#x27;</span>, <span class="string">&#x27;586&#x27;</span>, <span class="string">&#x27;92&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;163&#x27;</span>, <span class="string">&#x27;PW&#x27;</span>, <span class="string">&#x27;PLW&#x27;</span>, <span class="string">&#x27;PALAU&#x27;</span>, <span class="string">&#x27;帕劳&#x27;</span>, <span class="string">&#x27;Palau&#x27;</span>, <span class="string">&#x27;585&#x27;</span>, <span class="string">&#x27;680&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;164&#x27;</span>, <span class="string">&#x27;PS&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;PALESTINIAN TERRITORY, OCCUPIED&#x27;</span>, <span class="string">&#x27;巴勒斯坦的领土,占领&#x27;</span>, <span class="string">&#x27;Palestinian Territory, Occupied&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;970&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;165&#x27;</span>, <span class="string">&#x27;PA&#x27;</span>, <span class="string">&#x27;PAN&#x27;</span>, <span class="string">&#x27;PANAMA&#x27;</span>, <span class="string">&#x27;巴拿马&#x27;</span>, <span class="string">&#x27;Panama&#x27;</span>, <span class="string">&#x27;591&#x27;</span>, <span class="string">&#x27;507&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;166&#x27;</span>, <span class="string">&#x27;PG&#x27;</span>, <span class="string">&#x27;PNG&#x27;</span>, <span class="string">&#x27;PAPUA NEW GUINEA&#x27;</span>, <span class="string">&#x27;巴布新几内亚&#x27;</span>, <span class="string">&#x27;Papua New Guinea&#x27;</span>, <span class="string">&#x27;598&#x27;</span>, <span class="string">&#x27;675&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;167&#x27;</span>, <span class="string">&#x27;PY&#x27;</span>, <span class="string">&#x27;PRY&#x27;</span>, <span class="string">&#x27;PARAGUAY&#x27;</span>, <span class="string">&#x27;巴拉圭&#x27;</span>, <span class="string">&#x27;Paraguay&#x27;</span>, <span class="string">&#x27;600&#x27;</span>, <span class="string">&#x27;595&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;168&#x27;</span>, <span class="string">&#x27;PE&#x27;</span>, <span class="string">&#x27;PER&#x27;</span>, <span class="string">&#x27;PERU&#x27;</span>, <span class="string">&#x27;秘鲁&#x27;</span>, <span class="string">&#x27;Peru&#x27;</span>, <span class="string">&#x27;604&#x27;</span>, <span class="string">&#x27;51&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;169&#x27;</span>, <span class="string">&#x27;PH&#x27;</span>, <span class="string">&#x27;PHL&#x27;</span>, <span class="string">&#x27;PHILIPPINES&#x27;</span>, <span class="string">&#x27;菲律宾&#x27;</span>, <span class="string">&#x27;Philippines&#x27;</span>, <span class="string">&#x27;608&#x27;</span>, <span class="string">&#x27;63&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;170&#x27;</span>, <span class="string">&#x27;PN&#x27;</span>, <span class="string">&#x27;PCN&#x27;</span>, <span class="string">&#x27;PITCAIRN&#x27;</span>, <span class="string">&#x27;皮特克恩&#x27;</span>, <span class="string">&#x27;Pitcairn&#x27;</span>, <span class="string">&#x27;612&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;171&#x27;</span>, <span class="string">&#x27;PL&#x27;</span>, <span class="string">&#x27;POL&#x27;</span>, <span class="string">&#x27;POLAND&#x27;</span>, <span class="string">&#x27;波兰&#x27;</span>, <span class="string">&#x27;Poland&#x27;</span>, <span class="string">&#x27;616&#x27;</span>, <span class="string">&#x27;48&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;172&#x27;</span>, <span class="string">&#x27;PT&#x27;</span>, <span class="string">&#x27;PRT&#x27;</span>, <span class="string">&#x27;PORTUGAL&#x27;</span>, <span class="string">&#x27;葡萄牙&#x27;</span>, <span class="string">&#x27;Portugal&#x27;</span>, <span class="string">&#x27;620&#x27;</span>, <span class="string">&#x27;351&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;173&#x27;</span>, <span class="string">&#x27;PR&#x27;</span>, <span class="string">&#x27;PRI&#x27;</span>, <span class="string">&#x27;PUERTO RICO&#x27;</span>, <span class="string">&#x27;波多黎各&#x27;</span>, <span class="string">&#x27;Puerto Rico&#x27;</span>, <span class="string">&#x27;630&#x27;</span>, <span class="string">&#x27;1787&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;174&#x27;</span>, <span class="string">&#x27;QA&#x27;</span>, <span class="string">&#x27;QAT&#x27;</span>, <span class="string">&#x27;QATAR&#x27;</span>, <span class="string">&#x27;卡塔尔&#x27;</span>, <span class="string">&#x27;Qatar&#x27;</span>, <span class="string">&#x27;634&#x27;</span>, <span class="string">&#x27;974&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;175&#x27;</span>, <span class="string">&#x27;RE&#x27;</span>, <span class="string">&#x27;REU&#x27;</span>, <span class="string">&#x27;REUNION&#x27;</span>, <span class="string">&#x27;团聚&#x27;</span>, <span class="string">&#x27;Reunion&#x27;</span>, <span class="string">&#x27;638&#x27;</span>, <span class="string">&#x27;262&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;176&#x27;</span>, <span class="string">&#x27;RO&#x27;</span>, <span class="string">&#x27;ROM&#x27;</span>, <span class="string">&#x27;ROMANIA&#x27;</span>, <span class="string">&#x27;罗马尼亚&#x27;</span>, <span class="string">&#x27;Romania&#x27;</span>, <span class="string">&#x27;642&#x27;</span>, <span class="string">&#x27;40&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;177&#x27;</span>, <span class="string">&#x27;RU&#x27;</span>, <span class="string">&#x27;RUS&#x27;</span>, <span class="string">&#x27;RUSSIAN FEDERATION&#x27;</span>, <span class="string">&#x27;俄罗斯联邦&#x27;</span>, <span class="string">&#x27;Russian Federation&#x27;</span>, <span class="string">&#x27;643&#x27;</span>, <span class="string">&#x27;70&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;178&#x27;</span>, <span class="string">&#x27;RW&#x27;</span>, <span class="string">&#x27;RWA&#x27;</span>, <span class="string">&#x27;RWANDA&#x27;</span>, <span class="string">&#x27;卢旺达&#x27;</span>, <span class="string">&#x27;Rwanda&#x27;</span>, <span class="string">&#x27;646&#x27;</span>, <span class="string">&#x27;250&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;179&#x27;</span>, <span class="string">&#x27;SH&#x27;</span>, <span class="string">&#x27;SHN&#x27;</span>, <span class="string">&#x27;SAINT HELENA&#x27;</span>, <span class="string">&#x27;圣赫勒拿&#x27;</span>, <span class="string">&#x27;Saint Helena&#x27;</span>, <span class="string">&#x27;654&#x27;</span>, <span class="string">&#x27;290&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;180&#x27;</span>, <span class="string">&#x27;KN&#x27;</span>, <span class="string">&#x27;KNA&#x27;</span>, <span class="string">&#x27;SAINT KITTS AND NEVIS&#x27;</span>, <span class="string">&#x27;圣基茨和尼维斯&#x27;</span>, <span class="string">&#x27;Saint Kitts and Nevis&#x27;</span>, <span class="string">&#x27;659&#x27;</span>, <span class="string">&#x27;1869&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;181&#x27;</span>, <span class="string">&#x27;LC&#x27;</span>, <span class="string">&#x27;LCA&#x27;</span>, <span class="string">&#x27;SAINT LUCIA&#x27;</span>, <span class="string">&#x27;圣卢西亚岛&#x27;</span>, <span class="string">&#x27;Saint Lucia&#x27;</span>, <span class="string">&#x27;662&#x27;</span>, <span class="string">&#x27;1758&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;182&#x27;</span>, <span class="string">&#x27;PM&#x27;</span>, <span class="string">&#x27;SPM&#x27;</span>, <span class="string">&#x27;SAINT PIERRE AND MIQUELON&#x27;</span>, <span class="string">&#x27;圣皮埃尔和MIQUELON&#x27;</span>, <span class="string">&#x27;Saint Pierre and Miquelon&#x27;</span>, <span class="string">&#x27;666&#x27;</span>, <span class="string">&#x27;508&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;183&#x27;</span>, <span class="string">&#x27;VC&#x27;</span>, <span class="string">&#x27;VCT&#x27;</span>, <span class="string">&#x27;SAINT VINCENT AND THE GRENADINES&#x27;</span>, <span class="string">&#x27;圣文森特和格林纳丁斯&#x27;</span>, <span class="string">&#x27;Saint Vincent and the Grenadines&#x27;</span>, <span class="string">&#x27;670&#x27;</span>, <span class="string">&#x27;1784&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;184&#x27;</span>, <span class="string">&#x27;WS&#x27;</span>, <span class="string">&#x27;WSM&#x27;</span>, <span class="string">&#x27;SAMOA&#x27;</span>, <span class="string">&#x27;萨摩亚&#x27;</span>, <span class="string">&#x27;Samoa&#x27;</span>, <span class="string">&#x27;882&#x27;</span>, <span class="string">&#x27;684&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;185&#x27;</span>, <span class="string">&#x27;SM&#x27;</span>, <span class="string">&#x27;SMR&#x27;</span>, <span class="string">&#x27;SAN MARINO&#x27;</span>, <span class="string">&#x27;圣马力诺&#x27;</span>, <span class="string">&#x27;San Marino&#x27;</span>, <span class="string">&#x27;674&#x27;</span>, <span class="string">&#x27;378&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;186&#x27;</span>, <span class="string">&#x27;ST&#x27;</span>, <span class="string">&#x27;STP&#x27;</span>, <span class="string">&#x27;SAO TOME AND PRINCIPE&#x27;</span>, <span class="string">&#x27;圣多美和王子&#x27;</span>, <span class="string">&#x27;Sao Tome and Principe&#x27;</span>, <span class="string">&#x27;678&#x27;</span>, <span class="string">&#x27;239&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;187&#x27;</span>, <span class="string">&#x27;SA&#x27;</span>, <span class="string">&#x27;SAU&#x27;</span>, <span class="string">&#x27;SAUDI ARABIA&#x27;</span>, <span class="string">&#x27;沙特阿拉伯&#x27;</span>, <span class="string">&#x27;Saudi Arabia&#x27;</span>, <span class="string">&#x27;682&#x27;</span>, <span class="string">&#x27;966&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;188&#x27;</span>, <span class="string">&#x27;SN&#x27;</span>, <span class="string">&#x27;SEN&#x27;</span>, <span class="string">&#x27;SENEGAL&#x27;</span>, <span class="string">&#x27;塞内加尔&#x27;</span>, <span class="string">&#x27;Senegal&#x27;</span>, <span class="string">&#x27;686&#x27;</span>, <span class="string">&#x27;221&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;189&#x27;</span>, <span class="string">&#x27;CS&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;SERBIA AND MONTENEGRO&#x27;</span>, <span class="string">&#x27;塞尔维亚和黑山&#x27;</span>, <span class="string">&#x27;Serbia and Montenegro&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;381&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;190&#x27;</span>, <span class="string">&#x27;SC&#x27;</span>, <span class="string">&#x27;SYC&#x27;</span>, <span class="string">&#x27;SEYCHELLES&#x27;</span>, <span class="string">&#x27;塞舌尔&#x27;</span>, <span class="string">&#x27;Seychelles&#x27;</span>, <span class="string">&#x27;690&#x27;</span>, <span class="string">&#x27;248&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;191&#x27;</span>, <span class="string">&#x27;SL&#x27;</span>, <span class="string">&#x27;SLE&#x27;</span>, <span class="string">&#x27;SIERRA LEONE&#x27;</span>, <span class="string">&#x27;塞拉利昂&#x27;</span>, <span class="string">&#x27;Sierra Leone&#x27;</span>, <span class="string">&#x27;694&#x27;</span>, <span class="string">&#x27;232&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;192&#x27;</span>, <span class="string">&#x27;SG&#x27;</span>, <span class="string">&#x27;SGP&#x27;</span>, <span class="string">&#x27;SINGAPORE&#x27;</span>, <span class="string">&#x27;新加坡&#x27;</span>, <span class="string">&#x27;Singapore&#x27;</span>, <span class="string">&#x27;702&#x27;</span>, <span class="string">&#x27;65&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;193&#x27;</span>, <span class="string">&#x27;SK&#x27;</span>, <span class="string">&#x27;SVK&#x27;</span>, <span class="string">&#x27;SLOVAKIA&#x27;</span>, <span class="string">&#x27;斯洛伐克&#x27;</span>, <span class="string">&#x27;Slovakia&#x27;</span>, <span class="string">&#x27;703&#x27;</span>, <span class="string">&#x27;421&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;194&#x27;</span>, <span class="string">&#x27;SI&#x27;</span>, <span class="string">&#x27;SVN&#x27;</span>, <span class="string">&#x27;SLOVENIA&#x27;</span>, <span class="string">&#x27;斯洛文尼亚&#x27;</span>, <span class="string">&#x27;Slovenia&#x27;</span>, <span class="string">&#x27;705&#x27;</span>, <span class="string">&#x27;386&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;195&#x27;</span>, <span class="string">&#x27;SB&#x27;</span>, <span class="string">&#x27;SLB&#x27;</span>, <span class="string">&#x27;SOLOMON ISLANDS&#x27;</span>, <span class="string">&#x27;所罗门群岛&#x27;</span>, <span class="string">&#x27;Solomon Islands&#x27;</span>, <span class="string">&#x27;90&#x27;</span>, <span class="string">&#x27;677&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;196&#x27;</span>, <span class="string">&#x27;SO&#x27;</span>, <span class="string">&#x27;SOM&#x27;</span>, <span class="string">&#x27;SOMALIA&#x27;</span>, <span class="string">&#x27;索马里&#x27;</span>, <span class="string">&#x27;Somalia&#x27;</span>, <span class="string">&#x27;706&#x27;</span>, <span class="string">&#x27;252&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;197&#x27;</span>, <span class="string">&#x27;ZA&#x27;</span>, <span class="string">&#x27;ZAF&#x27;</span>, <span class="string">&#x27;SOUTH AFRICA&#x27;</span>, <span class="string">&#x27;南非&#x27;</span>, <span class="string">&#x27;South Africa&#x27;</span>, <span class="string">&#x27;710&#x27;</span>, <span class="string">&#x27;27&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;198&#x27;</span>, <span class="string">&#x27;GS&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS&#x27;</span>, <span class="string">&#x27;南乔治亚岛和南桑威奇群岛&#x27;</span>, <span class="string">&#x27;South Georgia and the South Sandwich Islands&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;199&#x27;</span>, <span class="string">&#x27;ES&#x27;</span>, <span class="string">&#x27;ESP&#x27;</span>, <span class="string">&#x27;SPAIN&#x27;</span>, <span class="string">&#x27;西班牙&#x27;</span>, <span class="string">&#x27;Spain&#x27;</span>, <span class="string">&#x27;724&#x27;</span>, <span class="string">&#x27;34&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;200&#x27;</span>, <span class="string">&#x27;LK&#x27;</span>, <span class="string">&#x27;LKA&#x27;</span>, <span class="string">&#x27;SRI LANKA&#x27;</span>, <span class="string">&#x27;斯里兰卡&#x27;</span>, <span class="string">&#x27;Sri Lanka&#x27;</span>, <span class="string">&#x27;144&#x27;</span>, <span class="string">&#x27;94&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;201&#x27;</span>, <span class="string">&#x27;SD&#x27;</span>, <span class="string">&#x27;SDN&#x27;</span>, <span class="string">&#x27;SUDAN&#x27;</span>, <span class="string">&#x27;苏丹&#x27;</span>, <span class="string">&#x27;Sudan&#x27;</span>, <span class="string">&#x27;736&#x27;</span>, <span class="string">&#x27;249&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;202&#x27;</span>, <span class="string">&#x27;SR&#x27;</span>, <span class="string">&#x27;SUR&#x27;</span>, <span class="string">&#x27;SURINAME&#x27;</span>, <span class="string">&#x27;苏里南&#x27;</span>, <span class="string">&#x27;Suriname&#x27;</span>, <span class="string">&#x27;740&#x27;</span>, <span class="string">&#x27;597&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;203&#x27;</span>, <span class="string">&#x27;SJ&#x27;</span>, <span class="string">&#x27;SJM&#x27;</span>, <span class="string">&#x27;SVALBARD AND JAN MAYEN&#x27;</span>, <span class="string">&#x27;斯瓦尔巴群岛和扬马延岛&#x27;</span>, <span class="string">&#x27;Svalbard and Jan Mayen&#x27;</span>, <span class="string">&#x27;744&#x27;</span>, <span class="string">&#x27;47&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;204&#x27;</span>, <span class="string">&#x27;SZ&#x27;</span>, <span class="string">&#x27;SWZ&#x27;</span>, <span class="string">&#x27;SWAZILAND&#x27;</span>, <span class="string">&#x27;斯威士兰&#x27;</span>, <span class="string">&#x27;Swaziland&#x27;</span>, <span class="string">&#x27;748&#x27;</span>, <span class="string">&#x27;268&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;205&#x27;</span>, <span class="string">&#x27;SE&#x27;</span>, <span class="string">&#x27;SWE&#x27;</span>, <span class="string">&#x27;SWEDEN&#x27;</span>, <span class="string">&#x27;瑞典&#x27;</span>, <span class="string">&#x27;Sweden&#x27;</span>, <span class="string">&#x27;752&#x27;</span>, <span class="string">&#x27;46&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;206&#x27;</span>, <span class="string">&#x27;CH&#x27;</span>, <span class="string">&#x27;CHE&#x27;</span>, <span class="string">&#x27;SWITZERLAND&#x27;</span>, <span class="string">&#x27;瑞士&#x27;</span>, <span class="string">&#x27;Switzerland&#x27;</span>, <span class="string">&#x27;756&#x27;</span>, <span class="string">&#x27;41&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;207&#x27;</span>, <span class="string">&#x27;SY&#x27;</span>, <span class="string">&#x27;SYR&#x27;</span>, <span class="string">&#x27;SYRIAN ARAB REPUBLIC&#x27;</span>, <span class="string">&#x27;阿拉伯叙利亚共和国&#x27;</span>, <span class="string">&#x27;Syrian Arab Republic&#x27;</span>, <span class="string">&#x27;760&#x27;</span>, <span class="string">&#x27;963&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;208&#x27;</span>, <span class="string">&#x27;TW&#x27;</span>, <span class="string">&#x27;TWN&#x27;</span>, <span class="string">&#x27;TAIWAN, PROVINCE OF CHINA&#x27;</span>, <span class="string">&#x27;台湾,中国的省份&#x27;</span>, <span class="string">&#x27;Taiwan, Province of China&#x27;</span>, <span class="string">&#x27;158&#x27;</span>, <span class="string">&#x27;886&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;209&#x27;</span>, <span class="string">&#x27;TJ&#x27;</span>, <span class="string">&#x27;TJK&#x27;</span>, <span class="string">&#x27;TAJIKISTAN&#x27;</span>, <span class="string">&#x27;塔吉克斯坦&#x27;</span>, <span class="string">&#x27;Tajikistan&#x27;</span>, <span class="string">&#x27;762&#x27;</span>, <span class="string">&#x27;992&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;210&#x27;</span>, <span class="string">&#x27;TZ&#x27;</span>, <span class="string">&#x27;TZA&#x27;</span>, <span class="string">&#x27;TANZANIA, UNITED REPUBLIC OF&#x27;</span>, <span class="string">&#x27;坦桑尼亚联合共和国&#x27;</span>, <span class="string">&#x27;Tanzania, United Republic of&#x27;</span>, <span class="string">&#x27;834&#x27;</span>, <span class="string">&#x27;255&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;211&#x27;</span>, <span class="string">&#x27;TH&#x27;</span>, <span class="string">&#x27;THA&#x27;</span>, <span class="string">&#x27;THAILAND&#x27;</span>, <span class="string">&#x27;泰国&#x27;</span>, <span class="string">&#x27;Thailand&#x27;</span>, <span class="string">&#x27;764&#x27;</span>, <span class="string">&#x27;66&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;212&#x27;</span>, <span class="string">&#x27;TL&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;TIMOR-LESTE&#x27;</span>, <span class="string">&#x27;东帝汶&#x27;</span>, <span class="string">&#x27;Timor-Leste&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;670&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;213&#x27;</span>, <span class="string">&#x27;TG&#x27;</span>, <span class="string">&#x27;TGO&#x27;</span>, <span class="string">&#x27;TOGO&#x27;</span>, <span class="string">&#x27;多哥&#x27;</span>, <span class="string">&#x27;Togo&#x27;</span>, <span class="string">&#x27;768&#x27;</span>, <span class="string">&#x27;228&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;214&#x27;</span>, <span class="string">&#x27;TK&#x27;</span>, <span class="string">&#x27;TKL&#x27;</span>, <span class="string">&#x27;TOKELAU&#x27;</span>, <span class="string">&#x27;托克劳&#x27;</span>, <span class="string">&#x27;Tokelau&#x27;</span>, <span class="string">&#x27;772&#x27;</span>, <span class="string">&#x27;690&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;215&#x27;</span>, <span class="string">&#x27;TO&#x27;</span>, <span class="string">&#x27;TON&#x27;</span>, <span class="string">&#x27;TONGA&#x27;</span>, <span class="string">&#x27;汤加&#x27;</span>, <span class="string">&#x27;Tonga&#x27;</span>, <span class="string">&#x27;776&#x27;</span>, <span class="string">&#x27;676&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;216&#x27;</span>, <span class="string">&#x27;TT&#x27;</span>, <span class="string">&#x27;TTO&#x27;</span>, <span class="string">&#x27;TRINIDAD AND TOBAGO&#x27;</span>, <span class="string">&#x27;特立尼达和多巴哥&#x27;</span>, <span class="string">&#x27;Trinidad and Tobago&#x27;</span>, <span class="string">&#x27;780&#x27;</span>, <span class="string">&#x27;1868&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;217&#x27;</span>, <span class="string">&#x27;TN&#x27;</span>, <span class="string">&#x27;TUN&#x27;</span>, <span class="string">&#x27;TUNISIA&#x27;</span>, <span class="string">&#x27;突尼斯&#x27;</span>, <span class="string">&#x27;Tunisia&#x27;</span>, <span class="string">&#x27;788&#x27;</span>, <span class="string">&#x27;216&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;218&#x27;</span>, <span class="string">&#x27;TR&#x27;</span>, <span class="string">&#x27;TUR&#x27;</span>, <span class="string">&#x27;TURKEY&#x27;</span>, <span class="string">&#x27;土耳其&#x27;</span>, <span class="string">&#x27;Turkey&#x27;</span>, <span class="string">&#x27;792&#x27;</span>, <span class="string">&#x27;90&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;219&#x27;</span>, <span class="string">&#x27;TM&#x27;</span>, <span class="string">&#x27;TKM&#x27;</span>, <span class="string">&#x27;TURKMENISTAN&#x27;</span>, <span class="string">&#x27;土库曼斯坦&#x27;</span>, <span class="string">&#x27;Turkmenistan&#x27;</span>, <span class="string">&#x27;795&#x27;</span>, <span class="string">&#x27;7370&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;220&#x27;</span>, <span class="string">&#x27;TC&#x27;</span>, <span class="string">&#x27;TCA&#x27;</span>, <span class="string">&#x27;TURKS AND CAICOS ISLANDS&#x27;</span>, <span class="string">&#x27;特克斯和凯科斯群岛&#x27;</span>, <span class="string">&#x27;Turks and Caicos Islands&#x27;</span>, <span class="string">&#x27;796&#x27;</span>, <span class="string">&#x27;1649&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;221&#x27;</span>, <span class="string">&#x27;TV&#x27;</span>, <span class="string">&#x27;TUV&#x27;</span>, <span class="string">&#x27;TUVALU&#x27;</span>, <span class="string">&#x27;图瓦卢&#x27;</span>, <span class="string">&#x27;Tuvalu&#x27;</span>, <span class="string">&#x27;798&#x27;</span>, <span class="string">&#x27;688&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;222&#x27;</span>, <span class="string">&#x27;UG&#x27;</span>, <span class="string">&#x27;UGA&#x27;</span>, <span class="string">&#x27;UGANDA&#x27;</span>, <span class="string">&#x27;乌干达&#x27;</span>, <span class="string">&#x27;Uganda&#x27;</span>, <span class="string">&#x27;800&#x27;</span>, <span class="string">&#x27;256&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;223&#x27;</span>, <span class="string">&#x27;UA&#x27;</span>, <span class="string">&#x27;UKR&#x27;</span>, <span class="string">&#x27;UKRAINE&#x27;</span>, <span class="string">&#x27;乌克兰&#x27;</span>, <span class="string">&#x27;Ukraine&#x27;</span>, <span class="string">&#x27;804&#x27;</span>, <span class="string">&#x27;380&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;224&#x27;</span>, <span class="string">&#x27;AE&#x27;</span>, <span class="string">&#x27;ARE&#x27;</span>, <span class="string">&#x27;UNITED ARAB EMIRATES&#x27;</span>, <span class="string">&#x27;阿拉伯联合酋长国&#x27;</span>, <span class="string">&#x27;United Arab Emirates&#x27;</span>, <span class="string">&#x27;784&#x27;</span>, <span class="string">&#x27;971&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;225&#x27;</span>, <span class="string">&#x27;GB&#x27;</span>, <span class="string">&#x27;GBR&#x27;</span>, <span class="string">&#x27;UNITED KINGDOM&#x27;</span>, <span class="string">&#x27;联合王国&#x27;</span>, <span class="string">&#x27;United Kingdom&#x27;</span>, <span class="string">&#x27;826&#x27;</span>, <span class="string">&#x27;44&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;226&#x27;</span>, <span class="string">&#x27;US&#x27;</span>, <span class="string">&#x27;USA&#x27;</span>, <span class="string">&#x27;UNITED STATES&#x27;</span>, <span class="string">&#x27;美国&#x27;</span>, <span class="string">&#x27;United States&#x27;</span>, <span class="string">&#x27;840&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;227&#x27;</span>, <span class="string">&#x27;UM&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;UNITED STATES MINOR OUTLYING ISLANDS&#x27;</span>, <span class="string">&#x27;美国小离岛&#x27;</span>, <span class="string">&#x27;United States Minor Outlying Islands&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;228&#x27;</span>, <span class="string">&#x27;UY&#x27;</span>, <span class="string">&#x27;URY&#x27;</span>, <span class="string">&#x27;URUGUAY&#x27;</span>, <span class="string">&#x27;乌拉圭&#x27;</span>, <span class="string">&#x27;Uruguay&#x27;</span>, <span class="string">&#x27;858&#x27;</span>, <span class="string">&#x27;598&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;229&#x27;</span>, <span class="string">&#x27;UZ&#x27;</span>, <span class="string">&#x27;UZB&#x27;</span>, <span class="string">&#x27;UZBEKISTAN&#x27;</span>, <span class="string">&#x27;乌兹别克斯坦&#x27;</span>, <span class="string">&#x27;Uzbekistan&#x27;</span>, <span class="string">&#x27;860&#x27;</span>, <span class="string">&#x27;998&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;230&#x27;</span>, <span class="string">&#x27;VU&#x27;</span>, <span class="string">&#x27;VUT&#x27;</span>, <span class="string">&#x27;VANUATU&#x27;</span>, <span class="string">&#x27;瓦努阿图&#x27;</span>, <span class="string">&#x27;Vanuatu&#x27;</span>, <span class="string">&#x27;548&#x27;</span>, <span class="string">&#x27;678&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;231&#x27;</span>, <span class="string">&#x27;VE&#x27;</span>, <span class="string">&#x27;VEN&#x27;</span>, <span class="string">&#x27;VENEZUELA&#x27;</span>, <span class="string">&#x27;委内瑞拉&#x27;</span>, <span class="string">&#x27;Venezuela&#x27;</span>, <span class="string">&#x27;862&#x27;</span>, <span class="string">&#x27;58&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;232&#x27;</span>, <span class="string">&#x27;VN&#x27;</span>, <span class="string">&#x27;VNM&#x27;</span>, <span class="string">&#x27;VIET NAM&#x27;</span>, <span class="string">&#x27;越南&#x27;</span>, <span class="string">&#x27;Viet Nam&#x27;</span>, <span class="string">&#x27;704&#x27;</span>, <span class="string">&#x27;84&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;233&#x27;</span>, <span class="string">&#x27;VG&#x27;</span>, <span class="string">&#x27;VGB&#x27;</span>, <span class="string">&#x27;VIRGIN ISLANDS, BRITISH&#x27;</span>, <span class="string">&#x27;维尔京群岛,英国&#x27;</span>, <span class="string">&#x27;Virgin Islands, British&#x27;</span>, <span class="string">&#x27;92&#x27;</span>, <span class="string">&#x27;1284&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;234&#x27;</span>, <span class="string">&#x27;VI&#x27;</span>, <span class="string">&#x27;VIR&#x27;</span>, <span class="string">&#x27;VIRGIN ISLANDS, U.S.&#x27;</span>, <span class="string">&#x27;维尔京群岛,美国&#x27;</span>, <span class="string">&#x27;Virgin Islands, U.s.&#x27;</span>, <span class="string">&#x27;850&#x27;</span>, <span class="string">&#x27;1340&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;235&#x27;</span>, <span class="string">&#x27;WF&#x27;</span>, <span class="string">&#x27;WLF&#x27;</span>, <span class="string">&#x27;WALLIS AND FUTUNA&#x27;</span>, <span class="string">&#x27;瓦利斯群岛和富图纳群岛&#x27;</span>, <span class="string">&#x27;Wallis and Futuna&#x27;</span>, <span class="string">&#x27;876&#x27;</span>, <span class="string">&#x27;681&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;236&#x27;</span>, <span class="string">&#x27;EH&#x27;</span>, <span class="string">&#x27;ESH&#x27;</span>, <span class="string">&#x27;WESTERN SAHARA&#x27;</span>, <span class="string">&#x27;西撒哈拉&#x27;</span>, <span class="string">&#x27;Western Sahara&#x27;</span>, <span class="string">&#x27;732&#x27;</span>, <span class="string">&#x27;212&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;237&#x27;</span>, <span class="string">&#x27;YE&#x27;</span>, <span class="string">&#x27;YEM&#x27;</span>, <span class="string">&#x27;YEMEN&#x27;</span>, <span class="string">&#x27;也门&#x27;</span>, <span class="string">&#x27;Yemen&#x27;</span>, <span class="string">&#x27;887&#x27;</span>, <span class="string">&#x27;967&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;238&#x27;</span>, <span class="string">&#x27;ZM&#x27;</span>, <span class="string">&#x27;ZMB&#x27;</span>, <span class="string">&#x27;ZAMBIA&#x27;</span>, <span class="string">&#x27;赞比亚&#x27;</span>, <span class="string">&#x27;Zambia&#x27;</span>, <span class="string">&#x27;894&#x27;</span>, <span class="string">&#x27;260&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `sms_country` <span class="keyword">VALUES</span> (<span class="string">&#x27;239&#x27;</span>, <span class="string">&#x27;ZW&#x27;</span>, <span class="string">&#x27;ZWE&#x27;</span>, <span class="string">&#x27;ZIMBABWE&#x27;</span>, <span class="string">&#x27;津巴布韦&#x27;</span>, <span class="string">&#x27;Zimbabwe&#x27;</span>, <span class="string">&#x27;716&#x27;</span>, <span class="string">&#x27;263&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="二、文本"><a href="#二、文本" class="headerlink" title="二、文本"></a>二、文本</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1,AF,AFG,AFGHANISTAN,阿富汗,Afghanistan,4,93</span><br><span class="line">2,AL,ALB,ALBANIA,阿尔巴尼亚,Albania,8,355</span><br><span class="line">3,DZ,DZA,ALGERIA,阿尔及利亚,Algeria,12,213</span><br><span class="line">4,AS,ASM,AMERICAN SAMOA,美属萨摩亚,American Samoa,16,1684</span><br><span class="line">5,AD,AND,ANDORRA,安道尔,Andorra,20,376</span><br><span class="line">6,AO,AGO,ANGOLA,安哥拉,Angola,24,244</span><br><span class="line">7,AI,AIA,ANGUILLA,安圭拉岛,Anguilla,660,1264</span><br><span class="line">8,AQ,,ANTARCTICA,南极洲,Antarctica,,0</span><br><span class="line">9,AG,ATG,ANTIGUA AND BARBUDA,安提瓜岛和巴布达,Antigua and Barbuda,28,1268</span><br><span class="line">10,AR,ARG,ARGENTINA,阿根廷,Argentina,32,54</span><br><span class="line">11,AM,ARM,ARMENIA,亚美尼亚,Armenia,51,374</span><br><span class="line">12,AW,ABW,ARUBA,阿鲁巴岛,Aruba,533,297</span><br><span class="line">13,AU,AUS,AUSTRALIA,澳大利亚,Australia,36,61</span><br><span class="line">14,AT,AUT,AUSTRIA,奥地利,Austria,40,43</span><br><span class="line">15,AZ,AZE,AZERBAIJAN,阿塞拜疆,Azerbaijan,31,994</span><br><span class="line">16,BS,BHS,BAHAMAS,巴哈马群岛,Bahamas,44,1242</span><br><span class="line">17,BH,BHR,BAHRAIN,巴林,Bahrain,48,973</span><br><span class="line">18,BD,BGD,BANGLADESH,孟加拉国,Bangladesh,50,880</span><br><span class="line">19,BB,BRB,BARBADOS,巴巴多斯,Barbados,52,1246</span><br><span class="line">20,BY,BLR,BELARUS,白俄罗斯,Belarus,112,375</span><br><span class="line">21,BE,BEL,BELGIUM,比利时,Belgium,56,32</span><br><span class="line">22,BZ,BLZ,BELIZE,伯利兹,Belize,84,501</span><br><span class="line">23,BJ,BEN,BENIN,贝宁,Benin,204,229</span><br><span class="line">24,BM,BMU,BERMUDA,百慕大,Bermuda,60,1441</span><br><span class="line">25,BT,BTN,BHUTAN,不丹,Bhutan,64,975</span><br><span class="line">26,BO,BOL,BOLIVIA,玻利维亚,Bolivia,68,591</span><br><span class="line">27,BA,BIH,BOSNIA AND HERZEGOVINA,波斯尼亚和黑塞哥维那,Bosnia and Herzegovina,70,387</span><br><span class="line">28,BW,BWA,BOTSWANA,博茨瓦纳,Botswana,72,267</span><br><span class="line">29,BV,,BOUVET ISLAND,布维岛,Bouvet Island,,0</span><br><span class="line">30,BR,BRA,BRAZIL,巴西,Brazil,76,55</span><br><span class="line">31,IO,,BRITISH INDIAN OCEAN TERRITORY,英属印度洋领地,British Indian Ocean Territory,,246</span><br><span class="line">32,BN,BRN,BRUNEI DARUSSALAM,文莱达鲁萨兰国,Brunei Darussalam,96,673</span><br><span class="line">33,BG,BGR,BULGARIA,保加利亚,Bulgaria,100,359</span><br><span class="line">34,BF,BFA,BURKINA FASO,布吉纳法索,Burkina Faso,854,226</span><br><span class="line">35,BI,BDI,BURUNDI,布隆迪,Burundi,108,257</span><br><span class="line">36,KH,KHM,CAMBODIA,柬埔寨,Cambodia,116,855</span><br><span class="line">37,CM,CMR,CAMEROON,喀麦隆,Cameroon,120,237</span><br><span class="line">38,CA,CAN,CANADA,加拿大,Canada,124,1</span><br><span class="line">39,CV,CPV,CAPE VERDE,佛得角,Cape Verde,132,238</span><br><span class="line">40,KY,CYM,CAYMAN ISLANDS,开曼群岛,Cayman Islands,136,1345</span><br><span class="line">41,CF,CAF,CENTRAL AFRICAN REPUBLIC,中非共和国,Central African Republic,140,236</span><br><span class="line">42,TD,TCD,CHAD,乍得,Chad,148,235</span><br><span class="line">43,CL,CHL,CHILE,智利,Chile,152,56</span><br><span class="line">44,CN,CHN,CHINA,中国,China,156,86</span><br><span class="line">45,CX,,CHRISTMAS ISLAND,圣诞岛,Christmas Island,,61</span><br><span class="line">46,CC,,COCOS (KEELING) ISLANDS,COCOS(KEELING)岛,Cocos (Keeling) Islands,,672</span><br><span class="line">47,CO,COL,COLOMBIA,哥伦比亚,Colombia,170,57</span><br><span class="line">48,KM,COM,COMOROS,科摩罗,Comoros,174,269</span><br><span class="line">49,CG,COG,CONGO,刚果,Congo,178,242</span><br><span class="line">50,CD,COD,CONGO, THE DEMOCRATIC REPUBLIC OF THE,刚果民主共和国的,Congo, the Democratic Republic of the,180,242</span><br><span class="line">51,CK,COK,COOK ISLANDS,库克群岛,Cook Islands,184,682</span><br><span class="line">52,CR,CRI,COSTA RICA,哥斯达黎加,Costa Rica,188,506</span><br><span class="line">53,CI,CIV,COTE D&#x27;IVOIRE,科特迪瓦,Cote D&#x27;Ivoire,384,225</span><br><span class="line">54,HR,HRV,CROATIA,克罗地亚,Croatia,191,385</span><br><span class="line">55,CU,CUB,CUBA,古巴,Cuba,192,53</span><br><span class="line">56,CY,CYP,CYPRUS,塞浦路斯,Cyprus,196,357</span><br><span class="line">57,CZ,CZE,CZECH REPUBLIC,捷克共和国,Czech Republic,203,420</span><br><span class="line">58,DK,DNK,DENMARK,丹麦,Denmark,208,45</span><br><span class="line">59,DJ,DJI,DJIBOUTI,吉布提,Djibouti,262,253</span><br><span class="line">60,DM,DMA,DOMINICA,多米尼加,Dominica,212,1767</span><br><span class="line">61,DO,DOM,DOMINICAN REPUBLIC,多米尼加共和国,Dominican Republic,214,1809</span><br><span class="line">62,EC,ECU,ECUADOR,厄瓜多尔,Ecuador,218,593</span><br><span class="line">63,EG,EGY,EGYPT,埃及,Egypt,818,20</span><br><span class="line">64,SV,SLV,EL SALVADOR,萨尔瓦多,El Salvador,222,503</span><br><span class="line">65,GQ,GNQ,EQUATORIAL GUINEA,赤道几内亚,Equatorial Guinea,226,240</span><br><span class="line">66,ER,ERI,ERITREA,厄立特里亚,Eritrea,232,291</span><br><span class="line">67,EE,EST,ESTONIA,爱沙尼亚,Estonia,233,372</span><br><span class="line">68,ET,ETH,ETHIOPIA,埃塞俄比亚,Ethiopia,231,251</span><br><span class="line">69,FK,FLK,FALKLAND ISLANDS (MALVINAS),福克兰群岛(马尔维纳斯),Falkland Islands (Malvinas),238,500</span><br><span class="line">70,FO,FRO,FAROE ISLANDS,法罗群岛,Faroe Islands,234,298</span><br><span class="line">71,FJ,FJI,FIJI,斐济,Fiji,242,679</span><br><span class="line">72,FI,FIN,FINLAND,芬兰,Finland,246,358</span><br><span class="line">73,FR,FRA,FRANCE,法国,France,250,33</span><br><span class="line">74,GF,GUF,FRENCH GUIANA,法属圭亚那,French Guiana,254,594</span><br><span class="line">75,PF,PYF,FRENCH POLYNESIA,法属波利尼西亚,French Polynesia,258,689</span><br><span class="line">76,TF,,FRENCH SOUTHERN TERRITORIES,法国南部地区,French Southern Territories,,0</span><br><span class="line">77,GA,GAB,GABON,加蓬,Gabon,266,241</span><br><span class="line">78,GM,GMB,GAMBIA,冈比亚,Gambia,270,220</span><br><span class="line">79,GE,GEO,GEORGIA,乔治亚州,Georgia,268,995</span><br><span class="line">80,DE,DEU,GERMANY,德国,Germany,276,49</span><br><span class="line">81,GH,GHA,GHANA,加纳,Ghana,288,233</span><br><span class="line">82,GI,GIB,GIBRALTAR,直布罗陀,Gibraltar,292,350</span><br><span class="line">83,GR,GRC,GREECE,希腊,Greece,300,30</span><br><span class="line">84,GL,GRL,GREENLAND,格陵兰岛,Greenland,304,299</span><br><span class="line">85,GD,GRD,GRENADA,格林纳达,Grenada,308,1473</span><br><span class="line">86,GP,GLP,GUADELOUPE,瓜德罗普岛,Guadeloupe,312,590</span><br><span class="line">87,GU,GUM,GUAM,关岛,Guam,316,1671</span><br><span class="line">88,GT,GTM,GUATEMALA,危地马拉,Guatemala,320,502</span><br><span class="line">89,GN,GIN,GUINEA,几内亚,Guinea,324,224</span><br><span class="line">90,GW,GNB,GUINEA-BISSAU,几内亚比绍,Guinea-Bissau,624,245</span><br><span class="line">91,GY,GUY,GUYANA,圭亚那,Guyana,328,592</span><br><span class="line">92,HT,HTI,HAITI,海地,Haiti,332,509</span><br><span class="line">93,HM,,HEARD ISLAND AND MCDONALD ISLANDS,听到岛和麦当劳的岛屿,Heard Island and Mcdonald Islands,,0</span><br><span class="line">94,VA,VAT,HOLY SEE (VATICAN CITY STATE),教廷(梵蒂冈),Holy See (Vatican City State),336,39</span><br><span class="line">95,HN,HND,HONDURAS,洪都拉斯,Honduras,340,504</span><br><span class="line">96,HK,HKG,HONG KONG,香港,Hong Kong,344,852</span><br><span class="line">97,HU,HUN,HUNGARY,匈牙利,Hungary,348,36</span><br><span class="line">98,IS,ISL,ICELAND,冰岛,Iceland,352,354</span><br><span class="line">99,IN,IND,INDIA,印度,India,356,91</span><br><span class="line">100,ID,IDN,INDONESIA,印尼,Indonesia,360,62</span><br><span class="line">101,IR,IRN,IRAN, ISLAMIC REPUBLIC OF,伊朗伊斯兰共和国,Iran, Islamic Republic of,364,98</span><br><span class="line">102,IQ,IRQ,IRAQ,伊拉克,Iraq,368,964</span><br><span class="line">103,IE,IRL,IRELAND,爱尔兰,Ireland,372,353</span><br><span class="line">104,IL,ISR,ISRAEL,以色列,Israel,376,972</span><br><span class="line">105,IT,ITA,ITALY,意大利,Italy,380,39</span><br><span class="line">106,JM,JAM,JAMAICA,牙买加,Jamaica,388,1876</span><br><span class="line">107,JP,JPN,JAPAN,日本,Japan,392,81</span><br><span class="line">108,JO,JOR,JORDAN,约旦,Jordan,400,962</span><br><span class="line">109,KZ,KAZ,KAZAKHSTAN,哈萨克斯坦,Kazakhstan,398,7</span><br><span class="line">110,KE,KEN,KENYA,肯尼亚,Kenya,404,254</span><br><span class="line">111,KI,KIR,KIRIBATI,基里巴斯,Kiribati,296,686</span><br><span class="line">112,KP,PRK,KOREA, DEMOCRATIC PEOPLE&#x27;S REPUBLIC OF,朝鲜民主主义人民共和国,Korea, Democratic People&#x27;s Republic of,408,850</span><br><span class="line">113,KR,KOR,KOREA, REPUBLIC OF,朝鲜共和国,Korea, Republic of,410,82</span><br><span class="line">114,KW,KWT,KUWAIT,科威特,Kuwait,414,965</span><br><span class="line">115,KG,KGZ,KYRGYZSTAN,吉尔吉斯斯坦,Kyrgyzstan,417,996</span><br><span class="line">116,LA,LAO,LAO PEOPLE&#x27;S DEMOCRATIC REPUBLIC,老挝人民民主共和国,Lao People&#x27;s Democratic Republic,418,856</span><br><span class="line">117,LV,LVA,LATVIA,拉脱维亚,Latvia,428,371</span><br><span class="line">118,LB,LBN,LEBANON,黎巴嫩,Lebanon,422,961</span><br><span class="line">119,LS,LSO,LESOTHO,莱索托,Lesotho,426,266</span><br><span class="line">120,LR,LBR,LIBERIA,利比里亚,Liberia,430,231</span><br><span class="line">121,LY,LBY,LIBYAN ARAB JAMAHIRIYA,阿拉伯利比亚民众国,Libyan Arab Jamahiriya,434,218</span><br><span class="line">122,LI,LIE,LIECHTENSTEIN,列支敦斯登,Liechtenstein,438,423</span><br><span class="line">123,LT,LTU,LITHUANIA,立陶宛,Lithuania,440,370</span><br><span class="line">124,LU,LUX,LUXEMBOURG,卢森堡,Luxembourg,442,352</span><br><span class="line">125,MO,MAC,MACAO,澳门,Macao,446,853</span><br><span class="line">126,MK,MKD,MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF,前南斯拉夫马其顿共和国,Macedonia, the Former Yugoslav Republic of,807,389</span><br><span class="line">127,MG,MDG,MADAGASCAR,马达加斯加,Madagascar,450,261</span><br><span class="line">128,MW,MWI,MALAWI,马拉维,Malawi,454,265</span><br><span class="line">129,MY,MYS,MALAYSIA,马来西亚,Malaysia,458,60</span><br><span class="line">130,MV,MDV,MALDIVES,马尔代夫,Maldives,462,960</span><br><span class="line">131,ML,MLI,MALI,马里,Mali,466,223</span><br><span class="line">132,MT,MLT,MALTA,马耳他,Malta,470,356</span><br><span class="line">133,MH,MHL,MARSHALL ISLANDS,马绍尔群岛,Marshall Islands,584,692</span><br><span class="line">134,MQ,MTQ,MARTINIQUE,马提尼克岛,Martinique,474,596</span><br><span class="line">135,MR,MRT,MAURITANIA,毛利塔尼亚,Mauritania,478,222</span><br><span class="line">136,MU,MUS,MAURITIUS,毛里求斯,Mauritius,480,230</span><br><span class="line">137,YT,,MAYOTTE,马约特岛,Mayotte,,269</span><br><span class="line">138,MX,MEX,MEXICO,墨西哥,Mexico,484,52</span><br><span class="line">139,FM,FSM,MICRONESIA, FEDERATED STATES OF,密克罗尼西亚联邦,Micronesia, Federated States of,583,691</span><br><span class="line">140,MD,MDA,MOLDOVA, REPUBLIC OF,摩尔多瓦共和国,Moldova, Republic of,498,373</span><br><span class="line">141,MC,MCO,MONACO,摩纳哥,Monaco,492,377</span><br><span class="line">142,MN,MNG,MONGOLIA,蒙古,Mongolia,496,976</span><br><span class="line">143,MS,MSR,MONTSERRAT,蒙特塞拉特,Montserrat,500,1664</span><br><span class="line">144,MA,MAR,MOROCCO,摩洛哥,Morocco,504,212</span><br><span class="line">145,MZ,MOZ,MOZAMBIQUE,MOZAMBIQUE,Mozambique,508,258</span><br><span class="line">146,MM,MMR,MYANMAR,缅甸,Myanmar,104,95</span><br><span class="line">147,NA,NAM,NAMIBIA,纳米比亚,Namibia,516,264</span><br><span class="line">148,NR,NRU,NAURU,瑙鲁,Nauru,520,674</span><br><span class="line">149,NP,NPL,NEPAL,尼泊尔,Nepal,524,977</span><br><span class="line">150,NL,NLD,NETHERLANDS,荷兰,Netherlands,528,31</span><br><span class="line">151,AN,ANT,NETHERLANDS ANTILLES,荷属安的列斯群岛,Netherlands Antilles,530,599</span><br><span class="line">152,NC,NCL,NEW CALEDONIA,新喀里多尼亚,New Caledonia,540,687</span><br><span class="line">153,NZ,NZL,NEW ZEALAND,新西兰,New Zealand,554,64</span><br><span class="line">154,NI,NIC,NICARAGUA,尼加拉瓜,Nicaragua,558,505</span><br><span class="line">155,NE,NER,NIGER,尼日尔,Niger,562,227</span><br><span class="line">156,NG,NGA,NIGERIA,尼日利亚,Nigeria,566,234</span><br><span class="line">157,NU,NIU,NIUE,纽埃岛,Niue,570,683</span><br><span class="line">158,NF,NFK,NORFOLK ISLAND,诺福克岛,Norfolk Island,574,672</span><br><span class="line">159,MP,MNP,NORTHERN MARIANA ISLANDS,北马里亚纳群岛,Northern Mariana Islands,580,1670</span><br><span class="line">160,NO,NOR,NORWAY,挪威,Norway,578,47</span><br><span class="line">161,OM,OMN,OMAN,阿曼,Oman,512,968</span><br><span class="line">162,PK,PAK,PAKISTAN,巴基斯坦,Pakistan,586,92</span><br><span class="line">163,PW,PLW,PALAU,帕劳,Palau,585,680</span><br><span class="line">164,PS,,PALESTINIAN TERRITORY, OCCUPIED,巴勒斯坦的领土,占领,Palestinian Territory, Occupied,,970</span><br><span class="line">165,PA,PAN,PANAMA,巴拿马,Panama,591,507</span><br><span class="line">166,PG,PNG,PAPUA NEW GUINEA,巴布新几内亚,Papua New Guinea,598,675</span><br><span class="line">167,PY,PRY,PARAGUAY,巴拉圭,Paraguay,600,595</span><br><span class="line">168,PE,PER,PERU,秘鲁,Peru,604,51</span><br><span class="line">169,PH,PHL,PHILIPPINES,菲律宾,Philippines,608,63</span><br><span class="line">170,PN,PCN,PITCAIRN,皮特克恩,Pitcairn,612,0</span><br><span class="line">171,PL,POL,POLAND,波兰,Poland,616,48</span><br><span class="line">172,PT,PRT,PORTUGAL,葡萄牙,Portugal,620,351</span><br><span class="line">173,PR,PRI,PUERTO RICO,波多黎各,Puerto Rico,630,1787</span><br><span class="line">174,QA,QAT,QATAR,卡塔尔,Qatar,634,974</span><br><span class="line">175,RE,REU,REUNION,团聚,Reunion,638,262</span><br><span class="line">176,RO,ROM,ROMANIA,罗马尼亚,Romania,642,40</span><br><span class="line">177,RU,RUS,RUSSIAN FEDERATION,俄罗斯联邦,Russian Federation,643,70</span><br><span class="line">178,RW,RWA,RWANDA,卢旺达,Rwanda,646,250</span><br><span class="line">179,SH,SHN,SAINT HELENA,圣赫勒拿,Saint Helena,654,290</span><br><span class="line">180,KN,KNA,SAINT KITTS AND NEVIS,圣基茨和尼维斯,Saint Kitts and Nevis,659,1869</span><br><span class="line">181,LC,LCA,SAINT LUCIA,圣卢西亚岛,Saint Lucia,662,1758</span><br><span class="line">182,PM,SPM,SAINT PIERRE AND MIQUELON,圣皮埃尔和MIQUELON,Saint Pierre and Miquelon,666,508</span><br><span class="line">183,VC,VCT,SAINT VINCENT AND THE GRENADINES,圣文森特和格林纳丁斯,Saint Vincent and the Grenadines,670,1784</span><br><span class="line">184,WS,WSM,SAMOA,萨摩亚,Samoa,882,684</span><br><span class="line">185,SM,SMR,SAN MARINO,圣马力诺,San Marino,674,378</span><br><span class="line">186,ST,STP,SAO TOME AND PRINCIPE,圣多美和王子,Sao Tome and Principe,678,239</span><br><span class="line">187,SA,SAU,SAUDI ARABIA,沙特阿拉伯,Saudi Arabia,682,966</span><br><span class="line">188,SN,SEN,SENEGAL,塞内加尔,Senegal,686,221</span><br><span class="line">189,CS,,SERBIA AND MONTENEGRO,塞尔维亚和黑山,Serbia and Montenegro,,381</span><br><span class="line">190,SC,SYC,SEYCHELLES,塞舌尔,Seychelles,690,248</span><br><span class="line">191,SL,SLE,SIERRA LEONE,塞拉利昂,Sierra Leone,694,232</span><br><span class="line">192,SG,SGP,SINGAPORE,新加坡,Singapore,702,65</span><br><span class="line">193,SK,SVK,SLOVAKIA,斯洛伐克,Slovakia,703,421</span><br><span class="line">194,SI,SVN,SLOVENIA,斯洛文尼亚,Slovenia,705,386</span><br><span class="line">195,SB,SLB,SOLOMON ISLANDS,所罗门群岛,Solomon Islands,90,677</span><br><span class="line">196,SO,SOM,SOMALIA,索马里,Somalia,706,252</span><br><span class="line">197,ZA,ZAF,SOUTH AFRICA,南非,South Africa,710,27</span><br><span class="line">198,GS,,SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS,南乔治亚岛和南桑威奇群岛,South Georgia and the South Sandwich Islands,,0</span><br><span class="line">199,ES,ESP,SPAIN,西班牙,Spain,724,34</span><br><span class="line">200,LK,LKA,SRI LANKA,斯里兰卡,Sri Lanka,144,94</span><br><span class="line">201,SD,SDN,SUDAN,苏丹,Sudan,736,249</span><br><span class="line">202,SR,SUR,SURINAME,苏里南,Suriname,740,597</span><br><span class="line">203,SJ,SJM,SVALBARD AND JAN MAYEN,斯瓦尔巴群岛和扬马延岛,Svalbard and Jan Mayen,744,47</span><br><span class="line">204,SZ,SWZ,SWAZILAND,斯威士兰,Swaziland,748,268</span><br><span class="line">205,SE,SWE,SWEDEN,瑞典,Sweden,752,46</span><br><span class="line">206,CH,CHE,SWITZERLAND,瑞士,Switzerland,756,41</span><br><span class="line">207,SY,SYR,SYRIAN ARAB REPUBLIC,阿拉伯叙利亚共和国,Syrian Arab Republic,760,963</span><br><span class="line">208,TW,TWN,TAIWAN, PROVINCE OF CHINA,台湾,中国的省份,Taiwan, Province of China,158,886</span><br><span class="line">209,TJ,TJK,TAJIKISTAN,塔吉克斯坦,Tajikistan,762,992</span><br><span class="line">210,TZ,TZA,TANZANIA, UNITED REPUBLIC OF,坦桑尼亚联合共和国,Tanzania, United Republic of,834,255</span><br><span class="line">211,TH,THA,THAILAND,泰国,Thailand,764,66</span><br><span class="line">212,TL,,TIMOR-LESTE,东帝汶,Timor-Leste,,670</span><br><span class="line">213,TG,TGO,TOGO,多哥,Togo,768,228</span><br><span class="line">214,TK,TKL,TOKELAU,托克劳,Tokelau,772,690</span><br><span class="line">215,TO,TON,TONGA,汤加,Tonga,776,676</span><br><span class="line">216,TT,TTO,TRINIDAD AND TOBAGO,特立尼达和多巴哥,Trinidad and Tobago,780,1868</span><br><span class="line">217,TN,TUN,TUNISIA,突尼斯,Tunisia,788,216</span><br><span class="line">218,TR,TUR,TURKEY,土耳其,Turkey,792,90</span><br><span class="line">219,TM,TKM,TURKMENISTAN,土库曼斯坦,Turkmenistan,795,7370</span><br><span class="line">220,TC,TCA,TURKS AND CAICOS ISLANDS,特克斯和凯科斯群岛,Turks and Caicos Islands,796,1649</span><br><span class="line">221,TV,TUV,TUVALU,图瓦卢,Tuvalu,798,688</span><br><span class="line">222,UG,UGA,UGANDA,乌干达,Uganda,800,256</span><br><span class="line">223,UA,UKR,UKRAINE,乌克兰,Ukraine,804,380</span><br><span class="line">224,AE,ARE,UNITED ARAB EMIRATES,阿拉伯联合酋长国,United Arab Emirates,784,971</span><br><span class="line">225,GB,GBR,UNITED KINGDOM,联合王国,United Kingdom,826,44</span><br><span class="line">226,US,USA,UNITED STATES,美国,United States,840,1</span><br><span class="line">227,UM,,UNITED STATES MINOR OUTLYING ISLANDS,美国小离岛,United States Minor Outlying Islands,,1</span><br><span class="line">228,UY,URY,URUGUAY,乌拉圭,Uruguay,858,598</span><br><span class="line">229,UZ,UZB,UZBEKISTAN,乌兹别克斯坦,Uzbekistan,860,998</span><br><span class="line">230,VU,VUT,VANUATU,瓦努阿图,Vanuatu,548,678</span><br><span class="line">231,VE,VEN,VENEZUELA,委内瑞拉,Venezuela,862,58</span><br><span class="line">232,VN,VNM,VIET NAM,越南,Viet Nam,704,84</span><br><span class="line">233,VG,VGB,VIRGIN ISLANDS, BRITISH,维尔京群岛,英国,Virgin Islands, British,92,1284</span><br><span class="line">234,VI,VIR,VIRGIN ISLANDS, U.S.,维尔京群岛,美国,Virgin Islands, U.s.,850,1340</span><br><span class="line">235,WF,WLF,WALLIS AND FUTUNA,瓦利斯群岛和富图纳群岛,Wallis and Futuna,876,681</span><br><span class="line">236,EH,ESH,WESTERN SAHARA,西撒哈拉,Western Sahara,732,212</span><br><span class="line">237,YE,YEM,YEMEN,也门,Yemen,887,967</span><br><span class="line">238,ZM,ZMB,ZAMBIA,赞比亚,Zambia,894,260</span><br><span class="line">239,ZW,ZWE,ZIMBABWE,津巴布韦,Zimbabwe,716,263</span><br></pre></td></tr></table></figure>

<h2 id="三、参考信息"><a href="#三、参考信息" class="headerlink" title="三、参考信息"></a>三、参考信息</h2><ol>
<li><a href="https://www.iban.com/currency-codes">https://www.iban.com/currency-codes</a></li>
<li><a href="https://country-code.cl/">https://country-code.cl/</a></li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>基础数据</tag>
      </tags>
  </entry>
  <entry>
    <title>HashMap和Hashtable的区别</title>
    <url>/20170217-HashMap%E5%92%8CHashtable%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p>在Java 2以前，一般使用Hashtable来映射键值和元素。为了使用Java集合框架，Java对Hashtable进行了重新设计，但是，为了向后兼容保留了所有的方法。Hashtable实现了Map接口，除了Hashtable具有同步功能之外，它与HashMap的用法是一样的。·在使用时一般是用ArrayList代替Vector，LinkedList代替Stack，HashMap代替HashTable，即使在多线程中需要同步，也是用同步包装类。</p>
<p>另外在使用上还有一些小的差异，比如：</p>
<ol>
<li>HashTable的key和value都不允许为null值，而HashMap的key和value则都是允许null值的。这个其实没有好坏之分，只是Sun为了统一Collection的操作特性而改进的。</li>
<li>HashTable有一个contains(Object value)方法，功能上与containsValue(Object value)一样，但是在实现上花销更大，现在已不推荐使用。而HashMap只有containsValue(Object value)方法。</li>
<li>HashTable使用Enumeration，HashMap使用Iterator。Iterator其实与Enmeration功能上很相似，只是多了删除的功能。用Iterator不过是在名字上变得更为贴切一些。模式的另外一个很重要的功用，就是能够形成一种交流的语言（或者说文化）。有时候，你说Enumeration大家都不明白，说Iterator就都明白了。</li>
</ol>
<p>在实现上两者已有一些差异，这里简单说明一下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public Hashtable(int initialCapacity, float loadFactor) &#123;</span><br><span class="line">        if (initialCapacity &lt; 0)</span><br><span class="line">            throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+</span><br><span class="line">                                               initialCapacity);</span><br><span class="line">        if (loadFactor &lt;= 0 || Float.isNaN(loadFactor))</span><br><span class="line">            throw new IllegalArgumentException(&quot;Illegal Load: &quot;+loadFactor);</span><br><span class="line">        if (initialCapacity==0)</span><br><span class="line">            initialCapacity = 1;</span><br><span class="line">        this.loadFactor = loadFactor;</span><br><span class="line">        table = new Entry[initialCapacity];</span><br><span class="line">        threshold = (int)Math.min(initialCapacity * loadFactor, MAX_ARRAY_SIZE + 1);</span><br><span class="line">        initHashSeedAsNeeded(initialCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">public Hashtable(int initialCapacity) &#123;</span><br><span class="line">        this(initialCapacity, 0.75f);</span><br><span class="line">    &#125;</span><br><span class="line">public Hashtable() &#123;</span><br><span class="line">        this(11, 0.75f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public HashMap(int initialCapacity, float loadFactor) &#123;</span><br><span class="line">        if (initialCapacity &lt; 0)</span><br><span class="line">            throw new IllegalArgumentException(&quot;Illegal initial capacity: &quot; +</span><br><span class="line">                                               initialCapacity);</span><br><span class="line">        if (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">            initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">        if (loadFactor &lt;= 0 || Float.isNaN(loadFactor))</span><br><span class="line">            throw new IllegalArgumentException(&quot;Illegal load factor: &quot; +</span><br><span class="line">                                               loadFactor);</span><br><span class="line">        this.loadFactor = loadFactor;</span><br><span class="line">        threshold = initialCapacity;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">public HashMap(int initialCapacity) &#123;</span><br><span class="line">        this(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class="line">    &#125;</span><br><span class="line">public HashMap() &#123;</span><br><span class="line">        this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>HashTable中构造hash数组时initialCapacity默认大小是11，增加的方式是 old*2+1。HashMap中构造hash数组时initialCapacity默认大小是16，而且一定是2的指数。对于哈希值的使用也有所不同，HashTable直接使用对象的hashCode，代码是这样的：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int hash = key.hashCode();</span><br><span class="line">int index = (hash &amp; 0x7FFFFFFF) % tab.length;</span><br></pre></td></tr></table></figure>
<p>而HashMap重新计算hash值，而且用与代替求模：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int hash = hash(k);</span><br><span class="line">int i = indexFor(hash, table.length);</span><br><span class="line"> </span><br><span class="line">static int hash(Object x) &#123;</span><br><span class="line">　　int h = x.hashCode();</span><br><span class="line"> </span><br><span class="line">　　h += ~(h &lt;&lt; 9);</span><br><span class="line">　　h ^= (h &gt;&gt;&gt; 14);</span><br><span class="line">　　h += (h &lt;&lt; 4);</span><br><span class="line">　　h ^= (h &gt;&gt;&gt; 10);</span><br><span class="line">　　return h;</span><br><span class="line">&#125;</span><br><span class="line">static int indexFor(int h, int length) &#123;</span><br><span class="line">　　return h &amp; (length-1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>仅供参考，内容来源于互联网</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>HashMap</tag>
        <tag>Hashtable</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo next主题添加本地搜索 - 不使用第三方服务</title>
    <url>/20170407-Hexo%20next%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2%20-%20%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<p>之前安装过第三方的搜索服务，贼蛋疼。都不免费了。</p>
<p>也有自己安装插件，然后写js的，麻烦</p>
<p>后来找到两个插件，安装之后就搞定了</p>
<p>感谢开发的作者！！！</p>
<h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>记得要在站点根目录执行下面的安装操作</p>
<p>1.安装 hexo-generator-search</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<p>2.安装 hexo-generator-searchdb</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h2 id="启用搜索"><a href="#启用搜索" class="headerlink" title="启用搜索"></a>启用搜索</h2><p>编辑站点文件**_config.yml**，添加以下内容开启搜索</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure>
<p>编辑主题文件**_config.yml**，启用本地搜索功能：</p>
<pre><code># Local search
local_search:
  enable: true
</code></pre>
<h2 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h2><img src="http://wx2.sinaimg.cn/mw690/b2e389b6ly1fedxu45zqcj20p10i4409.jpg" />

<h2 id="小缺点"><a href="#小缺点" class="headerlink" title="小缺点"></a>小缺点</h2><p>第一次点击搜索的时候反应会比较慢</p>
<p>因为是要加载一个xml文件</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo Landscape主题JS优化，不使用谷歌CDN</title>
    <url>/20170208-Hexo-Landscape%E4%B8%BB%E9%A2%98JS%E4%BC%98%E5%8C%96%EF%BC%8C%E4%B8%8D%E4%BD%BF%E7%94%A8%E8%B0%B7%E6%AD%8CCDN/</url>
    <content><![CDATA[<h2 id="jQuery库的优化"><a href="#jQuery库的优化" class="headerlink" title="jQuery库的优化"></a>jQuery库的优化</h2><p>修改这个文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">themes/landscape/layout/_partial/after-footer.ejs</span><br></pre></td></tr></table></figure>
<p>将17行左右的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>改为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script src=&quot;http://apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>重新生成博客之后就把谷歌的cdn替换成百度的cdn了</p>
]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 绑定个人域名简单方法</title>
    <url>/20170209-Hexo-%E7%BB%91%E5%AE%9A%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E7%AE%80%E5%8D%95%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>**1.**直接注册个域名(随便在哪里)<br>**2.**添加域名解析</p>
<table>
<thead>
<tr>
<th align="left">记录类型</th>
<th align="left">主机记录</th>
<th align="left">记录值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CNAME</td>
<td align="left">@</td>
<td align="left">hisen-yuan.github.io</td>
</tr>
</tbody></table>
<p>主机记录：@ 代表顶级域名，例如hisen.me 如果想要<a href="http://www.hisen.me%E6%8A%8A@改成www/">www.hisen.me把@改成www</a></p>
<p>记录值：你的博客原始地址</p>
<p><strong>3.<strong>在\blog\source下添加</strong>CNAME</strong>文件，没有后缀名，内容为你的域名，注意不要带http:&#x2F;&#x2F;</p>
<p>我的域名解析为 <strong>hisen.me</strong> 文件内容为 <strong>hisen.me</strong></p>
<p>等待解析生效即可！</p>
]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo提速优化 - 压缩html、css、js by hexo-neat插件</title>
    <url>/20170211-Hexo%E6%8F%90%E9%80%9F%E4%BC%98%E5%8C%96-%E5%8E%8B%E7%BC%A9html%E3%80%81css%E3%80%81js-by-hexo-neat%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<p>hexo博客生成的HTML代码留有大量的空白</p>
<p>通过搜索发现有不错的方法可以解决这个问题</p>
<p>那就是安装一个插件！名字叫：hexo-neat</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>命令行进入博客根目录，执行以下命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-neat --save</span><br></pre></td></tr></table></figure>
<p>如果使用的是淘宝的cnmp执行以下命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cnpm install hexo-neat --save</span><br></pre></td></tr></table></figure>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>打开站点配置文件**_config.yml**，添加以下内容：</p>
<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#hexo-neat 优化提速插件</span><br><span class="line">neat_enable: true</span><br><span class="line"></span><br><span class="line">neat_html:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line"></span><br><span class="line">neat_css:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;*.min.css&#x27;</span><br><span class="line"></span><br><span class="line">neat_js:</span><br><span class="line">  enable: true</span><br><span class="line">  mangle: true</span><br><span class="line">  output:</span><br><span class="line">  compress:</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;*.min.js&#x27;</span><br></pre></td></tr></table></figure>

<p>安装好之后，就直接正常使用(跟以前没有装的时候一样使用)，</p>
<p>重新生成博客就可以发现html源码已经压缩了</p>
<p>只是在生成博客的过程中可能要浪费一丁点时间</p>
<p>访问速度有所提升！</p>
<p>参考：<a href="https://segmentfault.com/a/1190000005799759" target="_blank">点击查看<a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo新玩法 - Atom + platformio-ide-terminal</title>
    <url>/20180716-Hexo%E6%96%B0%E7%8E%A9%E6%B3%95%20-%20Atom%20+%20platformio-ide-terminal/</url>
    <content><![CDATA[<p>最近在慢慢适应mbp</p>
<p>然后就在研究怎么方便的写博客</p>
<p>首先就是找了几款markdown编辑器，发现GitHub出品的Atom还不错</p>
<p>插件很丰富，然而下载了第一个terminal插件但是无效，一度折腾了很久</p>
<p>后来搜索了一下，发现这个插件很不错：platformio-ide-terminal</p>
<p>利用快捷键：control + 点(1左边那个)</p>
<p>就可以在当前界面呼出终端，而且是当前目录</p>
<p>也就是在_post目录下，写完了之后执行命令就上传了</p>
<p>还是很方便的。后续还需要慢慢熟悉更多的插件与工具</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hxeo百度站长工具抓取失败的原因</title>
    <url>/20170216-Hxeot%E7%99%BE%E5%BA%A6%E7%AB%99%E9%95%BF%E5%B7%A5%E5%85%B7%E6%8A%93%E5%8F%96%E5%A4%B1%E8%B4%A5%E7%9A%84%E5%8E%9F%E5%9B%A0/</url>
    <content><![CDATA[<p>近期在折腾下hexo博客</p>
<p>发现百度搜索网址都搜索不到自己的站点</p>
<p>我只把hexo传到github上，然而去百度站长工具提交网址几条后也没有反应</p>
<p>我就测试了一下百度站长工具 - 抓取诊断</p>
<p>结果是抓取失败:<strong>Github把百度的爬虫给干掉了</strong>！所以。。。</p>
<hr>
<p>具体内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">提交网址：	http://hisen.me/20170214-maven%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</span><br><span class="line">抓取网址：	http://hisen.me/20170214-maven%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</span><br><span class="line">抓取UA：	Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)</span><br><span class="line">抓取时间：	2017-02-16 09:48:55</span><br><span class="line">网站IP：	151.***.***.133 已反馈，预计几分钟内完成更新</span><br><span class="line">下载时长：	0.331秒</span><br><span class="line">抓取异常信息：	拒绝访问  查看帮助 </span><br></pre></td></tr></table></figure>
<p>返回HTTP头：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 403 Forbidden</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Date: Thu, 16 Feb 2017 01:48:55 GMT</span><br><span class="line">Via: 1.1 varnish</span><br><span class="line">Connection: close</span><br><span class="line">X-Served-By: cache-itm7421-ITM</span><br><span class="line">X-Cache: MISS</span><br><span class="line">X-Cache-Hits: 0</span><br><span class="line">X-Timer: S1487209735.687949,VS0,VE187</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-Fastly-Request-ID: 3e528056d3333113dfb5da5c92a2421fa71f3705</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA Denpendencies红色波浪线报错,所有的包无法导入 - 一种解决办法</title>
    <url>/20170228-IDEA-Denpendencies%E7%BA%A2%E8%89%B2%E6%B3%A2%E6%B5%AA%E7%BA%BF%E6%8A%A5%E9%94%99-%E6%89%80%E6%9C%89%E7%9A%84%E5%8C%85%E6%97%A0%E6%B3%95%E5%AF%BC%E5%85%A5-%E4%B8%80%E7%A7%8D%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">failed to read artifact descriptor for xxx：jar</span><br></pre></td></tr></table></figure>
<p>一下午那代码里面是各种报错</p>
<p>凡是引入的大部分都报错</p>
<p>原因就是maven管理的jar没有添加上依赖</p>
<p>最后在stackoverflow找到了良药</p>
<p>上面有图片，错误会详细一点，如果你的也相同，可以试一试</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">maven project -&gt; Execute Maven Goal -&gt; mvn -U clean install</span><br></pre></td></tr></table></figure>
<p>执行以上命令之后等待完成，应该就好了</p>
<p>参考自stackoverflow：<a href="http://stackoverflow.com/questions/11454822/import-maven-dependencies-in-intellij-idea" target="_blank">点击查看</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>idea</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA maven项目通过mongo-Java-driver折腾一下MongoDB</title>
    <url>/20170220-IDEA-maven%E9%A1%B9%E7%9B%AE%E9%80%9A%E8%BF%87mongo-Java-driver%E6%8A%98%E8%85%BE%E4%B8%80%E4%B8%8BMongoDB/</url>
    <content><![CDATA[<p>这几天折腾ubuntu然后安装了下mongodb</p>
<p>通过Oracle VM VirtualBox端口转发，连接了虚拟机的MongoDB</p>
<p>1.用idea创建一个maven项目</p>
<p>2.在pom.xml中添加mongodb Java驱动</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.mongodb&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mongodb-driver&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.2.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>3.参考官方：<a href="http://mongodb.github.io/mongo-Java-driver/3.2/driver/getting-started/quick-tour/" target="_blank">MongoDB Driver Quick Tour</a></p>
<p>本用例github地址：<a href="https://github.com/hisen-yuan/mongodbTest/blob/master/src/main/Java/com/hisen/jdbc/QuickTour.Java" target="_blank">mongodbTest</a></p>
<p>贴下代码：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.jdbc;</span><br><span class="line"></span><br><span class="line">import com.mongodb.Block;</span><br><span class="line">import com.mongodb.MongoClient;</span><br><span class="line">import com.mongodb.client.MongoCollection;</span><br><span class="line">import com.mongodb.client.MongoCursor;</span><br><span class="line">import com.mongodb.client.MongoDatabase;</span><br><span class="line">import com.mongodb.client.result.DeleteResult;</span><br><span class="line">import com.mongodb.client.result.UpdateResult;</span><br><span class="line">import org.bson.Document;</span><br><span class="line"></span><br><span class="line">import Java.util.ArrayList;</span><br><span class="line">import Java.util.List;</span><br><span class="line"></span><br><span class="line">import static com.mongodb.client.model.Accumulators.sum;</span><br><span class="line">import static com.mongodb.client.model.Aggregates.group;</span><br><span class="line">import static com.mongodb.client.model.Filters.*;</span><br><span class="line">import static com.mongodb.client.model.Projections.excludeId;</span><br><span class="line">import static com.mongodb.client.model.Sorts.descending;</span><br><span class="line">import static com.mongodb.client.model.Updates.inc;</span><br><span class="line">import static com.mongodb.client.model.Updates.set;</span><br><span class="line">import static Java.util.Collections.singletonList;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by hisenyuan on 2017/2/20 at 13:42.</span><br><span class="line"> */</span><br><span class="line">public class QuickTour &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        MongoClient mongoClient = new MongoClient(&quot;localhost&quot;, 27017);</span><br><span class="line">        MongoDatabase database = mongoClient.getDatabase(&quot;mydb&quot;);</span><br><span class="line">        //gets the collection test</span><br><span class="line">        MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;test&quot;);</span><br><span class="line">        //插入数据</span><br><span class="line">        //insert(collection);</span><br><span class="line">        //插入大量数据</span><br><span class="line">        insertMany(collection);</span><br><span class="line">        //统计条数</span><br><span class="line">        count(collection);</span><br><span class="line">        //打印查询到的第一条数据</span><br><span class="line">        print(collection);</span><br><span class="line">        //打印所有数据</span><br><span class="line">        findAll(collection);</span><br><span class="line">        //按条件查询一条数据</span><br><span class="line">        findOneWithFilter(collection);</span><br><span class="line">        //按条件查询一个Set集合</span><br><span class="line">        getSet(collection);</span><br><span class="line">        //排序，输出第一条</span><br><span class="line">        sortDocuments(collection);</span><br><span class="line">        //获取指定的field</span><br><span class="line">        projectingFields(collection);</span><br><span class="line">        aggregations(collection);</span><br><span class="line">        //更新</span><br><span class="line">        update(collection);</span><br><span class="line">        //删除数据</span><br><span class="line">        delete(collection);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 插入单个文档</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void insert(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        //create document</span><br><span class="line">        Document doc = new Document(&quot;name&quot;, &quot;MongoDB&quot;)</span><br><span class="line">                .append(&quot;type&quot;, &quot;database&quot;)</span><br><span class="line">                .append(&quot;count&quot;, 1)</span><br><span class="line">                .append(&quot;info&quot;, new Document(&quot;x&quot;, 203).append(&quot;y&quot;, 102));</span><br><span class="line">        //insert the document into the collection</span><br><span class="line">        collection.insertOne(doc);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 一次性插入多条数据，用ArrayList拼装</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void insertMany(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        //Create the documents in a loop</span><br><span class="line">        List&lt;Document&gt; documents = new ArrayList&lt;Document&gt;();</span><br><span class="line">        for (int i = 0; i &lt; 100; i++) &#123;</span><br><span class="line">            documents.add(new Document(&quot;i&quot;, i));</span><br><span class="line">        &#125;</span><br><span class="line">        collection.insertMany(documents);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 统计集合中的总条数</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void count(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        //Count Documents in A Collection</span><br><span class="line">        System.out.println(&quot;总条数：&quot; + collection.count());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 打印查询到的第一条数据</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void print(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        //prints the first document found in the collection</span><br><span class="line">        Document myDoc = collection.find().first();</span><br><span class="line">        System.out.println(myDoc.toJson());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 查询集合中所有的数据</span><br><span class="line">     * 不推荐使用foreach循环</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void findAll(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        System.out.println(&quot;----------------输出所有数据----------------&quot;);</span><br><span class="line">        MongoCursor&lt;Document&gt; cursor = collection.find().iterator();</span><br><span class="line">        try &#123;</span><br><span class="line">            while (cursor.hasNext()) &#123;</span><br><span class="line">                System.out.println(cursor.next().toJson());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            cursor.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 条件查询单条数据</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void findOneWithFilter(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        //Get A Single Document with a Query Filter</span><br><span class="line">        Document myDoc = collection.find(eq(&quot;i&quot;, 71)).first();</span><br><span class="line">        System.out.println(myDoc.toJson());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获得一个Set集合的数据</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void getSet(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        // now use a range query to get a larger subset</span><br><span class="line">        Block&lt;Document&gt; printBlock = new Block&lt;Document&gt;() &#123;</span><br><span class="line">            public void apply(final Document document) &#123;</span><br><span class="line">                System.out.println(document.toJson());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        //i的值大于98的数据</span><br><span class="line">        System.out.println(&quot;----------------i大于98的数据----------------&quot;);</span><br><span class="line">        collection.find(gt(&quot;i&quot;, 98)).forEach(printBlock);</span><br><span class="line">        //50 - 51 gt:大于 lte:小于等于</span><br><span class="line">        System.out.println(&quot;----------------50&lt;i&lt;=51的数据----------------&quot;);</span><br><span class="line">        collection.find(and(gt(&quot;i&quot;, 50), lte(&quot;i&quot;, 51))).forEach(printBlock);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 排序</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void sortDocuments(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        //根据i的值进行排序</span><br><span class="line">        Document myDoc = collection.find(exists(&quot;i&quot;)).sort(descending(&quot;i&quot;)).first();</span><br><span class="line">        System.out.println(&quot;----------------排序，输出第一条----------------&quot;);</span><br><span class="line">        System.out.println(myDoc.toJson());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获取想要的field(字段)</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void projectingFields(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        System.out.println(&quot;----------------获取指定field，输出第一条----------------&quot;);</span><br><span class="line">        //排除ID字段</span><br><span class="line">        Document myDoc = collection.find().projection(excludeId()).first();</span><br><span class="line">        System.out.println(myDoc.toJson());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void aggregations(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        /*</span><br><span class="line">        collection.aggregate(asList(</span><br><span class="line">                match(gt(&quot;i&quot;, 0)),</span><br><span class="line">                project(Document.parse(&quot;&#123;ITimes10: &#123;$multiply: [&#x27;$i&#x27;, 10]&#125;&#125;&quot;)))</span><br><span class="line">        ).forEach(printBlock);</span><br><span class="line">        */</span><br><span class="line">        //求和</span><br><span class="line">        Document myDoc = collection.aggregate(singletonList(group(null, sum(&quot;total&quot;, &quot;$i&quot;)))).first();</span><br><span class="line">        System.out.println(myDoc.toJson());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 更新document的方法</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void update(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        //更新一个，如果不引入下面这个包，set方法会报错</span><br><span class="line">        //import static com.mongodb.client.model.Updates.*;</span><br><span class="line">        collection.updateOne(eq(&quot;i&quot;, 10), set(&quot;i&quot;, 110));</span><br><span class="line">        //更新多个，小于100的都加100</span><br><span class="line">        UpdateResult updateResult = collection.updateMany(lt(&quot;i&quot;, 190), inc(&quot;i&quot;, 100));</span><br><span class="line">        System.out.println(&quot;----------------更新条数----------------&quot;);</span><br><span class="line">        System.out.println(updateResult.getModifiedCount());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 删除数据的方法</span><br><span class="line">     * @param collection</span><br><span class="line">     */</span><br><span class="line">    public static void delete(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        collection.deleteOne(eq(&quot;i&quot;, 210));</span><br><span class="line">        //gte 大于等于100的都删除</span><br><span class="line">        DeleteResult deleteResult = collection.deleteMany(gte(&quot;i&quot;, 100));</span><br><span class="line">        System.out.println(&quot;----------------删除条数----------------&quot;);</span><br><span class="line">        System.out.println(deleteResult.getDeletedCount());</span><br><span class="line">    &#125;</span><br><span class="line">    /*</span><br><span class="line">    public static void bulk(MongoCollection&lt;Document&gt; collection) &#123;</span><br><span class="line">        // 2. Ordered bulk operation - order is guarenteed</span><br><span class="line">        collection.bulkWrite(</span><br><span class="line">                Arrays.asList(new InsertOneModel&lt;&gt;(new Document(&quot;_id&quot;, 4)),</span><br><span class="line">                        new InsertOneModel&lt;&gt;(new Document(&quot;_id&quot;, 5)),</span><br><span class="line">                        new InsertOneModel&lt;&gt;(new Document(&quot;_id&quot;, 6)),</span><br><span class="line">                        new UpdateOneModel&lt;&gt;(new Document(&quot;_id&quot;, 1),</span><br><span class="line">                                new Document(&quot;$set&quot;, new Document(&quot;x&quot;, 2))),</span><br><span class="line">                        new DeleteOneModel&lt;&gt;(new Document(&quot;_id&quot;, 2)),</span><br><span class="line">                        new ReplaceOneModel&lt;&gt;(new Document(&quot;_id&quot;, 3),</span><br><span class="line">                                new Document(&quot;_id&quot;, 3).append(&quot;x&quot;, 4))));</span><br><span class="line">        // 2. Unordered bulk operation - no guarantee of order of operation</span><br><span class="line">        collection.bulkWrite(</span><br><span class="line">                Arrays.asList(new InsertOneModel&lt;&gt;(new Document(&quot;_id&quot;, 4)),</span><br><span class="line">                        new InsertOneModel&lt;&gt;(new Document(&quot;_id&quot;, 5)),</span><br><span class="line">                        new InsertOneModel&lt;&gt;(new Document(&quot;_id&quot;, 6)),</span><br><span class="line">                        new UpdateOneModel&lt;&gt;(new Document(&quot;_id&quot;, 1),</span><br><span class="line">                                new Document(&quot;$set&quot;, new Document(&quot;x&quot;, 2))),</span><br><span class="line">                        new DeleteOneModel&lt;&gt;(new Document(&quot;_id&quot;, 2)),</span><br><span class="line">                        new ReplaceOneModel&lt;&gt;(new Document(&quot;_id&quot;, 3),</span><br><span class="line">                                new Document(&quot;_id&quot;, 3).append(&quot;x&quot;, 4))),</span><br><span class="line">                new BulkWriteOptions().ordered(false));</span><br><span class="line">    &#125;</span><br><span class="line">    */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>mongo</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA 貌似注解失效 - 报错：cannot resolve method xxx</title>
    <url>/20170301-IDEA-%E8%B2%8C%E4%BC%BC%E6%B3%A8%E8%A7%A3%E5%A4%B1%E6%95%88-%E6%8A%A5%E9%94%99%EF%BC%9Acannot-resolve-method-xxx/</url>
    <content><![CDATA[<p>在Java平台上lombok提供了简单的注解的形式</p>
<p>来帮助我们消除一些必须有但看起来很臃肿的代码</p>
<p>比如属性的get&#x2F;set，及对象的toString等方法，特别是相对于 POJO;</p>
<hr>
<h2 id="出现问题"><a href="#出现问题" class="headerlink" title="出现问题"></a>出现问题</h2><ol>
<li>各种log方法，set方法中红色波浪线</li>
<li>提示：cannot resolve method xxx</li>
<li>虽然出现错误但是编译是可以通过的</li>
</ol>
<h2 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h2><p>原来的代码用了lombok简单注解<br>比如maven的pom.xml文件有如下配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;1.16.8&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>安装<strong>lombok plugin</strong></p>
<hr>
<p>装完插件之后就舒服了，也不报错</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA修改全局设置，如maven等</title>
    <url>/20170215-IDEA%E4%BF%AE%E6%94%B9%E5%85%A8%E5%B1%80%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%A6%82maven%E7%AD%89/</url>
    <content><![CDATA[<p>这几天在折腾maven项目</p>
<p>我发现居然每次新open一个项目就得配置下maven</p>
<p>因为默认的maven配置文件不行，我自定义的文件用的是阿里云的镜像</p>
<p>那样快一点，于是很郁闷，决定要搞定他！！！</p>
<p>结果这样设置就可以了，全局设置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">File---&gt;Other Setting---&gt;Default Setting</span><br></pre></td></tr></table></figure>
<p>接下来的设置就是一样的了，各种设置都可以，只要你想全局生效</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA智能补全快捷键更改为Ctrl + 逗号</title>
    <url>/20170328-IDEA%E6%99%BA%E8%83%BD%E8%A1%A5%E5%85%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%9B%B4%E6%94%B9%E4%B8%BACtrl%20+%20%E9%80%97%E5%8F%B7/</url>
    <content><![CDATA[<p>一直就听说idea的智能补全很厉害，但是Ctrl + 空格 被万恶的输入法给占用了<br>网上搜也不是很清晰，这里就写个博客记录一下</p>
<p>快捷键设置：file－&gt;setting-&gt;Keymap-&gt;Main menu-&gt;Code-&gt;Completion-&gt;Basic<br>找到之后右键Add keyboard Shortcut，然后按下：Ctrl + 逗号<br><img src="http://wx4.sinaimg.cn/mw690/b2e389b6ly1fe2n3f9lgcj20pq0k1ab3.jpg" /></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA自定义注释模板(Javadoc) - Jindent插件 - 安装&amp;设置</title>
    <url>/20170214-IDEA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E9%87%8A%E6%A8%A1%E6%9D%BF-Javadoc-Jindent%E6%8F%92%E4%BB%B6-%E5%AE%89%E8%A3%85-%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<p>在线安装</p>
<ol>
<li>File—&gt;Settings—&gt;Plugin—&gt;Browse repositories…</li>
<li>搜索框输入：jindent</li>
<li>Jindent - Source Code Formatter 选中</li>
<li>右边 install</li>
<li>等待安装完成</li>
<li>apply之后会让你重启idea</li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Javadoc</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA设置intellij-Java-google-style</title>
    <url>/20170401-IDEA%E8%AE%BE%E7%BD%AEintellij-Java-google-style/</url>
    <content><![CDATA[<p>一直想弄个格式化代码，后来发现很多人用谷歌的，于是也来整一份</p>
<p>保存一份google code的xml，链接有最新的<br><a href="https://github.com/google/styleguide/blob/gh-pages/intellij-Java-google-style.xml" target="_blank">intellij-Java-google-style.xml</a><br>设置方法如下：Setting -&gt; Editor -&gt; Code Stytle -&gt; Java<br><img src="http://wx3.sinaimg.cn/mw690/b2e389b6ly1fe713rpzl2j20tq0h30v7.jpg" /><br>最后一步就选择你存放之前保存的xml</p>
<p>然后就大功告成，来个对比<br>前</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.json;</span><br><span class="line"></span><br><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">import com.alibaba.fastjson.JSONObject;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by hisenyuan on 2017/3/23 at 18:02.</span><br><span class="line"> */</span><br><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;String s = &quot;&#123;&#x27;A&#x27;:&#x27;a&#x27;&#125;&quot;;</span><br><span class="line">        JSONObject obj= JSON.parseObject(s);</span><br><span class="line">        System.out.println(obj.get(&quot;A&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>后</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.json;</span><br><span class="line"></span><br><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">import com.alibaba.fastjson.JSONObject;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by hisenyuan on 2017/3/23 at 18:02.</span><br><span class="line"> */</span><br><span class="line">public class test &#123;</span><br><span class="line"></span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">    String s = &quot;&#123;&#x27;A&#x27;:&#x27;a&#x27;&#125;&quot;;</span><br><span class="line">    JSONObject obj = JSON.parseObject(s);</span><br><span class="line">    System.out.println(obj.get(&quot;A&quot;));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>intellij-Java-google-style</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA部署tomcat项目前台传输的json到后台乱码 - IDEA乱码解决</title>
    <url>/20170330-IDEA%E9%83%A8%E7%BD%B2tomcat%E9%A1%B9%E7%9B%AE%E5%89%8D%E5%8F%B0%E4%BC%A0%E8%BE%93%E7%9A%84json%E5%88%B0%E5%90%8E%E5%8F%B0%E4%B9%B1%E7%A0%81/</url>
    <content><![CDATA[<p>idea涉及编码的地方都改了<br>主要是编译时候的编码，tomcat的编码，以及idea配置里面的编码</p>
<p>一、idea配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">\HOME\IntelliJ IDEA 2016.3.4\bin\idea64.exe.vmoptions</span><br></pre></td></tr></table></figure>
<p>增加一行：-Dfile.encoding&#x3D;UTF-8</p>
<p>二、编译参数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">File -&gt; Settings -&gt; Build, Execution, Deployment</span><br><span class="line">-&gt; Compiler -&gt; Java Compiler -&gt; Addition command line parameters</span><br></pre></td></tr></table></figure>
<p>在空格里面添加：-encoding utf-8<br><img src="http://wx1.sinaimg.cn/mw690/b2e389b6ly1fe57tlrhrhj20n10fa3zl.jpg" /><br>三、工程编码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">File -&gt; Settings -&gt; Editor -&gt; File Encodings</span><br></pre></td></tr></table></figure>
<p>此页面三个地方都选择UTF-8<br><img src="http://wx3.sinaimg.cn/mw690/b2e389b6ly1fe57tmo745j20qw0jbmys.jpg" /><br>四、tomcat参数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Run/debug Configuration tomcat</span><br></pre></td></tr></table></figure>
<p>VM options：-Dfile.encoding&#x3D;UTF-8<br><img src="http://wx3.sinaimg.cn/mw690/b2e389b6ly1fe57tn7v93j20k60atmxt.jpg" /></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ IDEA 调试窗口、帮助窗口、搜索框、底部消息等中文乱码问题解决</title>
    <url>/20170825-IntelliJ%20IDEA%20%E8%B0%83%E8%AF%95%E7%AA%97%E5%8F%A3%E3%80%81%E5%B8%AE%E5%8A%A9%E7%AA%97%E5%8F%A3%E3%80%81%E6%90%9C%E7%B4%A2%E6%A1%86%E3%80%81%E5%BA%95%E9%83%A8%E6%B6%88%E6%81%AF%E7%AD%89%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<p>IntelliJ IDEA 调试窗口、帮助窗口、搜索框、底部消息等中文乱码</p>
<p>在使用的过程中发现，搜索框历史、提交svn后的消息提示乱码</p>
<p><strong>最后发现是由于更改了idea界面的字体，字体对中文支持不佳导致</strong></p>
<p>解决办法：更改为支持中文的字体（比如：微软雅黑 Microsoft YaHei）</p>
<p>设置路径：Settings -&gt; Appearance &amp; Behavior -&gt; UI Options -&gt; override default fonts by</p>
<p>选择何时的字体即可，也可以把勾勾去掉，使用默认的。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>乱码</tag>
      </tags>
  </entry>
  <entry>
    <title>idea列编辑：IntelliJ IDEA：toggle block selection mode</title>
    <url>/20171024-IntelliJ%20IDEA%EF%BC%9Atoggle%20block%20selection%20mode/</url>
    <content><![CDATA[<p>在eclipse中有列编辑模式：toggle block selection mode</p>
<p>在idea中也可以，而且还比较高级，哈哈</p>
<p>idea -&gt; 右上角 -&gt; Edit -&gt; Column Selection Mode -&gt; 移动光标到你想要弄的行</p>
<p>完事在重复一次，就可以退出列编辑模式</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>Intellij IDEA中使用MyBatis-generator 自动生成MyBatis代码</title>
    <url>/20170322-Intellij%20IDEA%E4%B8%AD%E4%BD%BF%E7%94%A8MyBatis-generator%20%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90MyBatis%E4%BB%A3%E7%A0%81/</url>
    <content><![CDATA[<p>MyBatis Generator是一个非常方便的代码生成工具，</p>
<p>可以根据数据库中表结构自动生成CRUD代码，可以满足大部分需求。</p>
<p>MyBatis Generator (MBG) 是一个Mybatis的代码生成器 ，</p>
<p>可以根据数据库中表结构自动生成简单的CRUD（插入，查询，更新，删除）操作。</p>
<p>但联合查询和存储过程，需手动手写SQL和对象。</p>
<p><strong>PS:配置过程中请注意自己的工程目录结构</strong></p>
<h2 id="一、pom-xml添加插件"><a href="#一、pom-xml添加插件" class="headerlink" title="一、pom.xml添加插件"></a>一、pom.xml添加插件</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">                &lt;dependencies&gt;</span><br><span class="line">                    &lt;dependency&gt;</span><br><span class="line">                        &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">                        &lt;artifactId&gt;mysql-connector-Java&lt;/artifactId&gt;</span><br><span class="line">                        &lt;version&gt;5.1.5&lt;/version&gt;</span><br><span class="line">                    &lt;/dependency&gt;</span><br><span class="line">                &lt;/dependencies&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;overwrite&gt;true&lt;/overwrite&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br></pre></td></tr></table></figure>
<h2 id="二、配置generatorConfig-xml"><a href="#二、配置generatorConfig-xml" class="headerlink" title="二、配置generatorConfig.xml"></a>二、配置generatorConfig.xml</h2><span id="more"></span>
<p>resources下建generatorConfig.xml,作为mybatis-generator-maven-plugin插件的执行目标。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE generatorConfiguration</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;generatorConfiguration&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context id=&quot;mysqlgenerator&quot; targetRuntime=&quot;MyBatis3&quot;&gt;</span><br><span class="line">        &lt;!--数据库连接信息--&gt;</span><br><span class="line">        &lt;jdbcConnection driverClass=&quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">                        connectionURL=&quot;jdbc:mysql://127.0.0.1:3306/ssm&quot;</span><br><span class="line">                        userId=&quot;root&quot;</span><br><span class="line">                        password=&quot;hisen&quot; /&gt;</span><br><span class="line">        &lt;!--代码相关路径和包--&gt;</span><br><span class="line">        &lt;JavaModelGenerator targetPackage=&quot;com.hisen.mybatis.model&quot; targetProject=&quot;src/main/Java&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;sqlMapGenerator targetPackage=&quot;com.hisen.mybatis.mapper&quot; targetProject=&quot;src/main/resources&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;JavaClientGenerator type=&quot;XMLMAPPER&quot; targetPackage=&quot;com.hisen.mybatis.mapper&quot; targetProject=&quot;src/main/Java&quot; /&gt;</span><br><span class="line">        &lt;!--表名--&gt;</span><br><span class="line">        &lt;table tableName=&quot;appointment&quot;/&gt;</span><br><span class="line">        &lt;table tableName=&quot;book&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/context&gt;</span><br><span class="line"></span><br><span class="line">&lt;/generatorConfiguration&gt;</span><br></pre></td></tr></table></figure>
<h2 id="三、Intellij配置"><a href="#三、Intellij配置" class="headerlink" title="三、Intellij配置"></a>三、Intellij配置</h2><p>MyBatis Generator生成代码的运行方式：命令行、使用Ant、使用Maven、Java编码。</p>
<p>本文采用Maven插件mybatis-generator-maven-plugin来运行MyBatis Generator，用的是命令行的方式。</p>
<p>配置插件<br><img src="http://wx1.sinaimg.cn/mw690/b2e389b6ly1fdvexcbif9j20cs0670sz.jpg" /><br>选择目录，输入命令：mybatis-generator:generate -e<br><img src="http://wx4.sinaimg.cn/mw690/b2e389b6ly1fdvexcxg0fj20pa0kt404.jpg" /><br>找到插件。双击执行<br><img src="http://wx3.sinaimg.cn/mw690/b2e389b6ly1fdvexdf3u2j20dc0dft9x.jpg" /><br>即可看到生成的文件<br><img src="http://wx1.sinaimg.cn/mw690/b2e389b6ly1fdvf14o2y3j20du0bot92.jpg" /></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>idea</tag>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Intellij Idea 快捷键汇总&amp;介绍</title>
    <url>/20170213-Intellij-Idea-%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%B1%87%E6%80%BB-%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<p>最常用快捷键(1~18)</p>
<ol>
<li>Ctrl＋E，可以显示最近编辑的文件列表</li>
<li>Shift＋Click可以关闭文件</li>
<li>Ctrl＋[或]可以跳到大括号的开头结尾</li>
<li>Ctrl＋Shift＋Backspace可以跳转到上次编辑的地方</li>
<li>Ctrl＋F12，可以显示当前文件的结构</li>
<li>Ctrl＋F7可以查询当前元素在当前文件中的引用，然后按F3可以选择</li>
<li>Ctrl＋N，可以快速打开类</li>
<li>Ctrl＋Shift＋N，可以快速打开文件</li>
<li>Alt＋Q可以看到当前方法的声明</li>
<li>Ctrl＋W可以选择单词继而语句继而行继而函数</li>
<li>Alt＋F1可以将正在编辑的元素在各个面板中定位</li>
<li>Ctrl＋P，可以显示参数信息</li>
<li>Ctrl＋Shift＋Insert可以选择剪贴板内容并插入</li>
<li>Alt＋Insert可以生成构造器&#x2F;Getter&#x2F;Setter等</li>
<li>Ctrl＋Alt＋V 可以引入变量。例如把括号内的SQL赋成一个变量</li>
<li>Ctrl＋Alt＋T可以把代码包在一块内，例如try&#x2F;catch</li>
<li>Alt＋Up and Alt＋Down可在方法间快速移动</li>
<li>在一些地方按Alt＋Enter可以得到一些Intention Action，例如将”&#x3D;&#x3D;”改为”equals()”</li>
<li>Ctrl＋Shift＋Alt＋N可以快速打开符号</li>
<li>Ctrl＋Shift＋Space在很多时候都能够给出Smart提示</li>
<li>Alt＋F3可以快速寻找</li>
<li>Ctrl＋&#x2F;和Ctrl＋Shift＋&#x2F;可以注释代码</li>
<li>Ctrl＋Alt＋B可以跳转到抽象方法的实现</li>
<li>Ctrl＋O可以选择父类的方法进行重写</li>
<li>Ctrl＋Q可以看JavaDoc</li>
<li>Ctrl＋Alt＋Space是类名自动完成</li>
<li>快速打开类&#x2F;文件&#x2F;符号时，可以使用通配符，也可以使用缩写</li>
<li>Live Templates! Ctrl＋J</li>
<li>Ctrl＋Shift＋F7可以高亮当前元素在当前文件中的使用</li>
<li>Ctrl＋Alt＋Up &#x2F;Ctrl＋Alt＋Down可以快速跳转搜索结果</li>
<li>Ctrl＋Shift＋J可以整合两行</li>
<li>Alt＋F8是计算变量值</li>
</ol>
<span id="more"></span>
<p>Alt+回车 导入包,自动修正</p>
<p>Ctrl+N   查找类</p>
<p>Ctrl+Shift+N 查找文件</p>
<p>Ctrl+Alt+L  格式化代码</p>
<p>Ctrl+Alt+O 优化导入的类和包</p>
<p>Alt+Insert 生成代码(如get,set方法,构造函数等)</p>
<p>Ctrl+E或者Alt+Shift+C  最近更改的代码</p>
<p>Ctrl+R 替换文本</p>
<p>Ctrl+F 查找文本</p>
<p>Ctrl+Shift+Space 自动补全代码</p>
<p>Ctrl+空格 代码提示</p>
<p>Ctrl+Alt+Space 类名或接口名提示</p>
<p>Ctrl+P 方法参数提示</p>
<p>Ctrl+Shift+Alt+N 查找类中的方法或变量</p>
<p>Alt+Shift+C 对比最近修改的代码</p>
<p>Shift+F6  重构-重命名</p>
<p>Ctrl+Shift+先上键</p>
<p>Ctrl+X 删除行</p>
<p>Ctrl+D 复制行</p>
<p>Ctrl+&#x2F; 或 Ctrl+Shift+&#x2F;  注释（&#x2F;&#x2F; 或者&#x2F;<em>…</em>&#x2F; ）</p>
<p>Ctrl+J  自动代码</p>
<p>Ctrl+E 最近打开的文件</p>
<p>Ctrl+H 显示类结构图</p>
<p>Ctrl+Q 显示注释文档</p>
<p>Alt+F1 查找代码所在位置</p>
<p>Alt+1 快速打开或隐藏工程面板</p>
<p>Ctrl+Alt+ left&#x2F;right 返回至上次浏览的位置</p>
<p>Alt+ left&#x2F;right 切换代码视图</p>
<p>Alt+ Up&#x2F;Down 在方法间快速移动定位</p>
<p>Ctrl+Shift+Up&#x2F;Down 代码向上&#x2F;下移动。</p>
<p>F2 或Shift+F2 高亮错误或警告快速定位</p>
<p>代码标签输入完成后，按Tab，生成代码。</p>
<p>选中文本，按Ctrl+Shift+F7 ，高亮显示所有该文本，按Esc高亮消失。</p>
<p>Ctrl+W 选中代码，连续按会有其他效果</p>
<p>选中文本，按Alt+F3 ，逐个往下查找相同文本，并高亮显示。</p>
<p>Ctrl+Up&#x2F;Down 光标跳转到第一行或最后一行下</p>
<p>Ctrl+B 快速打开光标处的类或方法</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVA中几种常用的RPC框架</title>
    <url>/20170317-JAVA%E4%B8%AD%E5%87%A0%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%9A%84RPC%E6%A1%86%E6%9E%B6/</url>
    <content><![CDATA[<p>RPC是远程过程调用的简称，广泛应用在大规模分布式应用中，</p>
<p>作用是有助于系统的垂直拆分，使系统更易拓展。</p>
<p>Java中的RPC框架比较多，各有特色，广泛使用的有RMI、Hessian、Dubbo等。</p>
<p>RPC还有一个特点就是能够跨语言，本文只以JAVA语言里的RPC为例。</p>
<p>其他的框架结构也类似，区别在于对象的序列化方法，传输对象的通讯协议，</p>
<p>以及注册中心的管理与failover设计（利用zookeeper）。</p>
<p>客户端和服务端可以运行在不同的JVM中，Client只需要引入接口，</p>
<p>接口的实现以及运行时需要的数据都在Server端，RPC的主要依赖技术是序列化、反序列化和传输协议，</p>
<p>JAVA里对应的就是对象的序列化、反序列化以及序列化后数据的传输。</p>
<p>RMI的序列化和反序列化是JAVA自带的，Hessian里的序列化和反序列化是私有的，传输协议则是HTTP，</p>
<p>Dubbo的序列化可以多种选择，一般使用Hessian的序列化协议，传输则是TCP协议，使用了高性能的NIO框架Netty。</p>
<p>对于序列化，我还了解一些，像Google的ProBuffer、JBoss Marshalling和Apache Thrift等</p>
<h2 id="1-RMI"><a href="#1-RMI" class="headerlink" title="1.RMI"></a>1.RMI</h2><img src="http://wx3.sinaimg.cn/mw690/b2e389b6ly1fdpngkrst0j20iq0dajs2.jpg" alt="rmi" />
JAVA自带的远程方法调用工具，不过有一定的局限性，

<p>毕竟是JAVA语言最开始时的设计，后来很多框架的原理都基于RMI，RMI的使用如下：</p>
<p>对外接口</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public interface IService extends Remote &#123;  </span><br><span class="line">    public String queryName(String no) throws RemoteException;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>服务实现</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Java.rmi.RemoteException;</span><br><span class="line">import Java.rmi.server.UnicastRemoteObject;</span><br><span class="line"></span><br><span class="line">// 服务实现</span><br><span class="line">public class ServiceImpl extends UnicastRemoteObject implements IService &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     */</span><br><span class="line">    private static final long serialVersionUID = 682805210518738166L;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @throws RemoteException</span><br><span class="line">     */</span><br><span class="line">    protected ServiceImpl() throws RemoteException &#123;</span><br><span class="line">        super();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* (non-Javadoc)</span><br><span class="line">     * @see com.suning.ebuy.wd.web.IService#queryName(Java.lang.String)</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public String queryName(String no) throws RemoteException &#123;</span><br><span class="line">        // 方法的具体实现</span><br><span class="line">        System.out.println(&quot;hello&quot; + no);</span><br><span class="line">        return String.valueOf(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>RMI客户端</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">import Java.rmi.AccessException;</span><br><span class="line">import Java.rmi.NotBoundException;</span><br><span class="line">import Java.rmi.RemoteException;</span><br><span class="line">import Java.rmi.registry.LocateRegistry;</span><br><span class="line">import Java.rmi.registry.Registry;</span><br><span class="line"></span><br><span class="line">// RMI客户端</span><br><span class="line">public class Client &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 注册管理器</span><br><span class="line">        Registry registry = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            // 获取服务注册管理器</span><br><span class="line">            registry = LocateRegistry.getRegistry(&quot;127.0.0.1&quot;,8088);</span><br><span class="line">            // 列出所有注册的服务</span><br><span class="line">            String[] list = registry.list();</span><br><span class="line">            for(String s : list)&#123;</span><br><span class="line">                System.out.println(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (RemoteException e) &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        try &#123;</span><br><span class="line">            // 根据命名获取服务</span><br><span class="line">            IService server = (IService) registry.lookup(&quot;vince&quot;);</span><br><span class="line">            // 调用远程方法</span><br><span class="line">            String result = server.queryName(&quot;ha ha ha ha&quot;);</span><br><span class="line">            // 输出调用结果</span><br><span class="line">            System.out.println(&quot;result from remote : &quot; + result);</span><br><span class="line">        &#125; catch (AccessException e) &#123;</span><br><span class="line">            </span><br><span class="line">        &#125; catch (RemoteException e) &#123;</span><br><span class="line">            </span><br><span class="line">        &#125; catch (NotBoundException e) &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>RMI服务端</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">import Java.rmi.RemoteException;</span><br><span class="line">import Java.rmi.registry.LocateRegistry;</span><br><span class="line">import Java.rmi.registry.Registry;</span><br><span class="line"></span><br><span class="line">// RMI服务端</span><br><span class="line">public class Server &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 注册管理器</span><br><span class="line">        Registry registry = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            // 创建一个服务注册管理器</span><br><span class="line">            registry = LocateRegistry.createRegistry(8088);</span><br><span class="line"></span><br><span class="line">        &#125; catch (RemoteException e) &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        try &#123;</span><br><span class="line">            // 创建一个服务</span><br><span class="line">            ServiceImpl server = new ServiceImpl();</span><br><span class="line">            // 将服务绑定命名</span><br><span class="line">            registry.rebind(&quot;vince&quot;, server);</span><br><span class="line">            </span><br><span class="line">            System.out.println(&quot;bind server&quot;);</span><br><span class="line">        &#125; catch (RemoteException e) &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>服务注册管理器写在了Server里，当然也可以抽出来单独作为一个服务，</p>
<p>在其他一些框架中，往往用Zookeeper充当注册管理角色。</p>
<h2 id="2-Hessian（基于HTTP的远程方法调用）"><a href="#2-Hessian（基于HTTP的远程方法调用）" class="headerlink" title="2.Hessian（基于HTTP的远程方法调用）"></a>2.Hessian（基于HTTP的远程方法调用）</h2><img src="http://wx3.sinaimg.cn/mw690/b2e389b6ly1fdpngkehxqj20i306xaa2.jpg" alt="Hessian" />
基于HTTP协议传输，在性能方面还不够完美，负载均衡和失效转移依赖于应用的负载均衡器，

<p>Hessian的使用则与RMI类似，区别在于淡化了Registry的角色，通过显示的地址调用，</p>
<p>利用HessianProxyFactory根据配置的地址create一个代理对象，另外还要引入Hessian的Jar包。</p>
<h2 id="3、Dubbo（淘宝开源的基于TCP的RPC框架）"><a href="#3、Dubbo（淘宝开源的基于TCP的RPC框架）" class="headerlink" title="3、Dubbo（淘宝开源的基于TCP的RPC框架）"></a>3、Dubbo（淘宝开源的基于TCP的RPC框架）</h2><img src="http://wx4.sinaimg.cn/mw690/b2e389b6ly1fdpngjv276j20ik0cxwf5.jpg" alt="Dubbo" />

<p>基于Netty的高性能RPC框架，是阿里巴巴开源的，总体原理如下：</p>
<p>在了解Dubbo之前，要先对Zookeeper有深入的理解，当理解了zookeeper后，Dubbo也就了无秘密了。</p>
<p>Dubbo的详细说明在淘宝开源里说的非常详细，在工作中很多生产项目都用了Dubbo，过程中也发现了很多需要注意的地方.</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>JMH使用案例-日期格式化工具性能对比</title>
    <url>/20210511-JMH-use-cases-date-format-performance/</url>
    <content><![CDATA[<h2 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h2><p>最近在看代码，发现一个 Date 格式化为 String 的方法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">dateFormatString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span>).format(date);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看到这个方法想到</p>
<ul>
<li>每次都 new 一个 format 会快么(非线程安全，得每次都 new)？</li>
<li>SimpleDateFormat 格式化快么？</li>
<li>“yyyy-MM-dd HH:mm:ss.SSS” 改成静态常量会不会快点？</li>
</ul>
<p>带着以上三个疑问，就想着做个对比测试。<br>恰巧最近在 perfma 社区看 jvm 相关内容时，刷到了『性能调优必备利器之 JMH』</p>
<p>优点：不用自己写相关统计代码，而且统计方式有多种</p>
<h2 id="二、结论"><a href="#二、结论" class="headerlink" title="二、结论"></a>二、结论</h2><p>性能从低到高</p>
<ul>
<li>Java.text.SimpleDateFormat</li>
<li>org.apache.commons.lang.time.DateFormatUtils</li>
<li>org.joda.time.DateTime</li>
</ul>
<span id="more"></span>
<p>字符串静态常量影响</p>
<ul>
<li>是否静态常量几乎没有影响</li>
<li>使用常量反而性能有所下降(???为何)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Benchmark                                             Mode  Cnt        Score        Error  Units</span><br><span class="line">DateConvertTest.dateFormatString                     thrpt   10   867333.631 ±   9510.553  ops/s</span><br><span class="line">DateConvertTest.dateFormatStringApache               thrpt   10  2158217.955 ±  89012.866  ops/s</span><br><span class="line">DateConvertTest.dateFormatStringApacheStaticPattern  thrpt   10  2141167.550 ±  93715.889  ops/s</span><br><span class="line">DateConvertTest.dateFormatStringJoda                 thrpt   10  2802803.925 ± 121600.833  ops/s</span><br><span class="line">DateConvertTest.dateFormatStringJodaStaticPattern    thrpt   10  2744918.391 ± 131925.235  ops/s</span><br></pre></td></tr></table></figure>
<p>说明：<br>Error 列是空的，看 Score 和 Units 即可<br>ops&#x2F;s:一秒钟执行多少次操作</p>
<h2 id="三、代码"><a href="#三、代码" class="headerlink" title="三、代码"></a>三、代码</h2><h3 id="3-1-引入相关-jar"><a href="#3-1-引入相关-jar" class="headerlink" title="3.1 引入相关 jar"></a>3.1 引入相关 jar</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.openjdk.jmh&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jmh-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.23&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.openjdk.jmh&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jmh-generator-annprocess&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.23&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-IDEA-安装-JMH-插件"><a href="#3-2-IDEA-安装-JMH-插件" class="headerlink" title="3.2 IDEA 安装 JMH 插件"></a>3.2 IDEA 安装 JMH 插件</h3><p>插件中心搜索：JMH<br>安装量最高的那个就是</p>
<h3 id="3-3-编写代码"><a href="#3-3-编写代码" class="headerlink" title="3.3 编写代码"></a>3.3 编写代码</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang.time.DateFormatUtils;</span><br><span class="line"><span class="keyword">import</span> org.joda.time.DateTime;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Benchmark;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Fork;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Measurement;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Scope;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.State;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Warmup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> Java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hisenyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/5/10 18:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 默认的 State，每个测试线程分配一个实例</span></span><br><span class="line"><span class="meta">@State(Scope.Thread)</span></span><br><span class="line"><span class="comment">// 如果 fork 数是 2 的话，则 JMH 会 fork 出两个进程来进行测试。</span></span><br><span class="line"><span class="meta">@Fork(1)</span></span><br><span class="line"><span class="comment">// 预热的次数 3 次基准测试(不是执行三次方法)</span></span><br><span class="line"><span class="meta">@Warmup(iterations = 3)</span></span><br><span class="line"><span class="comment">// 基准执行次数 10 次(参数含义同上)</span></span><br><span class="line"><span class="meta">@Measurement(iterations = 10)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateConvertTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">PATTERN</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">dateFormatString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span>).format(date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">dateFormatStringJoda</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DateTime</span>(date).toString(<span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">dateFormatStringJodaStaticPattern</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DateTime</span>(date).toString(PATTERN);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">dateFormatStringApache</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> DateFormatUtils.format(date, <span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">dateFormatStringApacheStaticPattern</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> DateFormatUtils.format(date, PATTERN);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-执行"><a href="#3-4-执行" class="headerlink" title="3.4 执行"></a>3.4 执行</h3><p>安装了 JMH 插件之后，直接对着类名右键，选择运行即可。<br>JMH 会默认执行当前类下面的所有的基准测试。</p>
<h2 id="四、执行结果"><a href="#四、执行结果" class="headerlink" title="四、执行结果"></a>四、执行结果</h2><p>ETA 00:10:50 代表整个测试需要近11分钟</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># JMH version: <span class="number">1.23</span></span><br><span class="line"># VM version: JDK <span class="number">1.8</span><span class="number">.0_171</span>, Java <span class="title function_">HotSpot</span><span class="params">(TM)</span> <span class="number">64</span>-Bit Server VM, <span class="number">25.171</span>-b11</span><br><span class="line"># VM invoker: /Library/Java/JavaVirtualMachines/jdk1<span class="number">.8</span><span class="number">.0_171</span>.jdk/Contents/Home/jre/bin/Java</span><br><span class="line"># VM options: -Dfile.encoding=UTF-<span class="number">8</span></span><br><span class="line"># Warmup: <span class="number">3</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Measurement: <span class="number">10</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Timeout: <span class="number">10</span> min per iteration</span><br><span class="line"># Threads: <span class="number">1</span> thread, will synchronize iterations</span><br><span class="line"># Benchmark mode: Throughput, ops/time</span><br><span class="line"># Benchmark: com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatString</span><br><span class="line"></span><br><span class="line"># Run progress: <span class="number">0.00</span>% complete, ETA <span class="number">00</span>:<span class="number">10</span>:<span class="number">50</span></span><br><span class="line"># Fork: <span class="number">1</span> of <span class="number">1</span></span><br><span class="line"># Warmup Iteration   <span class="number">1</span>: <span class="number">698627.190</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">2</span>: <span class="number">873835.360</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">3</span>: <span class="number">870972.646</span> ops/s</span><br><span class="line">Iteration   <span class="number">1</span>: <span class="number">875650.632</span> ops/s</span><br><span class="line">Iteration   <span class="number">2</span>: <span class="number">872407.599</span> ops/s</span><br><span class="line">Iteration   <span class="number">3</span>: <span class="number">864390.061</span> ops/s</span><br><span class="line">Iteration   <span class="number">4</span>: <span class="number">872456.756</span> ops/s</span><br><span class="line">Iteration   <span class="number">5</span>: <span class="number">870538.248</span> ops/s</span><br><span class="line">Iteration   <span class="number">6</span>: <span class="number">861600.599</span> ops/s</span><br><span class="line">Iteration   <span class="number">7</span>: <span class="number">868469.312</span> ops/s</span><br><span class="line">Iteration   <span class="number">8</span>: <span class="number">868930.572</span> ops/s</span><br><span class="line">Iteration   <span class="number">9</span>: <span class="number">864686.616</span> ops/s</span><br><span class="line">Iteration  <span class="number">10</span>: <span class="number">854205.911</span> ops/s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Result <span class="string">&quot;com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatString&quot;</span>:</span><br><span class="line">  <span class="number">867333.631</span> ±(<span class="number">99.9</span>%) <span class="number">9510.553</span> ops/s [Average]</span><br><span class="line">  (min, avg, max) = (<span class="number">854205.911</span>, <span class="number">867333.631</span>, <span class="number">875650.632</span>), stdev = <span class="number">6290.642</span></span><br><span class="line">  CI (<span class="number">99.9</span>%): [<span class="number">857823.077</span>, <span class="number">876844.184</span>] (assumes normal distribution)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># JMH version: <span class="number">1.23</span></span><br><span class="line"># VM version: JDK <span class="number">1.8</span><span class="number">.0_171</span>, Java <span class="title function_">HotSpot</span><span class="params">(TM)</span> <span class="number">64</span>-Bit Server VM, <span class="number">25.171</span>-b11</span><br><span class="line"># VM invoker: /Library/Java/JavaVirtualMachines/jdk1<span class="number">.8</span><span class="number">.0_171</span>.jdk/Contents/Home/jre/bin/Java</span><br><span class="line"># VM options: -Dfile.encoding=UTF-<span class="number">8</span></span><br><span class="line"># Warmup: <span class="number">3</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Measurement: <span class="number">10</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Timeout: <span class="number">10</span> min per iteration</span><br><span class="line"># Threads: <span class="number">1</span> thread, will synchronize iterations</span><br><span class="line"># Benchmark mode: Throughput, ops/time</span><br><span class="line"># Benchmark: com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatStringApache</span><br><span class="line"></span><br><span class="line"># Run progress: <span class="number">20.00</span>% complete, ETA <span class="number">00</span>:08:<span class="number">42</span></span><br><span class="line"># Fork: <span class="number">1</span> of <span class="number">1</span></span><br><span class="line"># Warmup Iteration   <span class="number">1</span>: <span class="number">1922497.366</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">2</span>: <span class="number">2121425.254</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">3</span>: <span class="number">2142439.041</span> ops/s</span><br><span class="line">Iteration   <span class="number">1</span>: <span class="number">2174791.808</span> ops/s</span><br><span class="line">Iteration   <span class="number">2</span>: <span class="number">2101868.007</span> ops/s</span><br><span class="line">Iteration   <span class="number">3</span>: <span class="number">2174003.026</span> ops/s</span><br><span class="line">Iteration   <span class="number">4</span>: <span class="number">2202522.277</span> ops/s</span><br><span class="line">Iteration   <span class="number">5</span>: <span class="number">2039234.570</span> ops/s</span><br><span class="line">Iteration   <span class="number">6</span>: <span class="number">2105338.449</span> ops/s</span><br><span class="line">Iteration   <span class="number">7</span>: <span class="number">2205933.974</span> ops/s</span><br><span class="line">Iteration   <span class="number">8</span>: <span class="number">2175865.041</span> ops/s</span><br><span class="line">Iteration   <span class="number">9</span>: <span class="number">2167544.736</span> ops/s</span><br><span class="line">Iteration  <span class="number">10</span>: <span class="number">2235077.658</span> ops/s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Result <span class="string">&quot;com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatStringApache&quot;</span>:</span><br><span class="line">  <span class="number">2158217.955</span> ±(<span class="number">99.9</span>%) <span class="number">89012.866</span> ops/s [Average]</span><br><span class="line">  (min, avg, max) = (<span class="number">2039234.570</span>, <span class="number">2158217.955</span>, <span class="number">2235077.658</span>), stdev = <span class="number">58876.499</span></span><br><span class="line">  CI (<span class="number">99.9</span>%): [<span class="number">2069205.089</span>, <span class="number">2247230.821</span>] (assumes normal distribution)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># JMH version: <span class="number">1.23</span></span><br><span class="line"># VM version: JDK <span class="number">1.8</span><span class="number">.0_171</span>, Java <span class="title function_">HotSpot</span><span class="params">(TM)</span> <span class="number">64</span>-Bit Server VM, <span class="number">25.171</span>-b11</span><br><span class="line"># VM invoker: /Library/Java/JavaVirtualMachines/jdk1<span class="number">.8</span><span class="number">.0_171</span>.jdk/Contents/Home/jre/bin/Java</span><br><span class="line"># VM options: -Dfile.encoding=UTF-<span class="number">8</span></span><br><span class="line"># Warmup: <span class="number">3</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Measurement: <span class="number">10</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Timeout: <span class="number">10</span> min per iteration</span><br><span class="line"># Threads: <span class="number">1</span> thread, will synchronize iterations</span><br><span class="line"># Benchmark mode: Throughput, ops/time</span><br><span class="line"># Benchmark: com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatStringApacheStaticPattern</span><br><span class="line"></span><br><span class="line"># Run progress: <span class="number">40.00</span>% complete, ETA <span class="number">00</span>:<span class="number">06</span>:<span class="number">31</span></span><br><span class="line"># Fork: <span class="number">1</span> of <span class="number">1</span></span><br><span class="line"># Warmup Iteration   <span class="number">1</span>: <span class="number">1964208.975</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">2</span>: <span class="number">2138997.654</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">3</span>: <span class="number">2164194.409</span> ops/s</span><br><span class="line">Iteration   <span class="number">1</span>: <span class="number">2221565.433</span> ops/s</span><br><span class="line">Iteration   <span class="number">2</span>: <span class="number">2231776.725</span> ops/s</span><br><span class="line">Iteration   <span class="number">3</span>: <span class="number">2210494.794</span> ops/s</span><br><span class="line">Iteration   <span class="number">4</span>: <span class="number">2057487.199</span> ops/s</span><br><span class="line">Iteration   <span class="number">5</span>: <span class="number">2111366.133</span> ops/s</span><br><span class="line">Iteration   <span class="number">6</span>: <span class="number">2150355.985</span> ops/s</span><br><span class="line">Iteration   <span class="number">7</span>: <span class="number">2116673.562</span> ops/s</span><br><span class="line">Iteration   <span class="number">8</span>: <span class="number">2140376.847</span> ops/s</span><br><span class="line">Iteration   <span class="number">9</span>: <span class="number">2099801.246</span> ops/s</span><br><span class="line">Iteration  <span class="number">10</span>: <span class="number">2071777.579</span> ops/s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Result <span class="string">&quot;com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatStringApacheStaticPattern&quot;</span>:</span><br><span class="line">  <span class="number">2141167.550</span> ±(<span class="number">99.9</span>%) <span class="number">93715.889</span> ops/s [Average]</span><br><span class="line">  (min, avg, max) = (<span class="number">2057487.199</span>, <span class="number">2141167.550</span>, <span class="number">2231776.725</span>), stdev = <span class="number">61987.258</span></span><br><span class="line">  CI (<span class="number">99.9</span>%): [<span class="number">2047451.661</span>, <span class="number">2234883.440</span>] (assumes normal distribution)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># JMH version: <span class="number">1.23</span></span><br><span class="line"># VM version: JDK <span class="number">1.8</span><span class="number">.0_171</span>, Java <span class="title function_">HotSpot</span><span class="params">(TM)</span> <span class="number">64</span>-Bit Server VM, <span class="number">25.171</span>-b11</span><br><span class="line"># VM invoker: /Library/Java/JavaVirtualMachines/jdk1<span class="number">.8</span><span class="number">.0_171</span>.jdk/Contents/Home/jre/bin/Java</span><br><span class="line"># VM options: -Dfile.encoding=UTF-<span class="number">8</span></span><br><span class="line"># Warmup: <span class="number">3</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Measurement: <span class="number">10</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Timeout: <span class="number">10</span> min per iteration</span><br><span class="line"># Threads: <span class="number">1</span> thread, will synchronize iterations</span><br><span class="line"># Benchmark mode: Throughput, ops/time</span><br><span class="line"># Benchmark: com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatStringJoda</span><br><span class="line"></span><br><span class="line"># Run progress: <span class="number">60.00</span>% complete, ETA <span class="number">00</span>:<span class="number">04</span>:<span class="number">21</span></span><br><span class="line"># Fork: <span class="number">1</span> of <span class="number">1</span></span><br><span class="line"># Warmup Iteration   <span class="number">1</span>: <span class="number">2767967.530</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">2</span>: <span class="number">2839342.269</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">3</span>: <span class="number">2824726.959</span> ops/s</span><br><span class="line">Iteration   <span class="number">1</span>: <span class="number">2859527.645</span> ops/s</span><br><span class="line">Iteration   <span class="number">2</span>: <span class="number">2799624.402</span> ops/s</span><br><span class="line">Iteration   <span class="number">3</span>: <span class="number">2876558.678</span> ops/s</span><br><span class="line">Iteration   <span class="number">4</span>: <span class="number">2862478.579</span> ops/s</span><br><span class="line">Iteration   <span class="number">5</span>: <span class="number">2882872.177</span> ops/s</span><br><span class="line">Iteration   <span class="number">6</span>: <span class="number">2860788.081</span> ops/s</span><br><span class="line">Iteration   <span class="number">7</span>: <span class="number">2742885.180</span> ops/s</span><br><span class="line">Iteration   <span class="number">8</span>: <span class="number">2779727.212</span> ops/s</span><br><span class="line">Iteration   <span class="number">9</span>: <span class="number">2719266.181</span> ops/s</span><br><span class="line">Iteration  <span class="number">10</span>: <span class="number">2644311.112</span> ops/s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Result <span class="string">&quot;com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatStringJoda&quot;</span>:</span><br><span class="line">  <span class="number">2802803.925</span> ±(<span class="number">99.9</span>%) <span class="number">121600.833</span> ops/s [Average]</span><br><span class="line">  (min, avg, max) = (<span class="number">2644311.112</span>, <span class="number">2802803.925</span>, <span class="number">2882872.177</span>), stdev = <span class="number">80431.422</span></span><br><span class="line">  CI (<span class="number">99.9</span>%): [<span class="number">2681203.092</span>, <span class="number">2924404.757</span>] (assumes normal distribution)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># JMH version: <span class="number">1.23</span></span><br><span class="line"># VM version: JDK <span class="number">1.8</span><span class="number">.0_171</span>, Java <span class="title function_">HotSpot</span><span class="params">(TM)</span> <span class="number">64</span>-Bit Server VM, <span class="number">25.171</span>-b11</span><br><span class="line"># VM invoker: /Library/Java/JavaVirtualMachines/jdk1<span class="number">.8</span><span class="number">.0_171</span>.jdk/Contents/Home/jre/bin/Java</span><br><span class="line"># VM options: -Dfile.encoding=UTF-<span class="number">8</span></span><br><span class="line"># Warmup: <span class="number">3</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Measurement: <span class="number">10</span> iterations, <span class="number">10</span> s each</span><br><span class="line"># Timeout: <span class="number">10</span> min per iteration</span><br><span class="line"># Threads: <span class="number">1</span> thread, will synchronize iterations</span><br><span class="line"># Benchmark mode: Throughput, ops/time</span><br><span class="line"># Benchmark: com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatStringJodaStaticPattern</span><br><span class="line"></span><br><span class="line"># Run progress: <span class="number">80.00</span>% complete, ETA <span class="number">00</span>:<span class="number">02</span>:<span class="number">10</span></span><br><span class="line"># Fork: <span class="number">1</span> of <span class="number">1</span></span><br><span class="line"># Warmup Iteration   <span class="number">1</span>: <span class="number">2711358.480</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">2</span>: <span class="number">2823432.725</span> ops/s</span><br><span class="line"># Warmup Iteration   <span class="number">3</span>: <span class="number">2745545.759</span> ops/s</span><br><span class="line">Iteration   <span class="number">1</span>: <span class="number">2752446.099</span> ops/s</span><br><span class="line">Iteration   <span class="number">2</span>: <span class="number">2792047.450</span> ops/s</span><br><span class="line">Iteration   <span class="number">3</span>: <span class="number">2828389.094</span> ops/s</span><br><span class="line">Iteration   <span class="number">4</span>: <span class="number">2799921.909</span> ops/s</span><br><span class="line">Iteration   <span class="number">5</span>: <span class="number">2670924.332</span> ops/s</span><br><span class="line">Iteration   <span class="number">6</span>: <span class="number">2533779.871</span> ops/s</span><br><span class="line">Iteration   <span class="number">7</span>: <span class="number">2733321.639</span> ops/s</span><br><span class="line">Iteration   <span class="number">8</span>: <span class="number">2738839.592</span> ops/s</span><br><span class="line">Iteration   <span class="number">9</span>: <span class="number">2802775.869</span> ops/s</span><br><span class="line">Iteration  <span class="number">10</span>: <span class="number">2796738.055</span> ops/s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Result <span class="string">&quot;com.jd.finance.jrpaypassword.performance.DateConvertTest.dateFormatStringJodaStaticPattern&quot;</span>:</span><br><span class="line">  <span class="number">2744918.391</span> ±(<span class="number">99.9</span>%) <span class="number">131925.235</span> ops/s [Average]</span><br><span class="line">  (min, avg, max) = (<span class="number">2533779.871</span>, <span class="number">2744918.391</span>, <span class="number">2828389.094</span>), stdev = <span class="number">87260.375</span></span><br><span class="line">  CI (<span class="number">99.9</span>%): [<span class="number">2612993.156</span>, <span class="number">2876843.626</span>] (assumes normal distribution)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Run complete. Total time: <span class="number">00</span>:<span class="number">10</span>:<span class="number">52</span></span><br><span class="line"></span><br><span class="line">REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on</span><br><span class="line">why the numbers are the way they are. Use <span class="title function_">profilers</span> <span class="params">(see -prof, -lprof)</span>, design factorial</span><br><span class="line">experiments, perform baseline and negative tests that provide experimental control, make sure</span><br><span class="line">the benchmarking environment is safe on JVM/OS/HW level, ask <span class="keyword">for</span> reviews from the domain experts.</span><br><span class="line">Do not assume the numbers tell you what you want them to tell.</span><br><span class="line"></span><br><span class="line">Benchmark                                             Mode  Cnt        Score        Error  Units</span><br><span class="line">DateConvertTest.dateFormatString                     thrpt   <span class="number">10</span>   <span class="number">867333.631</span> ±   <span class="number">9510.553</span>  ops/s</span><br><span class="line">DateConvertTest.dateFormatStringApache               thrpt   <span class="number">10</span>  <span class="number">2158217.955</span> ±  <span class="number">89012.866</span>  ops/s</span><br><span class="line">DateConvertTest.dateFormatStringApacheStaticPattern  thrpt   <span class="number">10</span>  <span class="number">2141167.550</span> ±  <span class="number">93715.889</span>  ops/s</span><br><span class="line">DateConvertTest.dateFormatStringJoda                 thrpt   <span class="number">10</span>  <span class="number">2802803.925</span> ± <span class="number">121600.833</span>  ops/s</span><br><span class="line">DateConvertTest.dateFormatStringJodaStaticPattern    thrpt   <span class="number">10</span>  <span class="number">2744918.391</span> ± <span class="number">131925.235</span>  ops/s</span><br></pre></td></tr></table></figure>

<h2 id="五、JMH-介绍"><a href="#五、JMH-介绍" class="headerlink" title="五、JMH 介绍"></a>五、JMH 介绍</h2><ul>
<li><a href="https://club.perfma.com/article/2377304">性能调优必备利器之 JMH</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>JWT 丨 JSON Web Tokens 丨 Java-jwt</title>
    <url>/20170817-JWT%20%E4%B8%A8%20JSON%20Web%20Tokens%20%E4%B8%A8%20Java-jwt/</url>
    <content><![CDATA[<h2 id="JWT简介"><a href="#JWT简介" class="headerlink" title="JWT简介"></a>JWT简介</h2><p>JWT(json web token)是为了在网络应用环境间传递声明而执行的一种基于JSON的开放标准。</p>
<p>JWT的声明一般被用来在身份提供者和服务提供者间传递被认证的用户身份信息，以便于从资源服务器获取资源。比如用在用户登录上。</p>
<h2 id="JWT生成的token"><a href="#JWT生成的token" class="headerlink" title="JWT生成的token"></a>JWT生成的token</h2><p>欲加密的字符：hisen<br>加密后的字符：(分三段)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjoiXCJoaXNlblwiIiwiZXhwIjoxNTAyOTY0Mjk2fQ.gzg4JEm8Z-GoU9eNaNll9I1wQQ0cEAbZC9OBUjAAQqI</span><br></pre></td></tr></table></figure>
<h3 id="JWT的构成"><a href="#JWT的构成" class="headerlink" title="JWT的构成"></a>JWT的构成</h3><span id="more"></span>
<h4 id="header"><a href="#header" class="headerlink" title="header"></a>header</h4><p>完整的头部，json格式：</p>
<ol>
<li>声明类型，这里是jwt</li>
<li>声明加密的算法 通常直接使用 HMAC SHA256</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#x27;typ&#x27;: &#x27;JWT&#x27;,</span><br><span class="line">  &#x27;alg&#x27;: &#x27;HS256&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后对头部进行base64加密，构成第一段：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</span><br></pre></td></tr></table></figure>
<h4 id="playload"><a href="#playload" class="headerlink" title="playload"></a>playload</h4><p>载荷就是存放有效信息的地方。这个名字像是特指飞机上承载的货品，这些有效信息包含三个部分</p>
<ol>
<li>标准中注册的声明</li>
<li>公共的声明</li>
<li>私有的声明</li>
</ol>
<h5 id="标准中注册的声明-建议但不强制使用"><a href="#标准中注册的声明-建议但不强制使用" class="headerlink" title="标准中注册的声明 (建议但不强制使用)"></a>标准中注册的声明 (建议但不强制使用)</h5><ol>
<li>iss: jwt签发者</li>
<li>sub: jwt所面向的用户</li>
<li>aud: 接收jwt的一方</li>
<li>exp: jwt的过期时间，这个过期时间必须要大于签发时间</li>
<li>nbf: 定义在什么时间之前，该jwt都是不可用的.</li>
<li>iat: jwt的签发时间</li>
<li>jti: jwt的唯一身份标识，主要用来作为一次性token,从而回避重放攻击。</li>
</ol>
<h5 id="公共的声明"><a href="#公共的声明" class="headerlink" title="公共的声明"></a>公共的声明</h5><p>公共的声明可以添加任何的信息，一般添加用户的相关信息或其他业务需要的必要信息.但不建议添加敏感信息，因为该部分在客户端可解密.</p>
<h5 id="私有的声明"><a href="#私有的声明" class="headerlink" title="私有的声明"></a>私有的声明</h5><p>私有声明是提供者和消费者所共同定义的声明，一般不建议存放敏感信息，因为base64是对称解密的，意味着该部分信息可以归类为明文信息。</p>
<h5 id="定义一个payload"><a href="#定义一个payload" class="headerlink" title="定义一个payload"></a>定义一个payload</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;payload&quot;: &quot;hisen&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后对头部进行base64加密，构成第二段：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eyJwYXlsb2FkIjoiXCJoaXNlblwiIiwiZXhwIjoxNTAyOTY0Mjk2fQ</span><br></pre></td></tr></table></figure>
<h4 id="signature"><a href="#signature" class="headerlink" title="signature"></a>signature</h4><p>jwt的第三部分是一个签证信息，这个签证信息由三部分组成</p>
<ol>
<li>header (base64后的)</li>
<li>payload (base64后的)</li>
<li>secret<br>这个部分需要base64加密后的header和base64加密后的payload使用.连接组成的字符串，然后通过header中声明的加密方式进行加盐secret组合加密，然后就构成了jwt的第三段：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gzg4JEm8Z-GoU9eNaNll9I1wQQ0cEAbZC9OBUjAAQqI</span><br></pre></td></tr></table></figure>
<p><strong>密钥secret是保存在服务端的，服务端会根据这个密钥进行生成token和验证，所以需要保护好。</strong></p>
<h2 id="Java实现方式"><a href="#Java实现方式" class="headerlink" title="Java实现方式"></a>Java实现方式</h2><h3 id="maven依赖"><a href="#maven依赖" class="headerlink" title="maven依赖"></a>maven依赖</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;com.auth0&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;Java-jwt&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;3.2.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h3 id="生成token代码-加密"><a href="#生成token代码-加密" class="headerlink" title="生成token代码(加密)"></a>生成token代码(加密)</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 加密，传入一个对象和有效期</span><br><span class="line">public static &lt;T&gt; String sign(T object, long maxAge)</span><br><span class="line">    throws UnsupportedEncodingException &#123;</span><br><span class="line">  Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();</span><br><span class="line">  String jsonString = JSON.toJSONString(object);</span><br><span class="line">  map.put(&quot;alg&quot;, &quot;HS256&quot;);</span><br><span class="line">  map.put(&quot;typ&quot;, &quot;JWT&quot;);</span><br><span class="line">  long exp = System.currentTimeMillis() + maxAge;</span><br><span class="line">  String token = JWT.create()</span><br><span class="line">      .withHeader(map)//header</span><br><span class="line">      .withClaim(PAYLOAD, jsonString)//存放的内容 json</span><br><span class="line">      .withClaim(EXP, new DateTime(exp).toDate())//超时时间</span><br><span class="line">      .sign(Algorithm.HMAC256(SECRET));//密钥</span><br><span class="line">  return token;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="解析token-解密"><a href="#解析token-解密" class="headerlink" title="解析token(解密)"></a>解析token(解密)</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 解密，传入一个加密后的token字符串和解密后的类型</span><br><span class="line">public static &lt;T&gt; T unsign(String token, Class&lt;T&gt; classT) throws UnsupportedEncodingException &#123;</span><br><span class="line">  JWTVerifier verifier = JWT.require(Algorithm.HMAC256(SECRET)).build();</span><br><span class="line">  DecodedJWT jwt = verifier.verify(token);</span><br><span class="line">  Map&lt;String, Claim&gt; claims = jwt.getClaims();</span><br><span class="line">  if (claims.containsKey(EXP) &amp;&amp; claims.containsKey(PAYLOAD)) &#123;</span><br><span class="line">    long tokenTime = claims.get(EXP).asDate().getTime();</span><br><span class="line">    long now = new Date().getTime();</span><br><span class="line">    // 判断令牌是否已经超时</span><br><span class="line">    if (tokenTime &gt; now) &#123;</span><br><span class="line">      String json = claims.get(PAYLOAD).asString();</span><br><span class="line">      // 把json转回对象，返回</span><br><span class="line">      return JSON.parseObject(json, classT);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="完整代码-测试代码"><a href="#完整代码-测试代码" class="headerlink" title="完整代码 &amp; 测试代码"></a>完整代码 &amp; 测试代码</h3><p><a href="https://github.com/hisen-yuan/IDEAPractice/tree/master/src/main/Java/com/hisen/jars/jwt">基于JWT token认证 | JSON Web Tokens | Java-jwt 3.2.0 | demo</a></p>
<h2 id="JWT总结"><a href="#JWT总结" class="headerlink" title="JWT总结"></a>JWT总结</h2><ol>
<li>因为json的通用性，所以JWT是可以进行跨语言支持的，像JAVA,JavaScript,NodeJS,PHP等很多语言都可以使用。</li>
<li>payload部分，JWT可以在自身存储一些其他业务逻辑所必要的非敏感信息。</li>
<li>便于传输，jwt的构成非常简单，字节占用很小，所以它是非常便于传输的。它不需要在服务端保存会话信息, 所以它易于应用的扩展</li>
<li>点击登陆，如果帐号密码校验通过，给用户生成一个token返回，然后用户每次登陆都带上这个token即可(放在header？)</li>
</ol>
<p>JWT官方网站：<a href="https://jwt.io/">https://jwt.io/</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>jwt</tag>
      </tags>
  </entry>
  <entry>
    <title>Java - 利用apache POI读取Excel（xls,xlsx,2003,2007)</title>
    <url>/20180113-Java%20-%20%E5%88%A9%E7%94%A8apache%20POI%E8%AF%BB%E5%8F%96Excel%EF%BC%88xls,xlsx,2003,2007)/</url>
    <content><![CDATA[<p>一个简单的工具类，更多Java小练习：<a href="https://github.com/hisenyuan/IDEAPractice">https://github.com/hisenyuan/IDEAPractice</a></p>
<h1 id="一、添加依赖"><a href="#一、添加依赖" class="headerlink" title="一、添加依赖"></a>一、添加依赖</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- POI start --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;poi&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;3.9&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;3.9&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;commons-collections&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;3.2.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- POI end --&gt;</span><br></pre></td></tr></table></figure>
<h1 id="二、测试类"><a href="#二、测试类" class="headerlink" title="二、测试类"></a>二、测试类</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.jars.poi;</span><br><span class="line"></span><br><span class="line">import Java.io.File;</span><br><span class="line">import Java.io.IOException;</span><br><span class="line">import Java.util.Arrays;</span><br><span class="line">import Java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author hisenyuan</span><br><span class="line"> * @time 2018/1/12 17:43</span><br><span class="line"> * @description 测试读取</span><br><span class="line"> */</span><br><span class="line">public class TestPoiExcelUtil &#123;</span><br><span class="line"></span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">    File file = new File(&quot;C:\\work\\document\\银行信息.xlsx&quot;);</span><br><span class="line">    try &#123;</span><br><span class="line">      // 每一个excelData为一行数据（存放在数组）</span><br><span class="line">      List&lt;String[]&gt; excelData = POIExcelUtil.readExcel(file);</span><br><span class="line">      for (String[] data:excelData) &#123;</span><br><span class="line">        System.out.println(Arrays.toString(data));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="三、工具类代码"><a href="#三、工具类代码" class="headerlink" title="三、工具类代码"></a>三、工具类代码</h1><p>完整类：<a href="https://github.com/hisenyuan/IDEAPractice/blob/master/src/main/Java/com/hisen/jars/poi/POIExcelUtil.Java" target="_blank">POIExcelUtil.Java</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.jars.poi;</span><br><span class="line"></span><br><span class="line">import Java.io.File;</span><br><span class="line">import Java.io.FileInputStream;</span><br><span class="line">import Java.io.FileNotFoundException;</span><br><span class="line">import Java.io.IOException;</span><br><span class="line">import Java.io.InputStream;</span><br><span class="line">import Java.util.ArrayList;</span><br><span class="line">import Java.util.List;</span><br><span class="line">import org.apache.log4j.Logger;</span><br><span class="line">import org.apache.poi.hssf.usermodel.HSSFWorkbook;</span><br><span class="line">import org.apache.poi.ss.usermodel.Cell;</span><br><span class="line">import org.apache.poi.ss.usermodel.Row;</span><br><span class="line">import org.apache.poi.ss.usermodel.Sheet;</span><br><span class="line">import org.apache.poi.ss.usermodel.Workbook;</span><br><span class="line">import org.apache.poi.xssf.usermodel.XSSFWorkbook;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author hisenyuan</span><br><span class="line"> * @time 2018/1/12 16:35</span><br><span class="line"> * @description 利用POI读取excel表格</span><br><span class="line"> */</span><br><span class="line">public class POIExcelUtil &#123;</span><br><span class="line"></span><br><span class="line">  private static Logger logger = Logger.getLogger(POIExcelUtil.class);</span><br><span class="line">  private final static String XLS = &quot;xls&quot;;</span><br><span class="line">  private final static String XLSX = &quot;xlsx&quot;;</span><br><span class="line"></span><br><span class="line">  public static List&lt;String[]&gt; readExcel(File file) throws IOException &#123;</span><br><span class="line">    // 检查文件</span><br><span class="line">    checkFile(file);</span><br><span class="line">    Workbook workBook = getWorkBook(file);</span><br><span class="line">    // 返回对象,每行作为一个数组，放在集合返回</span><br><span class="line">    ArrayList&lt;String[]&gt; rowList = new ArrayList&lt;&gt;();</span><br><span class="line">    if (null != workBook) &#123;</span><br><span class="line">      for (int sheetNum = 0; sheetNum &lt; workBook.getNumberOfSheets(); sheetNum++) &#123;</span><br><span class="line">        // 获得当前sheet工作表</span><br><span class="line">        Sheet sheet = workBook.getSheetAt(sheetNum);</span><br><span class="line">        if (sheet == null) &#123;</span><br><span class="line">          continue;</span><br><span class="line">        &#125;</span><br><span class="line">        // 获得当前sheet的开始行</span><br><span class="line">        int firstRowNum = sheet.getFirstRowNum();</span><br><span class="line">        // 获得当前sheet的结束行</span><br><span class="line">        int lastRowNum = sheet.getLastRowNum();</span><br><span class="line">        // 循环所有行(第一行为标题)</span><br><span class="line">        for (int rowNum = firstRowNum; rowNum &lt; lastRowNum; rowNum++) &#123;</span><br><span class="line">          // 获得当前行</span><br><span class="line">          Row row = sheet.getRow(rowNum);</span><br><span class="line">          if (row == null) &#123;</span><br><span class="line">            continue;</span><br><span class="line">          &#125;</span><br><span class="line">          // 获得当前行开始的列</span><br><span class="line">          short firstCellNum = row.getFirstCellNum();</span><br><span class="line">          // 获得当前行的列数</span><br><span class="line">          int lastCellNum = row.getPhysicalNumberOfCells();</span><br><span class="line">          String[] cells = new String[row.getPhysicalNumberOfCells()];</span><br><span class="line">          // 循环当前行</span><br><span class="line">          for (int cellNum = firstCellNum; cellNum &lt; lastCellNum; cellNum++) &#123;</span><br><span class="line">            Cell cell = row.getCell(cellNum);</span><br><span class="line">            cells[cellNum] = getCellValue(cell);</span><br><span class="line">          &#125;</span><br><span class="line">          rowList.add(cells);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return rowList;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>poi</tag>
      </tags>
  </entry>
  <entry>
    <title>Java受检异常和非受检异常 - uncheckedException checkedException</title>
    <url>/20190429-Java%20-%20%E5%8F%97%E6%A3%80%E5%BC%82%E5%B8%B8%E5%92%8C%E9%9D%9E%E5%8F%97%E6%A3%80%E5%BC%82%E5%B8%B8%20-%20uncheckedException%20checkedException/</url>
    <content><![CDATA[<h1 id="一、简单介绍"><a href="#一、简单介绍" class="headerlink" title="一、简单介绍"></a>一、简单介绍</h1><p>除了runtimeException以外的异常，都属于checkedException。</p>
<p>CheckedException(受检异常)：编译器会检查这类异常，需要强制捕获，否则无法编译通过。<br>UnCheckedException(非受检异常)：编译器不会检查这类异常，可以不用捕获，可以编译通过。</p>
<h1 id="二、常见异常"><a href="#二、常见异常" class="headerlink" title="二、常见异常"></a>二、常见异常</h1><p>受检：IOException、SQLException、NumberFormatException、IllegalArgumentException<br>非受检：OutOfMemoryError、StackOverflowError、NullPointerException、IndexOutOfBoundsException</p>
<p><a href="https://docs.oracle.com/Javase/8/docs/api/">点击查看所有jdk8 api文档</a><br>进去可以看到Java.lang.RuntimeException下有很多子类异常</p>
<p>暂时写这些，日后再完善</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>异常</tag>
      </tags>
  </entry>
  <entry>
    <title>Java GC - 理论与实践 - 附优化案例</title>
    <url>/20190429-Java%20GC%20-%20%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5%20-%20%E9%99%84%E4%BC%98%E5%8C%96%E6%A1%88%E4%BE%8B/</url>
    <content><![CDATA[<h1 id="一、理论知识"><a href="#一、理论知识" class="headerlink" title="一、理论知识"></a>一、理论知识</h1><p>常见参数：</p>
<ol>
<li>-Xms 堆初始化    例如：-Xms256m</li>
<li>-Xmx 堆最大值    例如：-Xmx512m</li>
<li>-Xmn 堆新生代    例如：-Xmn100m</li>
<li>-XX:NewRatio   新生代与老年代的比例</li>
<li>-XX:SurvivorRatio 新生代区域比例，默认8,代表Eden:From Survivor:To Survivor &#x3D; 8:1:1</li>
</ol>
<p>垃圾回收器：</p>
<ol>
<li>Serial&#x2F;Serial Old 新生代&#x2F;老年代，古老，单线程，暂停所有用户线程，复制算法&#x2F;标记整理算法</li>
<li>ParNew 1的多线程版本</li>
<li>Parallel Scavenge 新生代，多线程，不需要暂停用户线程，复制算法</li>
<li>Parallel Old 老年代，多线程，不需要暂停用户线程，标记整理算法</li>
<li>CMS（Current Mark Sweep，<a href="http://www.importnew.com/2782.html">详情</a>）老年代，与ParNew配合使用，牺牲吞吐量获得最短停顿，标记整理算法</li>
<li>G1 并行与并发收集器，可预测的停顿时间</li>
</ol>
<h1 id="二、实践案例"><a href="#二、实践案例" class="headerlink" title="二、实践案例"></a>二、实践案例</h1><ol>
<li>Full GC 之前进行 Minor GC 避免扫描过多的对象， 配置：CMSScavengeBeforeRemark</li>
<li>Xms和Xmx设置为相同，这样可以减少内存自动扩容和收缩带来的性能损失</li>
<li>JVM调优是最后的稻草，进行JVM调优之前应该先优化架构和代码</li>
<li>调优是一个复杂的过程，根据具体的场景结合对垃圾回收器的深入理解进行调优，才可能事半功倍。</li>
</ol>
<p>各个区大小比例建议</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 活跃空间大小：Full GC后堆中老年代占用空间的大小</span><br><span class="line">空间      倍数</span><br><span class="line">总大小    3-4倍活跃空间大小</span><br><span class="line">新生代    1-1.5倍活跃空间大小</span><br><span class="line">老年代    2-3倍活跃空间大小</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="三、参考连接"><a href="#三、参考连接" class="headerlink" title="三、参考连接"></a>三、参考连接</h1><p>1.1 <a href="https://www.cnblogs.com/honey01/p/9475726.html">https://www.cnblogs.com/honey01/p/9475726.html</a><br>1.2 <a href="https://www.cnblogs.com/dolphin0520/p/3783345.html">https://www.cnblogs.com/dolphin0520/p/3783345.html</a><br>2.1 <a href="https://tech.meituan.com/2017/12/29/jvm-optimize.html">https://tech.meituan.com/2017/12/29/jvm-optimize.html</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA - Java.Lang.OutOfMemoryError: PermGen Space</title>
    <url>/20170222-Java-Lang-OutOfMemoryError-PermGen-Space/</url>
    <content><![CDATA[<p>Java.Lang.OutOfMemoryError: PermGen Space</p>
<p>Tomcat只分配了非常小的PermGen内存，这里重新设置一下</p>
<p>直接在配置tomcat的时候,在VM options填入:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-XX:PermSize=97m -XX:MaxPermSize=256m</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>idea</tag>
        <tag>tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>Java 反序列化漏洞</title>
    <url>/20200510-Java-deserialize-security-hole/</url>
    <content><![CDATA[<p>微博目前关注了好几个做安全的大佬<br>不要问我为什么关注<br>问就是想观摩下有钱人的微博！</p>
<p>其中有一个经常发 Java 相关的内容<br>今天看到一个稍微熟悉一点关于 FastJson 漏洞</p>
<blockquote>
<p>窃以为Fastjson入门的最佳篇章非Mi1k7ea这个系列莫属，郑重推荐: <a href="https://www.mi1k7ea.com/tags/">Mi1k7ea</a>。<br>共有5篇，从第3篇开始，成体系地由旧到新展示了1.2.25之后各版本的补丁绕过，<br>直至思路惊艳的1.2.47绕过方案及1.2.48的修补方案，相当完备。<br>可以看出此君是动手实践派、整理归纳派，要我说，新学东西时就得这套路，无它。</p>
</blockquote>
<p>今天看了这两篇文章，不得不说对 Java 是异常的熟悉。<br>想做好安全，想必要对用的东西了如指掌，知道坑在哪里，怎么填坑。</p>
<ul>
<li><a href="https://www.mi1k7ea.com/2019/02/06/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/">Java反序列化漏洞</a></li>
<li><a href="https://www.mi1k7ea.com/2019/11/03/Fastjson%E7%B3%BB%E5%88%97%E4%B8%80%E2%80%94%E2%80%94%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/">Fastjson系列一 反序列化漏洞基本原理</a></li>
</ul>
<span id="more"></span>
<p>后记：<br>很多时候大部分人都只关注自己工作职责内的那一亩三分地<br>其实很多时候横向观察一下会发现很多靓丽的风景<br>至今没有如此深入的去看过底层甚是愧疚<br>用最多的时间去做最正确的事情！</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java HotSpot 虚拟机 CMS、G1 参数优化对比记录</title>
    <url>/20201019-Java-hotspot-vm-cms-g1-setting-log/</url>
    <content><![CDATA[<h1 id="零、背景说明"><a href="#零、背景说明" class="headerlink" title="零、背景说明"></a>零、背景说明</h1><p>目前测试机器为 4C8G<br>两台机器完全处理一样的工作<br>大部分时间对象朝生夕死，很少进入老年代<br>CMS 指定了新生代最大 1536M，略微有点浪费<br>于是设置 G1 自动调节各个区域大小，看看能否有所改善<br>也因为最近重温了两本 JVM 相关的书籍，找机会进行实践看看</p>
<h1 id="一、G1-设置"><a href="#一、G1-设置" class="headerlink" title="一、G1 设置"></a>一、G1 设置</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-Xms4096M</span><br><span class="line">-Xmx4096M</span><br><span class="line">-XX:+UseG1GC</span><br><span class="line">-XX:+UnlockDiagnosticVMOptions</span><br><span class="line">-XX:SurvivorRatio=8</span><br><span class="line">-XX:+ParallelRefProcEnabled</span><br><span class="line">-XX:MaxTenuringThreshold=6</span><br><span class="line">-XX:ParGCCardsPerStrideChunk=4096</span><br><span class="line">-XX:MaxGCPauseMillis=100</span><br><span class="line">-XX:MaxMetaspaceSize=256M</span><br><span class="line">-XX:MetaspaceSize=256M</span><br><span class="line">-XX:+PrintGCDateStamps</span><br><span class="line">-XX:+PrintGCDetails</span><br><span class="line">-Xloggc:/home/hisen/gc.log</span><br></pre></td></tr></table></figure>
<h1 id="二、CMS-设置"><a href="#二、CMS-设置" class="headerlink" title="二、CMS 设置"></a>二、CMS 设置</h1><span id="more"></span>
<p>最大最小设置成一致的值，是为了不让堆大小进行收缩(缩的过程会 GC)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 初始堆大小</span><br><span class="line">-Xms4096M</span><br><span class="line"># 最大堆大小</span><br><span class="line">-Xmx4096M</span><br><span class="line"># 年轻代的大小</span><br><span class="line">-Xmn1536M</span><br><span class="line"># eden 区比例，此处为 8:1:1</span><br><span class="line">-XX:SurvivorRatio=8</span><br><span class="line"># 最大元空间大小</span><br><span class="line">-XX:MaxMetaspaceSize=256M</span><br><span class="line"># 最小元空间大小</span><br><span class="line">-XX:MetaspaceSize=256M</span><br><span class="line"># 使用 CMS 垃圾收集器</span><br><span class="line">-XX:+UseConcMarkSweepGC</span><br><span class="line"># 只使用占用率作为启动 CMS GC 的标准，配合 CMSInitiatingOccupancyFraction 使用</span><br><span class="line">-XX:+UseCMSInitiatingOccupancyOnly</span><br><span class="line"># CMS垃圾收集器，当老年代达一定比例，触发CMS垃圾回收。此处为 70%</span><br><span class="line">-XX:CMSInitiatingOccupancyFraction=70</span><br><span class="line"># 默认为 false，并行的处理 Reference 对象，如 WeakReference，除非在 GC log 里出现 Reference 处理时间较长的日志，否则效果不会很明显。</span><br><span class="line">-XX:+ParallelRefProcEnabled</span><br><span class="line"># 开启或关闭在CMS重新标记阶段之前的 YGC 尝试</span><br><span class="line">-XX:+CMSScavengeBeforeRemark</span><br><span class="line"># 晋升老年代的阈值</span><br><span class="line">-XX:MaxTenuringThreshold=6</span><br><span class="line"># 解锁诊断参数，否则 ParGCCardsPerStrideChunk 不生效</span><br><span class="line">-XX:+UnlockDiagnosticVMOptions</span><br><span class="line"># 每个线程扫描 old gen 的 CardTable (一定大小的内存块) 个数</span><br><span class="line">-XX:ParGCCardsPerStrideChunk=4096</span><br><span class="line"># 打印 GC 的时间戳</span><br><span class="line">-XX:+PrintGCDateStamps</span><br><span class="line"># 打印 GC 明细日志</span><br><span class="line">-XX:+PrintGCDetails</span><br><span class="line"># 存放 GC 日志的路径</span><br><span class="line">-Xloggc:/home/hisen/gc.log</span><br></pre></td></tr></table></figure>
<h1 id="三、结果对比"><a href="#三、结果对比" class="headerlink" title="三、结果对比"></a>三、结果对比</h1><table>
<thead>
<tr>
<th>Type</th>
<th>Duration</th>
<th>Xmn</th>
<th>YGC count</th>
<th>YGC avg</th>
<th>Interval Time</th>
</tr>
</thead>
<tbody><tr>
<td>G1</td>
<td>72 hrs 21 min 8 sec</td>
<td>1.66G</td>
<td>7596</td>
<td>19.6 ms</td>
<td>34 sec 294 ms</td>
</tr>
<tr>
<td>CMS</td>
<td>70 hrs 24 min 51 sec</td>
<td>1.5G</td>
<td>7029</td>
<td>14.4 ms</td>
<td>36 sec 68 ms</td>
</tr>
</tbody></table>
<p>目前应用堆响应时间比较敏感，追求低延迟。<br>就上表来看，G1 新生代的大小确实上去了，但并不尽如人意。<br>但是随着而来的是 G1 『更频繁的YGC』以及『更长的停顿时间』<br>在《深入理解JVM虚拟机》第三版看到，<br>由于 G1 处理跨 region 需要耗费额外 10% ~ 20% 的资源，小堆 (堆大小&lt;8G) 上没有优势。</p>
<p>JVM 新生代大小与老年代大小默认为 1:2，<br>大部分应用按这个设置是 OK 的，<br>虽然有时候看着老年代一直很小，<br>设置那么大浪费内存，但是当调用量大的时候，就能派上用场，减少 Full GC。</p>
<p>先占个坑，后续继续填内容。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java.lang.IllegalArgumentException: addChild:  Child name &#39;/hisen&#39; is not unique</title>
    <url>/20170227-Java-lang-IllegalArgumentException-addChild-Child-name-hisen-is-not-unique/</url>
    <content><![CDATA[<p>报错如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">27-Feb-2017 12:53:31.268 严重 [RMI TCP Connection(13)-127.0.0.1] org.apache.tomcat.util.modeler.BaseModelMBean.invoke Exception invoking method manageApp</span><br><span class="line"> Java.lang.IllegalArgumentException: addChild:  Child name &#x27;/hisen&#x27; is not unique</span><br><span class="line">	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.Java:738)</span><br><span class="line">	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.Java:728)</span><br><span class="line">	at org.apache.catalina.core.StandardHost.addChild(StandardHost.Java:734)</span><br><span class="line">	at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.Java:1702)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.Java:300)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.Java:819)</span><br><span class="line">	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.Java:801)</span><br><span class="line">	at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.Java:482)</span><br><span class="line">	at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.Java:431)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.Java:300)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.Java:819)</span><br><span class="line">	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.Java:801)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.Java:1487)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.Java:97)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.Java:1328)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.Java:1420)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.Java:848)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.Java:322)</span><br><span class="line">	at sun.rmi.transport.Transport$1.run(Transport.Java:177)</span><br><span class="line">	at sun.rmi.transport.Transport$1.run(Transport.Java:174)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.rmi.transport.Transport.serviceCall(Transport.Java:173)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.Java:556)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.Java:811)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.Java:670)</span><br><span class="line">	at Java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.Java:1145)</span><br><span class="line">	at Java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.Java:615)</span><br><span class="line">	at Java.lang.Thread.run(Thread.Java:744)</span><br></pre></td></tr></table></figure>
<p>重要的是：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">org.apache.tomcat.util.modeler.BaseModelMBean.invoke Exception invoking method manageApp</span><br><span class="line"> Java.lang.IllegalArgumentException: addChild:  Child name &#x27;/hisen&#x27; is not unique</span><br></pre></td></tr></table></figure>
<h2 id="IDEA解决办法"><a href="#IDEA解决办法" class="headerlink" title="IDEA解决办法"></a>IDEA解决办法</h2><p>Project Structure -&gt; Artifacts</p>
<p>查看里面是否有配置相同的Artifacts</p>
<p>删除即可</p>
]]></content>
  </entry>
  <entry>
    <title>Java.lang.NoClassDefFoundError错误解决</title>
    <url>/20190223-Java.lang.NoClassDefFoundError%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<p>maven项目昨天遇到的一个错误：Java.lang.NoClassDefFoundError</p>
<p>理论原因：JVM在编译的时候能找到调用方法或静态变量所在的类，但在运行的时候找不到此类而引发的错误。</p>
<p>真实原因：(仅针对当前问题)<br>项目A依赖公共服务C-1.0.1版本<br>项目B依赖项目A，B中dependencyManagement强制指定C-1.0.0</p>
<p>此时编译可以通过，运行时如果有用的C的新版本功能就会会出现上述问题</p>
<p>解决办法：对项目B中C的版本升级，使用1.0.1</p>
<p>扩展阅读：<br><a href="https://blog.csdn.net/qq_27576335/article/details/77102385">https://blog.csdn.net/qq_27576335/article/details/77102385</a><br><a href="https://blog.csdn.net/jamesjxin/article/details/46606307">https://blog.csdn.net/jamesjxin/article/details/46606307</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java.sql.SQLException Connections could not be acquired from the underlying database</title>
    <url>/20170602-Java.sql.SQLException%20Connections%20could%20not%20be%20acquired%20from%20the%20underlying%20database/</url>
    <content><![CDATA[<p>Java.sql.SQLException: Connections could not be acquired from the underlying database</p>
<p>这个错误出现的原因有的说是因为jdbc配置文件写错了</p>
<p>正确的写法是：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c3p0.driverClass=com.mysql.jdbc.Driver</span><br><span class="line">c3p0.jdbcUrl=jdbc:mysql://localhost:3306/test</span><br><span class="line">c3p0.user=root</span><br><span class="line">c3p0.password=root</span><br></pre></td></tr></table></figure>
<p>而不是</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">driver=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql://localhost:3306/test</span><br><span class="line">user=root</span><br><span class="line">password=root</span><br></pre></td></tr></table></figure>

<p>但是我遇到的不是如此</p>
<p>后来发现是因为maven出问题了，jar包没有加载进项目</p>
<p>这是在starkoverflow上看到的回答</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">In my case it was problem that c3p0-0.9.2.1.jar file was not copied by maven into src/main/webapp/web-inf/libs</span><br></pre></td></tr></table></figure>
<p>最后maven重新install之后就解决了</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java三种创建对象的方式</title>
    <url>/20170210-Java%E4%B8%89%E7%A7%8D%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<p>有一个实现了Cloneable接口的Person类<br>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;使用new关键字创建对象&gt;</span><br><span class="line">hisen已成年</span><br><span class="line">体重为：50</span><br><span class="line">年龄为：23</span><br><span class="line">&lt;使用newInstance()方法创建对象&gt;</span><br><span class="line">体重为：0</span><br><span class="line">年龄为：0</span><br><span class="line">&lt;使用clone()方法创建对象&gt;</span><br><span class="line">hisen已成年</span><br><span class="line">体重为：50</span><br><span class="line">年龄为：23</span><br></pre></td></tr></table></figure>

<p>具体实现：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.JavaGaiShu.page73test5;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 三种方式创建对象</span><br><span class="line"> * </span><br><span class="line"> * @author hisenyuan 2017年2月10日 下午10:27:14</span><br><span class="line"> */</span><br><span class="line">public class Person implements Cloneable &#123;</span><br><span class="line">	private String name;</span><br><span class="line">	private int weight;</span><br><span class="line">	private int age;</span><br><span class="line"></span><br><span class="line">	public Person() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Person(String name, int weight, int age) &#123;</span><br><span class="line">		super();</span><br><span class="line">		this.name = name;</span><br><span class="line">		this.weight = weight;</span><br><span class="line">		this.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void young() &#123;</span><br><span class="line">		if (age &gt;= 18 &amp;&amp; age &lt;= 100)</span><br><span class="line">			System.out.println(name + &quot;已成年&quot;);</span><br><span class="line">		if (age &gt; 0 &amp;&amp; age &lt; 18)</span><br><span class="line">			System.out.println(name + &quot;未成年&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;体重为：&quot; + weight + &quot;\n年龄为：&quot; + age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) throws Exception &#123;</span><br><span class="line">		System.out.println(&quot;&lt;使用new关键字创建对象&gt;&quot;);</span><br><span class="line">		Person p1 = new Person(&quot;hisen&quot;, 50, 23);</span><br><span class="line">		p1.young();</span><br><span class="line">		System.out.println(p1);</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;&lt;使用newInstance()方法创建对象&gt;&quot;);</span><br><span class="line">		Class c = Class.forName(&quot;com.hisen.JavaGaiShu.page73test5.Person&quot;);</span><br><span class="line">		Person p2 = (Person) c.newInstance();</span><br><span class="line">		p2.young();</span><br><span class="line">		System.out.println(p2);</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;&lt;使用clone()方法创建对象&gt;&quot;);</span><br><span class="line">		Person p3 = (Person) p1.clone();</span><br><span class="line">		p3.young();</span><br><span class="line">		System.out.println(p3);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>对象</tag>
      </tags>
  </entry>
  <entry>
    <title>Java判断全角半角字符以及相互转换</title>
    <url>/20170401-Java%E5%88%A4%E6%96%AD%E5%85%A8%E8%A7%92%E5%8D%8A%E8%A7%92%E5%AD%97%E7%AC%A6%E4%BB%A5%E5%8F%8A%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[<p>在计算机屏幕上，一个汉字要占两个英文字符的位置，人们把一个英文字符所占的位置称为”半角”，</p>
<p>相对地把一个汉字所占的位置称为”全角”。在汉字输入时，系统提供”半角”和”全角”两种不同的输入状态，</p>
<p>但是对于英文字母、符号和数字这些通用字符就不同于汉字，在半角状态它们被作为英文字符处理；</p>
<p>而在全角状态，它们又可作为中文字符处理。</p>
<p>半角和全角切换方法：单击输入法工具条上的按钮或按键盘上的Shift+Space键来切换。</p>
<p>1、全角：指一个字符占用两个标准字符位置。</p>
<p>汉字字符和规定了全角的英文字符及国标GB2312-80中的图形符号和特殊字符都是全角字符。一般的系统命令是不用全角字符的，只是在作文字处理时才会使用全角字符。</p>
<hr>
<p>2、半角：指一字符占用一个标准的字符位置。</p>
<p>通常的英文字母、数字键、符号键都是半角的，半角的显示内码都是一个字节。在系统内部，以上三种字符是作为基本代码处理的，所以用户输入命令和参数时一般都使用半角。</p>
<hr>
<p>3、全角与半角各在什么情况下使用？</p>
<p>全角占两个字节，半角占一个字节。</p>
<p>半角全角主要是针对标点符号来说的，全角标点占两个字节，半角占一个字节，而不管是半角还是全角，汉字都还是要占两个字节。</p>
<p>在编程序的源代码中只能使用半角标点（不包括字符串内部的数据）</p>
<p>在不支持汉字等语言的计算机上只能使用半角标点（其实这种情况根本就不存在半角全角的概念）</p>
<p>对于大多数字体来说，全角看起来比半角大，当然这不是本质区别了。</p>
<hr>
<p>4、全角和半角的区别<br>全角就是字母和数字等与汉字占等宽位置的字。半角就是ASCII方式的字符，</p>
<p>在没有汉字输入法起做用的时候输入的字母数字和字符都是半角的。</p>
<p>在汉字输入法出现的时候，输入的字母数字默认为半角，但是标点则是默认为全角，</p>
<p>可以通过鼠标点击输入法工具条上的相应按钮来改变。</p>
<hr>
<p>5、关于“全角”和“半角”：</p>
<p>全角：是指中GB2312-80（《信息交换用汉字编码字符集·基本集》）中的各种符号。</p>
<p>半角：是指英文件ASCII码中的各种符号。</p>
<p>全角状态下字母、数字符号等都会占两个字节的位置，也就是一个汉字那么宽，半角状态下，</p>
<p>字母数字符号一般会占一个字节，也就是半个汉字的位置，全角半角对汉字没有影响。</p>
<p>有两种方式可以判断:</p>
<p>1:通过正则表达式来进行判断  [^\x00-\xff]</p>
<p>2: 通过字符编码的范围进行判断.</p>
<p>通过打印所有的字符发现：</p>
<ol>
<li>半角字符是从33开始到126结束</li>
<li>与半角字符对应的全角字符是从65281开始到65374结束</li>
<li>其中半角的空格是32.对应的全角空格是12288</li>
<li>半角和全角的关系很明显,除空格外的字符偏移量是65248(65281-33 &#x3D; 65248)</li>
</ol>
<p>具体的代码如下：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.String;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 半角字符和全角字符的转换 以及 判断</span><br><span class="line"> * Created by hisenyuan on 2017/4/1 at 10:37.</span><br><span class="line"> */</span><br><span class="line">public class FullHalf &#123;</span><br><span class="line">    /**</span><br><span class="line">     * ASCII表中可见字符从!开始，偏移位值为33(Decimal)</span><br><span class="line">     */</span><br><span class="line">    static final char DBC_CHAR_START = 33; // 半角!</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ASCII表中可见字符到~结束，偏移位值为126(Decimal)</span><br><span class="line">     */</span><br><span class="line">    static final char DBC_CHAR_END = 126; // 半角~</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 全角对应于ASCII表的可见字符从！开始，偏移值为65281</span><br><span class="line">     */</span><br><span class="line">    static final char SBC_CHAR_START = 65281; // 全角！</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 全角对应于ASCII表的可见字符到～结束，偏移值为65374</span><br><span class="line">     */</span><br><span class="line">    static final char SBC_CHAR_END = 65374; // 全角～</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ASCII表中除空格外的可见字符与对应的全角字符的相对偏移</span><br><span class="line">     */</span><br><span class="line">    static final int CONVERT_STEP = 65248; // 全角半角转换间隔</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 全角空格的值，它没有遵从与ASCII的相对偏移，必须单独处理</span><br><span class="line">     */</span><br><span class="line">    static final char SBC_SPACE = 12288; // 全角空格 12288</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 半角空格的值，在ASCII中为32(Decimal)</span><br><span class="line">     */</span><br><span class="line">    static final char DBC_SPACE = &#x27; &#x27;; // 半角空格</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        String s = &quot;123456&quot;;</span><br><span class="line">        //半角转换成全角字符</span><br><span class="line">        String s1 = bj2qj(s);</span><br><span class="line">        //全角转换成半角</span><br><span class="line">        String s2 = qj2bj(s1);</span><br><span class="line">        System.out.println(&quot;全角：&quot;+s1 +&quot; -&gt; 半角：&quot;+s2);</span><br><span class="line">        System.out.println(&quot;--------------------------&quot;);</span><br><span class="line">        String fh = s1+s2;</span><br><span class="line">        //判断全角还是半角</span><br><span class="line">        fullOrHalf(fh);</span><br><span class="line">        //打印ASCII表中所有字符</span><br><span class="line">        printAllChar();</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * &lt;PRE&gt;</span><br><span class="line">     * 半角字符-&gt;全角字符转换</span><br><span class="line">     * 只处理空格，!到˜之间的字符，忽略其他</span><br><span class="line">     * &lt;/PRE&gt;</span><br><span class="line">     */</span><br><span class="line">    private static String bj2qj(String src) &#123;</span><br><span class="line">        if (src == null) &#123;</span><br><span class="line">            return src;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder buf = new StringBuilder(src.length());</span><br><span class="line">        char[] ca = src.toCharArray();</span><br><span class="line">        for (int i = 0; i &lt; ca.length; i++) &#123;</span><br><span class="line">            if (ca[i] == DBC_SPACE) &#123; // 如果是半角空格，直接用全角空格替代</span><br><span class="line">                buf.append(SBC_SPACE);</span><br><span class="line">            &#125; else if ((ca[i] &gt;= DBC_CHAR_START) &amp;&amp; (ca[i] &lt;= DBC_CHAR_END)) &#123; // 字符是!到~之间的可见字符</span><br><span class="line">                buf.append((char) (ca[i] + CONVERT_STEP));</span><br><span class="line">            &#125; else &#123; // 不对空格以及ascii表中其他可见字符之外的字符做任何处理</span><br><span class="line">                buf.append(ca[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return buf.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * &lt;PRE&gt;</span><br><span class="line">     * 全角字符-&gt;半角字符转换</span><br><span class="line">     * 只处理全角的空格，全角！到全角～之间的字符，忽略其他</span><br><span class="line">     * &lt;/PRE&gt;</span><br><span class="line">     */</span><br><span class="line">    public static String qj2bj(String src) &#123;</span><br><span class="line">        if (src == null) &#123;</span><br><span class="line">            return src;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder buf = new StringBuilder(src.length());</span><br><span class="line">        char[] ca = src.toCharArray();</span><br><span class="line">        for (int i = 0; i &lt; src.length(); i++) &#123;</span><br><span class="line">            if (ca[i] &gt;= SBC_CHAR_START &amp;&amp; ca[i] &lt;= SBC_CHAR_END) &#123; // 如果位于全角！到全角～区间内</span><br><span class="line">                buf.append((char) (ca[i] - CONVERT_STEP));</span><br><span class="line">            &#125; else if (ca[i] == SBC_SPACE) &#123; // 如果是全角空格</span><br><span class="line">                buf.append(DBC_SPACE);</span><br><span class="line">            &#125; else &#123; // 不处理全角空格，全角！到全角～区间外的字符</span><br><span class="line">                buf.append(ca[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return buf.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 使用正则表达式判断字符是否为全角</span><br><span class="line">     * @param str</span><br><span class="line">     */</span><br><span class="line">    public static void fullOrHalf(String str)&#123;</span><br><span class="line">        char[] chars = str.toCharArray();</span><br><span class="line">        for (int i = 0; i &lt; chars.length; i++) &#123;</span><br><span class="line">            String temp = String.valueOf(chars[i]);</span><br><span class="line">            // 正则判断是全角字符</span><br><span class="line">            if (temp.matches(&quot;[^\\x00-\\xff]&quot;)) &#123;</span><br><span class="line">                System.out.println(&quot;全角 -&gt; &quot; + temp);</span><br><span class="line">            &#125;</span><br><span class="line">            // 判断是半角字符</span><br><span class="line">            else &#123;</span><br><span class="line">                System.out.println(&quot;半角 -&gt; &quot; + temp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 打印所有字符</span><br><span class="line">     */</span><br><span class="line">    public static void printAllChar()&#123;</span><br><span class="line">        for (int i = Character.MIN_VALUE; i &lt;= Character.MAX_VALUE; ++i) &#123;</span><br><span class="line">            System.out.println(&quot;ASCII：&quot;+i + &quot; -&gt; &quot; + &quot;字符：&quot;+(char)i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java原生类库Java.util.zip - 文件夹压缩与解压</title>
    <url>/20170426-Java%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%BA%93Java.util.zip%20-%20%E6%96%87%E4%BB%B6%E5%A4%B9%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/</url>
    <content><![CDATA[<p>到处搜了一下也没有看到专门做好的jar包</p>
<p>真实的目录结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\1\hisenyuan\build.png</span><br><span class="line">C:\1\hisenyuan\DSCN6812.JPG</span><br><span class="line">C:\1\hisenyuan\test\test\hello.zip</span><br><span class="line">C:\1\hisenyuan\test\hisenyuan.zip</span><br><span class="line">C:\1\hisenyuan\test\test.txt</span><br><span class="line">C:\1\hisenyuan\test\test\hello\hello.txt</span><br><span class="line">C:\1\hisenyuan\tomcat.png</span><br></pre></td></tr></table></figure>
<p>压缩包的目录结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">build.png</span><br><span class="line">DSCN6812.JPG</span><br><span class="line">test\hello.zip</span><br><span class="line">test\hisenyuan.zip</span><br><span class="line">test\test.txt</span><br><span class="line">test\hello\hello.txt</span><br><span class="line">tomcat.png</span><br></pre></td></tr></table></figure>

<p>全部代码如下：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.utils;</span><br><span class="line"></span><br><span class="line">import Java.io.File;</span><br><span class="line">import Java.io.FileInputStream;</span><br><span class="line">import Java.io.FileNotFoundException;</span><br><span class="line">import Java.io.FileOutputStream;</span><br><span class="line">import Java.io.IOException;</span><br><span class="line">import Java.io.InputStream;</span><br><span class="line">import Java.io.OutputStream;</span><br><span class="line">import Java.util.zip.ZipEntry;</span><br><span class="line">import Java.util.zip.ZipFile;</span><br><span class="line">import Java.util.zip.ZipInputStream;</span><br><span class="line">import Java.util.zip.ZipOutputStream;</span><br><span class="line">import org.apache.commons.io.IOUtils;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 文件夹压缩解压工具</span><br><span class="line"> * Created by hisenyuan on 2017/4/20 at 17:27.</span><br><span class="line"> */</span><br><span class="line">public class ZipOrUnZipFileUtil &#123;</span><br><span class="line"></span><br><span class="line">  private InputStream is;</span><br><span class="line">  private ZipOutputStream zos;</span><br><span class="line">  private int lastIndexOf;</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void testZipOrUnZipFile() &#123;</span><br><span class="line">    //分隔符，windows linux下有所不同</span><br><span class="line">    String separator = File.separator;</span><br><span class="line">    //想要压缩的文件所在目录 C:\1\hisenyuan</span><br><span class="line">    String folderPath = &quot;c:&quot; + separator + &quot;1&quot; + separator + &quot;hisenyuan&quot;;</span><br><span class="line">    //压缩文件路径：C:\1\hisenyuan\hisenyuan.zip</span><br><span class="line">    String zipFilePath = &quot;c:&quot; + separator + &quot;1&quot; + separator + &quot;hisenyuan&quot; + &quot;.zip&quot;;</span><br><span class="line">    //解压文件所在的目录 E:\file\hisenyuan</span><br><span class="line">    String newPath = &quot;e:&quot; + separator + &quot;file&quot; + separator + &quot;hisenyuan&quot;;</span><br><span class="line"></span><br><span class="line">    unZipFile(zipFilePath, newPath);</span><br><span class="line">    zipFile(folderPath);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 压缩文件</span><br><span class="line">   *</span><br><span class="line">   * @param filePath 压缩文件夹的路径</span><br><span class="line">   */</span><br><span class="line">  private void zipFile(String filePath) &#123;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    File zipFile = new File(filePath + &quot;.zip&quot;);</span><br><span class="line">    lastIndexOf = file.getAbsolutePath().length() + 1;</span><br><span class="line">    try &#123;</span><br><span class="line">      zos = new ZipOutputStream(new FileOutputStream(zipFile));</span><br><span class="line">      zos.setComment(&quot;log&quot;);</span><br><span class="line">      long start = System.currentTimeMillis();</span><br><span class="line">      listAllFile(filePath);</span><br><span class="line">      long stop = System.currentTimeMillis();</span><br><span class="line">      System.out.println(&quot;zip done，time：&quot; + (stop - start) / 1000 + &quot;s&quot;);</span><br><span class="line">    &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">      IOUtils.closeQuietly(zos, is);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 循环遍历当前文件夹下的所有文件，使用递归</span><br><span class="line">   */</span><br><span class="line">  private void listAllFile(String filePath) &#123;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    if (file.exists()) &#123;</span><br><span class="line">      File[] files = file.listFiles();</span><br><span class="line">      if (files == null) &#123;</span><br><span class="line">        System.out.println(&quot;folder is null&quot;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        for (File file2 : files) &#123;</span><br><span class="line">          if (file2.isDirectory()) &#123;</span><br><span class="line">            listAllFile(file2.getAbsolutePath());</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            String file3 = file2.getAbsolutePath();</span><br><span class="line">            try &#123;</span><br><span class="line">              is = new FileInputStream(file3);</span><br><span class="line">              //在zip压缩包当中出现的文件名</span><br><span class="line">              String name = file3.substring(lastIndexOf, file3.length());</span><br><span class="line">              System.out.println(&quot;name:&quot; + name);</span><br><span class="line">              zos.putNextEntry(new ZipEntry(name));</span><br><span class="line">              int temp;</span><br><span class="line">              int bufferSize = 1024 * 5;</span><br><span class="line">              byte[] buffer = new byte[bufferSize];</span><br><span class="line">              while ((temp = is.read(buffer, 0, bufferSize)) != -1) &#123;</span><br><span class="line">                zos.write(buffer, 0, temp);</span><br><span class="line">                zos.flush();</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 解压文件</span><br><span class="line">   *</span><br><span class="line">   * @param filePath 压缩文件所在目录</span><br><span class="line">   * @param newPath 想解压到那个目录</span><br><span class="line">   */</span><br><span class="line">  private void unZipFile(String filePath, String newPath) &#123;</span><br><span class="line">    //压缩文件所在的父目录</span><br><span class="line">    String oldPath = new File(filePath).getParentFile().toString();</span><br><span class="line">    File outFile;</span><br><span class="line">    ZipInputStream zipInputStream = null;</span><br><span class="line">    OutputStream outputStream = null;</span><br><span class="line">    InputStream inputStream = null;</span><br><span class="line">    ZipEntry zipEntry;</span><br><span class="line">    try &#123;</span><br><span class="line">      ZipFile zipFile = new ZipFile(filePath);</span><br><span class="line"></span><br><span class="line">      zipInputStream = new ZipInputStream(new FileInputStream(filePath));</span><br><span class="line">      while (null != (zipEntry = zipInputStream.getNextEntry())) &#123;</span><br><span class="line">        System.out.println(&quot;解压缩&quot; + zipEntry.getName() + &quot;文件。&quot;);</span><br><span class="line">        //newPath为空就代表解压在当前目录</span><br><span class="line">        if (&quot;&quot;.equals(newPath) || newPath.isEmpty()) &#123;</span><br><span class="line">          outFile = new File(oldPath + zipEntry.getName());</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          //防止传入的目录不存在</span><br><span class="line">          File file = new File(newPath);</span><br><span class="line">          if (!file.exists()) &#123;</span><br><span class="line">            file.mkdir();</span><br><span class="line">          &#125;</span><br><span class="line">          outFile = new File(newPath + File.separator + zipEntry.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        //判断当前文件路径是否存在，不存在就创建</span><br><span class="line">        buildFile(outFile);</span><br><span class="line">        inputStream = zipFile.getInputStream(zipEntry);</span><br><span class="line">        outputStream = new FileOutputStream(outFile);</span><br><span class="line">        int temp;</span><br><span class="line">        int bufferSize = 1024 * 5;</span><br><span class="line">        byte[] buffer = new byte[bufferSize];</span><br><span class="line">        while ((temp = inputStream.read(buffer, 0, bufferSize)) != -1) &#123;</span><br><span class="line">          outputStream.write(buffer, 0, temp);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">      IOUtils.closeQuietly(inputStream, outputStream, zipInputStream);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 判断文件是否存在，不存在创建</span><br><span class="line">   */</span><br><span class="line">  private static void buildFile(File file) &#123;</span><br><span class="line">    if (!file.exists()) &#123;</span><br><span class="line">      File parent = file.getParentFile();</span><br><span class="line">      if (parent != null &amp;&amp; !parent.exists()) &#123;</span><br><span class="line">        parent.mkdirs();</span><br><span class="line">      &#125;</span><br><span class="line">      try &#123;</span><br><span class="line">        file.createNewFile();</span><br><span class="line">      &#125; catch (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>解压</tag>
      </tags>
  </entry>
  <entry>
    <title>Java基本数据类型 - 以及相关内容</title>
    <url>/20170210-Java%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th align="left">类型名称</th>
<th align="left">关键字</th>
<th align="left">占用内存</th>
<th align="left">取值范围</th>
<th align="left">包装类</th>
</tr>
</thead>
<tbody><tr>
<td align="left">字节型</td>
<td align="left">byte</td>
<td align="left">1</td>
<td align="left">-128~127</td>
<td align="left">Byte</td>
</tr>
<tr>
<td align="left">短整形</td>
<td align="left">short</td>
<td align="left">2</td>
<td align="left">-32768~32767</td>
<td align="left">Short</td>
</tr>
<tr>
<td align="left">整形</td>
<td align="left">int</td>
<td align="left">4</td>
<td align="left">-2147483648～2147483647</td>
<td align="left">Integer</td>
</tr>
<tr>
<td align="left">长整形</td>
<td align="left">long</td>
<td align="left">8</td>
<td align="left">-9223372036854775808L ~ 9223372036854775807L</td>
<td align="left">Long</td>
</tr>
<tr>
<td align="left">单精度浮点</td>
<td align="left">float</td>
<td align="left">4</td>
<td align="left">-3.4E38～3.4E38(6~7个有效位)</td>
<td align="left">Float</td>
</tr>
<tr>
<td align="left">双精度浮点</td>
<td align="left">double</td>
<td align="left">8</td>
<td align="left">-1.7E308～1.7E308(15个有效值)</td>
<td align="left">Double</td>
</tr>
<tr>
<td align="left">字符型</td>
<td align="left">char</td>
<td align="left">2</td>
<td align="left">ISO单一字符集，其表示范围是0～65535</td>
<td align="left">Charater</td>
</tr>
<tr>
<td align="left">布尔型</td>
<td align="left">boolean</td>
<td align="left">1</td>
<td align="left">true 或 false</td>
<td align="left">Boolean</td>
</tr>
</tbody></table>
<hr>
<p>所有基本数据类型的大小(所占用的字节数)都是明确规定好的，</p>
<p>在各种平台上都保持不变，这一特性有助于提高Java程序的可移植性。</p>
<span id="more"></span>

<hr>
<p>引用数据类型包括字符串、数组、类和接口。</p>
<p>引用数据类型是用户自定义、用来限制其他数据类型。</p>
<p>引用数据类型的变量在内存中存储的是数据的引用，并不是数据本身，</p>
<p>引用类型是使用间接方法去获取数据</p>
<hr>
<p><strong>Java中int为什么占用4个字节？</strong></p>
<p><strong>回答1：</strong></p>
<p>现在流行的编译器，都是规定的int是四个字节～</p>
<p>像tc这样老版的编译器，int才是两个字节，</p>
<p>然后也是一样，由于一个字节占八位，最高为符号位，又人为规定，1000000000000000……这个补码编码为-2^31所以，范围就是-2^31~2^31-1</p>
<p><strong>回答2：</strong></p>
<p>JAVA是采用Unicode编码。每一个字节占8位。</p>
<p>你电脑系统应该是32位系统(工具)，这样每个int就是 4个字节</p>
<p>其中一个字节由8个二进制位组成</p>
<p><strong>回答3：</strong></p>
<p>int常见为4个字节，跟操作系统有关系。</p>
<p>turbo c（以及Turbo c的一些衍生编译器，他们用的一套编译程序）是dos时代的编译器，</p>
<p>是上世纪80年代的产物，严重过时，属于老掉牙的产品，</p>
<p>他们编译出来的程序是16位操作系统dos下的程序，所以长度为16位，即两个字节。</p>
<p>windows为了兼容dos，所以turbo c生成的文件也可以在windows中运行。</p>
<p>其他一般就都是4个字节了。</p>
<p>操作系统16位的时候，int 2字节，操作系统32位的时候，int 4字节，由于32位系统之前占主流地位，实际现在就算是64位系统，出于兼容性考虑，int也是4字节的</p>
<hr>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java多姿势读写文件</title>
    <url>/20180718-Java%E5%A4%9A%E5%A7%BF%E5%8A%BF%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<p>重温经典，特意看了下为什么读文件非得不让等于 -1</p>
<p>fileChannelIn.read(byteBuffer) !&#x3D; -1</p>
<p>EOF &#x3D; End Of File，其默认值就是-1</p>
<p>这是一个约定好的结束符，不是认为改变的</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>建议使用大文件进行测试，看效果比较明显</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCopy</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">oldFileName</span> <span class="operator">=</span> <span class="string">&quot;/Users/hisenyuan/hisen/blog/source/_posts/Test-Java-Code.md&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">newFileName</span> <span class="operator">=</span> <span class="string">&quot;/Users/hisenyuan/hisen/test/Test-Java-Code.md&quot;</span>;</span><br><span class="line">    nioCopy(oldFileName, newFileName);</span><br><span class="line">    ioCopy(oldFileName, newFileName.replace(<span class="string">&quot;.md&quot;</span>, <span class="string">&quot;.md.bak&quot;</span>));</span><br><span class="line">    ioCopyByLine(oldFileName,newFileName.replace(<span class="string">&quot;.md&quot;</span>,<span class="string">&quot;.bak.&quot;</span> + System.currentTimeMillis()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 利用NIO进行读写文件</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> oldFileName 原文件的路径</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> newFileName 新文件的路径</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">nioCopy</span><span class="params">(String oldFileName, String newFileName)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">FileChannel</span> <span class="variable">fileChannelIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(oldFileName)).getChannel();</span><br><span class="line">        <span class="type">FileChannel</span> <span class="variable">fileChannelOut</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(newFileName)).getChannel();</span><br><span class="line">        <span class="comment">//获取文件大小</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">size</span> <span class="operator">=</span> fileChannelIn.size();</span><br><span class="line">        System.out.printf(<span class="string">&quot;文件大小为：%s byte \n&quot;</span>, size);</span><br><span class="line">        <span class="comment">//缓冲</span></span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">byteBuffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">while</span> (fileChannelIn.read(byteBuffer) != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//准备写</span></span><br><span class="line">            byteBuffer.flip();</span><br><span class="line">            fileChannelOut.write(byteBuffer);</span><br><span class="line">            <span class="comment">//准备读</span></span><br><span class="line">            byteBuffer.clear();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.printf(<span class="string">&quot;NIO方式复制完成，耗时 %s 秒\n&quot;</span>, (end - start) / <span class="number">1000</span>);</span><br><span class="line">        <span class="comment">//关闭</span></span><br><span class="line">        fileChannelIn.close();</span><br><span class="line">        fileChannelOut.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IO方式复制文件</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> oldFileName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> newFileName</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">ioCopy</span><span class="params">(String oldFileName, String newFileName)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(oldFileName));</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(newFileName));</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">length</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(oldFileName).length();</span><br><span class="line"></span><br><span class="line">        System.out.printf(<span class="string">&quot;文件大小为：%s byte \n&quot;</span>, length);</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//EOF = End Of File，其默认值就是-1</span></span><br><span class="line">        <span class="keyword">while</span> ((len = fileInputStream.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            fileOutputStream.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.printf(<span class="string">&quot;IO方式复制完成，耗时 %s 秒\n&quot;</span>, (end - start) / <span class="number">1000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">ioCopyByLine</span><span class="params">(String oldFileName, String newFileName)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(oldFileName));</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(newFileName));</span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span> ((line = reader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            writer.write(line);</span><br><span class="line">            writer.newLine();</span><br><span class="line">            writer.flush();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;error:&quot;</span> + e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java对象的一生 | 从new到被回收</title>
    <url>/20190408-Java%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%80%E7%94%9F/</url>
    <content><![CDATA[<h1 id="一、出生过程"><a href="#一、出生过程" class="headerlink" title="一、出生过程"></a>一、出生过程</h1><p>这里讲述的是第一次出生的过程，即之前class没有被加载。</p>
<h2 id="1-1-类初始化"><a href="#1-1-类初始化" class="headerlink" title="1.1 类初始化"></a>1.1 类初始化</h2><h3 id="1-1-1-加载"><a href="#1-1-1-加载" class="headerlink" title="1.1.1 加载"></a>1.1.1 加载</h3><p>1.1.1.1 通过类的<strong>全限定名</strong>获取定义此类的二进制字节流(可以从zip包、网络、运行时动态生成);<br>1.1.1.2 将这个字节流所代表的静态存储结构转化为方法去运行时数据结构;<br>1.1.1.3 在内存(<strong>方法区</strong>)中生成一个代表这个类的Java.lang.Class对象，作为方法区这个类各种数据访问的入口;</p>
<h3 id="1-1-2-验证"><a href="#1-1-2-验证" class="headerlink" title="1.1.2 验证"></a>1.1.2 验证</h3><h4 id="1-1-2-1-文件格式验证"><a href="#1-1-2-1-文件格式验证" class="headerlink" title="1.1.2.1 文件格式验证"></a>1.1.2.1 文件格式验证</h4><p>1.1.2.1.1 魔数是否以0xCAFEEBABE开头(咖啡宝贝)<br>1.1.2.1.2 主、次版本号是否在当前虚拟机处理的范围之内(不同的jdk版本编译出来的版本不一致，可向前兼容)<br>1.1.2.1.3 常量池是否有不被支持的类型(检查常量tag标志)<br>1.1.2.1.4 指向常量的各种索引值是否指向不存在或者不符合类型的常量<br>1.1.2.1.5 CONSTANT_Utf8_info型的常量中是否有不符合UTF-8编码的数据<br>1.1.2.1.6 Class文件中各个部分以及文件本身是否有被删除或者附加的其它信息<br>…<br>这些操作是为了确保Class文件的字节流中包含的信息是否符合当前虚拟机的要求，并且不会危害虚拟机自身安全</p>
<h4 id="1-1-2-2-元数据验证"><a href="#1-1-2-2-元数据验证" class="headerlink" title="1.1.2.2 元数据验证"></a>1.1.2.2 元数据验证</h4><p>1.1.2.2.1 是否有父类(Object除外)<br>1.1.2.2.2 是否继续了不允许继承的类(被final修饰的)<br>1.1.2.2.3 如果当前不是抽象类，是否实现了其父类或接口中要求实现的所有方法<br>1.1.2.2.4 类中的字段、方法是否与父类产生矛盾(如覆盖父类final字段、不合法的重载)<br>这些操作是对字节码进行语义分析，确保符合Java语言规范要求</p>
<h4 id="1-1-2-3-字节码验证"><a href="#1-1-2-3-字节码验证" class="headerlink" title="1.1.2.3 字节码验证"></a>1.1.2.3 字节码验证</h4><p>1.1.2.3.1 确保操作数栈的数据类型与指令代码序列能完美配合(反例：操作数栈为int，使用的时候按long加载)<br>1.1.2.3.2 确保跳转指令不会跳转到方法体以外的字节码指令上<br>1.1.2.3.3 确保方法体重点类型转换是有效的<br>这些操作主要是通过数据流和控制流分析，确定程序的语义是合法的、符合逻辑的。<br>JDK1.6之后有一个优化，利用StackMapTable来验证是否合法</p>
<h4 id="1-1-2-4-符号引用验证"><a href="#1-1-2-4-符号引用验证" class="headerlink" title="1.1.2.4 符号引用验证"></a>1.1.2.4 符号引用验证</h4><p>1.1.2.4.1 符号引用中通过字符串描述的全限定名是否能找到对应的类<br>1.1.2.4.2 符号引用中的类、字段、方法是否可以被当前类访问<br>在将符号引用转化为直接引用的时候触发符号引用验证</p>
<span id="more"></span>
<h3 id="1-1-3-准备"><a href="#1-1-3-准备" class="headerlink" title="1.1.3 准备"></a>1.1.3 准备</h3><p>1.1.3.1 仅为类变量分配内存，并且赋值为初始值，例如int为0(被static修饰的)<br>1.1.3.2 特殊情况，被final修饰的static变量会直接赋值为代码给定的值<br>准备阶段是正式为类变量分配内存并设置类变量初始值，这些变量所使用的内存都将在方法区中进行分配。</p>
<h3 id="1-1-4-解析"><a href="#1-1-4-解析" class="headerlink" title="1.1.4 解析"></a>1.1.4 解析</h3><p>虚拟机将常量池中的符号引用替换为直接引用<br>符号引用：一组用来描述所引用目标的符号，所引用的目标不一定在内存中<br>直接引用：直接指向目标的指针、相对偏移量、能间接定位到句柄，直接引用的目标必须在内存中存在</p>
<h3 id="1-1-5-初始化"><a href="#1-1-5-初始化" class="headerlink" title="1.1.5 初始化"></a>1.1.5 初始化</h3><p>&lt;client&gt;()方法：由编译器自动收集类中所有变量的赋值动作和静态语句块(static{}块)中的语句合并产生<br>  按顺序收集。父类的此方法先执行，虚拟机会保证线程安全<br>真正开始执行类中定义的Java代码，</p>
<h2 id="1-2-类实例化-New"><a href="#1-2-类实例化-New" class="headerlink" title="1.2 类实例化(New)"></a>1.2 类实例化(New)</h2><h3 id="1-2-1-分配内存：在类初始化完成之后，能知道所需要的内存大小"><a href="#1-2-1-分配内存：在类初始化完成之后，能知道所需要的内存大小" class="headerlink" title="1.2.1 分配内存：在类初始化完成之后，能知道所需要的内存大小"></a>1.2.1 分配内存：在类初始化完成之后，能知道所需要的内存大小</h3><p>指针碰撞：内存规整的，中间指针划分已用、空闲，那么分配就是指针向空闲一方移动对象大小相等的距离<br>空闲列表：内存不规整，用列表维护一个可用内存地址，从列表中找出一个合适大小的空间分配给实例</p>
<h3 id="1-2-2-初始化为0值"><a href="#1-2-2-初始化为0值" class="headerlink" title="1.2.2 初始化为0值"></a>1.2.2 初始化为0值</h3><h3 id="1-2-3-设置对象头信息"><a href="#1-2-3-设置对象头信息" class="headerlink" title="1.2.3 设置对象头信息"></a>1.2.3 设置对象头信息</h3><h3 id="1-2-4-执行-方法，按照程序员的意思给对象赋值"><a href="#1-2-4-执行-方法，按照程序员的意思给对象赋值" class="headerlink" title="1.2.4 执行&lt;init&gt;()方法，按照程序员的意思给对象赋值"></a>1.2.4 执行&lt;init&gt;()方法，按照程序员的意思给对象赋值</h3><p>&lt;init&gt;()方法：实例构造器</p>
<p>类的初始化是指类加载过程中的初始化阶段对类变量按照程序猿的意图进行赋值的过程；<br>类的实例化是指在类完全加载到内存中后创建对象的过程。</p>
<h1 id="二、生平事迹"><a href="#二、生平事迹" class="headerlink" title="二、生平事迹"></a>二、生平事迹</h1><p>听候线程的指令，执行相关方法</p>
<h1 id="三、驾鹤西去"><a href="#三、驾鹤西去" class="headerlink" title="三、驾鹤西去"></a>三、驾鹤西去</h1><p>可达性分析算法：从GC Root节点开始向下搜索，搜索所走过的引用链为引用链，当没有任何引用链时说明对象不可达<br>经历过两次不可达标记才会被标记为可回收<br>堆内存回收主要发生在堆上的新生代，为Minor GC，使用的是复制算法<br>新生代分为：Eden、to Survivor、from Survivor，后两者为Survivor，三者的比例为8:1:1</p>
<p>在Minor GC之前，to Survivor为空，对象存在：Eden、from Survivor<br>在Minor GC执行<br>Eden存活着的对象拷贝到to Survivor，同一时候对象年龄+1</p>
<p>from Survivor区中的幸存对象会考虑对象年龄<br>假设年龄没达到阈值，对象依旧拷贝到to survivor中<br>假设对象达到阈值那么将被移到老年代</p>
<p>复制阶段完毕后，Eden和from幸存区中仅仅保存死对象，能够视为清空<br>假设在复制过程中to幸存区被填满了，剩余的对象将被放到老年代</p>
<p>在Minor GC之后<br>from survivor和to survivor会调换一下名字，下次Minor GC时，to survivor变为from Survivor</p>
<h1 id="四、参考连接"><a href="#四、参考连接" class="headerlink" title="四、参考连接"></a>四、参考连接</h1><ol>
<li>《深入理解Java虚拟机》</li>
<li><a href="http://www.jizhuomi.com/software/552.html">一个Java Class自述短暂的一生</a></li>
<li><a href="https://blog.csdn.net/m0_37264516/article/details/84311017">一切皆对象：论对象的一生一世</a></li>
<li><a href="https://blog.csdn.net/zyc88888/article/details/79985769">Java对象的生命周期与垃圾回收以及四种引用</a></li>
<li><a href="https://www.cnblogs.com/JackPn/p/9386182.html">Java new一个对象的过程中发生了什么</a></li>
</ol>
<p>目前写的不是太完善，有机会写的透彻明白一些。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java编译错误：程序包Javax.servlet不存在Javax.servlet.*</title>
    <url>/20170217-Java%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%9A%E7%A8%8B%E5%BA%8F%E5%8C%85Javax-servlet%E4%B8%8D%E5%AD%98%E5%9C%A8Javax-servlet/</url>
    <content><![CDATA[<p>之前用myeclipse开发的项目</p>
<p>今天导入到IDEA中去，发现编译出问题</p>
<p>ava编译错误：程序包Javax.servlet不存在Javax.servlet.*</p>
<hr>
<p>原因大概是myeclipse中可以选择Java EE项目</p>
<p>而idea没有，缺少 servlet-api.jar 这个jar包</p>
<hr>
<p>解决办法：</p>
<ol>
<li>复制tomcat文件夹下lib—&gt;servlet-api.jar 这个jar包</li>
<li>添加到IDEA项目中去：粘贴到External Library目录下</li>
</ol>
<p>即可</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java开发的一点思考</title>
    <url>/20170226-Java%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%80%E7%82%B9%E6%80%9D%E8%80%83/</url>
    <content><![CDATA[<p>目前的形式来说Java后台市场还是挺大，虽然也有很多python和php的系统。</p>
<p>要想从事企业级的项目开发，你必须掌握如下要点：</p>
<ol>
<li>掌握项目开发的基本步骤</li>
<li>具备极强的面向对象的分析与设计技巧</li>
<li>掌握用例驱动、以架构为核心的主流开发方法</li>
</ol>
<p>没有人愿意自己一辈子就满足于掌握了一些代码实现的技巧，</p>
<p>别人告诉你要实现什么，你就用代码堆砌来实现别人的要求！</p>
<p>你必须学会从整个项目的角度去思考！</p>
<p>你必须学会假如你是项目经理，你该如何思考！</p>
<p>你必须学会假如你是架构师，你该如何思考！</p>
<p>你必须掌握针对某个特定问题领域的分析方法！</p>
<h2 id="关于基础知识："><a href="#关于基础知识：" class="headerlink" title="关于基础知识："></a>关于基础知识：</h2><span id="more"></span>
<h2 id="JavaSE"><a href="#JavaSE" class="headerlink" title="JavaSE"></a>JavaSE</h2><ul>
<li><strong>基本语法、数据类型、操作符等</strong>：int、long、Integer、Long、if、else、for、while</li>
<li><strong>面向对象</strong>：class（类）、Object（对象）、instance（实例）、state（状态）、behavior（行为）、field、method、new、可见性（访问控制）、attribute、property、package、import、static variable、class variable、instance variable、heap、method area、stack、GC（垃圾回收）、override、overload、对象转型(casting)、多态、this、super</li>
<li><strong>异常处理</strong>：理解编译期错误和运行期错误的区别、Exception、RuntimeException、checked exception、unchecked exception、try、catch、finally、throw new XXXException、throws XXXException、异常处理的基本原则</li>
<li><strong>数组与集合</strong>：数组的定义和使用方法、Collection、List、Set、Map、ArrayList、HashSet、HashMap、Iterator、equals、hashCode、Comparable、Comparator</li>
<li><strong>常用类</strong>：String、intern、常量池、StringBuffer、Java.util.Date、SimpleDateFormat、Regex（正则表达式）</li>
<li><strong>反射机制</strong>：Class、Method、Field、invoke、newInstance、BeanUtils（apache-commons）、PropertyUtils（apache-commons）</li>
<li><strong>输入输出流</strong>：InputStream、OutputStream、Reader、Writer、Adapter设计模式与原始流类、Decorator设计模式与包装流类、对象序列化和反序列化</li>
<li><strong>多线程</strong>：Thread、Runnable、sleep、wait、notify、synchronized、lock</li>
</ul>
<h2 id="Servlet和JSP"><a href="#Servlet和JSP" class="headerlink" title="Servlet和JSP"></a>Servlet和JSP</h2><ul>
<li><p>HttpServlet、doGet、doPost、HttpServletRequest、HttpServletResponse、request.getParameter()、request.setAttribute()、request.getAttribute()、request.getSession()、ServletContext、Filter、web.xml、tomcat、forward与redirect、http协议的无状态性、cookie、JSP Scope Object、&lt;c:out …&#x2F;&gt;、&lt;c:forEach …&gt;</p>
</li>
<li><p>HTML与JavaScript:你需要能够理解常见的网页标签、理解在网页中引入JavaScript的方法、以及JavaScript的基本语法与使用方法</p>
</li>
</ul>
<p>以上，就是你进一步学习Java所必备的基本知识。</p>
<p>特别是一些个专业术语和名词，看到这些名词，如果你像看到亲爹一样亲切，</p>
<p>那么说明你对Java的基础知识就很熟悉了,<strong>记住，仅仅是熟悉了</strong></p>
<h2 id="接下来是SSH"><a href="#接下来是SSH" class="headerlink" title="接下来是SSH"></a>接下来是SSH</h2><p>对于初学者来说，这三大框架被赋予了太多神秘的色彩，似乎它们是重中之重的知识！但是对于拥有多年Java开发经验的专业技术人员来说，对于那些Java牛人来说，却对这三大框架不太感冒！难道它们不重要吗？</p>
<p>现在很多企业都在用这三大框架，所以很多企业也把掌握这三大框架作为招聘的必备条件。不可否认的是，也有很多大型企业没有用这三大框架，这些企业经过多年发展，自身已经有一定的技术积累，也形成了自己独特的技术框架体系。这三大框架既可以说很重要，也可以说不重要。</p>
<p>说重要的原因在于：这三大框架对JavaEE开发中所存在的普遍的问题，提供了优美的解决方案，它们蕴含了这个行业中最NB的开发人员的努力和想法，所以，学习这三大框架，你就可以窥探到这些处于技术巅峰的牛人们究竟对一个问题是怎么想的，通过一种什么样的设计思路去解决问题的。所以，对于你来说，你没有太多项目开发的经验，经验是什么？经验就是你知道可能会遇到哪些问题，针对哪个问题可以有哪些解决方法，在某个情景下，哪种解决方法是较好的，哪种方法不太好等等！如果你没做过什么项目，你根本就不会去意识到你可能会遇到哪些问题，而这些问题往往又是非常关键的！解决得不好，会影响到你的程序的稳定性、可扩展性等等！三大框架就给初学者提供了了解你以后可能会遇到哪些问题，以及针对这些问题的解决方案！</p>
<p>当你了解了这三大框架为什么是重要的，那么你也就能理解，为什么这三大框架也可以说是不重要的。如果你曾经开发过很多项目，你碰到了各种各样的问题，凭着你的技术功底，逐个击破了这些问题，在这些人眼里，三大框架（是不是还有N个框架？呵呵）都是浮云！</p>
<p>你属于哪一种人呢？如果你没有太多项目开发经验，那么三大框架对于你来说就是非常重要的！而且，由此你也知道了该怎么去学这三大框架。对于三大框架的学习而言，着力点在于给你展示问题，并触发你自己主动的思考，我们鼓励你提出自己的想法，也许你的想法很白痴，但那毕竟是你自己的想法，如果你不知道牛人的想法，那你怎么知道自己的想法是很白痴的呢？在这种思想的碰撞过程中，你就会逐渐提高自己！所以，三大框架学完之后，你不应该只是看到一大堆配置文件，你不应该只是看到了一些Action，一些Service，一些映射文件，你不应该只知道session.save&#x2F;update&#x2F;delete，你不应该只是知道struts2中有一堆interceptor，你不应该只是看到一堆jar包……</p>
<p>如果你只是知道拷贝一堆jar包，定义一系列配置文件之后，SSH三大框架就能够运行起来了，也可以给你干活了，那么，很悲哀的是，**你仍然没有掌握三大框架的精粹！**请你回答以下问题：</p>
<hr>
<p><strong>Struts2</strong>：</p>
<ul>
<li>为什么每次请求都要创建一个Action对象？</li>
<li>ModelDriven拦截器的配置中refreshModelBeforeResult解决了什么问题？</li>
<li>为什么在web.xml中配置的StrutsPrepareAndExecuteFilter要过滤所有的请求？</li>
<li>请你给我谈谈ValueStack？</li>
<li>Struts2是如何实现MVC设计模式的？</li>
</ul>
<hr>
<p><strong>Spring</strong>：</p>
<ul>
<li>你为什么要用Spring？</li>
<li>请你聊一聊IOC&#x2F;DI？</li>
<li>什么是声明式的事务管理？为什么要使用声明式的事务管理？Spring如何实现声明式的事务管理？</li>
<li>把spring和hibernate集成，定义事务管理特性的时候，为何要将除了添加、删除、更新操作之外的方法，即主要执行查询任务的方法定义为read-only？</li>
</ul>
<hr>
<p><strong>Hibernate</strong>：</p>
<ul>
<li>请你谈谈你对ORM映射的理解？</li>
<li>很多人说Hibernate不适合大项目，性能有问题，你是如何理解的？</li>
<li>Hibernate为什么一定要定义一个数据库标识？</li>
<li>为什么Hibernate建议你的实体类实现hashCode和equals方法？</li>
<li>谈谈你对Hibernate实体类中的数据库标识与数据库主键之间关系的认识？</li>
<li>谈谈你对Hibernate关联映射与数据库外键之间关系的认识？</li>
<li>调用session.save()方法，hibernate一定会发出insert语句吗？谈谈你的理解</li>
<li>调用session.update()方法，hibernate一定会发出update语句吗？谈谈你的理解</li>
<li>请你聊一下以下名词、概念或用法：lazy、lazy&#x3D;”extra”、inverse、fetch、fetch&#x3D;”join”、fetch&#x3D;”subselect”、batch-size</li>
<li>配置了lazy&#x3D;”true”一定会实现懒加载吗？</li>
<li>请你谈谈Hibernate中的“N+1”问题</li>
<li>请你谈谈Hibernate有哪些最佳实践？</li>
</ul>
<p>以上并非SSH中全部重点的问题，但它们能考察你能否灵活运用SSH框架！如果你能深刻理解这些问题，再配以合适的实战项目训练，你也会逐渐成为牛人！</p>
<h2 id="最后是项目开发能力-："><a href="#最后是项目开发能力-：" class="headerlink" title="最后是项目开发能力 ##："></a>最后是项目开发能力 ##：</h2><p>不管你是学Java还是别的技术，你的根本目的在于给客户创造价值！否则，你下大力气学习的东西，随着技术的进步和更新，很快就会过时！所以，技术的核心在于用技术创造有价值的成果！也就是说，客户需要什么，你就要用技术把客户需要的东西给他造出来！一个公司之所以要用各种福利条件极力挽留你，是因为你能够给公司带来极高的利益！那么，你有什么可以给公司利用的呢？公司最看重你的哪方面的能力呢？</p>
<p>做项目需要的能力很多，其中最核心最基础的就是建模能力（现在最主流的就是面向对象建模！）。什么是建模能力呢？</p>
<hr>
<p><strong>我给大家一个面试题</strong>：<br>一个保险公司的保险卡管理模块：销售人员领取保险卡信息（保险卡数量、卡号、领取日期），然后直接销售给客户，销售完毕后，将保险卡信息录入保险公司系统内部（销售人员信息、购买人信息、购买的保险卡数量、卡号等），客户登录保险公司网站激活保险卡，需要填写（保险卡卡号、激活密码、被保险人信息、受益人信息）</p>
<p>要求就是：如果这个模块交给你来做，你要怎么做？你要解决哪些问题？你可否画个图，给我描述一下你的想法是什么吗？</p>
<p>这只是一个面试题而已，因为只有简单几句话，所以我把它放到这里，让大家感受一下所谓建模要解决什么问题。而业务领域的问题实在是太多了！也许一个几十上百页的需求文档才能把某个业务领域的问题描述清楚，而你的职责就是要把它们实现出来！</p>
<p>某个公司要开发一个考勤管理系统，要求与现有的人力资源系统对接，你是主要的技术负责人，那么，你要做哪些工作呢？</p>
<p>某ERP项目要实现一个排班管理模块，交给你去完成，你如何去完成呢？</p>
<hr>
<p>不要抱怨项目经理给你的信息太少（只有几句话），不要抱怨客户没有描述清楚他们的需求……你的价值就在于理顺所有的问题，用各种手段获得你想要的信息，按照一定的思路汇总，并在特定的时间里逐个解决它！</p>
<p>你应该意识到学Java不是一个坦克大战、一个网络飞车、一个CMS、一个DRP、一个OA那么简单，你不要沉迷于那些技术细节（虽然也是有必要的，但不要钻牛角尖），不要满足于实现了CRUD式的项目需求（虽然这是基础中的基础），在你的前方，永远有一个目标在那里，需要你去努力追赶！  </p>
<p>今后你将面对更加繁杂的需求，你学习项目的唯一目的，就是：学习如何将需求转化为实现，如何对需求进行分析，如何建立概念模型，如何理顺各种概念之间的关系，如何进行设计，如何选择合适的技术来实现你的设计方案，如何对你的实现进行测试，如何解决你所遇到的形形色色的问题（性能、需求变更等）。当你真正到公司里面从事了几年开发之后，你就会同意我的说法！</p>
<hr>
<p>利用Java找工作，需要的就是项目经验，项目经验就是理解项目开发的基本过程，理解项目的分析方法，理解项目的设计思路，理解项目的实现技巧，理解项目的测试方法，理解项目中各种问题的解决方案。</p>
<hr>
<p>码农只是复制粘贴，并不注重原理，说不出所以然，所以做了几年还只能是码农。</p>
<p>加油，共勉！</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java获取股票信息 - Java获取股票信息接口</title>
    <url>/20170427-Java%E8%8E%B7%E5%8F%96%E8%82%A1%E7%A5%A8%E4%BF%A1%E6%81%AF%20-%20Java%E8%8E%B7%E5%8F%96%E8%82%A1%E7%A5%A8%E4%BF%A1%E6%81%AF%E6%8E%A5%E5%8F%A3/</url>
    <content><![CDATA[<p>用下面的接口获取股票的数据</p>
<p>sh:代表上海市场</p>
<p>sz:代表深圳市场</p>
<p>后面是加上股票代码，这是因为上海和深圳的股票代码有重复的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://hq.sinajs.cn/list=sh600877</span><br></pre></td></tr></table></figure>
<p>返回的信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var hq_str_sh600877=&quot;中国嘉陵,6.340,6.400,6.360,6.470,6.210,6.340,6.350,15012913,95227966.000,56500,6.340,12100,6.330,16100,6.320,17500,6.310,47400,6.300,13600,6.350,11300,6.360,32400,6.370,39100,6.380,41200,6.390,2017-04-27,15:00:00,00&quot;;</span><br></pre></td></tr></table></figure>
<p>有效信息为引号里面的数据</p>
<p>下面的数字代表分割数组后所在的下标</p>
<p>下面是数据字段对应的含义</p>
<p>源代码：<a href="https://github.com/hisen-yuan/IDEAPractice/blob/01eeafbc5370404856143b2f116bd7fe00f5d8a8/src/main/Java/com/hisen/String/stock/GetStockInformation.Java">GetStockInformation.Java</a></p>
<p>表格如下：</p>
<span id="more"></span>

<table>
<thead>
<tr>
<th align="left">位置</th>
<th align="left">含义</th>
<th align="left">测试数据</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0</td>
<td align="left">股票名字</td>
<td align="left">中国嘉陵</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">今日开盘价</td>
<td align="left">6.340</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">昨日收盘价</td>
<td align="left">6.400</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">当前价格</td>
<td align="left">6.360</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">今日最高价</td>
<td align="left">6.470</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">今日最低价</td>
<td align="left">6.210</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">买一报价</td>
<td align="left">6.340</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left">卖一报价</td>
<td align="left">6.350</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left">成交数量(百股)</td>
<td align="left">15012913</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left">成交金额(元)</td>
<td align="left">95227966.000</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left">买一数量(股)</td>
<td align="left">56500</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left">买一报价</td>
<td align="left">6.340</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left">买二数量(股)</td>
<td align="left">12100</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left">买二报价</td>
<td align="left">6.330</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left">买三数量(股)</td>
<td align="left">16100</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left">买三报价</td>
<td align="left">6.320</td>
</tr>
<tr>
<td align="left">16</td>
<td align="left">买四数量(股)</td>
<td align="left">17500</td>
</tr>
<tr>
<td align="left">17</td>
<td align="left">买四报价</td>
<td align="left">6.310</td>
</tr>
<tr>
<td align="left">18</td>
<td align="left">买五数量(股)</td>
<td align="left">47400</td>
</tr>
<tr>
<td align="left">19</td>
<td align="left">买五报价</td>
<td align="left">6.300</td>
</tr>
<tr>
<td align="left">20</td>
<td align="left">卖一数量(股)</td>
<td align="left">13600</td>
</tr>
<tr>
<td align="left">21</td>
<td align="left">卖一报价</td>
<td align="left">6.350</td>
</tr>
<tr>
<td align="left">22</td>
<td align="left">卖二数量(股)</td>
<td align="left">11300</td>
</tr>
<tr>
<td align="left">23</td>
<td align="left">卖二报价</td>
<td align="left">6.360</td>
</tr>
<tr>
<td align="left">24</td>
<td align="left">卖三数量(股)</td>
<td align="left">32400</td>
</tr>
<tr>
<td align="left">25</td>
<td align="left">卖三报价</td>
<td align="left">6.370</td>
</tr>
<tr>
<td align="left">26</td>
<td align="left">卖四数量(股)</td>
<td align="left">39100</td>
</tr>
<tr>
<td align="left">27</td>
<td align="left">卖四报价</td>
<td align="left">6.380</td>
</tr>
<tr>
<td align="left">28</td>
<td align="left">卖五数量(股)</td>
<td align="left">41200</td>
</tr>
<tr>
<td align="left">29</td>
<td align="left">卖五报价</td>
<td align="left">6.390</td>
</tr>
<tr>
<td align="left">30</td>
<td align="left">当前日期</td>
<td align="left">2017-04-27</td>
</tr>
<tr>
<td align="left">31</td>
<td align="left">当前时间</td>
<td align="left">15:00:00</td>
</tr>
<tr>
<td align="left">32</td>
<td align="left">未知</td>
<td align="left">00</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java调用有道翻译接口 - 免费翻译API</title>
    <url>/20180712-Java%E8%B0%83%E7%94%A8%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91%E6%8E%A5%E5%8F%A3-%E5%85%8D%E8%B4%B9%E7%BF%BB%E8%AF%91API/</url>
    <content><![CDATA[<p>这个接口为免费的</p>
<h3 id="一、接口地址"><a href="#一、接口地址" class="headerlink" title="一、接口地址"></a>一、接口地址</h3><p>等号后面的为需要翻译的英文</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://fanyi.youdao.com/openapi.do?keyfrom=xinlei&amp;key=759115437&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=hisen</span><br></pre></td></tr></table></figure>

<h3 id="二、代码样例"><a href="#二、代码样例" class="headerlink" title="二、代码样例"></a>二、代码样例</h3><p>把全世界200+国家和地区的名字翻译为英文，并且入库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">SmsCountryService countryService;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void updateZhName()&#123;</span><br><span class="line">  // 有道翻译接口</span><br><span class="line">  String url = &quot;http://fanyi.youdao.com/openapi.do?keyfrom=xinlei&amp;key=759115437&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=&quot;;</span><br><span class="line">  // 查询出所有的英文国家名字</span><br><span class="line">  List&lt;SmsCountry&gt; countries = countryService.queryAllName();</span><br><span class="line">  // httpclient</span><br><span class="line">  CloseableHttpClient client = HttpClientBuilder.create().build();</span><br><span class="line">  // 翻译每个国家的名字，并且更新数据库</span><br><span class="line">  for (SmsCountry country:countries) &#123;</span><br><span class="line">    HttpGet request = new HttpGet(url + URLEncoder.encode(country.getName()));</span><br><span class="line">    try &#123;</span><br><span class="line">      CloseableHttpResponse response = client.execute(request);</span><br><span class="line">      String str = EntityUtils.toString(response.getEntity(), &quot;utf-8&quot;);</span><br><span class="line">      JSONObject jsonObject = JSON.parseObject(str);</span><br><span class="line">      // 取出json字符串中数组的值</span><br><span class="line">      String s = (String) jsonObject.getJSONArray(&quot;translation&quot;).get(0);</span><br><span class="line">      System.out.println(&quot;&gt;&gt;&gt;&gt;&gt; &quot; + s);</span><br><span class="line">      if (!StringUtil.isEmpty(s))&#123;</span><br><span class="line">      SmsCountry smsCountry = new SmsCountry();</span><br><span class="line">      smsCountry.setId(country.getId());</span><br><span class="line">      smsCountry.setNameZh(s);</span><br><span class="line">      countryService.updateNameById(smsCountry);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java静态代码块</title>
    <url>/20170211-Java%E9%9D%99%E6%80%81%E4%BB%A3%E7%A0%81%E5%9D%97/</url>
    <content><![CDATA[<p>有时候重新回味一下以前的知识也很美妙</p>
<p>总能发现以前自己没有怎么在意的细节</p>
<hr>
<p>静态代码块是在类中独立于类成员的static语句块，可以有多个。</p>
<p>如果要初始化静态变量，可以声明一个静态块。</p>
<p>格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">static &#123;</span><br><span class="line">	//块执行代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>静态块存在单独的内存中，仅在该类被加载时执行，示例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.JavaGaiShu.page91test20;</span><br><span class="line"></span><br><span class="line">public class JingTaiDaiMaKuai &#123;</span><br><span class="line">	private static String a;</span><br><span class="line">	private String b;</span><br><span class="line">	static &#123;</span><br><span class="line">		JingTaiDaiMaKuai.a = &quot;我学习了很多语言&quot;;</span><br><span class="line">		System.out.println(a);</span><br><span class="line">		JingTaiDaiMaKuai t = new JingTaiDaiMaKuai();</span><br><span class="line">		t.fina();</span><br><span class="line">		t.b=&quot;Java语言&quot;;</span><br><span class="line">		System.out.println(t.b);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	static &#123;</span><br><span class="line">		JingTaiDaiMaKuai.a = &quot;I Love Java&quot;;</span><br><span class="line">		System.out.println(a);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	static &#123;</span><br><span class="line">		JingTaiDaiMaKuai.a = &quot;我还将继续学习下去&quot;;</span><br><span class="line">		System.out.println(a);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private void fina() &#123;</span><br><span class="line">		System.out.println(&quot;但是我最喜欢的是：&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>输出如下：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">我学习了很多语言</span><br><span class="line">但是我最喜欢的是：</span><br><span class="line">Java语言</span><br><span class="line">I Love Java</span><br><span class="line">我还将继续学习下去</span><br></pre></td></tr></table></figure>

<p>静态代码块在运行main方法时可以直接调用而不用创建实例。</p>
<p>静态代码块直接是按顺序执行的。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>练习</tag>
      </tags>
  </entry>
  <entry>
    <title>Jedis - Software caused connection abort:recv failed</title>
    <url>/20170411-Jedis%20-%20Software%20caused%20connection%20abort%20recv%20failed/</url>
    <content><![CDATA[<p>在使用jedis的时候出现这个问题：</p>
<p><strong>redis.clients.jedis.exceptions.JedisConnectionException:Java.net.SocketException:Software caused connection abort: recv failed</strong></p>
<p>我是windows上Java运行，然后redis是在虚拟机的，通过映射访问</p>
<h2 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h2><p>编辑redis配置文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vi /etc/redis/redis.conf</span><br></pre></td></tr></table></figure>
<p>找到</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bind 127.0.0.1</span><br></pre></td></tr></table></figure>
<p>改成</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bind 0.0.0.0</span><br></pre></td></tr></table></figure>
<p>改完之后重启redis</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service redis restart</span><br></pre></td></tr></table></figure>
<p>即可。这跟mysql一样，允许任何ip连接！</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>jedis</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 日志分析出现次数前10的数据 | awk sort uniq</title>
    <url>/20190410-Linux-log-analyze-top-10/</url>
    <content><![CDATA[<h1 id="一、命令组合"><a href="#一、命令组合" class="headerlink" title="一、命令组合"></a>一、命令组合</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ more sort.log | awk &#x27;&#123;print $1&#125;&#x27; | sort | uniq -c | sort -k1nr | head -3</span><br><span class="line">   4 5</span><br><span class="line">   3 1</span><br><span class="line">   2 2</span><br></pre></td></tr></table></figure>

<h1 id="二、命令详解"><a href="#二、命令详解" class="headerlink" title="二、命令详解"></a>二、命令详解</h1><p>more：一次读取少量的数据，避免一次性载入大文件，比cat好些<br>awk ‘{print $1}’：以awk默认的分隔符，并且打印第一列<br>sort：把上一步的结果按ASCII排序<br>uniq -c：如果重复那么计数，uniq命令可以组合很多其它参数<br>sort -k1nr：根据第一列的数据进行排序，n是按数值大小排序，r是倒序排序<br>head -3：显示前面三行数据</p>
<h1 id="三、原始数据"><a href="#三、原始数据" class="headerlink" title="三、原始数据"></a>三、原始数据</h1><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cat sort.log</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">1</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">5</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux|mac查找目录下文件内容中包含某字符串的命令</title>
    <url>/20180712-Linux-mac%E6%9F%A5%E6%89%BE%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8C%85%E5%90%AB%E6%9F%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">grep -r hisen ./</span><br></pre></td></tr></table></figure>
<p>上面这条命令。直接查找当前目录下所有内容中包含 hisen 的文件</p>
]]></content>
  </entry>
  <entry>
    <title>Linux安装tree命令 - apt-get install tree</title>
    <url>/20170503-Linux%E5%AE%89%E8%A3%85tree%E5%91%BD%E4%BB%A4%20-%20apt-get%20install%20tree/</url>
    <content><![CDATA[<p>目前debian系列的系统都无法使用apt-get install tree来安装tree命令</p>
<p>以下是安装步骤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#下载（官网为：http://mama.indstate.edu/users/ice/tree/）</span><br><span class="line">wget http://mama.indstate.edu/users/ice/tree/src/tree-1.7.0.tgz</span><br><span class="line">#解压</span><br><span class="line">tar -zxvf tree-1.7.0.tgz</span><br><span class="line">#进入目录</span><br><span class="line">cd tree-1.7.0</span><br><span class="line">#安装</span><br><span class="line">sudo make install</span><br><span class="line">#完毕</span><br></pre></td></tr></table></figure>
<p>最简单的使用方法，在目录下输入：tree</p>
<p>使用效果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@ubuntu:~/dl$ tree</span><br><span class="line">.</span><br><span class="line">├── hisen.log</span><br><span class="line">├── master</span><br><span class="line">└── test_db-master</span><br><span class="line">    ├── Changelog</span><br><span class="line">    ├── employees_partitioned_5.1.sql</span><br><span class="line">    ├── employees_partitioned.sql</span><br><span class="line">    ├── employees.sql</span><br><span class="line">    ├── images</span><br><span class="line">    │   ├── employees.gif</span><br><span class="line">    │   ├── employees.jpg</span><br><span class="line">    │   └── employees.png</span><br><span class="line">    ├── load_departments.dump</span><br><span class="line">    ├── load_dept_emp.dump</span><br><span class="line">    ├── load_dept_manager.dump</span><br><span class="line">    ├── load_employees.dump</span><br><span class="line">    ├── load_salaries1.dump</span><br><span class="line">    ├── load_salaries2.dump</span><br><span class="line">    ├── load_salaries3.dump</span><br><span class="line">    ├── load_titles.dump</span><br><span class="line">    ├── objects.sql</span><br><span class="line">    ├── README.md</span><br><span class="line">    ├── sakila</span><br><span class="line">    │   ├── README.md</span><br><span class="line">    │   ├── sakila-mv-data.sql</span><br><span class="line">    │   └── sakila-mv-schema.sql</span><br><span class="line">    ├── show_elapsed.sql</span><br><span class="line">    ├── sql_test.sh</span><br><span class="line">    ├── test_employees_md5.sql</span><br><span class="line">    └── test_employees_sha.sql</span><br><span class="line"></span><br><span class="line">3 directories, 26 files</span><br></pre></td></tr></table></figure>
<p>使用参数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tree命令行参数：</span><br><span class="line"></span><br><span class="line">-a 显示所有文件和目录。</span><br><span class="line">-A 使用ASNI绘图字符显示树状图而非以ASCII字符组合。</span><br><span class="line">-C 在文件和目录清单加上色彩，便于区分各种类型。</span><br><span class="line">-d 显示目录名称而非内容。</span><br><span class="line">-D 列出文件或目录的更改时间。</span><br><span class="line">-f 在每个文件或目录之前，显示完整的相对路径名称。</span><br><span class="line">-F 在执行文件，目录，Socket，符号连接，管道名称名称，各自加上&quot;*&quot;,&quot;/&quot;,&quot;=&quot;,&quot;@&quot;,&quot;|&quot;号。</span><br><span class="line">-g 列出文件或目录的所属群组名称，没有对应的名称时，则显示群组识别码。</span><br><span class="line">-i 不以阶梯状列出文件或目录名称。</span><br><span class="line">-I 不显示符合范本样式的文件或目录名称。</span><br><span class="line">-l 如遇到性质为符号连接的目录，直接列出该连接所指向的原始目录。</span><br><span class="line">-n 不在文件和目录清单加上色彩。</span><br><span class="line">-N 直接列出文件和目录名称，包括控制字符。</span><br><span class="line">-p 列出权限标示。</span><br><span class="line">-P 只显示符合范本样式的文件或目录名称。</span><br><span class="line">-q 用&quot;?&quot;号取代控制字符，列出文件和目录名称。</span><br><span class="line">-s 列出文件或目录大小。</span><br><span class="line">-t 用文件和目录的更改时间排序。</span><br><span class="line">-u 列出文件或目录的拥有者名称，没有对应的名称时，则显示用户识别码。</span><br><span class="line">-x 将范围局限在现行的文件系统中，若指定目录下的某些子目录，其存放于另一个文件系统上，则将该子目录予以排除在寻找范围外。</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux常用的几个命令</title>
    <url>/20170122-Linux%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E4%B8%AA%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>1、查看日志最后几行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tail -100 /access.log</span><br></pre></td></tr></table></figure>
<p>2、进入目录相关</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#进入一个目录</span><br><span class="line">root@hisenyuan:/# cd /home/wwwlog/</span><br><span class="line">#进入当前目录下的www.google.com目录</span><br><span class="line">root@hisenyuan:/home/wwwlog# cd ./www.google.com</span><br><span class="line">#进入父目录</span><br><span class="line">root@hisenyuan:/home/wwwlog/www.google.com# cd ../</span><br><span class="line">#进入linux系统根目录</span><br><span class="line">root@hisenyuan:/home/wwwlog# cd /</span><br><span class="line">#根目录</span><br><span class="line">root@hisenyuan:/#</span><br></pre></td></tr></table></figure>
<p>3、看倒数多少行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#看倒数10行</span><br><span class="line">tail -10 /filepath/filename</span><br><span class="line">#看行数外加过滤含有指定字符的行</span><br><span class="line">tail -10 access.log | grep -v &quot;yourstring&quot;</span><br></pre></td></tr></table></figure>
<p>4、过滤特定行，保存结果到新文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat /root/old.text | grep -v &quot;yourstring&quot;&gt; /root/new.text</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>List&lt;Object&gt; 去重 | List对象去重 by Java8 stream &amp; lambda</title>
    <url>/20180712-List-Object-%E5%8E%BB%E9%87%8D-List%E5%AF%B9%E8%B1%A1%E5%8E%BB%E9%87%8D-by-Java8-stream-lambda/</url>
    <content><![CDATA[<p>利用Java8的流和lambda表达式能很方便的对list对象进行去重<br>而且不会造成代码入侵</p>
<p>插播：Java8 对List进行求和、分组、提取对象单个属性：<a href="https://www.jianshu.com/p/c71eaeaaf30c">https://www.jianshu.com/p/c71eaeaaf30c</a></p>
<p>下面的例子仅供参考<br>github：<a href="https://github.com/hisenyuan">https://github.com/hisenyuan</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.collection.list.duplicate;</span><br><span class="line"></span><br><span class="line">import com.alibaba.rocketmq.shade.com.alibaba.fastjson.JSON;</span><br><span class="line">import Java.util.ArrayList;</span><br><span class="line">import Java.util.List;</span><br><span class="line">import Java.util.concurrent.ConcurrentHashMap;</span><br><span class="line">import Java.util.function.Function;</span><br><span class="line">import Java.util.function.Predicate;</span><br><span class="line">import Java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author hisenyuan</span><br><span class="line"> * @time 2018/4/19 14:06</span><br><span class="line"> * @description list对象根据属性去重 lambda + stream</span><br><span class="line"> */</span><br><span class="line">public class ListDuplicateTest &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Person&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">        for (int i = 0; i &lt; 100; i++) &#123;</span><br><span class="line">            Person person = new Person();</span><br><span class="line">            person.setAge(10);</span><br><span class="line">            person.setName(&quot;hsien&quot;);</span><br><span class="line">            person.setWeight(i);</span><br><span class="line">            list.add(person);</span><br><span class="line">        &#125;</span><br><span class="line">        Person bean = new Person();</span><br><span class="line">        bean.setName(&quot;hisenyuan&quot;);</span><br><span class="line">        bean.setAge(33);</span><br><span class="line">        bean.setWeight(65);</span><br><span class="line">        list.add(bean);</span><br><span class="line"></span><br><span class="line">        List&lt;Person&gt; collect = list.stream().filter(distinctByKey(Person::getName))</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(JSON.toJSONString(collect));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 函数式接口 T -&gt; bollean</span><br><span class="line">     * @param keyExtractor</span><br><span class="line">     * @param &lt;T&gt;</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static &lt;T&gt; Predicate&lt;T&gt; distinctByKey(Function&lt;? super T, ?&gt; keyExtractor) &#123;</span><br><span class="line">        ConcurrentHashMap&lt;Object, Boolean&gt; map = new ConcurrentHashMap&lt;&gt;(16);</span><br><span class="line">        return t -&gt; map.putIfAbsent(keyExtractor.apply(t),Boolean.TRUE) == null;</span><br><span class="line"></span><br><span class="line">//        这个也可以，不过感觉效率要低一些，线程不是那么安全</span><br><span class="line">//        Set&lt;Object&gt; seen = ConcurrentHashMap.newKeySet();</span><br><span class="line">//        return t -&gt; seen.add(keyExtractor.apply(t));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 内部类</span><br><span class="line">     */</span><br><span class="line">    static class Person &#123;</span><br><span class="line">        private int age;</span><br><span class="line">        private String name;</span><br><span class="line">        private int weight;</span><br><span class="line"></span><br><span class="line">        public int getAge() &#123;</span><br><span class="line">            return age;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void setAge(int age) &#123;</span><br><span class="line">            this.age = age;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public String getName() &#123;</span><br><span class="line">            return name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void setName(String name) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public int getWeight() &#123;</span><br><span class="line">            return weight;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public Person() &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        public void setWeight(int weight) &#123;</span><br><span class="line">            this.weight = weight;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>回顾2019，展望2020</title>
    <url>/20191229-Looking-back-to-2019-looking-forward-to-2020/</url>
    <content><![CDATA[<h2 id="零、摘要"><a href="#零、摘要" class="headerlink" title="零、摘要"></a>零、摘要</h2><p>2019<br>1.【完成】换一份合适的工作<br>2.【完成】信息系统项目管理师<br>3.【完成】坚持阅读，数量质量超过2018</p>
<p>2020<br>1.羽毛球&#x2F;骑行&#x2F;等锻炼项目<br>2.通过一项含金量较高的考试项目<br>3.持续阅读&#x2F;5本华章CS&#x2F;其它不限<br>4.深入了解公司内部组件&#x2F;知其所以然</p>
<p>2019预料之中夹着惊喜，正反馈激励我前行。<br>2020充实得度过每一天，有所追求有所进步。</p>
<h2 id="一、成长"><a href="#一、成长" class="headerlink" title="一、成长"></a>一、成长</h2><p>自己想要什么样的生活？</p>
<span id="more"></span>
<p>最近几年一直在思考这两个问题<br>如今已经慢慢勾勒出了自己想要的生活<br>大概就是舒服的活着，向身边人学习，帮助他人成长，体现自己的社会价值(马斯洛需求层次理论的4~5之间)</p>
<p>想清楚自己想要什么样的生活之后<br>接下来就是给自己设定一系列目标<br>例如：长期目标、5年规划、3年规划</p>
<p>抛砖引玉：</p>
<ol>
<li>接触牛人，多和牛人交流取经&#x2F;询问适当的建议，以之为榜样</li>
<li>保持好奇，对于自己不懂的技术或者其它任何事，各个角度去了解学习</li>
<li>管理精力，提高单位时间的效率，乐于锻炼，锻炼的人一般都精力充沛</li>
<li>持续学习，只有持续的投入系统的学习和总结方能保持竞争力</li>
<li>保持敬畏，认真负责得处理好份内得每一件事，再考虑锦上添花的事情</li>
</ol>
<h2 id="二、阅读"><a href="#二、阅读" class="headerlink" title="二、阅读"></a>二、阅读</h2><p><a href="https://hisen.me/booklist/">全部书单</a><br>从17年开始阅读量稍微上来一点到如今已经走过了快3个年头<br>在阅读中观摩了不少他人的经历、接触了各种不同的思维方式、看了很多恍然大悟的见解、领略了技术的魅力<br>有一句话说的不错：书是一面镜子，折射出一个人的方方面面<br>翻越自己的书单，也能看到一个变化的过程，从兴趣开始，逐步转向个人提升以及对精神世界的追求<br>目前发现不少的书籍内容有部分的”重叠”，所以有些书还是看的比较快，有些书值得重复阅读，特别是技术书</p>
<p>2019 Top8 (非权威排行)<br>《贫穷的本质》<br>《重塑大脑，重塑人生》<br>《领域驱动设计》(系列)<br>《代码简洁之道:程序员的职业素养》<br>《枪炮、病菌与钢铁:人类社会的命运》<br>《可伸缩服务架构:框架与中间件》<br>《Java并发编程的艺术》<br>《深入理解Java虚拟机》</p>
<h2 id="三、生活"><a href="#三、生活" class="headerlink" title="三、生活"></a>三、生活</h2><p>关键字：绿植、养鱼、骑行、羽毛球、辣椒</p>
<p>绿植和养鱼<br>看书累了&#x2F;下班回家浇浇水赏赏鱼放空下自己挺好<br>偶尔还会收获成长的喜悦、以及把控感</p>
<p>骑行和羽毛球<br>运动方面实际行动比较多的今年是羽毛球<br>技术不咋地，野路子，打算2020培训下<br>骑行看季节看队友，春秋时节郊区遛遛挺好</p>
<p>辣椒<br>作为一个江西人，应该是无辣不欢的体质，无惧新型社交绝症</p>
<h2 id="四、习惯"><a href="#四、习惯" class="headerlink" title="四、习惯"></a>四、习惯</h2><p>2019<br>起床：06:30<br>午休：20分钟<br>入睡：01:00</p>
<p>2020<br>起床：05:00<br>午休：20分钟<br>入睡：23:30</p>
<p>起床热身，煮早餐，基本上八点半左右出门<br>步行过程中耳机听互联网广播(目前是：36氪随身听)<br>地铁上耳机切换至音乐模式看书(kindle&#x2F;纸书)<br>2020走养生路线，早睡早起！<br>中午看20分钟的书<br>早上看约1<del>3小时<br>晚上看书0</del>1小时</p>
<p>关注周围的事情，了解动态，吸取营养，输出影响力</p>
<h2 id="五、随说"><a href="#五、随说" class="headerlink" title="五、随说"></a>五、随说</h2><ol>
<li>每天花点时间冥想放松效果很好(多次)</li>
<li>写字好处多，整理思绪、调整心情、集中注意力</li>
<li>多给予正反馈、多微笑</li>
<li>减少无效的时间开支(短视频&#x2F;垃圾新闻&#x2F;娱乐等性价比低的活动)</li>
<li>做任何事情始于兴趣&#x2F;好奇&#x2F;压力，持续于正反馈(得到自己想要的&#x2F;有益的)</li>
<li>把自己所见所学所想进行归纳总结，寻求内在的统一是一个很有趣的过程</li>
<li>感谢遇到的人和事，做一个高度容错的系统，并且在错误中捞金</li>
<li>想办法优化自己的思维方式(阅读&#x2F;取经&#x2F;经历)</li>
<li>写博客&#x2F;发微博是一个自我总结和展示的有效途径(不一定要写多好)</li>
</ol>
<h2 id="六、推荐"><a href="#六、推荐" class="headerlink" title="六、推荐"></a>六、推荐</h2><ol>
<li><a href="https://www.yuque.com/ruanyf/weekly">科技爱好者周刊</a></li>
<li><a href="https://www.yinwang.org/">王垠</a></li>
<li>彭博商业周刊(刊物)</li>
<li>中国国家地里(刊物)</li>
<li>36氪随身听(广播)</li>
</ol>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>总结</tag>
      </tags>
  </entry>
  <entry>
    <title>回顾 2021，展望 2022</title>
    <url>/20220102-Looking-back-to-2021-looking-forward-to-2022/</url>
    <content><![CDATA[<h2 id="零、摘要"><a href="#零、摘要" class="headerlink" title="零、摘要"></a>零、摘要</h2><h3 id="回顾-2021"><a href="#回顾-2021" class="headerlink" title="回顾 2021"></a>回顾 2021</h3><ol>
<li>【完成】换了一份不错的工作;</li>
<li>【完成】坚持阅读，追求质量;</li>
<li>【待办】运动量不够，锻炼偏少;</li>
</ol>
<h3 id="展望-2022"><a href="#展望-2022" class="headerlink" title="展望 2022"></a>展望 2022</h3><ol>
<li>体重控制在 65Kg 以内，学会自由泳;</li>
<li>持续阅读，技术与非技术书籍交替看，5 本基础书;</li>
<li>深入理解公司内部技术栈、深入了解 2-3 条业务线;</li>
<li>重新学习 Dubbo，学习设计理念，以及分布式系统架构;</li>
</ol>
<h2 id="一、成长"><a href="#一、成长" class="headerlink" title="一、成长"></a>一、成长</h2><p>技术方面今年感觉成长不是太明显<br>有所改变的是会深入洞察需求<br>逐步完善设计之后开始 coding，而不是着急开始。</p>
<p>对于技术底层也有一定地涉猎，更多地可能是在钻电商业务。</p>
<span id="more"></span>
<h2 id="二、阅读"><a href="#二、阅读" class="headerlink" title="二、阅读"></a>二、阅读</h2><p>本年度阅读图书 38 本<br>由于上半年部分时间在准备换工作<br>以及 6 月份换了工作之后花在工作的时间比较多<br>所以今年的阅读量下降地厉害，但是还是会坚持每天都翻几页</p>
<p>收获较多的为以下几本：</p>
<ul>
<li>《置身事内》</li>
<li>《幕后产品》</li>
<li>《商业的本质和互联网》</li>
<li>《曾国藩的正面与侧面》</li>
<li>《分析与思考：黄奇帆复旦经济课》</li>
</ul>
<p><a href="https://hisen.me/booklist/">全部书单</a></p>
<h2 id="三、生活"><a href="#三、生活" class="headerlink" title="三、生活"></a>三、生活</h2><p>唯一的变化可能是多了 2 只鳄鱼龟。<br>夜深人静之时，回到家，给乌龟喂食互动下也挺有意思。</p>
<h2 id="四、习惯"><a href="#四、习惯" class="headerlink" title="四、习惯"></a>四、习惯</h2><p>下半年由于工作原因，晚睡较多，很少早起。<br>需要找准自己的节奏，调节步伐，逐步早起。</p>
<h2 id="五、随说"><a href="#五、随说" class="headerlink" title="五、随说"></a>五、随说</h2><ol>
<li>做个正常人，不做圣人;</li>
<li>力所能及地帮助身边人;</li>
<li>多关注家乡的教育和经济，有机会可以出一把力;</li>
</ol>
<h2 id="六、推荐"><a href="#六、推荐" class="headerlink" title="六、推荐"></a>六、推荐</h2><p>这些年能坚持下来的也就只有下面两个了~<br>其它的可能不太适合长时间跟踪</p>
<ol>
<li><a href="https://www.ruanyifeng.com/blog/weekly/">科技爱好者周刊</a></li>
<li><a href="https://github.com/trending?since=monthly">GitHub 月度流行项目</a></li>
</ol>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>总结</tag>
      </tags>
  </entry>
  <entry>
    <title>回顾 2023，展望 2024</title>
    <url>/20231231-Looking-back-to-2023-looking-forward-to-2024/</url>
    <content><![CDATA[<h2 id="零、摘要"><a href="#零、摘要" class="headerlink" title="零、摘要"></a>零、摘要</h2><h3 id="回顾-2023"><a href="#回顾-2023" class="headerlink" title="回顾 2023"></a>回顾 2023</h3><ol>
<li>年初领证了~</li>
<li>折腾了 1 个小型家用服务器</li>
<li>工作上做了一个和 LLM 相关的项目</li>
<li>工作上经历过 2 次领导较大的组织变动</li>
<li>Q4 装修了小房子，目前折腾全屋智障中</li>
<li>入职 2 年多经历了一次涨薪( 侮辱性普调 &#x3D;-&#x3D; )</li>
</ol>
<h3 id="展望-2024"><a href="#展望-2024" class="headerlink" title="展望 2024"></a>展望 2024</h3><ol>
<li>工作上更上一层楼</li>
<li>还清外债走向小康</li>
<li>继续锻炼汇报总结能力</li>
<li>继续运动，体重控制在 60kg</li>
<li>学习&#x2F;沉淀方法论指导工作和生活</li>
</ol>
<h2 id="一、成长"><a href="#一、成长" class="headerlink" title="一、成长"></a>一、成长</h2><span id="more"></span>
<p>第一次主导重要的项目后端开发工作，在项目管理&#x2F;LLM方面有更多的认识，也第一次正式使用 Golang 进行开发。<br>做的好的地方：</p>
<ol>
<li>及时攻克了多个项目卡点。</li>
<li>与多个方向的同学沟通协作比较顺畅。</li>
<li>积极使用大模型来提升工作效率( 主要是 Golang 不太熟悉 )。</li>
<li>在高压状态下，依然坚持合理的架构边界，保持较高的 CR 打回率。</li>
</ol>
<p>做的不足的地方：</p>
<ol>
<li>团队在磨合初期，得多当面沟通，毕竟文字信息传递的情绪不太好揣摩。</li>
<li>作为项目负责人，高估了自己的时间，由于有很多需要沟通协调的事情，导致分配给自己的开发工作进度不及预期。</li>
<li>没能及时把项目全局架构( 前&#x2F;后端、上下游 )，影响过程中沟通的效率，项目再忙也需要输出一个高层级的概念框架。</li>
</ol>
<h2 id="二、阅读"><a href="#二、阅读" class="headerlink" title="二、阅读"></a>二、阅读</h2><p>本年度阅读图书 25 本，不及预期。<br>不及预期的主要原因是：</p>
<ul>
<li>装修准备，各种看功率</li>
<li>装修之中，和工长斗智斗勇</li>
<li>LLM 项目，时间紧任务重</li>
<li>太懒，有很多时间没有利用上</li>
</ul>
<p>收获较多的为以下几本：</p>
<ul>
<li>《凤凰项目》小说形式描述一家公司 IT 运维相关的故事</li>
<li>《小岛经济学》以故事的形式描述各种经济规律以及原理</li>
<li>《以色列:一个民族的重生》巴以冲突之前看的，主要是想了解一下以色列为什么科技那么发达，但从中未找到答案</li>
<li>《这才是心理学》心理学也是一门科学，但是很多时候被大众&#x2F;媒体给误解了</li>
<li>《搞定系统设计》2021 年初版的书，中文版最近才出，设计的思路收益颇丰。推特上关注了作者，alex xu，画图有一手。</li>
</ul>
<p><a href="https://hisen.me/booklist/">全部书单</a></p>
<h2 id="三、生活"><a href="#三、生活" class="headerlink" title="三、生活"></a>三、生活</h2><h3 id="3-1-龟缸"><a href="#3-1-龟缸" class="headerlink" title="3.1 龟缸"></a>3.1 龟缸</h3><p>两只鳄龟，剩下一只，长的特别巨大，还时刻想着越狱。<br>每天出门之前会喂一点『寸金饲料』(不推荐，用主要是便宜)或者『冻干南极磷虾』</p>
<h3 id="3-2-鱼缸"><a href="#3-2-鱼缸" class="headerlink" title="3.2 鱼缸"></a>3.2 鱼缸</h3><p>趴地矮珍珠多次爆缸，目前清理得仅剩一小撮。<br>入了一颗水杨梅，目前生长比较正常。</p>
<p>把尼特利 AT5 水草灯小黄鱼 268 出了，21年9月 724 入的。<br>印象很深刻的一点就是，刚刚发布，立马就被下单买走了。<br>唯一能解释的是，好东西出二手也方便一些。<br>PS：之前有看到一句话很不错，每年都用最新款的东西，完事淘汰还能回血不少。</p>
<h3 id="3-3-全屋智能"><a href="#3-3-全屋智能" class="headerlink" title="3.3 全屋智能"></a>3.3 全屋智能</h3><p>目前入手的有易来的灯、易来的凌动开关。绿米的智能开关(零火版)。<br>小米中枢网关 + 小米多模网关 + 小米人体传感器2S。<br>homeassistant  搭建中，目前仅做了 homekit 桥接。<br>不推荐领普的人体存在传感器，比较拉胯，识别错误率较高。<br>后续有机会开个帖子单独说说全屋<del>智能</del>(智障)</p>
<h3 id="3-4-HomeLab"><a href="#3-4-HomeLab" class="headerlink" title="3.4 HomeLab"></a>3.4 HomeLab</h3><p>送走了 9020sff，迎来了 E5 双路服务器(详情：<a href="../20230423-build-my-first-server/">搭建我的第一台服务器</a> )。<br>在推上看了不少大佬在折腾 HomeLab，而且图画的一个比一个好。<br>最初是由 NAS 入坑的，后续折腾的话主要是那种上网。<br>现在的就想着有空折腾的软硬件，顺便学点有用没用的知识。</p>
<p>目前我的设备：</p>
<ul>
<li>群晖 DS918+ * 1</li>
<li>E5 服务器 * 1</li>
<li>2.5G 8口交换机 * 1</li>
<li>玩客云 * 1</li>
<li>无线宝 * 1</li>
</ul>
<h2 id="四、习惯"><a href="#四、习惯" class="headerlink" title="四、习惯"></a>四、习惯</h2><h3 id="4-1-作息"><a href="#4-1-作息" class="headerlink" title="4.1 作息"></a>4.1 作息</h3><p>全年都是晚睡晚起，早晚的时间基本上浪费了。<br>早上是 8 点左右起床<br>中午一般午休 15min，看书 15min<br>晚上是回家之后刷一会 new feeds</p>
<ul>
<li>不刷新闻+视频</li>
<li>一般都是看看中文技术圈大佬们的动态</li>
</ul>
<h3 id="4-2-运动"><a href="#4-2-运动" class="headerlink" title="4.2 运动"></a>4.2 运动</h3><ul>
<li>【自行车】全年几乎没怎么骑，主要是没有合适的小伙伴，大家都忙</li>
<li>【羽毛球】倒是执行的还不错，基本上能保证每周一次的频率，也有一定的进步</li>
<li>【游泳】2022 年的买的次卡用完之后，几乎没怎么游</li>
</ul>
<h2 id="五、随说"><a href="#五、随说" class="headerlink" title="五、随说"></a>五、随说</h2><ul>
<li>参与了一次规模比较大的老乡座谈会，增加了不少看得见摸得着的榜样。</li>
<li>座谈会上结对子环节，2 个北航的大一新生加了我。希望后续能定期交流。</li>
<li>践行最小惊讶原则，你好我好大家好。</li>
<li>及时给予正反馈&#x2F;负反馈(大部分人应该不怎么说负反馈)</li>
</ul>
<h2 id="六、推荐"><a href="#六、推荐" class="headerlink" title="六、推荐"></a>六、推荐</h2><p>能够坚持看下来的，目前就剩下科技爱好者周刊</p>
<ol>
<li><a href="https://www.ruanyifeng.com/blog/weekly/">科技爱好者周刊</a></li>
</ol>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>总结</tag>
      </tags>
  </entry>
  <entry>
    <title>MarkdownPad2注册码 20170213</title>
    <url>/20170213-MarkdownPad2%E6%B3%A8%E5%86%8C%E7%A0%81-20170213/</url>
    <content><![CDATA[<p>MarkdownPad2注册码</p>
<p>亲测有效：2017年2月13日 18:07:25</p>
<hr>
<p>邮箱：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Soar360@live.com</span><br></pre></td></tr></table></figure>
<p>授权密钥：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5CCx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ==</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>soft</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven目录下*.lastupdated命令行批量删除</title>
    <url>/20170220-Maven%E7%9B%AE%E5%BD%95%E4%B8%8B-lastupdated%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4/</url>
    <content><![CDATA[<p>windows系统</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd %userprofile%\.m2\repository</span><br><span class="line">for /r %i in (*.lastUpdated) do del %i</span><br></pre></td></tr></table></figure>
<p>或者新建一个bat文件，批处理。就不用每次都在cmd敲命令了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@echo off</span><br><span class="line">echo 确认删除maven仓库下*.lastUpdated文件？</span><br><span class="line">pause</span><br><span class="line">::create by hisenyuan(hisenyuan@gmail.com)</span><br><span class="line"></span><br><span class="line">::这里写你的仓库路径</span><br><span class="line">set REPOSITORY_PATH=C:\hisenwork\soft\maven</span><br><span class="line">echo 正在搜索...</span><br><span class="line">for /f &quot;delims=&quot; %%i in (&#x27;dir /b /s &quot;%REPOSITORY_PATH%\*lastUpdated*&quot;&#x27;) do (</span><br><span class="line">    del /s /q %%i</span><br><span class="line">)</span><br><span class="line">echo 完毕</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<p>linux系统</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find /app/maven/localRepository -name &quot;*.lastUpdated&quot; -exec grep -q &quot;Could not transfer&quot; &#123;&#125; \; -print -exec rm &#123;&#125; \;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven镜像库设置 - maven mirrors - maven 镜像 阿里</title>
    <url>/20170412-Maven%E9%95%9C%E5%83%8F%E5%BA%93%E8%AE%BE%E7%BD%AE%20-%20maven%20mirrors%20-%20maven%20%E9%95%9C%E5%83%8F%20%E9%98%BF%E9%87%8C/</url>
    <content><![CDATA[<p>配置文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yourPath\maven-3.3.9\conf\settings.xml</span><br></pre></td></tr></table></figure>
<p>找到里面的，添加镜像即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;mirrors&gt;</span><br><span class="line">&lt;/mirrors&gt;</span><br></pre></td></tr></table></figure>
<p><mirrorOf></mirrorOf></p>
<p>这里写的是被镜像的ID</p>
<p>如果写成：* (星号)</p>
<p>所有的请求都会到这个镜像上，包括各种本地库</p>
<p>注意：千万不要配成**<mirrorOf><em></mirrorOf></em>*</p>
<p>否则内网的仓库或者你配的镜像里面没有一下jar包的时候不会去别的地方搜索</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--阿里云：速度挺快--&gt;</span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">	&lt;id&gt;nexus-aliyun&lt;/id&gt;</span><br><span class="line">	&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">	&lt;name&gt;Nexus aliyun&lt;/name&gt;</span><br><span class="line">	&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--谷歌：北京速度不错--&gt;</span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">  &lt;id&gt;google-maven-central&lt;/id&gt;</span><br><span class="line">  &lt;name&gt;Google Maven Central&lt;/name&gt;</span><br><span class="line">  &lt;url&gt;https://maven-central.storage.googleapis.com&lt;/url&gt;</span><br><span class="line">  &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDB - 简单操作 - CRUD - JAVA</title>
    <url>/20170711-MongoDB%20-%20%E7%AE%80%E5%8D%95%E6%93%8D%E4%BD%9C%20-%20CRUD%20-%20JAVA/</url>
    <content><![CDATA[<p>之前我记得写过简单的测试类，但是忘了，现在重新写一个</p>
<p>顺便用博客记录下，mongodb系列应该会有几篇记录</p>
<p>本篇具体代码：<a href="https://github.com/hisen-yuan/IDEAPractice/blob/master/src/main/Java/com/hisen/databases/mongodb/SampleMongoTestNo1.Java" target="_blank">SampleMongoTestNo1.Java</a></p>
<p>1、环境介绍</p>
<p>mongodb安装教程：<a href="/20170219-Ubuntu16-04使用阿里云镜像安装Mongodb-配置/" target="_blank">点击查看</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DataBase：MongoDB V 3.2</span><br><span class="line">Driver　：3.4.1</span><br><span class="line">maven：</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.mongodb&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;mongo-Java-driver&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;3.4.1&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>２、初始化连接</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">private Mongo mg = null;</span><br><span class="line">private DB db;</span><br><span class="line">private DBCollection dbCollection;</span><br><span class="line"></span><br><span class="line">@Before</span><br><span class="line">public void initDB()&#123;</span><br><span class="line">  //建立连接</span><br><span class="line">  mg = new MongoClient(&quot;127.0.0.1&quot;,27017);</span><br><span class="line">  //获取要操作的数据库实例，没有会创建</span><br><span class="line">  db = mg.getDB(&quot;hisen&quot;);</span><br><span class="line">  //获取要操作的集合实例，没有会创建</span><br><span class="line">  dbCollection = db.getCollection(&quot;emp&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3、关闭连接</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@After</span><br><span class="line">  public void destoryDB()&#123;</span><br><span class="line">    if (mg == null) &#123;</span><br><span class="line">      mg.close();</span><br><span class="line">      mg=null;</span><br><span class="line">      db=null;</span><br><span class="line">      dbCollection=null;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>4、CRUD操作</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line">   * 插入数据</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testCreate()&#123;</span><br><span class="line">    DBObject obj = null;</span><br><span class="line">    for (int i = 1; i &lt;= 10; i++) &#123;</span><br><span class="line">      obj = new BasicDBObject(&quot;_id&quot;,i).append(&quot;name&quot;,&quot;hisen&quot;+i).append(&quot;age&quot;,i*5);</span><br><span class="line">      dbCollection.save(obj);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 查询所有</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testReadAll()&#123;</span><br><span class="line">    DBCursor dbCursor = dbCollection.find();</span><br><span class="line">    while (dbCursor.hasNext())&#123;</span><br><span class="line">      System.out.println(dbCursor.next());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 修改记录</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testUpdate()&#123;</span><br><span class="line">    BasicDBObject condition = new BasicDBObject(&quot;_id&quot;,10);</span><br><span class="line">    BasicDBObject res = new BasicDBObject(&quot;name&quot;, &quot;hisen10_new&quot;);</span><br><span class="line">    //若没有此语句，直接调用下面的语句，返回结果&#123; &quot;_id&quot; : 10 , &quot;name&quot; : &quot;hisen10_new&quot;&#125;</span><br><span class="line">    BasicDBObject res2 = new BasicDBObject(&quot;$set&quot;, res);</span><br><span class="line">    dbCollection.update(condition,res2);</span><br><span class="line">    System.out.println(dbCollection.findOne(new BasicDBObject(&quot;_id&quot;,10)));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 删除记录</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testDelete()&#123;</span><br><span class="line">    dbCollection.remove(new BasicDBObject(&quot;_id&quot;,10));</span><br><span class="line">    testReadAll();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 根据主键查询</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testReadOneWithId()&#123;</span><br><span class="line">    DBObject object = dbCollection.findOne(new BasicDBObject(&quot;_id&quot;,1));</span><br><span class="line">    System.out.println(object);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 模糊查询 - 使用正则</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testReadPuzzy()&#123;</span><br><span class="line">    Pattern pattern = Pattern.compile(&quot;^hisen1&quot;);</span><br><span class="line">    BasicDBObject basicDBObject = new BasicDBObject(&quot;name&quot;,pattern);</span><br><span class="line">    DBCursor dbCursor = dbCollection.find(basicDBObject);</span><br><span class="line">    while (dbCursor.hasNext())&#123;</span><br><span class="line">      System.out.println(dbCursor.next());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 清空集合</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testDrop()&#123;</span><br><span class="line">    dbCollection.drop();</span><br><span class="line">    testReadAll();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL - Data truncation:Incorrect datetime value</title>
    <url>/20190201-MySQL%20-%20Data%20truncation%20Incorrect%20datetime%20value/</url>
    <content><![CDATA[<h3 id="一、问题"><a href="#一、问题" class="headerlink" title="一、问题"></a>一、问题</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">com.mysql.jdbc.MysqlDataTruncation: Data truncation: Incorrect datetime value: &#x27;2039-01-07 12:58:20.625&#x27; for column</span><br></pre></td></tr></table></figure>
<h3 id="二、原因"><a href="#二、原因" class="headerlink" title="二、原因"></a>二、原因</h3><p>由于程序没有控制好，计算下一次更新时间失误，造成数值过大。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update table_a</span><br><span class="line">SET UPDATE_TIME = &#x27;2039-01-07 12:58:20.625&#x27;</span><br><span class="line">WHERE ID = 6241</span><br></pre></td></tr></table></figure>
<p>以下是MySQL官方的说法，就是时间超过了范围。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">The TIMESTAMP data type is used for values that contain both date and time parts.</span><br><span class="line">TIMESTAMP has a range of &#x27;1970-01-01 00:00:01&#x27; UTC to &#x27;2038-01-19 03:14:07&#x27; UTC.</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL decode - MySQL中类似oracle的decode实现方法</title>
    <url>/20170427-MySQL%20decode%20-%20MySQL%E4%B8%AD%E7%B1%BB%E4%BC%BCoracle%E7%9A%84decode%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>在oracle中直接有decode函数 decode(cola,null,0)</p>
<p>表示如果cola为空，赋值为0</p>
<p>在mysql中的具体实现如下，</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; describe book;</span><br><span class="line">+---------+--------------+------+-----+---------+----------------+</span><br><span class="line">| Field   | Type         | Null | Key | Default | Extra          |</span><br><span class="line">+---------+--------------+------+-----+---------+----------------+</span><br><span class="line">| book_id | bigint(20)   | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name    | varchar(100) | NO   |     | NULL    |                |</span><br><span class="line">| number  | int(11)      | NO   |     | NULL    |                |</span><br><span class="line">+---------+--------------+------+-----+---------+----------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from book;</span><br><span class="line">+---------+-------------------------+--------+</span><br><span class="line">| book_id | name                    | number |</span><br><span class="line">+---------+-------------------------+--------+</span><br><span class="line">|     123 | 123                     |    122 |</span><br><span class="line">|    1000 | Java程序设计             |      5 |</span><br><span class="line">|    1001 | 数据结构                 |      9 |</span><br><span class="line">|    1002 | 设计模式                 |     10 |</span><br><span class="line">|    1003 | 编译原理                 |     10 |</span><br><span class="line">|    1004 | MySQL从删库到跑路         |    100 |</span><br><span class="line">|    1005 | 活着                     |     10 |</span><br><span class="line">|    1232 | 11111                    |    124 |</span><br><span class="line">|    2001 | 测试                     |   2001 |</span><br><span class="line">|   10064 | 老鼠爱大米               |  10088 |</span><br><span class="line">|   10066 | 老鼠爱大米               |   1008 |</span><br><span class="line">|   10088 | 测试宝典                |   1008 |</span><br><span class="line">|   10096 | maven实战               |  10096 |</span><br><span class="line">|   11111 | 111111                  |  11111 |</span><br><span class="line">|   12311 | 都懂得                  |   1222 |</span><br><span class="line">|  123222 | 222                     |   1111 |</span><br><span class="line">+---------+-------------------------+--------+</span><br><span class="line">16 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select if(count(b.book_id)=16,&quot;十六&quot;,&quot;不是十六&quot;) &#x27;结果&#x27; from book b;</span><br><span class="line">+--------+</span><br><span class="line">| 结果   |</span><br><span class="line">+--------+</span><br><span class="line">| 十六   |</span><br><span class="line">+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select case count(b.book_id) when 16 then &#x27;十六&#x27; else &#x27;其他&#x27; end as &#x27;结果&#x27; from book b;</span><br><span class="line">+--------+</span><br><span class="line">| 结果   |</span><br><span class="line">+--------+</span><br><span class="line">| 十六   |</span><br><span class="line">+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL update语句</title>
    <url>/20170801-MySQL%20update%E8%AF%AD%E5%8F%A5/</url>
    <content><![CDATA[<p>刚在一个群里，有人有这么一个需求。</p>
<p>表A：id,name</p>
<p>表B：id,其他,name(新增字段)</p>
<p>A，B表通过id关联，要把A的name给对应的B的name</p>
<p>以前也没有写过这种update语句</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update 表名 set 字段名=字段值 where 条件</span><br><span class="line">如 update A set name=&#x27;xiaoming&#x27; where id=&#x27;&#x27;;</span><br><span class="line">如果是多表查询</span><br><span class="line">update 表1 a inner join 表2 b on  ab表的关联 set a.字段=b.字段</span><br><span class="line">如 update A a inner join B b on a.id=b.id set a.name=b.name</span><br><span class="line">就是在table1表和table2表id相同时 把table2的name值赋给table1的name</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 常用操作 - 命令行</title>
    <url>/20170815-MySQL%20%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%20-%20%E5%91%BD%E4%BB%A4%E8%A1%8C/</url>
    <content><![CDATA[<p>命令行常用操作，备忘</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#开启远程登录</span><br><span class="line">grant all privileges on *.* to &#x27;user&#x27;@&#x27;%&#x27; identified by &#x27;passwd&#x27; with grant option;</span><br><span class="line"></span><br><span class="line">#创建数据库</span><br><span class="line">create database DB;</span><br><span class="line"></span><br><span class="line">#创建用户</span><br><span class="line">insert into mysql.user(Host,User,Password) values(&quot;localhost&quot;,&quot;user&quot;,password(&quot;passwd&quot;));</span><br><span class="line"></span><br><span class="line">#删除用户</span><br><span class="line">DELETE FROM user WHERE user=&quot;username&quot; and HOST=&quot;localhost&quot;;</span><br><span class="line"></span><br><span class="line">#修改指定用户密码</span><br><span class="line">update mysql.user set password=password(&#x27;new passwd&#x27;) where user=&quot;username&quot; and host=&quot;localhost&quot;;</span><br><span class="line"></span><br><span class="line">#用户授权</span><br><span class="line">grant all privileges on DB.* to &#x27;user&#x27;@&#x27;localhost&#x27; identified by &#x27;passwd&#x27;;</span><br><span class="line">grant select,update on DB.* to &#x27;user&#x27;@&#x27;localhost&#x27; identified by &#x27;passwd&#x27;;</span><br><span class="line"></span><br><span class="line">#刷新权限</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">#数据库导出</span><br><span class="line">mysqldump -uUSRENAME -pPASSWD DATABASE &gt; DATABASE.sql</span><br><span class="line"></span><br><span class="line">#数据库导出(只导出表结构 -d)</span><br><span class="line">mysqldump -uUSRENAME -pPASSWD -d DATABASE &gt; DATABASE.sql</span><br><span class="line"></span><br><span class="line">#数据库导入</span><br><span class="line"></span><br><span class="line">#1.切换数据库</span><br><span class="line">use DATABASE;</span><br><span class="line">#2.设置编码</span><br><span class="line">set names utf8;</span><br><span class="line">#3.执行导入操作</span><br><span class="line">source /home/abc/abc.sql;</span><br><span class="line"></span><br><span class="line">#直接导入</span><br><span class="line">mysql -uUSERNAME -p DATABASE &lt; DATABASE.sql</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL一个group by查询出最大值和非group by所在字段的值</title>
    <url>/20170418-MySQL%E4%B8%80%E4%B8%AAgroup%20by%E6%9F%A5%E8%AF%A2%E5%87%BA%E6%9C%80%E5%A4%A7%E5%80%BC%E5%92%8C%E9%9D%9Egroup%20by%E6%89%80%E5%9C%A8%E5%AD%97%E6%AE%B5%E7%9A%84%E5%80%BC/</url>
    <content><![CDATA[<p>表结构，数据内容如下。</p>
<p>需求是：查找出每个年级，年纪最大的人的名字。</p>
<p>个人的思维只停留在</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select name, max(age),grade from  stu group by grade;</span><br><span class="line">ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#x27;hisen.stu.name&#x27; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT A.* FROM stu A INNER JOIN (SELECT MAX(AGE) AS MAX_AGE,GRADE FROM stu GROUP BY GRADE ) B ON A.GRADE = B.GRADE AND A.AGE= B.MAX_AGE;</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">| id | name | age  | grade |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">|  3 | c    |   13 |     1 |</span><br><span class="line">|  6 | f    |   13 |     2 |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>折腾了一会自己不知道怎么解决，后来倒是解决了。</p>
<p>具体过程如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; describe stu;</span><br><span class="line">+-------+---------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type    | Null | Key | Default | Extra          |</span><br><span class="line">+-------+---------+------+-----+---------+----------------+</span><br><span class="line">| id    | int(11) | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | char(1) | YES  |     | NULL    |                |</span><br><span class="line">| age   | int(11) | YES  |     | NULL    |                |</span><br><span class="line">| grade | int(11) | YES  |     | NULL    |                |</span><br><span class="line">+-------+---------+------+-----+---------+----------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">| id | name | age  | grade |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">|  1 | a    |   11 |     1 |</span><br><span class="line">|  2 | b    |   12 |     1 |</span><br><span class="line">|  3 | c    |   13 |     1 |</span><br><span class="line">|  4 | d    |   11 |     2 |</span><br><span class="line">|  5 | e    |   12 |     2 |</span><br><span class="line">|  6 | f    |   13 |     2 |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select max(name), max(age),grade from  stu group by grade;</span><br><span class="line">+-----------+----------+-------+</span><br><span class="line">| max(name) | max(age) | grade |</span><br><span class="line">+-----------+----------+-------+</span><br><span class="line">| c         |       13 |     1 |</span><br><span class="line">| f         |       13 |     2 |</span><br><span class="line">+-----------+----------+-------+</span><br><span class="line">2 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL一些简单的语句</title>
    <url>/20170120-MySQL%E4%B8%80%E4%BA%9B%E7%AE%80%E5%8D%95%E7%9A%84%E8%AF%AD%E5%8F%A5/</url>
    <content><![CDATA[<p>emlog_ad字段<br>id<br>status<br>position<br>title<br>weight<br>content</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--找出重复</span><br><span class="line">SELECT a.*</span><br><span class="line">FROM emlog_ad a</span><br><span class="line">WHERE a.id IN</span><br><span class="line">    (SELECT b.id id</span><br><span class="line">     FROM emlog_ad b</span><br><span class="line">     GROUP BY b.title</span><br><span class="line">     HAVING count(b.id)&gt;1);</span><br><span class="line"></span><br><span class="line">--删除重复留下id最小的</span><br><span class="line">SELECT a.*</span><br><span class="line">FROM emlog_ad a</span><br><span class="line">WHERE a.id IN</span><br><span class="line">    (SELECT b.id</span><br><span class="line">     FROM emlog_ad b</span><br><span class="line">     GROUP BY b.title</span><br><span class="line">     HAVING count(b.id)&gt;1)</span><br><span class="line">  AND a.id NOT IN</span><br><span class="line">    (SELECT min(c.id)</span><br><span class="line">     FROM emlog_ad c</span><br><span class="line">     GROUP BY c.title</span><br><span class="line">     HAVING count(c.id)&gt;1);</span><br><span class="line"></span><br><span class="line">--一句sql把所有AA改为BB，CC改为DD</span><br><span class="line">UPDATE emlog_ad a</span><br><span class="line">SET a.`status`=(</span><br><span class="line">CASE</span><br><span class="line">	WHEN a.`status` = &#x27;1&#x27; THEN &#x27;11&#x27;</span><br><span class="line">	WHEN a.`status`=&#x27;2&#x27; THEN &#x27;22&#x27;</span><br><span class="line">	END</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL下A库的a表导入到B库的b表</title>
    <url>/20170516-MySQL%E4%B8%8BA%E5%BA%93%E7%9A%84a%E8%A1%A8%E5%AF%BC%E5%85%A5%E5%88%B0B%E5%BA%93%E7%9A%84b%E8%A1%A8/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th align="left">数据库名称</th>
<th align="left">表名</th>
</tr>
</thead>
<tbody><tr>
<td align="left">employees</td>
<td align="left">employees</td>
</tr>
<tr>
<td align="left">hisen</td>
<td align="left">employee</td>
</tr>
</tbody></table>
<p>现在想把第一行的数据导入到第二行，具体如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; describe employees;</span><br><span class="line">+------------+---------------+------+-----+---------+-------+</span><br><span class="line">| Field      | Type          | Null | Key | Default | Extra |</span><br><span class="line">+------------+---------------+------+-----+---------+-------+</span><br><span class="line">| emp_no     | int(11)       | NO   | PRI | NULL    |       |</span><br><span class="line">| birth_date | date          | NO   |     | NULL    |       |</span><br><span class="line">| first_name | varchar(14)   | NO   |     | NULL    |       |</span><br><span class="line">| last_name  | varchar(16)   | NO   |     | NULL    |       |</span><br><span class="line">| gender     | enum(&#x27;M&#x27;,&#x27;F&#x27;) | NO   |     | NULL    |       |</span><br><span class="line">| hire_date  | date          | NO   |     | NULL    |       |</span><br><span class="line">+------------+---------------+------+-----+---------+-------+</span><br><span class="line">6 rows in set</span><br><span class="line"></span><br><span class="line">mysql&gt; select count(*) from employees;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|   300024 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set</span><br></pre></td></tr></table></figure>
<p>employees数据库中的employees表有30万数据</p>
<p>我想把这个数据导出到另外一个数据库hisen中的employee表中</p>
<p>具体操作如下</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create table hisen.employee as(</span><br><span class="line">    -&gt; select * from employees.employees</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 300024 rows affected</span><br><span class="line">Records: 300024  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; use hisen;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; select count(*) from employee;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|   300024 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set</span><br></pre></td></tr></table></figure>
<p>这种操作是针对所有字段都导出的情形，创建表跟插入数据合二为一</p>
<p>如果导出部分字段或者有其他限制条件写sql即可</p>
<p>这应该是最简单的方法~</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL使用like查找汉字乱码</title>
    <url>/20170208-MySQL%E4%BD%BF%E7%94%A8like%E6%9F%A5%E6%89%BE%E6%B1%89%E5%AD%97%E4%B9%B1%E7%A0%81/</url>
    <content><![CDATA[<h2 id="第一种解决办法：BINARY"><a href="#第一种解决办法：BINARY" class="headerlink" title="第一种解决办法：BINARY"></a>第一种解决办法：BINARY</h2><p>在关键字之前加上：BINARY，会使关键字强制转换为二进制字符串</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select id form t where chinese like **BINARY** %汉字%</span><br></pre></td></tr></table></figure>
<h2 id="第二种解决办法：改关键字类型"><a href="#第二种解决办法：改关键字类型" class="headerlink" title="第二种解决办法：改关键字类型"></a>第二种解决办法：改关键字类型</h2><p>把关键字的类型改成：BINARY</p>
<h2 id="这两种办法都可以解决乱码问题"><a href="#这两种办法都可以解决乱码问题" class="headerlink" title="这两种办法都可以解决乱码问题"></a>这两种办法都可以解决乱码问题</h2>]]></content>
      <tags>
        <tag>mysql</tag>
        <tag>like</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL批量删除重复数据,保留id最小的一条</title>
    <url>/20181016-MySQL%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D%E6%95%B0%E6%8D%AE,%E4%BF%9D%E7%95%99id%E6%9C%80%E5%B0%8F%E7%9A%84%E4%B8%80%E6%9D%A1/</url>
    <content><![CDATA[<p>stu数据如下：</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>hisen</td>
</tr>
<tr>
<td>2</td>
<td>hisen</td>
</tr>
<tr>
<td>3</td>
<td>hisen</td>
</tr>
<tr>
<td>4</td>
<td>hisenyuan</td>
</tr>
<tr>
<td>5</td>
<td>hisenyuan</td>
</tr>
</tbody></table>
<p>删除重复的name，保留id最小的。</p>
<p>思路就是先找出重复数据，然后再找出需要保留的数据(重复中id最小的)</p>
<p>然后删除id不在需要保留的id中的所有数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span></span><br><span class="line"><span class="keyword">from</span> stu</span><br><span class="line"><span class="keyword">where</span> id <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> t.minId</span><br><span class="line">                 <span class="keyword">from</span> (<span class="keyword">select</span> <span class="built_in">min</span>(id) minId <span class="keyword">from</span> stu <span class="keyword">group</span> <span class="keyword">by</span> name <span class="keyword">having</span> <span class="built_in">count</span>(name) <span class="operator">&gt;</span> <span class="number">1</span>) t)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql批量删除重复数据</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 数据库安装官方自带employees测试库</title>
    <url>/20170401-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E5%AE%98%E6%96%B9%E8%87%AA%E5%B8%A6employees%E6%B5%8B%E8%AF%95%E8%A1%A8/</url>
    <content><![CDATA[<p>MySQL 官方是有一个自带的数据库，名为：Employees Sample Database</p>
<p>官网介绍：<a href="https://dev.mysql.com/doc/employee/en/">Employees Sample Database</a></p>
<table>
<thead>
<tr>
<th align="left">表名</th>
<th align="left">中文</th>
</tr>
</thead>
<tbody><tr>
<td align="left">department</td>
<td align="left">部门表</td>
</tr>
<tr>
<td align="left">dept_emp</td>
<td align="left">部门员工任职期表(按部门&amp;时期)</td>
</tr>
<tr>
<td align="left">dept_manager</td>
<td align="left">部门经理任职期表(按时期)</td>
</tr>
<tr>
<td align="left">employees</td>
<td align="left">员工详情表</td>
</tr>
<tr>
<td align="left">salaries</td>
<td align="left">员工薪资表(按时期)</td>
</tr>
<tr>
<td align="left">title</td>
<td align="left">员工职称表(按时期)</td>
</tr>
</tbody></table>
<img src="http://wx2.sinaimg.cn/mw690/b2e389b6ly1fe7b71pwupj20m80muabj.jpg" />
导入的操作过程，在ubuntu上进行操作
<span id="more"></span>

<p>一、导入数据库操作过程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ubuntu apt-get 安装的mysql默认的配置文件</span><br><span class="line">#添加一行：default-storage-engine=InnoDB</span><br><span class="line">hisen@ubuntu:/$ sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class="line">#获取root权限</span><br><span class="line">hisen@ubuntu:/var/lib$ su</span><br><span class="line">Password:</span><br><span class="line">#进数据库目录</span><br><span class="line">root@ubuntu:# cd /var/lib/mysql</span><br><span class="line">#删除两个文件</span><br><span class="line">root@ubuntu:/var/lib/mysql# rm ib_logfile0</span><br><span class="line">root@ubuntu:/var/lib/mysql# rm ib_logfile1</span><br><span class="line">#重启数据库</span><br><span class="line">root@ubuntu:/# service mysql restart</span><br><span class="line">#下载Employees database</span><br><span class="line">hisen@ubuntu:~/dl$ wget https://codeload.github.com/datacharmer/test_db/zip/master</span><br><span class="line">#解压</span><br><span class="line">hisen@ubuntu:~/dl$ unzip master</span><br><span class="line">#查看</span><br><span class="line">hisen@ubuntu:~/dl$ ll</span><br><span class="line">total 35840</span><br><span class="line">drwxrwxr-x  3 hisen hisen     4096 Apr  1 16:50 ./</span><br><span class="line">drwxr-xr-x 10 hisen hisen     4096 Apr  1 16:40 ../</span><br><span class="line">-rw-rw-r--  1 hisen hisen 36687570 Apr  1 16:30 master</span><br><span class="line">drwxrwxr-x  4 hisen hisen     4096 Oct 14  2015 test_db-master/</span><br><span class="line">#进目录</span><br><span class="line">hisen@ubuntu:~/dl$ cd test_db-master/</span><br><span class="line">#导入数据库</span><br><span class="line">hisen@ubuntu:~/dl/test_db-master$ mysql -u root -p &lt; employees.sql</span><br><span class="line">Enter password:</span><br><span class="line">INFO</span><br><span class="line">CREATING DATABASE STRUCTURE</span><br><span class="line">INFO</span><br><span class="line">storage engine: InnoDB</span><br><span class="line">INFO</span><br><span class="line">LOADING departments</span><br><span class="line">INFO</span><br><span class="line">LOADING employees</span><br><span class="line">INFO</span><br><span class="line">LOADING dept_emp</span><br><span class="line">INFO</span><br><span class="line">LOADING dept_manager</span><br><span class="line">INFO</span><br><span class="line">LOADING titles</span><br><span class="line">INFO</span><br><span class="line">LOADING salaries</span><br><span class="line">data_load_time_diff</span><br><span class="line">00:01:11</span><br><span class="line">#导入成功</span><br><span class="line">#验证是否导入成功</span><br><span class="line">hisen@ubuntu:~/dl/test_db-master$ mysql -u root -p &lt; test_employees_md5.sql</span><br><span class="line">Enter password:</span><br><span class="line">INFO</span><br><span class="line">TESTING INSTALLATION</span><br><span class="line">table_name	expected_records	expected_crc</span><br><span class="line">employees	300024	4ec56ab5ba37218d187cf6ab09ce1aa1</span><br><span class="line">departments	9	d1af5e170d2d1591d776d5638d71fc5f</span><br><span class="line">dept_manager	24	8720e2f0853ac9096b689c14664f847e</span><br><span class="line">dept_emp	331603	ccf6fe516f990bdaa49713fc478701b7</span><br><span class="line">titles	443308	bfa016c472df68e70a03facafa1bc0a8</span><br><span class="line">salaries	2844047	fd220654e95aea1b169624ffe3fca934</span><br><span class="line">table_name	found_records   	found_crc</span><br><span class="line">employees	300024	4ec56ab5ba37218d187cf6ab09ce1aa1</span><br><span class="line">departments	9	d1af5e170d2d1591d776d5638d71fc5f</span><br><span class="line">dept_manager	24	8720e2f0853ac9096b689c14664f847e</span><br><span class="line">dept_emp	331603	ccf6fe516f990bdaa49713fc478701b7</span><br><span class="line">titles	443308	bfa016c472df68e70a03facafa1bc0a8</span><br><span class="line">salaries	2844047	fd220654e95aea1b169624ffe3fca934</span><br><span class="line">table_name	records_match	crc_match</span><br><span class="line">employees	OK	ok</span><br><span class="line">departments	OK	ok</span><br><span class="line">dept_manager	OK	ok</span><br><span class="line">dept_emp	OK	ok</span><br><span class="line">titles	OK	ok</span><br><span class="line">salaries	OK	ok</span><br><span class="line">computation_time</span><br><span class="line">00:00:22</span><br><span class="line">summary	result</span><br><span class="line">CRC	OK</span><br><span class="line">count	OK</span><br></pre></td></tr></table></figure>

<h2 id="二、数据库练习"><a href="#二、数据库练习" class="headerlink" title="二、数据库练习"></a>二、数据库练习</h2><p><strong>练习题</strong>：<a href="http://hisen.me/20170410-Mysql%20Employees%20%20Database%E7%BB%83%E4%B9%A0%E9%A2%98&%E7%AD%94%E6%A1%88/">点击查看练习题</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL索引相关知识和应用</title>
    <url>/20170518-MySQL%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E5%92%8C%E5%BA%94%E7%94%A8/</url>
    <content><![CDATA[<p>hisen库中有一个post表，数据20w，非重复数据20条；</p>
<h2 id="结构如下"><a href="#结构如下" class="headerlink" title="结构如下"></a>结构如下</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; describe post;</span><br><span class="line">+---------+---------------+------+-----+---------+----------------+</span><br><span class="line">| Field   | Type          | Null | Key | Default | Extra          |</span><br><span class="line">+---------+---------------+------+-----+---------+----------------+</span><br><span class="line">| id      | int(11)       | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| title   | varchar(255)  | YES  | MUL | NULL    |                |</span><br><span class="line">| content | varchar(2550) | YES  |     | NULL    |                |</span><br><span class="line">+---------+---------------+------+-----+---------+----------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h2 id="添加普通索引"><a href="#添加普通索引" class="headerlink" title="添加普通索引"></a>添加普通索引</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table post add index index_post_title (title);</span><br><span class="line">Query OK, 0 rows affected (1.22 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>
<h2 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; drop index index_post_title on post;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>
<h2 id="添加索引之后查询速度明显加快"><a href="#添加索引之后查询速度明显加快" class="headerlink" title="添加索引之后查询速度明显加快"></a>添加索引之后查询速度明显加快</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(title) from post group by title;</span><br><span class="line">20 rows in set (0.25 sec)</span><br><span class="line">#加了索引之后</span><br><span class="line">20 rows in set (0.08 sec)</span><br></pre></td></tr></table></figure>
<h2 id="使用索引的情况"><a href="#使用索引的情况" class="headerlink" title="使用索引的情况"></a>使用索引的情况</h2><ol>
<li>表的主关键字:自动建立唯一索引</li>
<li>表的字段唯一约束:ORACLE利用索引来保证数据的完整性</li>
<li>直接条件查询的字段</li>
<li>在SQL中用于条件约束的字段</li>
<li>查询中与其它表关联的字段</li>
<li>查询中排序的字段</li>
<li>查询中统计或分组统计的字段</li>
</ol>
<h2 id="不使用索引的情况"><a href="#不使用索引的情况" class="headerlink" title="不使用索引的情况"></a>不使用索引的情况</h2><ol>
<li>表记录太少</li>
<li>经常插入、删除、修改的表</li>
<li>数据重复且分布平均的表字段：假如10万数据只有A、B状态，且A、B各50%，这样建立索引就不会提速</li>
<li>经常和主字段一块查询但主字段索引值比较多的表字段</li>
</ol>
<h2 id="MySql在建立索引优化时需要注意的问题"><a href="#MySql在建立索引优化时需要注意的问题" class="headerlink" title="MySql在建立索引优化时需要注意的问题"></a>MySql在建立索引优化时需要注意的问题</h2><span id="more"></span>
<ol>
<li>创建索引：对于查询占主要的应用来说，索引显得尤为重要。很多时候性能问题很简单的就是因为我们忘了添加索引而造成的，或者说没有添加更为有效的索引导致。如果不加索引的话，那么查找任何哪怕只是一条特定的数据都会进行一次全表扫描，如果一张表的数据量很大而符合条件的结果又很少，那么不加索引会引起致命的性能下降。但是也不是什么情况都非得建索引不可，比如性别可能就只有两个值，建索引不仅没什么优势，还会影响到更新速度，这被称为过度索引。</li>
<li>复合索引：比如有一条语句是这样的：select * from users where area&#x3D;’beijing’ and age&#x3D;22;如果我们是在area和age上分别创建单个索引的话，由于mysql查询每次只能使用一个索引，所以虽然这样已经相对不做索引时全表扫描提高了很多效率，但是如果在area、age两列上创建复合索引的话将带来更高的效率。如果我们创建了(area, age,salary)的复合索引，那么其实相当于创建了(area,age,salary)、(area,age)、(area)三个索引，这被称为最佳左前缀特性。因此我们在创建复合索引时应该将最常用作限制条件的列放在最左边，依次递减。</li>
<li>索引不会包含有NULL值的列：只要列中包含有NULL值都将不会被包含在索引中，复合索引中只要有一列含有NULL值，那么这一列对于此复合索引就是无效的。所以我们在数据库设计时不要让字段的默认值为NULL。</li>
<li>使用短索引：对串列进行索引，如果可能应该指定一个前缀长度。例如，如果有一个CHAR(255)的 列，如果在前10 个或20 个字符内，多数值是惟一的，那么就不要对整个列进行索引。短索引不仅可以提高查询速度而且可以节省磁盘空间和I&#x2F;O操作。</li>
<li>排序的索引问题：mysql查询只使用一个索引，因此如果where子句中已经使用了索引的话，那么order by中的列是不会使用索引的。因此数据库默认排序可以符合要求的情况下不要使用排序操作；尽量不要包含多个列的排序，如果需要最好给这些列创建复合索引。</li>
<li>like语句操作：一般情况下不鼓励使用like操作，如果非使用不可，如何使用也是一个问题。like “%aaa%” 不会使用索引而like “aaa%”可以使用索引。</li>
<li>不要在列上进行运算：select * from users where YEAR(adddate);</li>
<li>不使用NOT IN和操作：NOT IN和操作都不会使用索引将进行全表扫描。NOT IN可以NOT EXISTS代替，id3则可使用id&gt;3 or id</li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>索引</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL统计成功率等 - 利用case when</title>
    <url>/20190218-MySQL%E7%BB%9F%E8%AE%A1%E6%88%90%E5%8A%9F%E7%8E%87%E7%AD%89%20-%20%E5%88%A9%E7%94%A8case%20when/</url>
    <content><![CDATA[<p>CONCAT:连接字符串,CONCAT(55.00,’%’)-&gt;55.00%<br>truncate:处理小数点位数,truncate(10.1111,2)-&gt;10.11</p>
<h3 id="统计sql"><a href="#统计sql" class="headerlink" title="统计sql"></a>统计sql</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> res.<span class="operator">*</span>, CONCAT(<span class="keyword">truncate</span>((res.succ <span class="operator">/</span> res.`<span class="keyword">all</span>`) <span class="operator">*</span> <span class="number">100</span>, <span class="number">2</span>), <span class="string">&#x27;%&#x27;</span>) <span class="keyword">as</span> <span class="string">&#x27;success rate&#x27;</span></span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> tpc.USER_NO,</span><br><span class="line">             tpc.TYPE,</span><br><span class="line">             <span class="built_in">count</span>(<span class="operator">*</span>)                                                            <span class="keyword">as</span> <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">             <span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> tpc.STATUS <span class="operator">=</span> <span class="number">0</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>)                     <span class="keyword">as</span> <span class="string">&#x27;succ&#x27;</span>,</span><br><span class="line">             <span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> tpc.STATUS <span class="operator">=</span> <span class="number">1</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>)                     <span class="keyword">as</span> <span class="string">&#x27;fail&#x27;</span>,</span><br><span class="line">             <span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> tpc.STATUS <span class="operator">!=</span> <span class="number">1</span> <span class="operator">&amp;&amp;</span> tpc.STATUS <span class="operator">!=</span> <span class="number">0</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> <span class="string">&#x27;other&#x27;</span></span><br><span class="line">      <span class="keyword">from</span> t_hisen tpc</span><br><span class="line">      <span class="keyword">where</span> tpc.DATE <span class="keyword">between</span> <span class="string">&#x27;20190216&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;20190217&#x27;</span></span><br><span class="line">      <span class="keyword">group</span> <span class="keyword">by</span> tpc.USER_NO, tpc.TYPE</span><br><span class="line">      <span class="keyword">order</span> <span class="keyword">by</span> tpc.USER_NO) res</span><br></pre></td></tr></table></figure>
<h3 id="统计结果"><a href="#统计结果" class="headerlink" title="统计结果"></a>统计结果</h3><table>
<thead>
<tr>
<th align="left">USER_NO</th>
<th align="left">TYPE</th>
<th align="left">all</th>
<th align="left">succ</th>
<th align="left">fail</th>
<th align="left">other</th>
<th align="left">success rate</th>
</tr>
</thead>
<tbody><tr>
<td align="left">456</td>
<td align="left">10</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">0.00%</td>
</tr>
<tr>
<td align="left">123</td>
<td align="left">10</td>
<td align="left">29</td>
<td align="left">23</td>
<td align="left">0</td>
<td align="left">6</td>
<td align="left">79.31%</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySql的执行计划</title>
    <url>/20171123-MySql%E7%9A%84%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/</url>
    <content><![CDATA[<p>###命令介绍<br>MySQL的EXPLAIN命令用于SQL语句的查询执行计划(QEP)。</p>
<p>这条命令的输出结果能够让我们了解MySQL 优化器是如何执行</p>
<p>执行下面的SQL</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">explain select * FROM book where name like &#x27;活%&#x27;</span><br></pre></td></tr></table></figure>
<p>得到下面的数据</p>
<table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">select_type</th>
<th align="left">table</th>
<th align="left">partitions</th>
<th align="left">type</th>
<th align="left">possible_keys</th>
<th align="left">key</th>
<th align="left">key_len</th>
<th align="left">ref</th>
<th align="left">rows</th>
<th align="left">filered</th>
<th align="left">Extra</th>
</tr>
</thead>
<tbody><tr>
<td align="left">编号</td>
<td align="left">查询方式</td>
<td align="left">表名</td>
<td align="left">分区</td>
<td align="left">连接方式</td>
<td align="left">索引(可能)</td>
<td align="left">索引</td>
<td align="left">索引长度</td>
<td align="left">作用列</td>
<td align="left">行数</td>
<td align="left">百分比</td>
<td align="left">额外</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">SIMPLE</td>
<td align="left">book</td>
<td align="left">null</td>
<td align="left">ALL</td>
<td align="left">null</td>
<td align="left">null</td>
<td align="left">null</td>
<td align="left">null</td>
<td align="left">114</td>
<td align="left">11.11</td>
<td align="left">Using where</td>
</tr>
</tbody></table>
<p>###建表语句</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#创建个人信息表</span><br><span class="line">CREATE TABLE hisen_test_explain_people</span><br><span class="line">(</span><br><span class="line">  id bigint auto_increment primary key,</span><br><span class="line">  zipcode char(32) not null default &#x27;&#x27;,</span><br><span class="line">  address varchar(128) not null default &#x27;&#x27;,</span><br><span class="line">  lastname char(64) not null default &#x27;&#x27;,</span><br><span class="line">  firstname char(64) not null default &#x27;&#x27;,</span><br><span class="line">  birthdate char(10) not null default &#x27;&#x27;</span><br><span class="line">);</span><br><span class="line">#创建索引</span><br><span class="line">alter table hisen_test_explain_people add key(zipcode,firstname,lastname);</span><br><span class="line"></span><br><span class="line">#插入个人信息数据</span><br><span class="line">insert into hisen_test_explain_people</span><br><span class="line">(zipcode,address,lastname,firstname,birthdate)</span><br><span class="line">values</span><br><span class="line">  (&#x27;230031&#x27;,&#x27;anhui&#x27;,&#x27;zhan&#x27;,&#x27;jindong&#x27;,&#x27;1989-09-15&#x27;),</span><br><span class="line">  (&#x27;100000&#x27;,&#x27;beijing&#x27;,&#x27;zhang&#x27;,&#x27;san&#x27;,&#x27;1987-03-11&#x27;),</span><br><span class="line">  (&#x27;200000&#x27;,&#x27;shanghai&#x27;,&#x27;wang&#x27;,&#x27;wu&#x27;,&#x27;1988-08-25&#x27;);</span><br><span class="line">#创建汽车信息表</span><br><span class="line">CREATE TABLE hisen_test_explain_people_car(</span><br><span class="line">  people_id bigint,</span><br><span class="line">  plate_number varchar(16) not null default &#x27;&#x27;,</span><br><span class="line">  engine_number varchar(16) not null default &#x27;&#x27;,</span><br><span class="line">  lasttime timestamp</span><br><span class="line">);</span><br><span class="line">#插入汽车信息</span><br><span class="line">insert into hisen_test_explain_people_car</span><br><span class="line">(people_id,plate_number,engine_number,lasttime)</span><br><span class="line">values</span><br><span class="line">  (1,&#x27;A121311&#x27;,&#x27;12121313&#x27;,&#x27;2017-11-23 :21:12:21&#x27;),</span><br><span class="line">  (2,&#x27;B121311&#x27;,&#x27;1S121313&#x27;,&#x27;2016-11-23 :21:12:21&#x27;),</span><br><span class="line">  (3,&#x27;C121311&#x27;,&#x27;1211SAS1&#x27;,&#x27;2015-11-23 :21:12:21&#x27;);</span><br></pre></td></tr></table></figure>
<p>###执行计划样例</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">explain select zipcode,firstname,lastname from hisen_test_explain_people;</span><br><span class="line">+----+-------------+---------------------------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span><br><span class="line">| id | select_type | table                     | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra       |</span><br><span class="line">+----+-------------+---------------------------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span><br><span class="line">|  1 | SIMPLE      | hisen_test_explain_people | NULL       | index | NULL          | zipcode | 160     | NULL |    3 |   100.00 | Using index |</span><br><span class="line">+----+-------------+---------------------------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span><br><span class="line"></span><br><span class="line">explain select zipcode from (select * from hisen_test_explain_people a) b;</span><br><span class="line">+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span><br><span class="line">| id | select_type | table | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra       |</span><br><span class="line">+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span><br><span class="line">|  1 | SIMPLE      | a     | NULL       | index | NULL          | zipcode | 160     | NULL |    3 |   100.00 | Using index |</span><br><span class="line">+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">id是用来顺序标识整个查询中SELELCT 语句的，通过上面这个简单的嵌套查询可以看到id越大的语句越先执行。</span><br><span class="line">该值可能为NULL，如果这一行用来说明的是其他行的联合结果，比如UNION语句：</span><br><span class="line"></span><br><span class="line">explain select * from hisen_test_explain_people where zipcode = 100000 union select * from hisen_test_explain_people where zipcode = 200000;</span><br><span class="line">+----+--------------+---------------------------+------------+------+---------------+------+---------+------+------+----------+-----------------+</span><br><span class="line">| id | select_type  | table                     | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra           |</span><br><span class="line">+----+--------------+---------------------------+------------+------+---------------+------+---------+------+------+----------+-----------------+</span><br><span class="line">|  1 | PRIMARY      | hisen_test_explain_people | NULL       | ALL  | zipcode       | NULL | NULL    | NULL |    3 |    33.33 | Using where     |</span><br><span class="line">|  2 | UNION        | hisen_test_explain_people | NULL       | ALL  | zipcode       | NULL | NULL    | NULL |    3 |    33.33 | Using where     |</span><br><span class="line">|NULL| UNION RESULT | &lt;union1,2&gt;                | NULL       | ALL  | NULL          | NULL | NULL    | NULL | NULL |     NULL | Using temporary |</span><br><span class="line">+----+--------------+---------------------------+------------+------+---------------+------+---------+------+------+----------+-----------------+</span><br></pre></td></tr></table></figure>
<p>###参考</p>
<ol>
<li><a href="http://blog.csdn.net/u012990533/article/details/45643509" target="_blank">参数解释</a></li>
<li><a href="http://blog.csdn.net/u012721013/article/details/54965844" target="_blank">实战演练</a></li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>sql</tag>
        <tag>explain</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatis-Generator自动生成dao、model、mapper</title>
    <url>/20170802-Mybatis-Generator%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90dao%E3%80%81model%E3%80%81mapper/</url>
    <content><![CDATA[<h2 id="一、配置插件"><a href="#一、配置插件" class="headerlink" title="一、配置插件"></a>一、配置插件</h2><p>在resources文件夹下新建：generatorConfig.xml</p>
<p>内容如下：注意修改包名等信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE generatorConfiguration</span><br><span class="line">  PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span><br><span class="line">  &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">详细说明请看：http://blog.csdn.net/tiantangpw/article/details/51690534</span><br><span class="line">--&gt;</span><br><span class="line">&lt;generatorConfiguration&gt;</span><br><span class="line"></span><br><span class="line">  &lt;context id=&quot;mysqlgenerator&quot; targetRuntime=&quot;MyBatis3&quot;&gt;</span><br><span class="line">    &lt;!--数据库配置--&gt;</span><br><span class="line">    &lt;jdbcConnection connectionURL=&quot;jdbc:mysql://127.0.0.1:3306/booksystem&quot;</span><br><span class="line">      driverClass=&quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">      password=&quot;hisen&quot;</span><br><span class="line">      userId=&quot;root&quot;/&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;!--生成Model(实体类，与数据库字段对应的bean)类存放位置--&gt;</span><br><span class="line">    &lt;JavaModelGenerator targetPackage=&quot;com.hisen.entity&quot; targetProject=&quot;src/main/Java&quot;&gt;</span><br><span class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">      &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;/JavaModelGenerator&gt;</span><br><span class="line">    &lt;!--生成映射(xxxmapper.xml)文件存放位置--&gt;</span><br><span class="line">    &lt;sqlMapGenerator targetPackage=&quot;mapper&quot; targetProject=&quot;src/main/resources&quot;&gt;</span><br><span class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;/sqlMapGenerator&gt;</span><br><span class="line">    &lt;!--生成Dao类存放位置--&gt;</span><br><span class="line">    &lt;JavaClientGenerator type=&quot;XMLMAPPER&quot; targetPackage=&quot;com.hisen.dao&quot;</span><br><span class="line">      targetProject=&quot;src/main/Java&quot;&gt;</span><br><span class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;/JavaClientGenerator&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!--要生成的表--&gt;</span><br><span class="line">    &lt;table tableName=&quot;appointment&quot;/&gt;</span><br><span class="line">    &lt;table tableName=&quot;user&quot;/&gt;</span><br><span class="line">  &lt;/context&gt;</span><br><span class="line"></span><br><span class="line">&lt;/generatorConfiguration&gt;</span><br></pre></td></tr></table></figure>
<h2 id="二、添加maven插件"><a href="#二、添加maven插件" class="headerlink" title="二、添加maven插件"></a>二、添加maven插件</h2><span id="more"></span>
<p>在pom.xml中添加如下内容：plugins节点内</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">      &lt;plugin&gt;</span><br><span class="line">        &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">          &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-Java&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;5.1.5&lt;/version&gt;</span><br><span class="line">          &lt;/dependency&gt;</span><br><span class="line">        &lt;/dependencies&gt;</span><br><span class="line">        &lt;configuration&gt;</span><br><span class="line">          &lt;overwrite&gt;true&lt;/overwrite&gt;</span><br><span class="line">        &lt;/configuration&gt;</span><br><span class="line">      &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">  &lt;/build&gt;</span><br></pre></td></tr></table></figure>
<h2 id="三、使用"><a href="#三、使用" class="headerlink" title="三、使用"></a>三、使用</h2><p>在idea调出mavenProject界面，选择plugins，找到mybatis-generator，双击即可</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>sql</tag>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql Employees Database练习题&amp;答案</title>
    <url>/20170410-Mysql%20Employees%20%20Database%E7%BB%83%E4%B9%A0%E9%A2%98&amp;%E7%AD%94%E6%A1%88/</url>
    <content><![CDATA[<p>Employees数据库是mysql官方提供的一个测试用数据库</p>
<p>里面含有几十万条数据。</p>
<p>找了好久也没有找到比较匹配的题目</p>
<p>就找了个匹配度比较高的题来练习，如果你还没有导入Employees Sample Database</p>
<p><strong>请参考：<a href="http://hisen.me/20170401-mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E5%AE%98%E6%96%B9%E8%87%AA%E5%B8%A6employees%E6%B5%8B%E8%AF%95%E8%A1%A8/" target="_blank">点击导入Employees</a></strong></p>
<p>本次操作在Xshell中完成，也就是mysql命令行。</p>
<h2 id="简单的操作"><a href="#简单的操作" class="headerlink" title="简单的操作"></a>简单的操作</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#登陆数据库</span><br><span class="line">hisen@ubuntu:/$ mysql -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 8</span><br><span class="line">Server version: 5.7.17-0ubuntu0.16.04.2 (Ubuntu)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| employees          |</span><br><span class="line">| log4j              |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| ssm                |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; use employees</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+----------------------+</span><br><span class="line">| Tables_in_employees  |</span><br><span class="line">+----------------------+</span><br><span class="line">| current_dept_emp     |</span><br><span class="line">| departments          |</span><br><span class="line">| dept_emp             |</span><br><span class="line">| dept_emp_latest_date |</span><br><span class="line">| dept_manager         |</span><br><span class="line">| employees            |</span><br><span class="line">| salaries             |</span><br><span class="line">| titles               |</span><br><span class="line">+----------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from employees limit 10;</span><br><span class="line">+--------+------------+------------+-----------+--------+------------+</span><br><span class="line">| emp_no | birth_date | first_name | last_name | gender | hire_date  |</span><br><span class="line">+--------+------------+------------+-----------+--------+------------+</span><br><span class="line">|  10001 | 1953-09-02 | Georgi     | Facello   | M      | 1986-06-26 |</span><br><span class="line">|  10002 | 1964-06-02 | Bezalel    | Simmel    | F      | 1985-11-21 |</span><br><span class="line">|  10003 | 1959-12-03 | Parto      | Bamford   | M      | 1986-08-28 |</span><br><span class="line">|  10004 | 1954-05-01 | Chirstian  | Koblick   | M      | 1986-12-01 |</span><br><span class="line">|  10005 | 1955-01-21 | Kyoichi    | Maliniak  | M      | 1989-09-12 |</span><br><span class="line">|  10006 | 1953-04-20 | Anneke     | Preusig   | F      | 1989-06-02 |</span><br><span class="line">|  10007 | 1957-05-23 | Tzvetan    | Zielinski | F      | 1989-02-10 |</span><br><span class="line">|  10008 | 1958-02-19 | Saniya     | Kalloufi  | M      | 1994-09-15 |</span><br><span class="line">|  10009 | 1952-04-19 | Sumant     | Peac      | F      | 1985-02-18 |</span><br><span class="line">|  10010 | 1963-06-01 | Duangkaew  | Piveteau  | F      | 1989-08-24 |</span><br><span class="line">+--------+------------+------------+-----------+--------+------------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br><span class="line">#统计各部门曾经拥有的员工数量</span><br><span class="line">mysql&gt; select dept_no,count(*) emp_sum</span><br><span class="line">    -&gt; from dept_emp</span><br><span class="line">    -&gt; group by dept_no</span><br><span class="line">    -&gt; order by emp_sum desc;</span><br><span class="line">+---------+---------+</span><br><span class="line">| dept_no | emp_sum |</span><br><span class="line">+---------+---------+</span><br><span class="line">| d005    |   85707 |</span><br><span class="line">| d004    |   73485 |</span><br><span class="line">| d007    |   52245 |</span><br><span class="line">| d009    |   23580 |</span><br><span class="line">| d008    |   21126 |</span><br><span class="line">| d001    |   20211 |</span><br><span class="line">| d006    |   20117 |</span><br><span class="line">| d003    |   17786 |</span><br><span class="line">| d002    |   17346 |</span><br><span class="line">+---------+---------+</span><br><span class="line">9 rows in set (0.63 sec)</span><br><span class="line">#创建视图</span><br><span class="line">mysql&gt; CREATE VIEW test AS</span><br><span class="line">    -&gt; SELECT dept_no, COUNT(*) AS emp_sum</span><br><span class="line">    -&gt; FROM dept_emp</span><br><span class="line">    -&gt; GROUP BY dept_no</span><br><span class="line">    -&gt; ORDER BY emp_sum DESC</span><br><span class="line">    -&gt; ;</span><br><span class="line">Query OK, 0 rows affected (0.16 sec)</span><br><span class="line">mysql&gt; select * from test;</span><br><span class="line">+---------+---------+</span><br><span class="line">| dept_no | emp_sum |</span><br><span class="line">+---------+---------+</span><br><span class="line">| d005    |   85707 |</span><br><span class="line">| d004    |   73485 |</span><br><span class="line">| d007    |   52245 |</span><br><span class="line">| d009    |   23580 |</span><br><span class="line">| d008    |   21126 |</span><br><span class="line">| d001    |   20211 |</span><br><span class="line">| d006    |   20117 |</span><br><span class="line">| d003    |   17786 |</span><br><span class="line">| d002    |   17346 |</span><br><span class="line">+---------+---------+</span><br><span class="line">9 rows in set (0.11 sec)</span><br><span class="line">#联合查询，加上部门名称</span><br><span class="line">mysql&gt; select test.dept_no,emp_sum,dept_name</span><br><span class="line">    -&gt; from test,departments</span><br><span class="line">    -&gt; where test.dept_no = departments.dept_no;</span><br><span class="line">+---------+---------+--------------------+</span><br><span class="line">| dept_no | emp_sum | dept_name          |</span><br><span class="line">+---------+---------+--------------------+</span><br><span class="line">| d009    |   23580 | Customer Service   |</span><br><span class="line">| d005    |   85707 | Development        |</span><br><span class="line">| d002    |   17346 | Finance            |</span><br><span class="line">| d003    |   17786 | Human Resources    |</span><br><span class="line">| d001    |   20211 | Marketing          |</span><br><span class="line">| d004    |   73485 | Production         |</span><br><span class="line">| d006    |   20117 | Quality Management |</span><br><span class="line">| d008    |   21126 | Research           |</span><br><span class="line">| d007    |   52245 | Sales              |</span><br><span class="line">+---------+---------+--------------------+</span><br><span class="line">9 rows in set (0.16 sec)</span><br></pre></td></tr></table></figure>

<h2 id="练习题目和答案："><a href="#练习题目和答案：" class="headerlink" title="练习题目和答案："></a>练习题目和答案：</h2><p>建议看看输出的结果自己写下sql，不要单纯的复制粘贴。</p>
<p>因为数据量比较大， 很多时候我都加了5条数据的限制。</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1.查找整个职员表的所有内容。</span><br><span class="line">mysql&gt; select * from employees limit 5;</span><br><span class="line">+--------+------------+------------+-----------+--------+------------+</span><br><span class="line">| emp_no | birth_date | first_name | last_name | gender | hire_date  |</span><br><span class="line">+--------+------------+------------+-----------+--------+------------+</span><br><span class="line">|  10001 | 1953-09-02 | Georgi     | Facello   | M      | 1986-06-26 |</span><br><span class="line">|  10002 | 1964-06-02 | Bezalel    | Simmel    | F      | 1985-11-21 |</span><br><span class="line">|  10003 | 1959-12-03 | Parto      | Bamford   | M      | 1986-08-28 |</span><br><span class="line">|  10004 | 1954-05-01 | Chirstian  | Koblick   | M      | 1986-12-01 |</span><br><span class="line">|  10005 | 1955-01-21 | Kyoichi    | Maliniak  | M      | 1989-09-12 |</span><br><span class="line">+--------+------------+------------+-----------+--------+------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#2.查看雇员名字(last_name)。</span><br><span class="line">mysql&gt; select last_name from employees limit 5;</span><br><span class="line">+-----------+</span><br><span class="line">| last_name |</span><br><span class="line">+-----------+</span><br><span class="line">| Facello   |</span><br><span class="line">| Simmel    |</span><br><span class="line">| Bamford   |</span><br><span class="line">| Koblick   |</span><br><span class="line">| Maliniak  |</span><br><span class="line">+-----------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#3.查看雇员编号、名字和部门</span><br><span class="line">mysql&gt; select e.last_name,e.emp_no,d.dept_name from employees e,departments d,dept_emp de where e.emp_no = de.emp_no and de.dept_no = d.dept_no limit 5;</span><br><span class="line">+-------------+--------+------------------+</span><br><span class="line">| last_name   | emp_no | dept_name        |</span><br><span class="line">+-------------+--------+------------------+</span><br><span class="line">| Sluis       |  10011 | Customer Service |</span><br><span class="line">| Lortz       |  10038 | Customer Service |</span><br><span class="line">| Tramer      |  10049 | Customer Service |</span><br><span class="line">| Billingsley |  10060 | Customer Service |</span><br><span class="line">| Syrzycki    |  10088 | Customer Service |</span><br><span class="line">+-------------+--------+------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#4.显示所有雇员的工号、姓名、工资</span><br><span class="line">mysql&gt; select e.emp_no,concat(e.last_name,&#x27; &#x27;,e.first_name) name,s.salary from employees e,salaries s where e.emp_no=s.emp_no limit 5;</span><br><span class="line">+--------+----------------+--------+</span><br><span class="line">| emp_no | name           | salary |</span><br><span class="line">+--------+----------------+--------+</span><br><span class="line">|  10001 | Facello Georgi |  60117 |</span><br><span class="line">|  10001 | Facello Georgi |  62102 |</span><br><span class="line">|  10001 | Facello Georgi |  66074 |</span><br><span class="line">|  10001 | Facello Georgi |  66596 |</span><br><span class="line">|  10001 | Facello Georgi |  66961 |</span><br><span class="line">+--------+----------------+--------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#5.查找在d005号部门工作的雇员</span><br><span class="line">mysql&gt; select e.emp_no,concat(e.last_name,&#x27; &#x27;,e.first_name) name,d.dept_no,d.dept_name from employees e,dept_emp de,departments d where e.emp_no = de.emp_no and de.dept_no = d.dept_no and d.dept_no = &#x27;d005&#x27; limit 5;</span><br><span class="line">+--------+--------------------+---------+-------------+</span><br><span class="line">| emp_no | name               | dept_no | dept_name   |</span><br><span class="line">+--------+--------------------+---------+-------------+</span><br><span class="line">|  10001 | Facello Georgi     | d005    | Development |</span><br><span class="line">|  10006 | Preusig Anneke     | d005    | Development |</span><br><span class="line">|  10008 | Kalloufi Saniya    | d005    | Development |</span><br><span class="line">|  10012 | Bridgland Patricio | d005    | Development |</span><br><span class="line">|  10014 | Genin Berni        | d005    | Development |</span><br><span class="line">+--------+--------------------+---------+-------------+</span><br><span class="line">5 rows in set (0.05 sec)</span><br><span class="line"></span><br><span class="line">#6.要求查找职位为Engineer和Senior Engineer的雇员姓名(last_name)</span><br><span class="line">mysql&gt; select e.last_name from employees e,titles t where t.emp_no=e.emp_no and t.title in(&#x27;Engineer&#x27;,&#x27;Senior Engineer&#x27;) limit  5;</span><br><span class="line">+-----------+</span><br><span class="line">| last_name |</span><br><span class="line">+-----------+</span><br><span class="line">| Facello   |</span><br><span class="line">| Bamford   |</span><br><span class="line">| Koblick   |</span><br><span class="line">| Koblick   |</span><br><span class="line">| Preusig   |</span><br><span class="line">+-----------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#7.查找职位不是Engineer和Senior Engineer的部门编号，雇员部门及姓名。将姓名显示为(first_name+last_name命名为”Name”)</span><br><span class="line">mysql&gt; select d.dept_no,d.dept_name,concat(e.first_name,&#x27; &#x27;,e.last_name) name from employees e,titles t,dept_emp de,departmentss d where e.emp_no=de.emp_no and de.dept_no = d.dept_no and t.emp_no = e.emp_no and t.title not in(&#x27;Engineer&#x27;,&#x27;Senior Engineer&#x27;&#x27;) limit 5;</span><br><span class="line">+---------+------------------+--------------+</span><br><span class="line">| dept_no | dept_name        | name         |</span><br><span class="line">+---------+------------------+--------------+</span><br><span class="line">| d009    | Customer Service | Mary Sluis   |</span><br><span class="line">| d009    | Customer Service | Huan Lortz   |</span><br><span class="line">| d009    | Customer Service | Huan Lortz   |</span><br><span class="line">| d009    | Customer Service | Basil Tramer |</span><br><span class="line">| d009    | Customer Service | Basil Tramer |</span><br><span class="line">+---------+------------------+--------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#8.查找哪些雇员的工资在60000到90000之间</span><br><span class="line">mysql&gt; select concat(e.first_name,&#x27; &#x27;,e.last_name) name,s.salary from employees e,salaries s where s.salary between 60000 and 90000 and e.emp_no = s.emp_no limit 5;</span><br><span class="line">+----------------+--------+</span><br><span class="line">| name           | salary |</span><br><span class="line">+----------------+--------+</span><br><span class="line">| Georgi Facello |  60117 |</span><br><span class="line">| Georgi Facello |  62102 |</span><br><span class="line">| Georgi Facello |  66074 |</span><br><span class="line">| Georgi Facello |  66596 |</span><br><span class="line">| Georgi Facello |  66961 |</span><br><span class="line">+----------------+--------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#9.查找哪些雇员的工资不在60000到90000之间</span><br><span class="line">mysql&gt; select concat(e.first_name,&#x27; &#x27;,e.last_name) name,s.salary from employees e,salaries s where s.salary not between 60000 and 90000 and e.emp_no = s.emp_no limit 10;</span><br><span class="line">+-------------------+--------+</span><br><span class="line">| name              | salary |</span><br><span class="line">+-------------------+--------+</span><br><span class="line">| Parto Bamford     |  40006 |</span><br><span class="line">| Parto Bamford     |  43616 |</span><br><span class="line">| Parto Bamford     |  43466 |</span><br><span class="line">| Parto Bamford     |  43636 |</span><br><span class="line">| Parto Bamford     |  43478 |</span><br><span class="line">| Parto Bamford     |  43699 |</span><br><span class="line">| Parto Bamford     |  43311 |</span><br><span class="line">| Chirstian Koblick |  40054 |</span><br><span class="line">| Chirstian Koblick |  42283 |</span><br><span class="line">| Chirstian Koblick |  42542 |</span><br><span class="line">+-------------------+--------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#10.查找first_name以P开头，后面仅有四个字母的雇员信息</span><br><span class="line">mysql&gt; select e.emp_no,concat(e.first_name,&#x27; &#x27;,e.last_name) name from employees e where e.first_name like &#x27;P____&#x27; and e.first_name not like &#x27;p__&#x27; limit 5;</span><br><span class="line">+--------+---------------------+</span><br><span class="line">| emp_no | name                |</span><br><span class="line">+--------+---------------------+</span><br><span class="line">|  10003 | Parto Bamford       |</span><br><span class="line">|  10101 | Perla Heyers        |</span><br><span class="line">|  10138 | Perry Shimshoni     |</span><br><span class="line">|  10353 | Phule Hammerschmidt |</span><br><span class="line">|  10387 | Parto Wrigley       |</span><br><span class="line">+--------+---------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#11.查找last_name以K开头的雇员信息</span><br><span class="line">mysql&gt; select e.emp_no,concat(e.first_name,&#x27; &#x27;,e.last_name) name from employees e where e.first_name like &#x27;K%&#x27; limit 5; </span><br><span class="line">+--------+----------------------+</span><br><span class="line">| emp_no | name                 |</span><br><span class="line">+--------+----------------------+</span><br><span class="line">|  10005 | Kyoichi Maliniak     |</span><br><span class="line">|  10016 | Kazuhito Cappelletti |</span><br><span class="line">|  10018 | Kazuhide Peha        |</span><br><span class="line">|  10031 | Karsten Joslin       |</span><br><span class="line">|  10066 | Kwee Schusler        |</span><br><span class="line">+--------+----------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#12.查找名字以字母K开头，以i结尾，并且第三个字母为o的雇员名字(First_name)、职位和所在部门号</span><br><span class="line">mysql&gt; select concat(e.first_name,&#x27; &#x27;,e.last_name) name,t.title,de.dept_no from employees e,dept_emp de,titles t where e.first_name like &#x27;K_o%i&#x27; and e.emp_no = t.emp_no and e.emp_no = de.emp_no limit 5;</span><br><span class="line">+------------------+--------------+---------+</span><br><span class="line">| name             | title        | dept_no |</span><br><span class="line">+------------------+--------------+---------+</span><br><span class="line">| Kyoichi Maliniak | Senior Staff | d003    |</span><br><span class="line">| Kyoichi Maliniak | Staff        | d003    |</span><br><span class="line">| Kyoichi Wossner  | Staff        | d007    |</span><br><span class="line">| Kyoichi Flexer   | Senior Staff | d007    |</span><br><span class="line">| Kyoichi Flexer   | Staff        | d007    |</span><br><span class="line">+------------------+--------------+---------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#13.查找哪些雇员的职位名不以Se开头</span><br><span class="line">mysql&gt; select concat(e.first_name,&#x27; &#x27;,last_name) name,t.title from employees e,titles t where e.emp_no = t.emp_no and t.title not like &#x27;Se%&#x27; limit 5;</span><br><span class="line">+-------------------+--------------------+</span><br><span class="line">| name              | title              |</span><br><span class="line">+-------------------+--------------------+</span><br><span class="line">| Bezalel Simmel    | Staff              |</span><br><span class="line">| Chirstian Koblick | Engineer           |</span><br><span class="line">| Kyoichi Maliniak  | Staff              |</span><br><span class="line">| Tzvetan Zielinski | Staff              |</span><br><span class="line">| Saniya Kalloufi   | Assistant Engineer |</span><br><span class="line">+-------------------+--------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#14.查找d005号部门里不是Staff的雇员信息</span><br><span class="line">mysql&gt; select concat(e.first_name,&#x27; &#x27;,last_name) name,t.title from employees e,dept_emp de,titles t where e.emp_no = de.emp_no  and e.emp_no = t.emp_no and t.title != &#x27;Staff&#x27; limit 5;</span><br><span class="line">+-------------------+-----------------+</span><br><span class="line">| name              | title           |</span><br><span class="line">+-------------------+-----------------+</span><br><span class="line">| Georgi Facello    | Senior Engineer |</span><br><span class="line">| Parto Bamford     | Senior Engineer |</span><br><span class="line">| Chirstian Koblick | Engineer        |</span><br><span class="line">| Chirstian Koblick | Senior Engineer |</span><br><span class="line">| Kyoichi Maliniak  | Senior Staff    |</span><br><span class="line">+-------------------+-----------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#15.查找d005号部门工资大于100000的员工的信息</span><br><span class="line">mysql&gt; select concat(e.first_name,&#x27; &#x27;,last_name) name,t.title,s.salary from employees e,dept_emp de,titles t,salaries s where e.emp_no = de.emp_no and e.emp_no = t.emp_no and e.emp_no = s.emp_no and de.dept_no = &#x27;d005&#x27; and s.salary &gt; 100000 limit 5;</span><br><span class="line">+---------------+--------------------+--------+</span><br><span class="line">| name          | title              | salary |</span><br><span class="line">+---------------+--------------------+--------+</span><br><span class="line">| Kwee Schusler | Assistant Engineer | 102425 |</span><br><span class="line">| Kwee Schusler | Assistant Engineer | 102674 |</span><br><span class="line">| Kwee Schusler | Assistant Engineer | 103672 |</span><br><span class="line">| Kwee Schusler | Engineer           | 102425 |</span><br><span class="line">| Kwee Schusler | Engineer           | 102674 |</span><br><span class="line">+---------------+--------------------+--------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#16.按字母顺序显示雇员的名字(last_name)</span><br><span class="line">mysql&gt; select concat(e.first_name,&#x27; &#x27;,last_name) name from employees e order by e.last_name limit 5;</span><br><span class="line">+------------------+</span><br><span class="line">| name             |</span><br><span class="line">+------------------+</span><br><span class="line">| Aluzio Aamodt    |</span><br><span class="line">| Sachem Aamodt    |</span><br><span class="line">| Sreenivas Aamodt |</span><br><span class="line">| Mokhtar Aamodt   |</span><br><span class="line">| Bartek Aamodt    |</span><br><span class="line">+------------------+</span><br><span class="line">5 rows in set (0.24 sec)</span><br><span class="line"></span><br><span class="line">#17.按部门编号降序显示雇员信息</span><br><span class="line">mysql&gt; select concat(e.first_name,&#x27; &#x27;,last_name) name,de.dept_no from employees e,dept_emp de where e.emp_no = de.emp_no order by de.dept_no desc limit 5;</span><br><span class="line">+-------------------+---------+</span><br><span class="line">| name              | dept_no |</span><br><span class="line">+-------------------+---------+</span><br><span class="line">| Pohua Sichman     | d009    |</span><br><span class="line">| Uri Juneja        | d009    |</span><br><span class="line">| Mohammed Pleszkun | d009    |</span><br><span class="line">| Chiranjit Kuzuoka | d009    |</span><br><span class="line">| Ronghao Morrow    | d009    |</span><br><span class="line">+-------------------+---------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#18.计算每个部门的平均工资和工资总和</span><br><span class="line">mysql&gt; select de.dept_no,sum(s.salary),avg(s.salary) from employees e,dept_emp de,salaries s where e.emp_no = de.emp_no and e.emp_no = s.emp_no group by de.dept_no;</span><br><span class="line">+---------+---------------+---------------+</span><br><span class="line">| dept_no | sum(s.salary) | avg(s.salary) |</span><br><span class="line">+---------+---------------+---------------+</span><br><span class="line">| d001    |   13725425266 |    71913.2000 |</span><br><span class="line">| d002    |   11650834677 |    70489.3649 |</span><br><span class="line">| d003    |    9363811425 |    55574.8794 |</span><br><span class="line">| d004    |   41554438942 |    59605.4825 |</span><br><span class="line">| d005    |   48179456393 |    59478.9012 |</span><br><span class="line">| d006    |   10865203635 |    57251.2719 |</span><br><span class="line">| d007    |   40030089342 |    80667.6058 |</span><br><span class="line">| d008    |   11969730427 |    59665.1817 |</span><br><span class="line">| d009    |   13143639841 |    58770.3665 |</span><br><span class="line">+---------+---------------+---------------+</span><br><span class="line">9 rows in set (7.14 sec)</span><br><span class="line"></span><br><span class="line">#19.查询每个部门的每个职位的雇员数</span><br><span class="line">mysql&gt; select de.dept_no,t.title,sum(e.emp_no) from employees e,dept_emp de,titles t where e.emp_no = de.emp_no and e.emp_no = t.emp_no group by de.dept_no,t.title limit 5;</span><br><span class="line">+---------+--------------+---------------+</span><br><span class="line">| dept_no | title        | sum(e.emp_no) |</span><br><span class="line">+---------+--------------+---------------+</span><br><span class="line">| d001    | Manager      |        220061 |</span><br><span class="line">| d001    | Senior Staff |    3561178455 |</span><br><span class="line">| d001    | Staff        |    4142508539 |</span><br><span class="line">| d002    | Manager      |        220199 |</span><br><span class="line">| d002    | Senior Staff |    3090249864 |</span><br><span class="line">+---------+--------------+---------------+</span><br><span class="line">5 rows in set (3.13 sec)</span><br><span class="line"></span><br><span class="line">#20.请算出employees表中所有雇员的平均工资</span><br><span class="line">mysql&gt; select avg(s.salary) from employees e,salaries s where e.emp_no = s.emp_no;</span><br><span class="line">+---------------+</span><br><span class="line">| avg(s.salary) |</span><br><span class="line">+---------------+</span><br><span class="line">|    63810.7448 |</span><br><span class="line">+---------------+</span><br><span class="line">1 row in set (4.48 sec)</span><br><span class="line"></span><br><span class="line">#21.请查询出employees表中的最低工资的员工信息</span><br><span class="line">mysql&gt; select concat(first_name,&#x27; &#x27;,last_name) name from employees e,salaries s where e.emp_no = s.emp_no and s.salary = (selecct min(s.salary) salary from salaries s);</span><br><span class="line">+--------------+</span><br><span class="line">| name         |</span><br><span class="line">+--------------+</span><br><span class="line">| Olivera Baek |</span><br><span class="line">+--------------+</span><br><span class="line">1 row in set (1.99 sec)</span><br><span class="line"></span><br><span class="line">#22.请计算出每个部门的平均工资、最高工资和最低工资</span><br><span class="line">mysql&gt; select de.dept_no,avg(s.salary),max(s.salary),min(s.salary) from employees e,dept_emp de,salaries s where e.emp_no = de.emp_no and e.emp_no = s.emp_no group by de.dept_no;</span><br><span class="line">+---------+---------------+---------------+---------------+</span><br><span class="line">| dept_no | avg(s.salary) | max(s.salary) | min(s.salary) |</span><br><span class="line">+---------+---------------+---------------+---------------+</span><br><span class="line">| d001    |    71913.2000 |        145128 |         39127 |</span><br><span class="line">| d002    |    70489.3649 |        142395 |         38812 |</span><br><span class="line">| d003    |    55574.8794 |        141953 |         38735 |</span><br><span class="line">| d004    |    59605.4825 |        138273 |         38623 |</span><br><span class="line">| d005    |    59478.9012 |        144434 |         38849 |</span><br><span class="line">| d006    |    57251.2719 |        132103 |         38786 |</span><br><span class="line">| d007    |    80667.6058 |        158220 |         39169 |</span><br><span class="line">| d008    |    59665.1817 |        130211 |         38851 |</span><br><span class="line">| d009    |    58770.3665 |        144866 |         38836 |</span><br><span class="line">+---------+---------------+---------------+---------------+</span><br><span class="line">9 rows in set (7.06 sec)</span><br><span class="line"></span><br><span class="line">#23.查询薪水发放时间在1986-06-26 ~ 1987-06-25薪水高于46145号雇员并且工种与他相同的雇员情况。</span><br><span class="line">select e.*  from employees e,titles t,salaries s  where e.emp_no = t.emp_no  and e.emp_no = t.emp_no  and t.title = (select title from titles where emp_no = 46135)  and s.salary &gt; (select s.salary from salaries s where s.from_date &gt; str_to_date(&#x27;1986-06-26&#x27;,&#x27;%Y-%m-%d&#x27;) and s.to_date &lt; str_to_date(&#x27;1987-06-2 25&#x27;,&#x27;%Y-%m-%d&#x27;) and s.emp_no = &#x27;46135&#x27;)  and s.from_date &gt; str_to_date(&#x27;1986-06-26&#x27;,&#x27;%Y-%m-%d&#x27;) and s.to_date &lt; str_to_date(&#x27;1987-06-2 25&#x27;,&#x27;%Y-%m-%d&#x27;) limit 10;</span><br><span class="line">+--------+------------+------------+------------+--------+------------+</span><br><span class="line">| emp_no | birth_date | first_name | last_name  | gender | hire_date  |</span><br><span class="line">+--------+------------+------------+------------+--------+------------+</span><br><span class="line">|  10004 | 1954-05-01 | Chirstian  | Koblick    | M      | 1986-12-01 |</span><br><span class="line">|  10009 | 1952-04-19 | Sumant     | Peac       | F      | 1985-02-18 |</span><br><span class="line">|  10010 | 1963-06-01 | Duangkaew  | Piveteau   | F      | 1989-08-24 |</span><br><span class="line">|  10012 | 1960-10-04 | Patricio   | Bridgland  | M      | 1992-12-18 |</span><br><span class="line">|  10014 | 1956-02-12 | Berni      | Genin      | M      | 1987-03-11 |</span><br><span class="line">|  10018 | 1954-06-19 | Kazuhide   | Peha       | F      | 1987-04-03 |</span><br><span class="line">|  10020 | 1952-12-24 | Mayuko     | Warwick    | M      | 1991-01-26 |</span><br><span class="line">|  10022 | 1952-07-08 | Shahaf     | Famili     | M      | 1995-08-22 |</span><br><span class="line">|  10023 | 1953-09-29 | Bojan      | Montemayor | F      | 1989-12-17 |</span><br><span class="line">|  10026 | 1953-04-03 | Yongqiao   | Berztiss   | M      | 1995-03-20 |</span><br><span class="line">+--------+------------+------------+------------+--------+------------+</span><br><span class="line">10 rows in set, 2 warnings (0.05 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#24.查询工资在10000到50000之间的雇员所在部门的所有人员的信息。</span><br><span class="line">mysql&gt; select e.*,d.dept_no,d.dept_name from employees e,dept_emp de,departments d where e.emp_no = de.emp_no and de.dept_no =d.dept_no and e.emp_no in (select distinct s.emp_no from salaries s where s.salary between 10000 and 50000) limit 10;</span><br><span class="line">+--------+------------+-------------+-----------+--------+------------+---------+------------------+</span><br><span class="line">| emp_no | birth_date | first_name  | last_name | gender | hire_date  | dept_no | dept_name        |</span><br><span class="line">+--------+------------+-------------+-----------+--------+------------+---------+------------------+</span><br><span class="line">|  10011 | 1953-11-07 | Mary        | Sluis     | F      | 1990-01-22 | d009    | Customer Service |</span><br><span class="line">|  10038 | 1960-07-20 | Huan        | Lortz     | M      | 1989-09-20 | d009    | Customer Service |</span><br><span class="line">|  10049 | 1961-04-24 | Basil       | Tramer    | F      | 1992-05-04 | d009    | Customer Service |</span><br><span class="line">|  10098 | 1961-09-23 | Sreekrishna | Servieres | F      | 1985-05-13 | d009    | Customer Service |</span><br><span class="line">|  10112 | 1963-08-13 | Yuichiro    | Swick     | F      | 1985-10-08 | d009    | Customer Service |</span><br><span class="line">|  10115 | 1964-12-25 | Chikara     | Rissland  | M      | 1986-01-23 | d009    | Customer Service |</span><br><span class="line">|  10126 | 1954-08-07 | Kayoko      | Valtorta  | M      | 1985-09-08 | d009    | Customer Service |</span><br><span class="line">|  10128 | 1958-02-15 | Babette     | Lamba     | F      | 1988-06-06 | d009    | Customer Service |</span><br><span class="line">|  10137 | 1959-07-30 | Maren       | Hutton    | M      | 1985-02-18 | d009    | Customer Service |</span><br><span class="line">|  10154 | 1957-01-17 | Abdulah     | Thibadeau | F      | 1990-12-12 | d009    | Customer Service |</span><br><span class="line">+--------+------------+-------------+-----------+--------+------------+---------+------------------+</span><br><span class="line">10 rows in set (1.28 sec)</span><br><span class="line"></span><br><span class="line">#25.查询出在薪水发放时间在1986-06-26 ~ 1987-06-25的员工信息</span><br><span class="line">###（工号，姓名，性别，薪水，职位）</span><br><span class="line">mysql&gt; select e.emp_no,concat(e.first_name,&quot; &quot;,e.last_name) name,e.gender,s.salary,t.title from employees e,salaries s,titles t where e.emp_no = s.emp_no and e.emp_no = t.emp_no and s.from_date &gt; str_to_date(&#x27;1986-06-26&#x27;,&#x27;%Y-%m-%d&#x27;) and s.to_date &lt; str_to_date(&#x27;1987-06-2 25&#x27;,&#x27;%Y-%m-%d&#x27;) limit 10;</span><br><span class="line">+--------+-------------------+--------+--------+-----------------+</span><br><span class="line">| emp_no | name              | gender | salary | title           |</span><br><span class="line">+--------+-------------------+--------+--------+-----------------+</span><br><span class="line">|  13543 | Tua Garigliano    | F      |  78646 | Staff           |</span><br><span class="line">|  13589 | Arfst Munck       | F      |  44306 | Staff           |</span><br><span class="line">|  14085 | Jiafu Constantine | F      |  43575 | Staff           |</span><br><span class="line">|  14613 | Kien Herath       | M      |  54124 | Staff           |</span><br><span class="line">|  19083 | Nobuyoshi Asmuth  | M      |  40000 | Engineer        |</span><br><span class="line">|  19135 | Leaf Soicher      | M      |  40000 | Senior Engineer |</span><br><span class="line">|  19761 | Vasiliy Niizuma   | M      |  65098 | Staff           |</span><br><span class="line">|  19769 | Bezalel Holburn   | M      |  53118 | Engineer        |</span><br><span class="line">|  22892 | Giao Monkewich    | M      |  79554 | Senior Staff    |</span><br><span class="line">|  24101 | Yakichi Manderick | F      |  45092 | Engineer        |</span><br><span class="line">+--------+-------------------+--------+--------+-----------------+</span><br><span class="line">10 rows in set, 1 warning (0.07 sec)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>No MyBatis mapper was found in &#39;com.xxx.dao&#39; package</title>
    <url>/20170801-No%20MyBatis%20mapper%20was%20found%20in%20&#39;%5Bcom.xxx.dao%5D&#39;%20package%20/</url>
    <content><![CDATA[<h2 id="出错"><a href="#出错" class="headerlink" title="出错"></a>出错</h2><p>maven项目，启动tomcat的时候报错：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">No MyBatis mapper was found in &#x27;[com.hisen.dao]&#x27; package </span><br></pre></td></tr></table></figure>
<p>这是由于把mybatis的mapper配置文件放在了Java代码的目录下</p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">├── Java</span><br><span class="line">│   └── com</span><br><span class="line">│       └── hisen</span><br><span class="line">│           ├── dao</span><br><span class="line">│           │   └── BookDao.Java</span><br><span class="line">│           │   └── BookMapper.xml</span><br><span class="line">│           ├── entity</span><br><span class="line">│           │   └── Book.Java</span><br><span class="line">│           ├── service</span><br><span class="line">│           │   ├── BookService.Java</span><br><span class="line">│           │   └── impl</span><br><span class="line">│           │       └── BookServiceImpl.Java</span><br><span class="line">│           └── web</span><br><span class="line">│               └── BookController.Java</span><br><span class="line">├── resources</span><br><span class="line">│   ├── jdbc.properties</span><br><span class="line">│   ├── logback.xml</span><br><span class="line">│   ├── mybatis-config.xml</span><br><span class="line">│   └── spring</span><br><span class="line">│       ├── spring-dao.xml</span><br><span class="line">│       ├── spring-service.xml</span><br><span class="line">│       └── spring-web.xml</span><br><span class="line">└── webapp</span><br><span class="line">    ├── index.jsp</span><br><span class="line">    └── WEB-INF</span><br><span class="line">        ├── jsp</span><br><span class="line">        │   ├── detail.jsp</span><br><span class="line">        │   └── list.jsp</span><br><span class="line">        └── web.xml</span><br></pre></td></tr></table></figure>

<h2 id="出错原因"><a href="#出错原因" class="headerlink" title="出错原因"></a>出错原因</h2><span id="more"></span>
<p>这是因为mapper文件的路径问题：maven在打包的时候默认是认为src&#x2F;main&#x2F;Java目录下只有Java源代码，不会管xml文件。</p>
<p>Java 项目分为两个部分，一个是源码，一个是资源，在使用maven等构建工具时，</p>
<p>默认会将源码编译后再加上资源目录的文件放到target目录下作为最后运行的文件（可以是war,jar,或者目录）。</p>
<p>有时为了方便，我们会在src&#x2F;main&#x2F;Java源码目录下放了资源文件，例如mybatis的mapper文件，方便我们编程时展开查看。</p>
<p>这时，我们需要设置编译时也将这些配置文件放到target目录下，否则最后的target目录式没有这些文件的。</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>在项目的pom文件里面配置，让maven也从src&#x2F;main&#x2F;Java目录下读取xml配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">       &lt;!--注意,如果将静态资源放在src/main/Java中,那么编译时将被maven忽略,</span><br><span class="line">       在target目录下将没有这些资源,所以需要将该目录添加为资源目录.</span><br><span class="line">       --&gt;</span><br><span class="line">       &lt;resources&gt;</span><br><span class="line">         &lt;resource&gt;</span><br><span class="line">           &lt;directory&gt;$&#123;basedir&#125;/src/main/Java&lt;/directory&gt;</span><br><span class="line">           &lt;includes&gt;</span><br><span class="line">             &lt;include&gt;**/*.xml&lt;/include&gt;</span><br><span class="line">           &lt;/includes&gt;</span><br><span class="line">         &lt;/resource&gt;</span><br><span class="line">       &lt;/resources&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>如果是把mapper文件什么的放在resources目录下</p>
<p>但是为了分类建了不同的文件夹，也需要修改配置文件，不然会读取不到</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">  &lt;!--包含下面所有的配置文件（包括子目录）--&gt;</span><br><span class="line">  &lt;resources&gt;</span><br><span class="line">    &lt;resource&gt;</span><br><span class="line">      &lt;directory&gt;$&#123;basedir&#125;/src/main/resources&lt;/directory&gt;</span><br><span class="line">      &lt;includes&gt;</span><br><span class="line">        &lt;include&gt;**/*.properties&lt;/include&gt;</span><br><span class="line">        &lt;include&gt;**/*.xml&lt;/include&gt;</span><br><span class="line">      &lt;/includes&gt;</span><br><span class="line">    &lt;/resource&gt;</span><br><span class="line">  &lt;/resources&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>xml</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenWrt 新版本安装 passwall</title>
    <url>/20221030-OpenWrt_22.03_install_passwall/</url>
    <content><![CDATA[<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>最近看了不少软路由的东西<br>于是折腾了一波 OpenWrt<br>奈何网件 R8000 配置一般，跑起来体验不好。<br>后续估计是会上 x86 主机了，虽然可能会性能过剩。</p>
<h1 id="二、问题"><a href="#二、问题" class="headerlink" title="二、问题"></a>二、问题</h1><p>在官方原版的 OpenWrt 22.03 版本中<br>如果直接在 software 中安装 luci_app_passwall<br>那么安装后会提示没法实现透明代理，还需要安装一些额外的软件才行</p>
<h1 id="三、解决问题"><a href="#三、解决问题" class="headerlink" title="三、解决问题"></a>三、解决问题</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">opkg install ipset ipt2socks iptables iptables-mod-conntrack-extra iptables-mod-iprange iptables-mod-socket iptables-mod-tproxy kmod-ipt-nat</span><br></pre></td></tr></table></figure>
<p>安装完成之后，再按教程操作即可.<br>原因就是新版本的系统中默认不包含上述模块。<br>问题解决参考自 GitHub issue.</p>
<h1 id="四、参考"><a href="#四、参考" class="headerlink" title="四、参考"></a>四、参考</h1><ul>
<li><a href="https://github.com/xiaorouji/openwrt-passwall/issues/2149">GiitHub - [Bug]: 系统未安装iptables或ipset，无法透明代理！</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>OpenWrt</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle - MySQL - 数据库事务隔离级别介绍</title>
    <url>/20171114-Oracle%20-%20MySQL%20-%20%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<h2 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h2><ol>
<li>脏读: 对于两个事物 T1, T2, T1 读取了已经被 T2 更新但还没有被提交的字段. 之后, 若 T2 回滚, T1读取的内容就是临时且无效的.  </li>
<li>不可重复读: 对于两个事物 T1, T2, T1 读取了一个字段, 然后 T2 更新了该字段. 之后, T1再次读取同一个字段, 值就不同了.  </li>
<li>幻读: 对于两个事物 T1, T2, T1 从一个表中读取了一个字段, 然后 T2 在该表中插入了一些新的行. 之后, 如果 T1 再次读取同一个表, 就会多出几行.</li>
</ol>
<h2 id="数据库的4个事物隔离级别"><a href="#数据库的4个事物隔离级别" class="headerlink" title="数据库的4个事物隔离级别"></a>数据库的4个事物隔离级别</h2><p>√：可能会出现<br>×：为不会出现</p>
<table>
<thead>
<tr>
<th align="left">name</th>
<th align="left">名称</th>
<th align="left">级别</th>
<th align="left">脏读</th>
<th align="left">不可重复读</th>
<th align="left">幻读</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Read uncommitted</td>
<td align="left">读未提交</td>
<td align="left">1</td>
<td align="left">√</td>
<td align="left">√</td>
<td align="left">√</td>
</tr>
<tr>
<td align="left">Read committed</td>
<td align="left">读提交</td>
<td align="left">2</td>
<td align="left">×</td>
<td align="left">√</td>
<td align="left">√</td>
</tr>
<tr>
<td align="left">Repeatable read</td>
<td align="left">重复读</td>
<td align="left">3</td>
<td align="left">×</td>
<td align="left">×</td>
<td align="left">√</td>
</tr>
<tr>
<td align="left">Serializable</td>
<td align="left">序列化</td>
<td align="left">4</td>
<td align="left">×</td>
<td align="left">×</td>
<td align="left">×</td>
</tr>
</tbody></table>
<h2 id="oracle"><a href="#oracle" class="headerlink" title="oracle"></a>oracle</h2><p>Oracle 支持的 2 种事务隔离级别：READ COMMITED, SERIALIZABLE.</p>
<p>Oracle 默认的事务隔离级别为: READ COMMITED</p>
<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><p>Mysql 支持 4 中事务隔离级别.</p>
<p>Mysql 默认的事务隔离级别为: REPEATABLE READ</p>
<h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><p>参考：<a href="https://www.cnblogs.com/andy6/p/6045679.html">https://www.cnblogs.com/andy6/p/6045679.html</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>网件 R8000 利用U盘扩展 OpenWrt overlay 空间</title>
    <url>/20221030-OpenWrt_NETGEAR_R8000_use_USB_flash_disk_to_expand_overlay/</url>
    <content><![CDATA[<h1 id="一、问题"><a href="#一、问题" class="headerlink" title="一、问题"></a>一、问题</h1><p>OpenWrt 官方关于 netgear r8000 的信息<br><a href="https://openwrt.org/toh/netgear/r8000">https://openwrt.org/toh/netgear/r8000</a><br>“Second data partition (79 MiB) not available in OpenWrt”</p>
<p>128M 的空间，安装 OpenWrt 之后就剩下 21M 的空间可以安装插件<br>那自然是不够用的了，于是乎就找了些扩大空间的办法，最靠谱的就是利用U盘挂载</p>
<h1 id="二、解决"><a href="#二、解决" class="headerlink" title="二、解决"></a>二、解决</h1><h2 id="2-1-获取U盘信息"><a href="#2-1-获取U盘信息" class="headerlink" title="2.1 获取U盘信息"></a>2.1 获取U盘信息</h2><p>插上 U盘 至 USB3 插口<br>登录 OpenWrt 控制台，查看 USB 在 OpenWrt 中的名称<br>也就是 &#x2F;dev&#x2F;sda</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@OpenWrt:~# cat /proc/scsi/usb-storage/0</span><br><span class="line">   Host scsi0: usb-storage</span><br><span class="line">       Vendor: SanDisk</span><br><span class="line">      Product: Extreme</span><br><span class="line">Serial Number: AA010316152154386775</span><br><span class="line">     Protocol: Transparent SCSI</span><br><span class="line">    Transport: Bulk</span><br><span class="line">       Quirks: SANE_SENSE</span><br><span class="line"></span><br><span class="line">root@OpenWrt:~# ls /dev/sda*</span><br><span class="line">/dev/sda</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h2 id="2-2-安装所需软件"><a href="#2-2-安装所需软件" class="headerlink" title="2.2 安装所需软件"></a>2.2 安装所需软件</h2><p>安装相关软件<br>因为需要格式化 U盘 至 ext4 的格式<br>以及挂载U盘空间至 overlay</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@OpenWrt:~# opkg update &amp;&amp; opkg install block-mount e2fsprogs kmod-fs-ext4 kmod-usb-storage kmod-usb2 kmod-usb3</span><br></pre></td></tr></table></figure>

<h2 id="2-3-格式化U盘"><a href="#2-3-格式化U盘" class="headerlink" title="2.3 格式化U盘"></a>2.3 格式化U盘</h2><p>格式化 U盘 至 ext4</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@OpenWrt:~# mkfs.ext4 /dev/sda</span><br><span class="line">mke2fs 1.46.5 (30-Dec-2021)</span><br><span class="line">/dev/sda contains a ext4 file system</span><br><span class="line">	created on Sat Oct 29 08:03:58 2022</span><br><span class="line">Proceed anyway? (y,N) y</span><br></pre></td></tr></table></figure>
<h2 id="2-3-挂载-U盘"><a href="#2-3-挂载-U盘" class="headerlink" title="2.3 挂载 U盘"></a>2.3 挂载 U盘</h2><p>挂载 U盘 至 overlay<br>重启之后，就大功告成<br>放心地去安装各种插件吧</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@OpenWrt:~# mount /dev/sda /mnt</span><br><span class="line">root@OpenWrt:~# mkdir /tmp/root</span><br><span class="line">root@OpenWrt:~# mount -o bind / /tmp/root</span><br><span class="line">root@OpenWrt:~# cp /tmp/root/* /mnt -a</span><br><span class="line">root@OpenWrt:~# umount /tmp/root</span><br><span class="line">root@OpenWrt:~# umount /mnt</span><br><span class="line">root@OpenWrt:~# block detect &gt; /etc/config/fstab</span><br><span class="line">root@OpenWrt:~# uci set fstab.@mount[0].target=&#x27;/overlay&#x27;</span><br><span class="line">root@OpenWrt:~# uci set fstab.@mount[0].enabled=&#x27;1&#x27;</span><br><span class="line">root@OpenWrt:~# uci commit fstab</span><br><span class="line">root@OpenWrt:~# reboot</span><br></pre></td></tr></table></figure>
<h1 id="三、参考"><a href="#三、参考" class="headerlink" title="三、参考"></a>三、参考</h1><p><a href="https://blog.csdn.net/dengxinfa/article/details/112294762">OpenWrt挂载U盘或SD卡作为根文件系统</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>OpenWrt</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle SQL语句优化 - 写出高效SQL</title>
    <url>/20170120-Oracle-SQL%E8%AF%AD%E5%8F%A5%E4%BC%98%E5%8C%96-%E5%86%99%E5%87%BA%E9%AB%98%E6%95%88SQL/</url>
    <content><![CDATA[<h2 id="1-选择最有效率的表名顺序"><a href="#1-选择最有效率的表名顺序" class="headerlink" title="[1]选择最有效率的表名顺序"></a>[1]选择最有效率的表名顺序</h2><p>只在基于规则的优化器中有效,ORACLE的解析器按照从右到左的顺序处理FROM子句中的表名，FROM子句中写在最后的表(基础表 driving table)将被最先处理，在FROM子句中包含多个表的情况下,你必须<strong>选择记录条数最少的表作为基础表</strong>。如果有3个以上的表连接查询, 那就需要选择交叉表(intersection table)作为基础表, 交叉表是指那个被其他表所引用的表.</p>
<h2 id="2-WHERE子句中的连接顺序"><a href="#2-WHERE子句中的连接顺序" class="headerlink" title="[2]WHERE子句中的连接顺序"></a>[2]WHERE子句中的连接顺序</h2><p><strong>ORACLE采用自下而上(从后往前)的顺序解析WHERE子句</strong>,根据这个原理,表之间的连接必须写在其他WHERE条件之前, 那些<strong>可以过滤掉最大数量记录的条件必须写在WHERE子句的末尾</strong></p>
<h2 id="3-SELECT子句中避免使用’-’"><a href="#3-SELECT子句中避免使用’-’" class="headerlink" title="[3]SELECT子句中避免使用’*’"></a>[3]SELECT子句中避免使用’*’</h2><p>ORACLE在解析的过程中, 会将’*’ 依次转换成所有的列名, 这个工作是通过查询数据字典完成的, 这意味着将耗费更多的时间.需要什么字段就查询什么字段，永远不要查询出不需要的字段来</p>
<h2 id="4-减少访问数据库的次数"><a href="#4-减少访问数据库的次数" class="headerlink" title="[4]减少访问数据库的次数"></a>[4]减少访问数据库的次数</h2><p>ORACLE在内部执行了许多工作: 解析SQL语句, 估算索引的利用率, 绑定变量 , 读数据块等；尽量使用缓存技术；</p>
<h2 id="5-设置单次访问合适的检索数据量"><a href="#5-设置单次访问合适的检索数据量" class="headerlink" title="[5]设置单次访问合适的检索数据量"></a>[5]设置单次访问合适的检索数据量</h2><p>在SQL<em>Plus , SQL</em>Forms和Pro*C中重新设置ARRAYSIZE参数, 可以增加每次数据库访问的检索数据量 ,建议值为200</p>
<span id="more"></span>
<h2 id="6-使用DECODE函数来减少处理时间"><a href="#6-使用DECODE函数来减少处理时间" class="headerlink" title="[6]使用DECODE函数来减少处理时间"></a>[6]使用DECODE函数来减少处理时间</h2><p>使用DECODE函数可以避免重复扫描相同记录或重复连接相同的表,因为decode函数有短路效应，类似Java中短路与，有合适的就会返回而不继续扫描后面的内容</p>
<h2 id="7-整合简单-无关联的数据库访问"><a href="#7-整合简单-无关联的数据库访问" class="headerlink" title="[7]整合简单,无关联的数据库访问"></a>[7]整合简单,无关联的数据库访问</h2><p>如果你有几个简单的数据库查询语句,你可以把它们整合到一个查询中(即使它们之间没有关系),原因见**[4]**</p>
<h2 id="8-删除重复记录，最高效的方法"><a href="#8-删除重复记录，最高效的方法" class="headerlink" title="[8]删除重复记录，最高效的方法"></a>[8]删除重复记录，最高效的方法</h2><p>因为这里使用的是rowid</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELETE</span><br><span class="line">FROM EMP E</span><br><span class="line">WHERE E.ROWID &gt;</span><br><span class="line">    (SELECT MIN(X.ROWID)</span><br><span class="line">     FROM EMP X</span><br><span class="line">     WHERE X.EMP_NO = E.EMP_NO);</span><br></pre></td></tr></table></figure>
<h2 id="9-用TRUNCATE替代DELETE"><a href="#9-用TRUNCATE替代DELETE" class="headerlink" title="[9]用TRUNCATE替代DELETE"></a>[9]用TRUNCATE替代DELETE</h2><p>当删除表中的记录时,在通常情况下, 回滚段(rollback segments ) 用来存放可以被恢复的信息. 如果你没有COMMIT事务,ORACLE会将数据恢复到删除之前的状态(准确地说是恢复到执行删除命令之前的状况) <strong>而当运用TRUNCATE时, 回滚段不再存放任何可被恢复的信息</strong>.当命令运行后,数据不能被恢复.因此很少的资源被调用,执行时间也会很短. (注: TRUNCATE只在删除全表适用,TRUNCATE是DDL不是DML)</p>
<h2 id="10-尽量多使用COMMIT"><a href="#10-尽量多使用COMMIT" class="headerlink" title="[10]尽量多使用COMMIT"></a>[10]尽量多使用COMMIT</h2><p>只要有可能,在程序中尽量多使用COMMIT, 这样程序的性能得到提高,需求也会因为COMMIT所释放的资源而减少:<br>COMMIT所释放的资源: </p>
<ol>
<li>回滚段上用于恢复数据的信息</li>
<li>被程序语句获得的锁</li>
<li>redo log buffer 中的空间</li>
<li>ORACLE为管理上述3种资源中的内部花费</li>
</ol>
<h2 id="11-用Where子句替换HAVING子句"><a href="#11-用Where子句替换HAVING子句" class="headerlink" title="[11]用Where子句替换HAVING子句"></a>[11]用Where子句替换HAVING子句</h2><p>避免使用HAVING子句, <strong>HAVING在检索出所有记录后对结果集进行过滤。这个处理需要排序,总计等操作</strong>。 如果能通过WHERE子句限制记录的数目,那就能减少这方面的开销. (非oracle中)on、where、having这三个都可以加条件的子句中，on是最先执行，where次之，having最后，<strong>因为on是先把不符合条件的记录过滤后才进行统计，它就可以减少中间运算要处理的数据，按理说应该速度是最快的</strong>，where也应该比having快点的，因为它过滤数据后才进行sum，在两个表联接时才用on的，所以在一个表的时候，就剩下where跟having比较了。在这单表查询统计的情况下，如果要过滤的条件没有涉及到要计算字段，那它们的结果是一样的，只是where可以使用rushmore技术，而having就不能，在速度上后者要慢如果要涉及到计算的字段，就表示在没计算之前，这个字段的值是不确定的，根据上篇写的工作流程，where的作用时间是在计算之前就完成的，而having就是在计算后才起作用的，所以在这种情况下，两者的结果会不同。在多表联接查询时，on比where更早起作用。系统首先根据各个表之间的联接条件，把多个表合成一个临时表后，再由where进行过滤，然后再计算，计算完后再由having进行过滤。由此可见，要想过滤条件起到正确的作用，首先要明白这个条件应该在什么时候起作用，然后再决定放在那里</p>
<h2 id="12-减少对表的查询"><a href="#12-减少对表的查询" class="headerlink" title="[12]减少对表的查询"></a>[12]减少对表的查询</h2><p>在含有子查询的SQL语句中,要特别注意减少对表的查询。例子：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT TAB_NAME</span><br><span class="line">FROM TABLES</span><br><span class="line">WHERE (TAB_NAME,</span><br><span class="line">       DB_VER) =</span><br><span class="line">    (SELECT TAB_NAME,</span><br><span class="line">            DB_VER</span><br><span class="line">     FROM TAB_COLUMNS</span><br><span class="line">     WHERE VERSION = 604)</span><br></pre></td></tr></table></figure>
<h2 id="13-通过内部函数提高SQL效率"><a href="#13-通过内部函数提高SQL效率" class="headerlink" title="[13]通过内部函数提高SQL效率"></a>[13]通过内部函数提高SQL效率</h2><p>复杂的SQL往往牺牲了执行效率。能够掌握上面的运用函数解决问题的方法在实际工作中是非常有意义的。一般把复杂的sql分解再拼起来。</p>
<h2 id="14-使用表的别名-Alias"><a href="#14-使用表的别名-Alias" class="headerlink" title="[14]使用表的别名(Alias)"></a>[14]使用表的别名(Alias)</h2><p>当在SQL语句中连接多个表时, 请使用表的别名并把别名前缀于每个Column上。这样一来，就可以减少解析的时间并减少那些由Column歧义引起的语法错误。</p>
<h2 id="15-用EXISTS替代IN、用NOT-EXISTS替代NOT-IN"><a href="#15-用EXISTS替代IN、用NOT-EXISTS替代NOT-IN" class="headerlink" title="[15]用EXISTS替代IN、用NOT EXISTS替代NOT IN"></a>[15]用EXISTS替代IN、用NOT EXISTS替代NOT IN</h2><p>在许多基于基础表的查询中,为了满足一个条件,往往需要对另一个表进行联接。在这种情况下, 使用EXISTS(或NOT EXISTS)通常将提高查询的效率。在子查询中,NOT IN子句将执行一个内部的排序和合并。无论在哪种情况下,NOT IN都是最低效的 (因为它对子查询中的表执行了一个全表遍历).。为了避免使用NOT IN ,我们可以把它改写成外连接(Outer Joins)或NOT EXISTS.</p>
<p>高效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM EMP (基础表)</span><br><span class="line">WHERE EMPNO &gt; 0</span><br><span class="line">  AND EXISTS</span><br><span class="line">    (SELECT &#x27;X&#x27;  FROM DEPT  WHERE  DEPT.DEPTNO = EMP.DEPTNO  AND  LOC = &#x27;MELB&#x27;)</span><br></pre></td></tr></table></figure>
<p>低效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM EMP (基础表)</span><br><span class="line">WHERE EMPNO &gt; 0</span><br><span class="line">  AND DEPTNO IN</span><br><span class="line">    (SELECT DEPTNO</span><br><span class="line">     FROM DEPT</span><br><span class="line">     WHERE LOC = &#x27;MELB&#x27;)</span><br></pre></td></tr></table></figure>
<h2 id="16-识别’低效执行’的SQL语句"><a href="#16-识别’低效执行’的SQL语句" class="headerlink" title="[16]识别’低效执行’的SQL语句"></a>[16]识别’低效执行’的SQL语句</h2><p>虽然目前各种关于SQL优化的图形化工具层出不穷</p>
<p>但是写出自己的SQL工具来解决问题始终是一个最好的方法:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT EXECUTIONS,</span><br><span class="line">       DISK_READS,</span><br><span class="line">       BUFFER_GETS,</span><br><span class="line">       ROUND((BUFFER_GETS-DISK_READS)/BUFFER_GETS,2) Hit_radio,</span><br><span class="line">       ROUND(DISK_READS/EXECUTIONS,2) Reads_per_run,</span><br><span class="line">       SQL_TEXT</span><br><span class="line">FROM V$SQLAREA</span><br><span class="line">WHERE EXECUTIONS&gt;0</span><br><span class="line">  AND BUFFER_GETS &gt; 0</span><br><span class="line">  AND (BUFFER_GETS-DISK_READS)/BUFFER_GETS &lt; 0.8</span><br><span class="line">ORDER BY 4 DESC;</span><br></pre></td></tr></table></figure>
<h2 id="17-用索引提高效率"><a href="#17-用索引提高效率" class="headerlink" title="[17]用索引提高效率"></a>[17]用索引提高效率</h2><p>索引是表的一个概念部分，用来提高检索数据的效率，ORACLE使用了一个复杂的自平衡B-tree结构。通常，通过索引查询数据比全表扫描要快。 当ORACLE找出执行查询和Update语句的最佳路径时， ORACLE优化器将使用索引。同样在联结多个表时使用索引也可以提高效率。另一个使用索引的好处是，它提供了主键(primary key)的唯一性验证。那些LONG或LONG RAW数据类型，你可以索引几乎所有的列。 通常，在大型表中使用索引特别有效。当然，你也会发现，在扫描小表时，使用索引同样能提高效率。<strong>虽然使用索引能得到查询效率的提高，但是我们也必须注意到它的代价. 索引需要空间来存储，也需要定期维护，每当有记录在表中增减或索引列被修改时, 索引本身也会被修改</strong>。这意味着每条记录的INSERT , DELETE , UPDATE将为此多付出4 , 5 次的磁盘I&#x2F;O 。 因为索引需要额外的存储空间和处理，那些不必要的索引反而会使查询反应时间变慢。定期的重构索引是有必要的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER  INDEX &lt;INDEXNAME&gt; REBUILD &lt;TABLESPACENAME&gt;</span><br></pre></td></tr></table></figure>
<h2 id="18-用EXISTS替换DISTINCT"><a href="#18-用EXISTS替换DISTINCT" class="headerlink" title="[18]用EXISTS替换DISTINCT"></a>[18]用EXISTS替换DISTINCT</h2><p>当提交一个包含一对多表信息(比如部门表和雇员表)的查询时，避免在SELECT子句中使用DISTINCT。一般可以考虑用EXIST替换，EXISTS 使查询更为迅速，因为RDBMS核心模块将在子查询的条件一旦满足后，立刻返回结果。</p>
<p>低效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT DISTINCT DEPT_NO,</span><br><span class="line">                DEPT_NAME</span><br><span class="line">FROM DEPT D,</span><br><span class="line">     EMP E</span><br><span class="line">WHERE D.DEPT_NO = E.DEPT_NO</span><br></pre></td></tr></table></figure>
<p>高效:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT DEPT_NO,</span><br><span class="line">       DEPT_NAME</span><br><span class="line">FROM DEPT D</span><br><span class="line">WHERE EXISTS</span><br><span class="line">    (SELECT &#x27;X&#x27;</span><br><span class="line">     FROM EMP E</span><br><span class="line">     WHERE E.DEPT_NO = D.DEPT_NO);</span><br></pre></td></tr></table></figure>
<h2 id="19-sql语句用大写"><a href="#19-sql语句用大写" class="headerlink" title="[19]sql语句用大写"></a>[19]sql语句用大写</h2><p>因为oracle总是先解析sql语句，把小写的字母转换成大写的再执行</p>
<h2 id="20-在Java代码中尽量少用连接符“＋”连接字符串"><a href="#20-在Java代码中尽量少用连接符“＋”连接字符串" class="headerlink" title="[20]在Java代码中尽量少用连接符“＋”连接字符串"></a>[20]在Java代码中尽量少用连接符“＋”连接字符串</h2><p>一般来说StringBuilder(非线程安全)是一个不错的选择</p>
<h2 id="21-通常避免在索引列上使用NOT"><a href="#21-通常避免在索引列上使用NOT" class="headerlink" title="[21]通常避免在索引列上使用NOT"></a>[21]通常避免在索引列上使用NOT</h2><p>我们要避免在索引列上使用NOT，NOT会产生在和在索引列上使用函数相同的影响。当ORACLE”遇到”NOT，他就会停止使用索引转而执行全表扫描。</p>
<h2 id="22-避免在索引列上使用计算"><a href="#22-避免在索引列上使用计算" class="headerlink" title="[22]避免在索引列上使用计算"></a>[22]避免在索引列上使用计算</h2><p>WHERE子句中，如果索引列是函数的一部分。优化器将不使用索引而使用全表扫描。</p>
<p>举例: </p>
<p>低效： </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT … FROM  DEPT  WHERE SAL * 12 &gt; 25000; </span><br></pre></td></tr></table></figure>
<p>高效: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT … FROM DEPT WHERE SAL &gt; 25000/12;</span><br></pre></td></tr></table></figure>
<h2 id="23-用-替代"><a href="#23-用-替代" class="headerlink" title="[23]用&gt;&#x3D;替代&gt;"></a>[23]用&gt;&#x3D;替代&gt;</h2><p>高效: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT * FROM  EMP  WHERE  DEPTNO &gt;=4 </span><br></pre></td></tr></table></figure>
<p>低效: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT * FROM EMP WHERE DEPTNO &gt;3 </span><br></pre></td></tr></table></figure>
<p>两者的区别在于，前者DBMS将直接跳到第一个DEPT等于4的记录而后者将首先定位到DEPTNO&#x3D;3的记录并且向前扫描到第一个DEPT大于3的记录。</p>
<h2 id="24-用UNION替换OR-适用于索引列"><a href="#24-用UNION替换OR-适用于索引列" class="headerlink" title="[24]用UNION替换OR (适用于索引列)"></a>[24]用UNION替换OR (适用于索引列)</h2><p>通常情况下，用UNION替换WHERE子句中的OR将会起到较好的效果。对索引列使用OR将造成全表扫描。注意，以上规则只针对多个索引列有效。如果有column没有被索引, 查询效率可能会因为你没有选择OR而降低。在下面的例子中， LOC_ID 和REGION上都建有索引。</p>
<p>高效: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT LOC_ID,</span><br><span class="line">       LOC_DESC,</span><br><span class="line">       REGION</span><br><span class="line">FROM LOCATION</span><br><span class="line">WHERE LOC_ID = 10</span><br><span class="line">UNION</span><br><span class="line">SELECT LOC_ID,</span><br><span class="line">       LOC_DESC,</span><br><span class="line">       REGION</span><br><span class="line">FROM LOCATION</span><br><span class="line">WHERE REGION = &#x27;&#x27;MELBOURNE&#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p>低效: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT LOC_ID,</span><br><span class="line">       LOC_DESC,</span><br><span class="line">       REGION</span><br><span class="line">FROM LOCATION</span><br><span class="line">WHERE LOC_ID = 10</span><br><span class="line">  OR REGION = &#x27;&#x27;MELBOURNE&#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p>如果你坚持要用OR, 那就需要返回记录最少的索引列写在最前面</p>
<h2 id="25-用IN来替换OR"><a href="#25-用IN来替换OR" class="headerlink" title="[25]用IN来替换OR"></a>[25]用IN来替换OR</h2><p>这是一条简单易记的规则，但是实际的执行效果还须检验，在ORACLE8i下，两者的执行路径似乎是相同的。</p>
<p>低效: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT…. FROM LOCATION WHERE LOC_ID = 10 OR LOC_ID = 20 OR LOC_ID = 30 </span><br></pre></td></tr></table></figure>
<p>高效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT… FROM LOCATION WHERE LOC_IN  IN (10,20,30);</span><br></pre></td></tr></table></figure>
<h2 id="26-避免在索引列上使用IS-NULL和IS-NOT-NULL"><a href="#26-避免在索引列上使用IS-NULL和IS-NOT-NULL" class="headerlink" title="[26]避免在索引列上使用IS NULL和IS NOT NULL"></a>[26]避免在索引列上使用IS NULL和IS NOT NULL</h2><p>避免在索引中使用任何可以为空的列，<strong>ORACLE将无法使用该索引</strong>。对于单列索引，如果列包含空值，索引中将不存在此记录。对于复合索引，如果每个列都为空，索引中同样不存在此记录。如果至少有一个列不为空，则记录存在于索引中。</p>
<p>举例: 如果唯一性索引建立在表的A列和B列上, 并且表中存在一条记录的A,B值为(123,null) , ORACLE将不接受下一条具有相同A,B值（123,null）的记录(插入)。然而如果所有的索引列都为空，ORACLE将认为整个键值为空而空不等于空。 因此你可以插入1000 条具有相同键值的记录,当然它们都是空! 因为空值不存在于索引列中，所以WHERE子句中对索引列进行空值比较将使ORACLE停用该索引。</p>
<p>低效: (索引失效) </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT … FROM  DEPARTMENT  WHERE  DEPT_CODE IS NOT NULL; </span><br></pre></td></tr></table></figure>
<p>高效: (索引有效)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT … FROM  DEPARTMENT  WHERE  DEPT_CODE &gt;=0;</span><br></pre></td></tr></table></figure>
<h2 id="27-总是使用索引的第一个列"><a href="#27-总是使用索引的第一个列" class="headerlink" title="[27]总是使用索引的第一个列"></a>[27]总是使用索引的第一个列</h2><p>如果索引是建立在多个列上, 只有在它的第一个列(leading column)被where子句引用时,<strong>优化器才会选择使用该索引</strong>。这也是一条简单而重要的规则，当仅引用索引的第二个列时，优化器使用了全表扫描而忽略了索引</p>
<h2 id="28-用UNION-ALL替换UNION"><a href="#28-用UNION-ALL替换UNION" class="headerlink" title="[28]用UNION-ALL替换UNION"></a>[28]用UNION-ALL替换UNION</h2><p>当SQL语句需要UNION<strong>两个查询结果集合时</strong>,这两个结果集合会以UNION-ALL的方式被合并, 然后在输出最终结果前进行排序。<strong>如果用UNION ALL替代UNION, 这样排序就不是必要了</strong>。效率就会因此得到提高。需要注意的是，UNION ALL 将重复输出两个结果集合中相同记录。因此各位还是要从业务需求分析使用UNION ALL的可行性。 UNION 将对结果集合排序,这个操作会使用到SORT_AREA_SIZE这块内存。对于这块内存的优化也是相当重要的。下面的SQL可以用来查询排序的消耗量。</p>
<p>低效： </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT ACCT_NUM,</span><br><span class="line">       BALANCE_AMT</span><br><span class="line">FROM DEBIT_TRANSACTIONS</span><br><span class="line">WHERE TRAN_DATE = &#x27;31-DEC-95&#x27;</span><br><span class="line">UNION</span><br><span class="line">SELECT ACCT_NUM,</span><br><span class="line">       BALANCE_AMT</span><br><span class="line">FROM DEBIT_TRANSACTIONS</span><br><span class="line">WHERE TRAN_DATE = &#x27;31-DEC-95&#x27;</span><br></pre></td></tr></table></figure>
<p>高效: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT ACCT_NUM,</span><br><span class="line">       BALANCE_AMT</span><br><span class="line">FROM DEBIT_TRANSACTIONS</span><br><span class="line">WHERE TRAN_DATE = &#x27;31-DEC-95&#x27;</span><br><span class="line">  UNION ALL</span><br><span class="line">  SELECT ACCT_NUM,</span><br><span class="line">         BALANCE_AMT</span><br><span class="line">  FROM DEBIT_TRANSACTIONS WHERE TRAN_DATE = &#x27;31-DEC-95&#x27;</span><br></pre></td></tr></table></figure>
<h2 id="29-用WHERE替代ORDER-BY"><a href="#29-用WHERE替代ORDER-BY" class="headerlink" title="[29]用WHERE替代ORDER BY"></a>[29]用WHERE替代ORDER BY</h2><p>ORDER BY 子句只在两种严格的条件下使用索引</p>
<p>ORDER BY中所有的列必须包含在相同的索引中并保持在索引中的排列顺序</p>
<p>ORDER BY中所有的列必须定义为非空</p>
<p>WHERE子句使用的索引和ORDER BY子句中所使用的索引不能并列</p>
<p>例如: </p>
<p>表DEPT包含以下列: </p>
<p>DEPT_CODE PK NOT NULL </p>
<p>DEPT_DESC NOT NULL </p>
<p>DEPT_TYPE NULL</p>
<p>低效: (索引不被使用) </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT DEPT_CODE FROM  DEPT  ORDER BY  DEPT_TYPE </span><br></pre></td></tr></table></figure>
<p>高效: (使用索引) </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT DEPT_CODE  FROM  DEPT  WHERE  DEPT_TYPE &gt; 0</span><br></pre></td></tr></table></figure>
<h2 id="30-避免改变索引列的类型"><a href="#30-避免改变索引列的类型" class="headerlink" title="[30]避免改变索引列的类型"></a>[30]避免改变索引列的类型</h2><p>当比较不同数据类型的数据时, ORACLE自动对列进行简单的类型转换</p>
<p>假设 EMPNO是一个数值类型的索引列.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT …  FROM EMP  WHERE  EMPNO = &#x27;123&#x27; </span><br></pre></td></tr></table></figure>
<p>实际上,经过ORACLE类型转换, 语句转化为: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT …  FROM EMP  WHERE  EMPNO = TO_NUMBER(&#x27;123&#x27;) </span><br></pre></td></tr></table></figure>
<p>幸运的是,类型转换没有发生在索引列上,索引的用途没有被改变</p>
<p>现在,假设EMP_TYPE是一个字符类型的索引列</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT …  FROM EMP  WHERE EMP_TYPE = 123 </span><br></pre></td></tr></table></figure>
<p>这个语句被ORACLE转换为: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT …  FROM EMP  WHERETO_NUMBER(EMP_TYPE)=123 </span><br></pre></td></tr></table></figure>
<p>因为内部发生的类型转换, 这个索引将不会被用到! </p>
<p>为了避免ORACLE对你的SQL进行隐式的类型转换, 最好把类型转换用显式表现出来。 注意当字符和数值比较时, ORACLE会优先转换数值类型到字符类型</p>
<h2 id="31-需要当心的WHERE子句"><a href="#31-需要当心的WHERE子句" class="headerlink" title="[31]需要当心的WHERE子句"></a>[31]需要当心的WHERE子句</h2><p>某些SELECT 语句中的WHERE子句不使用索引<br>这里有一些例子</p>
<p>在下面的例子里, </p>
<ol>
<li>‘!&#x3D;’ 将不使用索引。记住, 索引只能告诉你什么存在于表中, 而不能告诉你什么不存在于表中</li>
<li>‘||’是字符连接函数. 就象其他函数那样, 停用了索引</li>
<li>‘+’是数学函数. 就象其他数学函数那样, 停用了索引</li>
<li>相同的索引列不能互相比较,这将会启用全表扫描</li>
</ol>
<h2 id="32-检索数据量超过表中30-索引失效"><a href="#32-检索数据量超过表中30-索引失效" class="headerlink" title="[32]检索数据量超过表中30%,索引失效"></a>[32]检索数据量超过表中30%,索引失效</h2><ol>
<li>如果检索数据量超过30%的表中记录数.使用索引将没有显著的效率提高</li>
<li>在特定情况下, 使用索引也许会比全表扫描慢, 但这是同一个数量级上的区别。 而通常情况下,使用索引比全表扫描要块几倍乃至几千倍!</li>
</ol>
<h2 id="33-避免使用耗费资源的操作"><a href="#33-避免使用耗费资源的操作" class="headerlink" title="[33]避免使用耗费资源的操作"></a>[33]避免使用耗费资源的操作</h2><p>带有DISTINCT,UNION,MINUS,INTERSECT,ORDER BY的SQL语句会启动SQL引擎<br>执行耗费资源的排序(SORT)功能。</p>
<p>DISTINCT需要一次排序操作, 而其他的至少需要执行两次排序。<br>通常, 带有UNION, MINUS , INTERSECT的SQL语句都可以用其他方式重写。</p>
<p>如果你的数据库的SORT_AREA_SIZE调配得好, 使用UNION , MINUS, INTERSECT也是可以考虑的, 毕竟它们的可读性很强。</p>
<h2 id="34-优化GROUP-BY"><a href="#34-优化GROUP-BY" class="headerlink" title="[34]优化GROUP BY"></a>[34]优化GROUP BY</h2><p>提高GROUP BY 语句的效率，可以通过将不需要的记录在GROUP BY 之前过滤掉。</p>
<p>下面两个查询返回相同结果但第二个明显就快了许多。</p>
<p>低效: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT JOB,</span><br><span class="line">       AVG(SAL)</span><br><span class="line">FROM EMP</span><br><span class="line">GROUP JOB</span><br><span class="line">HAVING JOB = &#x27;PRESIDENT&#x27;</span><br><span class="line">OR JOB = &#x27;MANAGER&#x27;</span><br></pre></td></tr></table></figure>
<p>高效: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT JOB,</span><br><span class="line">       AVG(SAL)</span><br><span class="line">FROM EMP</span><br><span class="line">WHERE JOB = &#x27;PRESIDENT&#x27; </span><br><span class="line">OR JOB = &#x27;MANAGER&#x27;</span><br><span class="line">GROUP JOB</span><br></pre></td></tr></table></figure>

<p>本文参考其他文章整理而来</p>
<p>出处：<a href="http://www.cnblogs.com/rootq/archive/2008/11/17/1334727.html" target="_blank">http://www.cnblogs.com/rootq/archive/2008/11/17/1334727.html</a></p>
<p>不过互联网上这篇文章很多，都没有版权注明。我也不知道原创是谁！</p>
]]></content>
      <tags>
        <tag>sql</tag>
        <tag>oracle</tag>
        <tag>oarcle优化</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle VM VirtualBox命令行打开虚拟机并且后台运行</title>
    <url>/20170219-Oracle-VM-VirtualBox%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%93%E5%BC%80%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B9%B6%E4%B8%94%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C/</url>
    <content><![CDATA[<p>这几天在折腾Ubuntu虚拟机，想着也就让他做一台服务器罢了</p>
<p>没想到安装之后发现一直没法让VirtualBox隐藏到托盘</p>
<p>按正常程序走，打开一个虚拟机会出现两个GUI界面：</p>
<ol>
<li>VirtualBox界面</li>
<li>虚拟机界面</li>
</ol>
<p>第一个可以在打开虚拟机之后关闭，第二个不能关闭也不能隐藏到托盘</p>
<p>痛苦！！！</p>
<h2 id="这里给出解决方案：通过cmd命令行启动并且后台运行一、进入VirtualBox安装目录，我这里是"><a href="#这里给出解决方案：通过cmd命令行启动并且后台运行一、进入VirtualBox安装目录，我这里是" class="headerlink" title="这里给出解决方案：通过cmd命令行启动并且后台运行一、进入VirtualBox安装目录，我这里是"></a>这里给出解决方案：通过cmd命令行启动并且后台运行<br>一、进入VirtualBox安装目录，我这里是</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\tool\Oracle\VirtualBox&gt;</span><br></pre></td></tr></table></figure>
<h2 id="二、列出所有安装的虚拟机"><a href="#二、列出所有安装的虚拟机" class="headerlink" title="二、列出所有安装的虚拟机"></a>二、列出所有安装的虚拟机</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\tool\Oracle\VirtualBox&gt;VBoxManage list vms</span><br><span class="line">&quot;centos&quot; &#123;162f777f-e3c4-4717-8b5b-4a4e43a8b552&#125;</span><br><span class="line">&quot;debian&quot; &#123;48ebecba-77ec-483d-ab73-bf9ee777e2f6&#125;</span><br><span class="line">&quot;ubuntu&quot; &#123;d8050b3a-b04b-4fe9-8a90-16086dac0ae9&#125;</span><br></pre></td></tr></table></figure>
<h2 id="前面是NAME，后面是UUID，之后的name用这连个代替都可以三、命令行启动虚拟机"><a href="#前面是NAME，后面是UUID，之后的name用这连个代替都可以三、命令行启动虚拟机" class="headerlink" title="前面是NAME，后面是UUID，之后的name用这连个代替都可以三、命令行启动虚拟机"></a>前面是NAME，后面是UUID，之后的<strong>name</strong>用这连个代替都可以<br>三、命令行启动虚拟机</h2><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\tool\Oracle\VirtualBox&gt;VBoxManage startvm &quot;ubuntu&quot; --type headless</span><br><span class="line">Waiting for VM &quot;ubuntu&quot; to power on...</span><br><span class="line">VM &quot;ubuntu&quot; has been successfully started.</span><br></pre></td></tr></table></figure>
<p>headless是在后台运行，并且默认开启vrdp服务，可以通过远程桌面工具来访问</p>
<p>下面是打开ubuntu之后用Xshell链接的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connecting to 127.0.0.1:2222...</span><br><span class="line">Connection established.</span><br><span class="line">To escape to local shell, press &#x27;Ctrl+Alt+]&#x27;.</span><br><span class="line"></span><br><span class="line">Welcome to Ubuntu 16.04 LTS (GNU/Linux 4.4.0-62-generic x86_64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com/</span><br><span class="line"></span><br><span class="line">362 个可升级软件包。</span><br><span class="line">0 个安全更新。</span><br><span class="line"></span><br><span class="line">Last login: Sat Feb 18 16:25:58 2017 from 10.0.2.2</span><br><span class="line">hisen@hisen-VirtualBox:~$ ls</span><br><span class="line">download  公共的  模板  视频  图片  文档  下载  音乐  桌面</span><br></pre></td></tr></table></figure>

<h2 id="四、所有相关的命令"><a href="#四、所有相关的命令" class="headerlink" title="四、所有相关的命令"></a>四、所有相关的命令</h2><p>下面所有的NAME都可以用二中的name和UUID代替</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 列出所有安装的虚拟机</span><br><span class="line">VBoxManage list vms</span><br><span class="line"></span><br><span class="line"># 后台打开，无界面</span><br><span class="line">VBoxManage startvm &quot;NAME&quot; --type headless </span><br><span class="line"></span><br><span class="line"># gui方式启动，跟桌面点击没有区别</span><br><span class="line">VBoxManage startvm NAME --type gui</span><br><span class="line"></span><br><span class="line"># 列出运行中的虚拟机</span><br><span class="line">VBoxManage list runningvms</span><br><span class="line"></span><br><span class="line"># 关闭虚拟机，等价于点击系统关闭按钮，正常关机</span><br><span class="line">VBoxManage controlvm NAME acpipowerbutton</span><br><span class="line"></span><br><span class="line"># 关闭虚拟机，等价于直接关闭电源，非正常关机</span><br><span class="line">VBoxManage controlvm NAME poweroff</span><br><span class="line"></span><br><span class="line"># 暂停虚拟机的运行</span><br><span class="line">VBoxManage controlvm NAME pause</span><br><span class="line"></span><br><span class="line"># 恢复暂停的虚拟机</span><br><span class="line">VBoxManage controlvm NAME resume</span><br><span class="line"></span><br><span class="line"># 保存当前虚拟机的运行状态</span><br><span class="line">VBoxManage controlvm NAME savestate </span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle 取微秒 - 记录点滴</title>
    <url>/20170923-Oracle-%E5%8F%96%E5%BE%AE%E7%A7%92-%E8%AE%B0%E5%BD%95%E7%82%B9%E6%BB%B4/</url>
    <content><![CDATA[<p>昨天在群里看到有人问怎么通过sql在oracle中取微秒</p>
<p>以前没有遇到过，就搜索了一下，找了一会给找到了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select to_char(systimestamp, &#x27;yyyy-mm-dd hh24:mi:ss ff&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<p>输出:年-月-日 时:分:秒 微秒</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2017-9-24 10:38:27 129368</span><br></pre></td></tr></table></figure>
<p>很少问题是搜索引擎找不到的，学会如何描述问题才是关键</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>sql</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle中exists在update中无法限制住条件，在select中可以</title>
    <url>/20170323-Oracle%E4%B8%ADexists%E5%9C%A8update%E4%B8%AD%E6%97%A0%E6%B3%95%E9%99%90%E5%88%B6%E4%BD%8F%E6%9D%A1%E4%BB%B6%EF%BC%8C%E5%9C%A8select%E4%B8%AD%E5%8F%AF%E4%BB%A5/</url>
    <content><![CDATA[<p>这个问题是自己写的一个bug，标示不知道原因是什么</p>
<p>现在暂时使用 in 代替解决了</p>
<p>下面的查询是能限制住acct_type</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT ew.customer_id,cf.acct_type</span><br><span class="line">FROM ew_quota_info ew,</span><br><span class="line">     cf_customer cf</span><br><span class="line">WHERE cf.acct_type in(2,3)</span><br><span class="line">  AND ew.customer_id = cf.id</span><br></pre></td></tr></table></figure>
<p>但是在update的时候,会把acct_type&#x3D;1的也更新了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update ew_quota_info ew</span><br><span class="line">set ew.all_amt = 100000</span><br><span class="line">where exists(</span><br><span class="line">SELECT ew.customer_id</span><br><span class="line">FROM ew_quota_info ew,</span><br><span class="line">     cf_customer cf</span><br><span class="line">WHERE cf.acct_type in(2,3)</span><br><span class="line">  AND ew.customer_id = cf.id</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>oracle全局查找某字段所在的表</title>
    <url>/20170612-Oracle%E5%85%A8%E5%B1%80%E6%9F%A5%E6%89%BE%E6%9F%90%E5%AD%97%E6%AE%B5%E6%89%80%E5%9C%A8%E7%9A%84%E8%A1%A8/</url>
    <content><![CDATA[<p>下面这个存储过程是查找数据库中某个字段值为：hisen 的表</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">declare</span><br><span class="line">l_cnt    varchar2(20);</span><br><span class="line">v_sql  varchar2(4000);</span><br><span class="line">v_tablename varchar(200);</span><br><span class="line">  cursor cursor_jsdx is select &#x27;select count(*) from &#x27; || table_name || &#x27; where NAME=&#x27;&#x27;hisen&#x27;&#x27;&#x27;,table_name from user_tab_columns where column_name=&#x27;NAME&#x27;;</span><br><span class="line">  --注：这里的字段名要大写</span><br><span class="line">begin</span><br><span class="line">     open cursor_jsdx;</span><br><span class="line">     Loop</span><br><span class="line">            fetch cursor_jsdx into v_sql,v_tablename;</span><br><span class="line">            exit when cursor_jsdx%notfound;</span><br><span class="line">            execute immediate v_sql       into l_cnt;           </span><br><span class="line">         if l_cnt &gt;0 then   </span><br><span class="line">         ---如果该表有那内容的就打印那个表的名字。</span><br><span class="line">            dbms_output.put_line(v_tablename);</span><br><span class="line">         end if;</span><br><span class="line">     end loop;</span><br><span class="line">    Close cursor_jsdx;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle 分页的三种方式</title>
    <url>/20170411-Oracle%E5%88%86%E9%A1%B5%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<p>第一种：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select *</span><br><span class="line">  from (select t.*, rownum rn</span><br><span class="line">          from (select * from EW_AUTH_FLOW) t</span><br><span class="line">         where rownum &lt;= 5)</span><br><span class="line"> where rn &gt; 2;</span><br></pre></td></tr></table></figure>
<p>第二种：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select *</span><br><span class="line">  from (select t.*, rownum rn from ew_auth_flow t where rownum &lt;= 5)</span><br><span class="line"> where rn &gt; 2;</span><br></pre></td></tr></table></figure>
<p>第三种：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select *</span><br><span class="line">  from (select t.*, rownum rn from ew_auth_flow t)</span><br><span class="line"> where rn between 2 and 5;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle性能优化常用的SQL</title>
    <url>/20170329-Oracle%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B8%B8%E7%94%A8%E7%9A%84SQL/</url>
    <content><![CDATA[<p>使用如下sql能查出相应的信息，oracle博大精深要掌握得花时间</p>
<p>太长了，来个阅读全文吧</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--显示数据库当前连接数</span><br><span class="line">select count(*) from v$process;</span><br><span class="line"></span><br><span class="line">--显示数据库最大连接数</span><br><span class="line">select value from v$parameter where name =&#x27;processes&#x27;;</span><br><span class="line"></span><br><span class="line">--修改最大Oracle最大连接数:</span><br><span class="line">alter system set processes = 300 scope = spfile;</span><br><span class="line"></span><br><span class="line">--显示当前session连接数</span><br><span class="line">select count(*) from v$session;</span><br><span class="line"></span><br><span class="line">--查看当前有哪些用户正在使用数据</span><br><span class="line">SELECT osuser, a.username,cpu_time/executions/1000000||&#x27;s&#x27;, sql_fulltext,machine from v$session a, v$sqlarea b where a.sql_address =b.address order by cpu_time/executions desc;</span><br><span class="line"></span><br><span class="line">--查看连接oracle的所有机器的连接数</span><br><span class="line">select machine,count(*) from v$session group by machine;</span><br><span class="line"></span><br><span class="line">--查看连接oracle的所有机器的连接数和状态</span><br><span class="line">select machine,status,count(*) from v$session group by machine,status order by status;</span><br><span class="line"></span><br><span class="line">--查看消耗磁盘读取最多的SQL Top 5：</span><br><span class="line">select disk_reads,sql_text,SQL_FULLTEXT</span><br><span class="line">from (select sql_text,disk_reads,SQL_FULLTEXT,</span><br><span class="line">   dense_rank() over</span><br><span class="line">     (order by disk_reads desc) disk_reads_rank</span><br><span class="line">   from v$sql)</span><br><span class="line">where disk_reads_rank &lt;=5;</span><br><span class="line"></span><br><span class="line">--开始</span><br><span class="line">--通过linux中消耗资源高的进程号获取oracle消耗资源的sql语句：</span><br><span class="line">--1.linux中使用top命名查看oracle进程中消耗资源最高的进程号；</span><br><span class="line">--2.oracle中使用命令：</span><br><span class="line">select c.spid,a.p1,a.p1raw,a.p2,a.event,b.sql_text,b.SQL_FULLTEXT,b.SQL_ID</span><br><span class="line">from v$session a,v$sql b,v$process c</span><br><span class="line">where a.wait_class&lt;&gt;&#x27;Idle&#x27; and a.sql_id=b.sql_id and a.PADDR=c.addr</span><br><span class="line">order by event;</span><br><span class="line">--3.查询结果显示出各个sql语句对应的进程号，从中找出top命令中对应消耗资源高的进程号即可找到相应的sql语句。</span><br><span class="line">--结束</span><br><span class="line"></span><br><span class="line">--判断回滚段竞争的SQL语句：（当Ratio大于2时存在回滚段竞争，需要增加更多的回滚段）</span><br><span class="line">select rn.name, rs.GETS, rs.WAITS, (rs.WAITS / rs.GETS) * 100 ratio</span><br><span class="line">from v$rollstat rs, v$rollname rn</span><br><span class="line">where rs.USN = rn.usn;</span><br><span class="line"></span><br><span class="line">---判断恢复日志竞争的SQL语句：（immediate_contention或wait_contention的值大于1时存在竞争）</span><br><span class="line">select name,</span><br><span class="line">(t.IMMEDIATE_MISSES / decode((t.IMMEDIATE_GETS + t.IMMEDIATE_MISSES),0,-1,(t.IMMEDIATE_GETS + t.IMMEDIATE_MISSES))) * 100 immediate_contention,</span><br><span class="line">(t.MISSES / decode((t.GETS + t.MISSES), 0, -1, (t.GETS + t.MISSES))) * 100 wait_contention</span><br><span class="line">from v$latch t</span><br><span class="line">where name in (&#x27;redo copy&#x27;, &#x27;redo allocation&#x27;);</span><br><span class="line"></span><br><span class="line">--判断表空间碎片：（如果最大空闲空间占总空间很大比例则可能不存在碎片，如果比例较小，且有许多空闲空间，则可能碎片很多）</span><br><span class="line">select t.tablespace_name,</span><br><span class="line">sum(t.bytes),</span><br><span class="line">max(t.bytes),</span><br><span class="line">count(*),</span><br><span class="line">max(t.bytes) / sum(t.bytes) radio</span><br><span class="line">from dba_free_space t</span><br><span class="line">group by t.tablespace_name</span><br><span class="line">order by t.tablespace_name;</span><br><span class="line"></span><br><span class="line">--确定命中排序域的次数：</span><br><span class="line">select t.NAME, t.VALUE from v$sysstat t where t.NAME like &#x27;sort%&#x27;</span><br><span class="line"></span><br><span class="line">--查看当前SGA值：SGA(System Global Area)系统全局区。这是一个非常庞大的内存区间</span><br><span class="line">select * from v$sga;</span><br><span class="line"></span><br><span class="line">--确定高速缓冲区命中率：（如果命中率低于70％，则应该加大init.ora参数中的DB_BLOCK_BUFFER的值）</span><br><span class="line">select 1 - sum(decode(name, &#x27;physical reads&#x27;, value, 0)) /</span><br><span class="line">(sum(decode(name, &#x27;db block gets&#x27;, value, 0)) +</span><br><span class="line">sum(decode(name, &#x27;consistent gets&#x27;, value, 0))) hit_ratio</span><br><span class="line">from v$sysstat t</span><br><span class="line">where name in (&#x27;physical reads&#x27;, &#x27;db block gets&#x27;, &#x27;consistent gets&#x27;);</span><br><span class="line"></span><br><span class="line">--确定共享池中的命中率：（如果ratio1大于1时，需要加大共享池，如果ratio2大于10％时，需要加大共享池SHARED_POOL_SIZE）</span><br><span class="line">select * from</span><br><span class="line">(</span><br><span class="line">  select sum(pins) pins,</span><br><span class="line">  sum(reloads) reloads,</span><br><span class="line">  (sum(reloads) / sum(pins)) * 100 ratio1</span><br><span class="line">  from v$librarycache</span><br><span class="line">),</span><br><span class="line">(</span><br><span class="line">  select sum(gets) gets,</span><br><span class="line">  sum(getmisses) getmisses,</span><br><span class="line">  (sum(getmisses) / sum(gets)) * 100 ratio2</span><br><span class="line">  from v$rowcache</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">--查询INIT.ORA参数：</span><br><span class="line">select * from v$parameter;</span><br><span class="line"></span><br><span class="line">--求当前会话的SID，SERIAL#</span><br><span class="line">SELECT Sid, Serial# FROM V$session</span><br><span class="line">WHERE Audsid = Sys_Context(&#x27;USERENV&#x27;, &#x27;SESSIONID&#x27;);</span><br><span class="line"></span><br><span class="line">--查询session的OS进程ID(有输入)</span><br><span class="line">SELECT p.Spid &quot;OS Thread&quot;, b.NAME &quot;Name-User&quot;, s.Program, s.Sid, s.Serial#,s.Osuser, s.Machine</span><br><span class="line">FROM V$process p, V$session s, V$bgprocess b</span><br><span class="line">WHERE p.Addr = s.Paddr</span><br><span class="line">AND p.Addr = b.Paddr And (s.sid=&amp;1 or p.spid=&amp;1)</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT p.Spid &quot;OS Thread&quot;, s.Username &quot;Name-User&quot;, s.Program, s.Sid,s.Serial#, s.Osuser, s.Machine</span><br><span class="line">FROM V$process p, V$session s</span><br><span class="line">WHERE p.Addr = s.Paddr</span><br><span class="line">And (s.sid=&amp;1 or p.spid=&amp;1)</span><br><span class="line">AND s.Username IS NOT NULL;</span><br><span class="line"></span><br><span class="line">--查看锁（lock）情况</span><br><span class="line">SELECT /*+ RULE */ Ls.Osuser Os_User_Name, Ls.Username User_Name,Decode(Ls.TYPE,</span><br><span class="line">&#x27;RW&#x27;, &#x27;Row wait enqueue lock&#x27;, &#x27;TM&#x27;, &#x27;DML enqueue lock&#x27;,&#x27;TX&#x27;, &#x27;Transaction enqueue lock&#x27;, &#x27;UL&#x27;, &#x27;User supplied lock&#x27;) Lock_Type,o.Object_Name OBJECT,Decode(Ls.Lmode,1, NULL, 2, &#x27;Row Share&#x27;, 3, &#x27;Row Exclusive&#x27;,</span><br><span class="line">4, &#x27;Share&#x27;, 5, &#x27;Share Row Exclusive&#x27;, 6, &#x27;Exclusive&#x27;,NULL) Lock_Mode,o.Owner, Ls.Sid, Ls.Serial# Serial_Num, Ls.Id1, Ls.Id2 FROM Sys.Dba_Objects o,</span><br><span class="line">(SELECT s.Osuser, s.Username, l.TYPE, l.Lmode, s.Sid, s.Serial#, l.Id1,l.Id2 FROM V$session s, V$lock l</span><br><span class="line">WHERE s.Sid = l.Sid) Ls</span><br><span class="line">WHERE o.Object_Id = Ls.Id1</span><br><span class="line">AND o.Owner &lt;&gt; &#x27;SYS&#x27;</span><br><span class="line">ORDER BY o.Owner, o.Object_Name;</span><br><span class="line"></span><br><span class="line">--查看等待（wait）情况</span><br><span class="line">SELECT Ws.CLASS, Ws.COUNT COUNT, SUM(Ss.VALUE) Sum_Value</span><br><span class="line">FROM V$waitstat Ws, V$sysstat Ss</span><br><span class="line">WHERE Ss.NAME IN (&#x27;db block gets&#x27;, &#x27;consistent gets&#x27;)</span><br><span class="line">GROUP BY Ws.CLASS, Ws.COUNT;</span><br><span class="line"></span><br><span class="line">--求process/session的状态</span><br><span class="line">SELECT p.Pid, p.Spid, s.Program, s.Sid, s.Serial#</span><br><span class="line">FROM V$process p, V$session s</span><br><span class="line">WHERE s.Paddr = p.Addr;</span><br><span class="line"></span><br><span class="line">--查看表空间的名称及大小</span><br><span class="line">select t.tablespace_name, round(sum(bytes/(1024*1024)),0) ts_size</span><br><span class="line">from dba_tablespaces t, dba_data_files d</span><br><span class="line">where t.tablespace_name = d.tablespace_name</span><br><span class="line">group by t.tablespace_name;</span><br><span class="line"></span><br><span class="line">--查看表空间物理文件的名称及大小</span><br><span class="line">select tablespace_name, file_id, file_name,</span><br><span class="line">round(bytes/(1024*1024),0) total_space</span><br><span class="line">from dba_data_files</span><br><span class="line">order by tablespace_name;</span><br><span class="line"></span><br><span class="line">--查看回滚段名称及大小</span><br><span class="line">select segment_name, tablespace_name, r.status,</span><br><span class="line">(initial_extent/1024) InitialExtent,(next_extent/1024) NextExtent,</span><br><span class="line"></span><br><span class="line">--查看控制文件</span><br><span class="line">select name from v$controlfile;</span><br><span class="line"></span><br><span class="line">--查看日志文件</span><br><span class="line">select member from v$logfile;</span><br><span class="line"></span><br><span class="line">--查看表空间的使用情况</span><br><span class="line">select sum(bytes)/(1024*1024) as free_space,tablespace_name</span><br><span class="line">from dba_free_space</span><br><span class="line">group by tablespace_name;</span><br><span class="line">SELECT A.TABLESPACE_NAME,A.BYTES TOTAL,B.BYTES USED, C.BYTES FREE,</span><br><span class="line">(B.BYTES*100)/A.BYTES &quot;% USED&quot;,(C.BYTES*100)/A.BYTES &quot;% FREE&quot;</span><br><span class="line">FROM SYS.SM$TS_AVAIL A,SYS.SM$TS_USED B,SYS.SM$TS_FREE C</span><br><span class="line">WHERE A.TABLESPACE_NAME=B.TABLESPACE_NAME AND A.TABLESPACE_NAME=C.TABLESPACE_NAME;</span><br><span class="line"></span><br><span class="line">--捕捉运行很久的SQL</span><br><span class="line">select username,sid,opname,</span><br><span class="line">round(sofar*100 / totalwork,0) || &#x27;%&#x27; as progress,</span><br><span class="line">time_remaining,sql_text</span><br><span class="line">from v$session_longops , v$sql</span><br><span class="line">where time_remaining &lt;&gt; 0</span><br><span class="line">and sql_address = address</span><br><span class="line">and sql_hash_value = hash_value</span><br><span class="line"></span><br><span class="line">--耗资源的进程（top session）</span><br><span class="line">select s.schemaname schema_name, decode(sign(48 - command), 1,</span><br><span class="line">to_char(command), &#x27;Action Code #&#x27; || to_char(command) ) action, status</span><br><span class="line">session_status, s.osuser os_user_name, s.sid, p.spid , s.serial# serial_num,</span><br><span class="line">nvl(s.username, &#x27;[Oracle process]&#x27;) user_name, s.terminal terminal,</span><br><span class="line">s.program program, st.value criteria_value from v$sesstat st, v$session s , v$process p</span><br><span class="line">where st.sid = s.sid and st.statistic# = to_number(&#x27;38&#x27;) and (&#x27;ALL&#x27; = &#x27;ALL&#x27;</span><br><span class="line">or s.status = &#x27;ALL&#x27;) and p.addr = s.paddr order by st.value desc, p.spid asc, s.username asc, s.osuser asc</span><br><span class="line"></span><br><span class="line">--查看有哪些实例在运行：</span><br><span class="line">select * from v$active_instances;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>PLSQL注册码 - 9999/12/31</title>
    <url>/20170214-PLSQL%E6%B3%A8%E5%86%8C%E7%A0%81-9999-12-31/</url>
    <content><![CDATA[<p><strong>PLSQL注册码</strong><br>过期时间为：9999&#x2F;12&#x2F;31</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Registration successful</span><br><span class="line"></span><br><span class="line">01.601769 - unlimited user licence</span><br><span class="line">service contract：9999/12/31</span><br></pre></td></tr></table></figure>
<hr>
<p>Product Code：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">4t46t6vydkvsxekkvf3fjnpzy5wbuhphqz</span><br></pre></td></tr></table></figure>
<p>serial Number：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">601769</span><br></pre></td></tr></table></figure>
<p>password：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xs374ca</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>PLSQL</tag>
      </tags>
  </entry>
  <entry>
    <title>介绍 | RASP</title>
    <url>/20211105-RASP-introduce/</url>
    <content><![CDATA[<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>翻看书签的时候偶然发现 RASP 两个收藏<br>脑子里毫无相关内容，细看之下，收获不小<br>ps：是不是看看收藏夹，能有意外收获</p>
<p>安全无小事，从点滴做起。<strong>要有安全意识</strong>。<br>安全投入的比例，可以根据公司所处的行业公司规模进行相应调整。<br>安全投入包括：软件安全设计、招人、买设备、买服务、做评估。</p>
<h1 id="二、介绍"><a href="#二、介绍" class="headerlink" title="二、介绍"></a>二、介绍</h1><h2 id="2-1-RASP-是什么"><a href="#2-1-RASP-是什么" class="headerlink" title="2.1 RASP 是什么"></a>2.1 RASP 是什么</h2><p>RASP( Runtime Application Self-Protection )是一种在运行时检测攻击并且进行自我保护的一种技术。</p>
<img src="/images/OpenRASP.png" class="" width="1339" height="632" title="OpenRASP 架构 " alt="OpenRASP 架构">

<h2 id="2-2-RASP-优缺点"><a href="#2-2-RASP-优缺点" class="headerlink" title="2.2 RASP 优缺点"></a>2.2 RASP 优缺点</h2><p>化繁为简，抓住事情的本质，这就是优势。</p>
<span id="more"></span>
<p>做一件事，方式方法有很多，最终的目的都一样。<br>对于安全来说，攻击方式千变万化，但是”攻击动作”万变不离其宗。<br>RASP 通过监控”攻击动作”进行自我保护，而不是对攻击方式的识别与防御。</p>
<h3 id="2-2-1-优势"><a href="#2-2-1-优势" class="headerlink" title="2.2.1 优势"></a>2.2.1 优势</h3><ul>
<li>通过 hook，深度监控应用执行。</li>
<li>运行时自动识别处理用户输入威胁。</li>
<li>以 Agent 方式运行，不侵入应用程序。</li>
</ul>
<p>攻击动作</p>
<ul>
<li>文件上传</li>
<li>文件读取</li>
<li>文件写入</li>
<li>文件重命名</li>
<li>文件遍历</li>
<li>命令执行</li>
<li>反序列化</li>
<li><a href="https://rasp.baidu.com/doc/hacking/architect/hook.html?from=openrasp_internals">…更多请看</a></li>
</ul>
<h3 id="2-2-2-劣势"><a href="#2-2-2-劣势" class="headerlink" title="2.2.2 劣势"></a>2.2.2 劣势</h3><ul>
<li>性能有一定影响，单次请求影响 1~7 ms</li>
</ul>
<h2 id="2-3-RASP-与-WAF、IDS"><a href="#2-3-RASP-与-WAF、IDS" class="headerlink" title="2.3 RASP 与 WAF、IDS"></a>2.3 RASP 与 WAF、IDS</h2><p>当发生 SQL 注入攻击时，WAF 和 IDS 只能看到 HTTP 请求。<br>而 RASP 不但能看到完整 SQL 语句，还可以和 HTTP 请求关联，<br>并结合语义引擎、用户输入识别等能力，实现对 SQL 注入的检测。<br>ps：WAF 可以理解为安全网关，门卫。IDS 入侵检测系统。</p>
<h1 id="三、参考"><a href="#三、参考" class="headerlink" title="三、参考"></a>三、参考</h1><ul>
<li><a href="https://rasp.baidu.com/doc/hacking/architect/main.html#background">OpenRASP - 架构说明</a></li>
<li><a href="https://rasp.baidu.com/doc/hacking/architect/hook.html?from=openrasp_internals">OpenRASP - Hook 函数列表</a></li>
<li><a href="https://paper.seebug.org/513/">Java RASP浅析——以百度OpenRASP为例</a></li>
<li><a href="http://blog.nsfocus.net/sdl/">【软件安全设计】安全开发生命周期（SDL）</a></li>
<li><a href="https://github.com/Tencent/secguide/blob/main/Java%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97.md#2">Tencent - Java安全指南</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>soft</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis counter demo -  redis并发计数器</title>
    <url>/20180111-Redis%20counter%20demo%20-%20%20redis%E5%B9%B6%E5%8F%91%E8%AE%A1%E6%95%B0%E5%99%A8/</url>
    <content><![CDATA[<h1 id="一、说明"><a href="#一、说明" class="headerlink" title="一、说明"></a>一、说明</h1><p>利用redis操作的原子性，实现Java 多线程并发的情况下实现计数器。</p>
<p>我本机测试多个线程操作之后，结果会出现一定的延迟，但是最终数字是ok的</p>
<p>应该是redis内部做了一个类似于队列的功能。</p>
<p>需要注意的是，得使用redis连接的线程池，不然会出现异常</p>
<p>这里有一个：<a href="https://github.com/hisenyuan/IDEAPractice/blob/master/src/main/Java/com/hisen/utils/JedisUtil.Java">JedisUtil</a> 下面用到了</p>
<h1 id="二、-代码实现"><a href="#二、-代码实现" class="headerlink" title="二、 代码实现"></a>二、 代码实现</h1><h2 id="2-1-redis操作类"><a href="#2-1-redis操作类" class="headerlink" title="2.1 redis操作类"></a>2.1 redis操作类</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.thread.count_click_by_redis;</span><br><span class="line"></span><br><span class="line">import com.hisen.utils.JedisUtil;</span><br><span class="line">import redis.clients.jedis.JedisPool;</span><br><span class="line">/**</span><br><span class="line"> * @author hisenyuan</span><br><span class="line"> * @description 操作redis的线程类</span><br><span class="line"> */</span><br><span class="line">public class ClickRedis &#123;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 必须使用线程池，而且线程池要大于并发数，否则会出现redis超时</span><br><span class="line">   */</span><br><span class="line">  private static JedisPool jedis = JedisUtil.getPool();</span><br><span class="line"></span><br><span class="line">  public static void click() &#123;</span><br><span class="line">    jedis.getResource().incrBy(&quot;hisen&quot;, 1);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public static int getCount() &#123;</span><br><span class="line">    return Integer.parseInt(jedis.getResource().get(&quot;hisen&quot;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public static void declare() &#123;</span><br><span class="line">    jedis.getResource().del(&quot;hisen&quot;);</span><br><span class="line">    jedis.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-2-线程类-模拟点击"><a href="#2-2-线程类-模拟点击" class="headerlink" title="2.2 线程类,模拟点击"></a>2.2 线程类,模拟点击</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.thread.count_click_by_redis;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author hisenyuan</span><br><span class="line"> * @description 执行点击的线程类</span><br><span class="line"> */</span><br><span class="line">public class CountClickByRedisThread extends Thread&#123;</span><br><span class="line"></span><br><span class="line">  private int id;</span><br><span class="line">  public CountClickByRedisThread(int id) &#123;</span><br><span class="line">    this.id = id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void run() &#123;</span><br><span class="line">    super.run();</span><br><span class="line">    ClickRedis.click();</span><br><span class="line">    int count = ClickRedis.getCount();</span><br><span class="line">    System.out.println(&quot;task:&quot; + id + &quot;\t 执行完毕\t线程编号：&quot; + this.getId() + &quot;\t当前值：&quot; + count);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.3 主线程 - 启动类</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.thread.count_click_by_redis;</span><br><span class="line"></span><br><span class="line">import Java.util.concurrent.ArrayBlockingQueue;</span><br><span class="line">import Java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line">import Java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line"></span><br><span class="line">  public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 5 - corePoolSize：核心池的大小</span><br><span class="line">     * 10 - maximumPoolSize：线程池最大线程数，它表示在线程池中最多能创建多少个线程</span><br><span class="line">     * 200 - keepAliveTime：表示线程没有任务执行时最多保持多久时间会终止。</span><br><span class="line">     * unit - unit：参数keepAliveTime的时间单位，有7种取值</span><br><span class="line">     * workQueue：一个阻塞队列，用来存储等待执行的任务</span><br><span class="line">     */</span><br><span class="line">    ThreadPoolExecutor executor = new ThreadPoolExecutor(</span><br><span class="line">        50,</span><br><span class="line">        100,</span><br><span class="line">        200,</span><br><span class="line">        TimeUnit.MICROSECONDS,</span><br><span class="line">        new ArrayBlockingQueue&lt;Runnable&gt;(50));</span><br><span class="line">    // 开启50个线程</span><br><span class="line">    for (int i = 0; i &lt; 50; i++) &#123;</span><br><span class="line">      executor.execute(new CountClickByRedisThread(i));</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(&quot;已经开启所有的子线程&quot;);</span><br><span class="line">    // 启动一次顺序关闭，执行以前提交的任务，但不接受新任务。</span><br><span class="line">    executor.shutdown();</span><br><span class="line">    // 判断所有线程是否已经执行完毕</span><br><span class="line">    while (true) &#123;</span><br><span class="line">      if (executor.isTerminated()) &#123;</span><br><span class="line">        System.out.println(&quot;所有的子线程都结束了！&quot;);</span><br><span class="line">        // 清除redis数据</span><br><span class="line">        ClickRedis.declare();</span><br><span class="line">        break;</span><br><span class="line">      &#125;</span><br><span class="line">      Thread.sleep(100);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机科学与技术反思录【转】</title>
    <url>/20240509-Reflection-on-Computer-Science-and-Technology/</url>
    <content><![CDATA[<h1 id="0-背景"><a href="#0-背景" class="headerlink" title="0. 背景"></a>0. 背景</h1><p>本文来自一朋友给转发的 txt 文件。</p>
<p>朋友说：</p>
<blockquote>
<p>对我产生深远影响的一篇帖子，改变了我的命运。<br>2008 年毕业后，就再也没有见过这篇文章，今天在网盘偶然翻到了，分享给大家。<br>还是大一的时候，一位计算机专业的老师转给了我这篇文章，后来我基本上都按里面的教材来学习的。<br>作为本科生，应届加入菊花厂(最核心的预研部门)，这篇文章对我的启发起到了至关重要的作用。<br>没有这篇文章的引导，我的大学很可能是懵懵懂懂中度过的。<br>这篇文章清晰的说明了<strong>计算机系</strong>的学生：<strong>应该学什么，为什么要学这些，怎么学</strong>。</p>
</blockquote>
<p>我说：</p>
<blockquote>
<p>虽然这篇文章有争议( 因抄袭了另外一位大师的文章而被人喷了 )<br>但是确实把<strong>计算机科学与技术</strong>来龙去脉讲清楚了，而且给出了清晰的学习路径，值得学习&#x2F;分享。</p>
</blockquote>
<h1 id="1-正文"><a href="#1-正文" class="headerlink" title="1. 正文"></a>1. 正文</h1><p>发信人: bolshevist (猛士), 信区: CS<br>标 题: 计算机科学与技术反思录【转】<br>发信站: 瀚海星云 (Fri Dec 26 13:42:49 2003)</p>
<p>作者：曾毅</p>
<p>计算机科学与技术这一门科学深深的吸引着我们这些同学们，上计算机系已经有近三年了，自己也做了一些思考,我一直认为计算机科学与技术这门专业，在本科阶段是不可能切分成计算机科学和计算机技术的，因为计算机科学需要相当多的实践，而实践需要技术；每一个人(包括非计算机专业)，掌握简单的计算机技术都很容易（包括程序设计），但计算机专业的优势就在于，我们掌握许多其他专业并不“深究”的东西，例如，算法，体系结构，等等。非计算机专业的人可以很容易地做一个芯片，写一段程序，但他们做不出计算机专业能够做出来的大型系统。今天我想专门谈一谈计算机科学，并将重点放在计算理论上。</p>
<span id="more"></span>

<p>计算机理论的一个核心问题——从数学谈起：记得当年大一入学，每周六课时高等数学，天天作业不断(那时是六日工作制)。颇有些同学惊呼走错了门:咱们这到底念的是什么系？不错，你没走错门，这就是计算机科学与技术系。我国计算机科学系里的传统是培养做学术研究，尤其是理论研究的人（方向不见得有问题，但是做得不是那么尽如人意）。而计算机的理论研究，说到底了，如网络安全，图形图像学，视频音频处理，哪个方向都与数学有着很大的关系，虽然也许是正统数学家眼里非主流的数学。这里我还想阐明我的一个观点：我们都知道，数学是从实际生活当中抽象出来的理论，人们之所以要将实际抽象成理论，目的就在于想用抽象出来的理论去更好的指导实践，有些数学研究工作者喜欢用一些现存的理论知识去推导若干条推论，殊不知其一：问题考虑不全很可能是个错误的推论，其二：他的推论在现实生活中找不到原型，不能指导实践。严格的说，我并不是一个理想主义者，政治课上学的理论联系实际一直是指导我学习科学文化知识的航标（至少我认为搞计算机科学与技术的应当本着这个方向）。其实我们计算机系学数学光学高等数学是不够的（典型的工科院校一般都开的是高等数学），我们应该像数学系一样学一<strong>下数学分析</strong>（清华计算机系开的好像就是数学分析），数学分析这门科学，咱们学计算机的人对它有很复杂的感情。在于它是偏向于证明型的数学课程，这对我们培养良好的分析能力极有帮助。我的软件工程学导师北工大数理学院的王仪华先生就曾经教导过我们，<strong>数学系的学生到软件企业中大多作软件设计与分析工作，而计算机系的学生做程序员的居多，原因就在于数学系的学生分析推理能力，从所受训练的角度上要远远在我们之上</strong>。</p>
<p>当年出现的怪现象是：计算机系学生的高中数学基础在全校数一数二(希望没有冒犯其它系的同学)，教学课时数也仅次于数学系，但学完之后的效果却不尽如人意。难道都是学生不努力吗，我看未见得，方向错了也说不一定，其中原因何在，发人深思。我个人的浅见是：计算机系的学生，对数学的要求固然跟数学系不同，跟物理类差别则更大。通常非数学专业的所谓“高等数学”，无非是把数学分析中较困难的理论部分删去，强调套用公式计算而已。而对计算机系来说，数学分析里用处最大的恰恰是被删去的理论部分。说得难听一点，对计算机系学生而言，追求算来算去的所谓“工程数学”已经彻底地走进了误区。记上一堆曲面积分的公式，难道就能算懂了数学？那倒不如现用现查，何必费事记呢？再不然直接用 Mathematics 或是 Matalab 好了。</p>
<p>我在系里最爱做的事情就是给学弟学妹们推荐参考书。<strong>中文的数学分析书，一般都认为以北大张筑生老师的“数学分析新讲”为最好</strong>。万一你的数学实在太好，那就去看菲赫金哥尔茨的“微积分学教程”好了–但我认为没什么必要，毕竟你不想转到数学系去。吉米多维奇的“数学分析习题集”也基本上是计算型的东东。书的名气很大，倒不见得适合我们，<strong>还是那句话，重要的是数学思想的建立，生活在信息社会里我们求的是高效，计算这玩意还是留给计算机吧</strong>。不过现在多用的似乎是复旦大学的《数学分析》也是很好的教材。中国的所谓高等代数，就等于线性代数加上一点多项式理论。我以为这有好的一面，因为可以让学生较早感觉到代数是一种结构，而非一堆矩阵翻来覆去。这里不得不提南京大学林成森，盛松柏两位老师编的“高等代数”，感觉相当舒服。此书相当全面地包含了关于多项式和线性代数的基本初等结果，同时还提供了一些有用的又比较深刻的内容，如 Sturm 序列，Shermon-Morrison 公式，广义逆矩阵等等。可以说，作为本科生如能吃透此书，就可以算高手。国内较好的高等代数教材还有清华计算机系用的那本，清华出版社出版，书店里多多，一看就知道。从抽象代的观点来看，高等代数里的结果不过是代数系统性质的一些例子而已。莫宗坚先生的《代数学》里，对此进行了深刻的讨论。然而莫先生的书实在深得很，作为本科生恐怕难以接受，不妨等到自己以后成熟了一些再读。正如上面所论述的，计算机系的学生学习高等数学：知其然更要知其所以然。你学习的目的应该是：<strong>将抽象的理论再应用于实践</strong>，不但要掌握题目的解题方法，更要掌握解题思想，对于定理的学习：不是简单的应用，而是掌握证明过程即掌握定理的由来，训练自己的推理能力。只有这样才达到了学习这门科学的目的，同时也缩小了我们与数学系的同学之间思维上的差距。</p>
<p>概率论与数理统计这门课很重要，可惜大多数院校讲授这门课都会少些东西。少了的东西现在看至少有随机过程。到毕业还没有听说过 Markov 过程，此乃计算机系学生的耻辱。没有随机过程，你怎么分析网络和分布式系统？怎么设计随机化算法和协议？据说清华计算机系开有“随机数学”，早就是必修课。另外，离散概率论对计算机系学生来说有特殊的重要性。而我们国家工程数学讲的都是连续概率。现在，美国已经有些学校开设了单纯的“离散概率论”课程，干脆把连续概率删去，把离散概率讲深些。我们不一定要这么做，但应该更加强调离散概率是没有疑问的。这个工作我看还是尽早的做为好。</p>
<p>计算方法学（有些学校也称为数学分析学）是最后一门由数理学院给我们开的课。一般学生对这门课的重视程度有限，以为没什么用。不就是照套公式嘛！其实，做图形图像可离不开它，密码学搞深了也离不开它。而且，在很多科学工程中的应用计算，都以数值的为主。这门课有两个极端的讲法：一个是古典的“数值分析”，完全讲数学原理和算法；另一个是现在日趋流行的“科学与工程计算”，干脆教学生用软件包编程。我个人认为，计算机系的学生一定要认识清楚我们计算机系的学生为什么要学这门课，我是很偏向于学好理论后用计算机实现的，最好使用 C 语言或 C++ 编程实现。向这个方向努力的书籍还是挺多的，这里推荐大家高等教育出版社（CHEP）和施普林格出版社(Springer)联合出版的**《计算方法（Computational Methods）》**,华中理工大学数学系写的（现华中科技大学），这方面华科大做的工作在国内应算是比较多的，而个人认为以这本最好，至少程序设计方面涉及了：任意数学函数的求值，方程求根，线性方程组求解，插值方法，数值积分，场微分方程数值求解。李庆扬的那本则理论性过强，与实际应用结合得不太紧。每个学校本系里都会开一门离散数学，涉及集合论，图论，和抽象代数，数理逻辑。不过，这么多内容挤在离散数学一门课里，是否时间太紧了点？另外，计算机系学生不懂组合和数论，也是巨大的缺陷。要做理论，不懂组合或者数论吃亏可就太大了。从理想的状态来看，最好分开六门课：集合，逻辑,图论，组合，代数，数论。这个当然不现实，因为没那么多课时。也许将来可以开三门课：集合与逻辑，图论与组合，代数与数论。（这方面我们学校已经着手开始做了）不管课怎么开，学生总一样要学。下面分别谈谈上面的三组内容。古典集合论，北师大出过一本《基础集合论》不错。 数理逻辑，中科院软件所陆钟万教授的《面向计算机科学的数理逻辑》就不错。现在可以找到陆钟万教授的讲课录像，<a href="http://www.cas.ac.cn/html/Dir/2001/11/06/3391.htm">http://www.cas.ac.cn/html/Dir/2001/11/06/3391.htm</a> 自己去看看吧。</p>
<p>总的来说，学集合&#x2F;逻辑起手不难，普通高中生都能看懂。但越往后越感觉深不可测。学完以上各书之后，如果你还有精力兴趣进一步深究，那么可以试一下GTM系列中的《Introduction to Axiomatic Set Theory》和《A Course of Mathematical Logic》。这两本都有世界图书出版社的引进版。你如果能搞定这两本，可以说在逻辑方面真正入了门，也就不用再浪费时间听我瞎侃了。</p>
<p>据说全中国最多只有三十个人懂图论。此言不虚。图论这东东，技巧性太强，几乎每个问题都有一个独特的方法，让人头痛。不过这也正是它魅力所在：只要你有创造性，它就能给你成就感。我的导师说，图论里面随便揪一块东西就可以写篇论文。大家可以体会里面内容之深广了吧！国内的图论书中，王树禾老师的“图论及其算法”非常成功。一方面，其内容在国内教材里算非常全面的。另一方面，其对算法的强调非常适合计算机系(本来就是科大计算机系教材)。有了这本书为主，再参考几本翻译的，如Bondy &amp; Murty的《图论及其应用》，人民邮电出版社翻译的《图论和电路网络》等等，就马马虎虎，对本科生足够了。再进一步，世界图书引进有GTM系列的”Modern Graph Theory”。此书确实经典！国内好象还有一家出版了个翻译版。不过，学到这个层次，还是读原版好。搞定这本书，也标志着图论入了门。</p>
<p>离散数学方面我们北京工业大学实验学院有个世界级的专家，叫邵学才，复旦大学概率论毕业的，教过高等数学，线性代数，概率论，最后转向离散数学，出版著作无数，论文集新加坡有一本，堪称经典，大家想学离散数学的真谛不妨找来看看。这老师的课我专门去听过，极为经典。不过你要从他的不经意的话中去挖掘精髓。在同他的交谈当中我又深刻地发现一个问题，虽说邵先生写书无数，但依他自己的说法每本都差不多，我实在觉得诧异，他说主要是有大纲的限制，不便多写。这就难怪了，很少听说国外写书还要依据个什么大纲（就算有，内容也宽泛的多），不敢越雷池半步，这样不是看谁的都一样了。外版的书好就好在这里，最新的科技成果里面都有论述，别的先不说，至少是“紧跟时代的理论知识”。</p>
<p>组合感觉没有太适合的国产书。还是读 Graham 和 Knuth 等人合著的经典“<strong>具体数学</strong>”吧，西安电子科技大学出版社有翻译版。</p>
<p>抽象代数，国内经典为莫宗坚先生的“代数学”。此书是北大数学系教材，深得好评。然而对本科生来说，此书未免太深。可以先学习一些其它的教材，然后再回头来看“代数学”。国际上的经典可就多了，GTM系列里就有一大堆。推荐一本谈不上经典，但却最简单的，最容易学的：<a href="http://www.math.miami.edu/~ec/book/">http://www.math.miami.edu/~ec/book/</a> 这本“Introduction to Linear and Abstract Algebra”非常通俗易懂，而且把抽象代数和线性代数结合起来，对初学者来说非常理想，我校比较牛的同学都有收藏。</p>
<p>数论方面，国内有经典而且以困难著称的”初等数论“(潘氏兄弟著，北大版)。再追溯一点，还有更加经典(可以算世界级)并且更加困难的”数论导引“(华罗庚先生的名著，科学版，九章书店重印，繁体的看起来可能比较困难)。把基础的几章搞定一个大概，对本科生来讲足够了。但这只是初等数论。本科毕业后要学计算数论，你必须看英文的书，如Bach的”Introduction to Algorithmic Number Theory”。</p>
<p>计算机科学理论的根本，在于算法。现在很多系里给本科生开设算法设计与分析，确实非常正确。环顾西方世界，大约没有一个三流以上计算机系不把算法作为必修的。算法教材目前公认以Corman等著的”Introduction to Algorithms”为最优。对入门而言，这一本已经足够，不需要再参考其它书。</p>
<p>再说说形式语言与自动机。我看过北邮的教材，应该说写的还清楚。但是，有一点要强调：形式语言和自动机的作用主要在作为计算模型，而不是用来做编译。事实上，编译前端已经是死领域，没有任何open problems，北科大的班晓娟博士也曾经说过，编译的技术已相当成熟。如果为了这个，我们完全没必要去学形式语言–用用yacc什么的就完了。北邮的那本在国内还算比较好，但是在深度上，在跟可计算性的联系上都有较大的局限，现代感也不足。所以建议有兴趣的同学去读英文书，不过国内似乎没引进这方面的教材。可以去互动出版网上看一看。入门以后，把形式语言与自动机中定义的模型，和数理逻辑中用递归函数定义的模型比较一番，可以说非常有趣。现在才知道，什么叫“宫室之美，百官之富”！</p>
<p>计算机科学和数学的关系有点奇怪。二三十年以前，计算机科学基本上还是数学的一个分支。而现在，计算机科学拥有广泛的研究领域和众多的研究人员，在很多方面反过来推动数学发展，从某种意义上可以说是孩子长得比妈妈还高了。但不管怎么样，这个孩子身上始终流着母亲的血液。这血液是the mathematical underpinning of computer science(计算机科学的数学基础)，也就是理论计算机科学。原来在东方大学城图书馆中曾经看过一本七十年代的译本（书皮都没了，可我就爱关注这种书），大概就叫《计算机数学》。那本书若是放在当时来讲决是一本好书，但现在看来，涵盖的范围还算广，深度则差了许多，不过推荐大一的学生倒可以看一看，至少可以使你的计算数学入入门。</p>
<p>最常和理论计算机科学放在一起的一个词是什么？答：离散数学。这两者的关系是如此密切，以至于它们在不少场合下成为同义词。（这一点在前面的那本书中也有体现）传统上，数学是以分析为中心的。数学系的同学要学习三四个学期的数学分析，然后是复变函数，实变函数，泛函数等等。实变和泛函被很多人认为是现代数学的入门。在物理，化学，工程上应用的，也以分析为主。随着计算机科学的出现，一些以前不太受到重视的数学分支突然重要起来。人们发现，这些分支处理的数学对象与传统的分析有明显的区别：分析研究的问题解决方案是连续的，因而微分，积分成为基本的运算；而这些分支研究的对象是离散的，因而很少有机会进行此类的计算。人们从而称这些分支为“离散数学”。“离散数学”的名字越来越响亮，最后导致以分析为中心的传统数学分支被相对称为“连续数学”。离散数学经过几十年发展，基本上稳定下来。一般认为，离散数学包含以下学科：</p>
<ol>
<li>集合论，数理逻辑与元数学。这是整个数学的基础，也是计算机科学的基础。</li>
<li>图论，算法图论；组合数学，组合算法。计算机科学，尤其是理论计算机科学的核心是算法，而大量的算法建立在图和组合的基础上。</li>
<li>抽象代数。代数是无所不在的，本来在数学中就非常重要。在计算机科学中，人们惊讶<br>地发现代数竟然有如此之多的应用。</li>
</ol>
<p>但是，理论计算机科学仅仅就是在数学的上面加上“离散”的帽子这么简单吗？一直到大约十几年前，终于有一位大师告诉我们：不是。D.E.Knuth(他有多伟大，我想不用我废话了)在Stanford开设了一门全新的课程Concrete Mathematics。 Concrete这个词在这里有两层含义：</p>
<p>首先：对abstract而言。Knuth认为，传统数学研究的对象过于抽象，导致对具体的问题关心不够。他抱怨说，在研究中他需要的数学往往并不存在，所以他只能自己去创造一些数学。为了直接面向应用的需要，他要提倡“具体”的数学。在这里我做一点简单的解释。例如在集合论中，数学家关心的都是最根本的问题–公理系统的各种性质之类。而一些具体集合的性质，各种常见集合，关系，映射都是什么样的，数学家觉得并不重要。然而，在计算机科学中应用的，恰恰就是这些具体的东西 Knuth能够首先看到这一点，不愧为当世计算机第一人。</p>
<p>其次，Concrete是Continuous(连续)加上discrete(离散)。不管连续数学还是离散数学，都是有用的数学！</p>
<p>理论与实际的结合——计算机科学研究的范畴<br>前面主要是从数学角度来看的。从计算机角度来看，理论计算机科学目前主要的研究领域包括：可计算性理论，算法设计与复杂性分析，密码学与信息安全，分布式计算理论，并行计算理论，网络理论，生物信息计算，计算几何学，程序语言理论等等。这些领域互相交叉，而且新的课题在不断提出，所以很难理出一个头绪来。想搞搞这方面的工作，推荐看中国计算机学会的一系列书籍，至少代表了我国的权威。下面随便举一些例子。由于应用需求的推动，密码学现在成为研究的热点。密码学建立在数论(尤其是计算数论)，代数，信息论，概率论和随机过程的基础上，有时也用到图论和组合学等。很多人以为密码学就是加密解密，而加密就是用一个函数把数据打乱。这样的理解太浅显了。现代密码学至少包含以下层次的内容：<br>第一，密码学的基础。例如，分解一个大数真的很困难吗？能否有一般的工具证明协议正确？<br>第二，密码学的基本课题。例如，比以前更好的单向函数，签名协议等。<br>第三，密码学的高级问题。例如，零知识证明的长度，秘密分享的方法。<br>第四，密码学的新应用。例如，数字现金，叛徒追踪等。</p>
<p>在分布式系统中，也有很多重要的理论问题。例如，进程之间的同步，互斥协议。一个经典的结果是：在通信信道不可靠时，没有确定型算法能实现进程间协同。所以，改进 TCP 三次握手几乎没有意义。例如时序问题。常用的一种序是因果序，但因果序直到不久前才有一个理论上的结果….例如，死锁没有实用的方法能完美地对付。例如,……操作系统研究过就自己去举吧！如果计算机只有理论，那么它不过是数学的一个分支，而不成为一门独立的科学。事实上，在理论之外，计算机科学还有更广阔的天空。</p>
<p>我一直认为，4年根本不够学习计算机的基础知识，因为面太宽了……这方面我想先说说我们系在各校普遍开设的《计算机基础》。在高等学校开设《计算机基础课程》是我国高教司明文规定的各专业必修课程要求。主要内容是使学生初步掌握计算机的发展历史，学会简单的使用操作系统，文字处理，表格处理功能和初步的网络应用功能。但是在计算机科学系教授此门课程的目标决不能与此一致。在计算机系课程中目标应是：让学生较为全面的了解计算机学科的发展，清晰的把握计算机学科研究的方向，发展的前沿即每一个课程在整个学科体系中所处的地位。搞清各学科的学习目的，学习内容，应用领域。使学生在学科学习初期就对整个学科有一个整体的认识，以做到在今后的学习中清楚要学什么，怎么学。<strong>计算机基本应用技能的位置应当放在第二位或更靠后</strong>，因为这一点对于本系的学生应当有这个摸索能力。这一点很重要。推荐给大家一本书：机械工业出版社的《计算机文化》（New Perspective of Computer Science），看了这本书我才深刻的体会到自己还是个计算机科学初学者，才比较透彻的了解了什么是计算机科学。另外在厦门大学赵致琢老师的著作《计算科学导论》当中的很多经典理论都是在同类书籍中很难找到的。**看看他也许你才会明白一个最基本的问题：为什么计算机科学叫计算科学更为准确。**这本书在世界上也可成为精品级的著作。</p>
<p>一个一流计算机系的优秀学生决不该仅仅是一个编程高手，但他一定首先是一个编程高手。我上大学的时候，第一门专业课是C语言程序设计，念计算机的人从某种角度讲相当一部分人是靠写程序吃饭的。在我们北京工业大学实验学院计算机系里一直有这样的争论（时至今日CSDN上也有），关于第一程序设计语言该用哪一种。**我个人认为，用哪种语言属于末节，关键在养成良好的编程习惯。**当年老师对我们说，打好基础后学一门新语言只要一个星期。现在我觉得根本不用一个星期，前提是先把基础打好。不要再犹豫了，学了再说，等你抉择好了，别人已经会了几门语言了。</p>
<p>汇编语言和微机原理是两门特烦人的课。你的数学&#x2F;理论基础再好，也占不到什么便宜。这两门课之间的次序也好比先有鸡还是先有蛋，无论你先学哪门，都会牵扯另一门课里的东西。所以，只能静下来慢慢琢磨。这就是典型的工程课，不需要太多的聪明和顿悟，却需要水滴石穿的渐悟。有关这两门课的书，计算机书店里不难找到。弄几本最新的，对照着看吧。组成原理推荐《计算机组成与结构》清华大学王爱英教授写的。汇编语言大家拿8086&#x2F;8088入个门，之后一定要学80x86汇编语言。实用价值大，不落后，结构又好，写写高效病毒，高级语言里嵌一点汇编，进行底层开发，总也离不开他，推荐清华大学沈美明的《IBM—PC汇编语言程序设计》。有些人说不想了解计算机体系结构，也不想制造计算机，所以诸如计算机原理，汇编语言，接口之类的课觉得没必要学，这样合理吗？显然不合理，这些东西迟早得掌握，肯定得接触，而且，这是计算机专业与其他专业学生相比的少有的几项优势。做项目的时候，了解这些是非常重要的，不可能说，仅仅为了技术而技术，<strong>只懂技术的人最多做一个编码工人，而永远不可能全面地了解整个系统的设计</strong>，而编码工人是越老越不值钱。</p>
<p>关于组成原理还有个讲授的问题，在我学这门课程时老师讲授时把CPU工作原理誉微程序设计这一块略掉了，理由是我们国家搞CPU技术不如别的国家，搞了这么长时间好不容易出了个龙芯比Intel的还差个十万八千里，所以建议我们不要学了。我看这在各校也未见得不是个问题吧！若真是如他所说，那中国的计算机科学哪个方向都可以停了，软硬件，应用，有几项搞得过美国，搞不过别人就不搞了，那我们坐在这里干什么？教学的观念需要转变的。</p>
<p>模拟电路这东东，如今不仅计算机系学生搞不定，电子系学生也多半害怕。如果你真想软硬件通吃，那么建议你先看看邱关源的“电路原理”，也许此后再看模拟电路底气会足些。教材：康华光的“电子技术基础”（高等教育出版社）还是不错的（我校电子系在用）。有兴趣也可以参考童诗白的书。数字电路比模拟电路要好懂得多。推荐大家看一看我们北工大刘英娴教授写的《数字逻辑》业绩人士都说这本书很有参考价值（机械工业出版社的）。原因很明了，实用价值高，能听听她讲授的课程更是有一种“享受科学”的感觉。清华大学阎石的书也算一本好教材，遗憾的一点是集成电路讲少了些。真有兴趣，看一看大规模数字系统设计吧（北航那本用的还比较多）。</p>
<p>计算机系统结构该怎么教，国际上还在争论。国内能找到的较好教材为Stallings的”Computer Organization and Architecture esigning for Performance”(清华影印本)。国际上最流行的则是“Computer architecture: aquantitative approach”, by Patterson &amp;Hennessy。</p>
<p>操作系统可以随便选用《操作系统的内核设计与实现》和《现代操作系统》两书之一。这两部都可以算经典，唯一缺点就是理论上不够严格。不过这领域属于Hardcore System,所以在理论上马虎一点也情有可原。想看理论方面的就推荐清华大学出版社《操作系统》吧，高教司司长张尧学写的，我们教材用的是那本。另外推荐一本《Windows操作系统原理》机械工业出版社的，这本书是我国操作系统专家在微软零距离考察半年，写作历时一年多写成的，教操作系统的专家除了清华大学的张尧学（现高教司司长）几乎所有人都参加了。Bill Gates亲自写序。里面不但结合windows2000,xp详述操作系统的内核，而且后面讲了一些windows编程基础，有外版书的味道，而且上面一些内容可以说在国内外只有那本书才有对windows内核细致入微的介绍，如果先把形式语言学好了，则编译原理中的前端我看只要学四个算法：最容易实现的递归下降；最好的自顶向下算法LL(k)；最好的自底向上算法LR(k)；LR(1)的简化SLR(也许还有另一简化LALR)。后端完全属于工程性质，自然又是another story。推荐教材：Kenneth C.Louden写的“Compiler Construction Principles and Practice”即是《编译原理及实践》（机械工业出版社的译本）</p>
<p>学数据库要提醒大家的是，会用VFP，VB, Power builder不等于懂数据库。(这世界上自以为懂数据库的人太多了！)<br>数据库设计既是科学又是艺术，数据库实现则是典型的工程。所以从某种意义上讲，数据库是最典型的一门计算机课程——理工结合，互相渗透。另外推荐大家学完软件工程学后再翻过来看看数据库技术，又会是一番新感觉。推荐教材：Abraham Silberschatz 等著的 “Database System Concepts”. 作为知识的完整性，还推荐大家看一看机械工业出版社的《数据仓库》译本。</p>
<p>计算机网络的标准教材还是来自Tanenbaum的《ComputerNetworks》（清华大学有译本）。还有就是推荐谢希仁的《计算机网络教程》（人民邮电出版社）问题讲得比较清楚，参考文献也比较权威。不过，网络也属于Hardcore System，所以光看书是不够的。建议多读RFC，<a href="http://www.ietf.org/rfc.htm">http://www.ietf.org/rfc.htm</a> 里可以按编号下载RFC文档。从IP的读起。等到能掌握10种左右常用协议，就没有几个人敢小看你了。再做的工作我看放在网络设计上就比较好了。</p>
<p>数据结构的重要性就不言而喻了，学完数据结构你会对你的编程思想进行一番革命性的洗礼，会对如何建立一个合理高效的算法有一个清楚的认识。对于算法的建立我想大家应当注意以下几点：当遇到一个算法问题时,首先要知道自己以前有没有处理过这种问题.如果见过,那么你一般会顺利地做出来;如果没见过,那么考虑以下问题:</p>
<ol>
<li>问题是否是建立在某种已知的熟悉的数据结构(例如,二叉树)上?如果不是,则要自己设计数据结构。</li>
<li>问题所要求编写的算法属于以下哪种类型?(建立数据结构,修改数据结构,遍历,查找,排序…) 3.分析问题所要求编写的算法的数学性质.是否具备递归特征?(对于递归程序设计,只要设计出合理的参数表以及递归结束的条件,则基本上大功告成.) 4.继续分析问题的数学本质.根据你以前的编程经验,设想一种可能是可行的解决办法,并证明这种解决办法的正确性.如果题目对算法有时空方面的要求,证明你的设想满足其要求.一般的,时间效率和空间效率难以兼得.有时必须通过建立辅助存储的方法来节省时间.</li>
<li>通过一段时间的分析,你对解决这个问题已经有了自己的一些思路.或者说,你已经可以用自然语言把你的算法简单描述出来.继续验证其正确性,努力发现其中的错误并找出解决办法.在必要的时候(发现了无法解决的矛盾),推翻自己的思路,从头开始构思.</li>
<li>确认你的思路可行以后,开始编写程序.在编写代码的过程中,尽可能把各种问题考虑得详细,周密.程序应该具有良好的结构,并且在关键的地方配有注释.</li>
<li>举一个例子,然后在纸上用笔执行你的程序,进一步验证其正确性.当遇到与你的设想不符的情况时,分析问题产生的原因是编程方面的问题还是算法思想本身有问题.</li>
<li>如果程序通过了上述正确性验证,那么在将其进一步优化或简化。</li>
<li>撰写思路分析,注释.对于具体的算法思路,只能靠你自己通过自己的知识和经验来加以获得,没有什么特定的规律(否则程序员全部可以下岗了,用机器自动生成代码就可以了).<strong>要有丰富的想象力,就是说当一条路走不通时,不要钻牛角尖,要敢于推翻自己的想法</strong>.我也只不过是初学者,说出上面的一些经验,仅供大家参考和讨论。</li>
</ol>
<p>关于人工智能，我觉得的也是非常值得大家仔细研究的，虽然不能算是刚刚兴起的学科了，但是绝对是非常有发展前途的一门学科。**我国人工智能创始人之一，北京科技大学涂序彦教授（这老先生是我的导师李小坚博士的导师）对人工智能这样定义：人工智能是模仿、延伸和扩展人与自然的智能的技术科学。**在美国人工智能官方教育网站上对人工智能作了如下定义：Artificial Intelligence, or AI for short, is a combination of computer science, physiology, and philosophy. AI is a broad topic, consisting of different fields, from machine vision to expert systems. The element that the fields of AI have in common is the creation of machines that can “think”.</p>
<p>这门学科研究的问题大概说有：<br>（1）符号主义：符号计算与程序设计基础，知识表达方法：知识与思维，产生式规则，语意网络，一阶谓词逻辑问题求解方法：搜索策略，启发式搜寻，搜寻算法，问题规约方法，谓词演算：归结原理，归结过程专家系统：建立专家系统的方法及工具<br>（2）联接主义（神经网络学派）：1988年美国权威机构指出：数据库，网络发展呈直线上升，神经网络可能是解决人工智能的唯一途径。</p>
<p>我想对于人工智能的学习，大家一定不要像学数学似的及一些现成的结论，要学会分析问题，最好能利用程序设计实现，这里推荐给大家ACM最佳博士论文奖获得者涂晓媛博士的著作《人工鱼—计算机动画的人工生命方法》（清华大学出版社）。搞人工生命的同学不会不知道国际知名的涂氏父女吧。关于人工智能的书当然首选《Artificial IntelligenceA New Synthesis》Nils J.Nilsson.鼻祖嘛！</p>
<p>关于网络安全我也想在这里说两句，随着计算机技术的发展，整个社会的信息化水平突飞猛进，计算机网络技术日新月异，网络成了当即社会各个工作领域不可缺少的组成部分，只要有网络存在，网络安全问题就是一个必须解决好的问题，<strong>学习网络安全不是简简单单的收集一些黑客工具黑一黑别人的网站，而是要学习他的数学原理，实现原理，搞清底层工作机制，这样才能解决大部分的现有问题和新出现的安全问题。</strong></p>
<p>关于计算机科学的一些边缘科学我想谈一谈软件工程技术，对于一个企业，推出软件是不是就是几个程序员坐在一起，你写一段程序，我写一段程序呢？显然不是。软件工程是典型的计算机科学和数学，管理科学，心理学，社会学等学科的综合。它使我们这些搞理论和技术的人进入了一个社会。你所要考虑的不仅仅是程序的优劣，更应该考虑程序与软件的区别，软件与软件产品的区别，软件软件产品的市场前景，如何去更好的与人交流。这方面我还在学习阶段，以后这方面再写文章吧，先推荐给大家几本书：畅销20年不衰的《人月神话》（清华大学中文版，中国电力出版社影印版），《软件工程-实践者研究的方法》（机械工业出版社译本），《人件》（据说每一位微软公司的部门经理都读过这本书，推荐老总们和想当老总的同学都看看，了解一下什么是软件企业中的人）以及微软公司的《软件开发的科学与艺术》和《软件企业的管理与文化》（研究软件企业的制胜之道当然要研究微软的成功经验了！）</p>
<p>关于计算机技术的学习我想是这样的：学校开设的任何一门科学都有其滞后性，不要总认为自己掌握的某门技术就已经是天下无敌手了，虽然现在Java,VB,C,C++用的都很多，怎能保证没有被淘汰的一天，我想.NET平台的诞生和X#语言的初见端倪完全可以说明问题。换言之，在我们掌握一门新技术的同时就又有更新的技术产生，身为当代的大学生应当有紧跟科学发展的素质。举个例子，就像有些同学总说，我做网页设计就喜欢直接写html，不愿意用什么Frontpage,Dreamweaver。能用语言写网页固然很好，但有高效的手段你为什么不使呢？仅仅是为了显示自己的水平高，unique?<strong>我看真正水平高的是能够以最快的速度接受新事物的人</strong>。高级程序设计语言的发展日新月异，今后的程序设计就像人们在说话一样，我想大家从xml中应是有所体会了。难道我们真就写个什么都要用汇编，以显示自己的水平高，真是这样倒不如直接用机器语言写算了。反过来说，想要以最快的速度接受并利用新技术关键还是在于你对计算机科学地把握程度。计算机技术牵扯的内容更为广泛些，一项一项说恐怕没个一年半载也说不清。<strong>我只想提醒大家的还是那句话，技术与科学是不能分家的，学好了科学同时搞技术，这才是上上策</strong>。犹如英语，原先人们与老外交流必须要个翻译，现在满马路的人都会说英语。就连21世纪英语演讲比赛的冠军都轮不到英语系的学生了。计算机也是一样的，我们必须面对的一个现实就是：<strong>计算机真就只是一个工具，如果不具备其它方面的素养，计算机系的学生虽然不能说找不到工作，不过总有一天当其他专业性人才掌握了计算机技术后将比我们出色许多</strong>。原因就在于计算机解决的大都是实际问题，实际问题的知识却是我们少有的。单一的计算机技术没有立足之地。我想是时候指出：<strong>学习每一个课程之前，都要先搞清这一课程的学习目的</strong>。这一学科的应用领域。据我自身所了解到的同龄同学和低年级的同学的学习状况：他们之中很少有人知道学一个学科的学习目的，期末考试结束了也不知道学这科做什么用。这就失去了读计算机科学的意义。当然这与现存的教育思想不能说一点关系都没有。</p>
<p>总的来说，从教育角度来讲，国内高校的课程安排不是很合理，强调理论，又不愿意在理论上深入教育，无力接受新技术，想避开新技术又无法避得一干二净。我觉得关键问题就是国内的高校难于突破现状，条条框框限制着怎么求发展。我们虽然认识得到国外教育的优越性，但为什么迟迟不能采取行动？哪怕是去粗取精的取那么一点点。我们需要改变。从我们自身角度来讲，多数人4年下来既没有学习计算机科学的学术水平，也没有学习计算机技术的那种韧劲。**在我刚上大一时，我的计算机科学入门导师，淮北煤炭师范学院王爱平教授曾经对我说过这样一番话：“当你选择了计算机这一门科学<br>，就意味着你踏上了一条不归路，就意味着你一生都要为之奋斗⋯⋯你的身后是悬崖，只有向前走，不能往后退。”**有些同学说按照这样学习学的东西太多，有的未见得有用，我想打个形象的比方：学校学出来的人都是一个球体，方方面面的知识都应具备。可是社会上需要球体的地方很少，反而需要的是砖和瓦，即精通某一行的人才。但是对于同等体积的物体，用球体来改造是最方便最省事的。学校的学生很多，为了能够使更多的学生来适应这个社会，学校也就不得以把所有的学生都打造成一个球体，然后让社会对这些学生进行再加工，成为真正能够有用的人才。即使你非常清楚自己的将来要干什么，并且非常下定决心要走自己的路，这一步你也必须走，世界是在不断变化的，你不能预料未来。想清楚，努力去干吧！</p>
<p>必须结束这篇“胡侃”了，再侃下去非我力所能及。其实计算机还有很多基础课都值得一侃。怎奈我造诣有限，不敢再让内行耻笑。对于博大精深的计算机科学，我只能说我永远都是个Beginner.最后声明：这些只针对本科阶段的学习。即使把这些全弄通了，前面的路还长，计算机科学需要我们为之奋斗……学习计算机科学需要韧性，更需要创新，需要激情。深刻学习理论知识，勇于接受新技术的挑战，这才是我们这一代人应具有的素质。最后送大家一句话“Wake up every day with a feeling of passion for the difference technology will make in people’s life!”。<br>在我大一时无意中找到了南京大学网友sir的帖子“胡侃（理论）计算机学习”，这个帖子对我的大学生活起了至关重要的作用，也因此同他成为了好友，本帖子在原有帖子的基础上改进了其中我认为不太合适的理论，修正了一些观点，在推荐教材方面结合我的学习情况有了较大改变。值得一提的是增加了一些计算机理论的内容，计算机技术的内容结合我国的教学情况和我们学习的实际情况进行了重写。感谢大家的支持，这篇文章才能比较快的完成，这里也只是写下了我在学习计算机科学时的所思所想，很不成熟。与原文相比增加了一些推荐参考书，删去了一些过陈旧的难以找到的材料。并且对一些问题作了更为详细地阐述，也增加了一些新观点。希望大家多多讨论，改进不足，让我们共同努力吧！</p>
<p>完<br>真的猛士敢于正视淋漓的鲜血，敢于直面惨淡的人生。<br>※ 来源:．瀚海星云 bbs.ustc.edu.cn [FROM: 202.38.79.184]</p>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>cs</tag>
      </tags>
  </entry>
  <entry>
    <title>SQL优化之小细节 - 点滴记录</title>
    <url>/20170309-SQL%E4%BC%98%E5%8C%96%E4%B9%8B%E5%B0%8F%E7%BB%86%E8%8A%82%20-%20%E7%82%B9%E6%BB%B4%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<p>不知道现在是不是还很多人首先就把关联的id放在where的第一位</p>
<p>这里有一个简单的对比，情况相同的时候，两个sql的时间相差八倍</p>
<p>优：0.077s</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ew.all_amt ,</span><br><span class="line">       ew.customer_id,</span><br><span class="line">       cf.id,</span><br><span class="line">       cf.cert_id,</span><br><span class="line">       cf.acct_type</span><br><span class="line"><span class="keyword">FROM</span> ew_quota_info ew,</span><br><span class="line">     cf_customer cf</span><br><span class="line"><span class="keyword">WHERE</span> cf.acct_type <span class="keyword">in</span>(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">  <span class="keyword">AND</span> ew.customer_id <span class="operator">=</span> cf.id</span><br></pre></td></tr></table></figure>
<p>劣：0.630s</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ew.all_amt ,</span><br><span class="line">       ew.customer_id,</span><br><span class="line">       cf.id,</span><br><span class="line">       cf.cert_id,</span><br><span class="line">       cf.acct_type</span><br><span class="line"><span class="keyword">FROM</span> ew_quota_info ew,</span><br><span class="line">     cf_customer cf</span><br><span class="line"><span class="keyword">WHERE</span> ew.customer_id <span class="operator">=</span> cf.id</span><br><span class="line">  <span class="keyword">AND</span> cf.acct_type <span class="keyword">in</span>(<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>上述原因：where子句从后往前执行，应该把大的过滤条件放在后面<br>记录时间：2017年3月9日 10:44:59</p>
<hr>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>SQL语句的执行顺序 - 关键字的顺序</title>
    <url>/20171114-SQL%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/</url>
    <content><![CDATA[<h2 id="sql执行顺序"><a href="#sql执行顺序" class="headerlink" title="sql执行顺序"></a>sql执行顺序</h2><ol>
<li>from </li>
<li>join </li>
<li>on </li>
<li>where </li>
<li>group by(开始使用select中的别名，后面的语句中都可以使用)</li>
<li>avg,sum…. </li>
<li>having </li>
<li>select </li>
<li>distinct </li>
<li>order by</li>
</ol>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://blog.csdn.net/u014044812/article/details/51004754">http://blog.csdn.net/u014044812/article/details/51004754</a></p>
<p><a href="http://blog.csdn.net/bitcarmanlee/article/details/51004767">http://blog.csdn.net/bitcarmanlee/article/details/51004767</a> (含流程图)</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>Shell 批量解压文件并重命名 - 解决文件名冲突</title>
    <url>/20201107-Shell-batch-decompression-and-rename/</url>
    <content><![CDATA[<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>由于某种原因，需要手工处理错误日志提取某些信息。<br>下载下来的日志文件是压缩包</p>
<h2 id="1-1-文件信息"><a href="#1-1-文件信息" class="headerlink" title="1.1 文件信息"></a>1.1 文件信息</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">system_error.log.2020-11-01.20201105200433.zip</span><br><span class="line">system_error.log.2020-11-01.20201105195953.zip</span><br><span class="line">system_error.log.2020-11-01.20201105200830.zip</span><br><span class="line">...省略</span><br></pre></td></tr></table></figure>
<h2 id="1-2-压缩包信息"><a href="#1-2-压缩包信息" class="headerlink" title="1.2 压缩包信息"></a>1.2 压缩包信息</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ unzip -v system_error.log.2020-11-01.20201105200830.zip</span><br><span class="line">Archive:  system_error.log.2020-11-01.20201105200830.zip</span><br><span class="line"> Length   Method    Size  Cmpr    Date    Time   CRC-32   Name</span><br><span class="line">--------  ------  ------- ---- ---------- ----- --------  ----</span><br><span class="line"> 4495560  Defl:N    78526  98% 11-01-2020 23:43 504551c6  system_error.log.2020-11-01</span><br><span class="line">--------          -------  ---                            -------</span><br><span class="line"> 4495560            78526  98%                            1 file</span><br></pre></td></tr></table></figure>
<p>压缩包文件名不一样，但是压缩包中的文件有一样的名字。<br>例如：system_error.log.2020-11-01</p>
<p>尝试使用如下方式，提示有重复，需要挨个选择如何处理，极度不便。<br>于是想使用 shell 来解决（ 之前没写过 shell ）</p>
<h2 id="1-2-尝试过程"><a href="#1-2-尝试过程" class="headerlink" title="1.2 尝试过程"></a>1.2 尝试过程</h2><span id="more"></span>
<p>提示有文件重复，需要处理。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ unzip &#x27;*.zip&#x27;</span><br><span class="line">Archive:  system_error.log.2020-10-15.20201105200943.zip</span><br><span class="line">replace system_error.log.2020-10-15? [y]es, [n]o, [A]ll, [N]one, [r]ename:</span><br></pre></td></tr></table></figure>
<p>尝试使用 -n 参数，不覆盖</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ unzip -n &#x27;*.zip&#x27;</span><br><span class="line">Archive:  system_error.log.2020-10-15.20201105200943.zip</span><br><span class="line">...省略</span><br><span class="line">100 archives were successfully processed.</span><br></pre></td></tr></table></figure>
<p>-n 表示不覆盖，有重名的直接跳过，结果就是 100 个文件只解压的 10 个。</p>
<h2 id="1-3-怎么解压并且重命名？"><a href="#1-3-怎么解压并且重命名？" class="headerlink" title="1.3 怎么解压并且重命名？"></a>1.3 怎么解压并且重命名？</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mv A B</span><br><span class="line"># 把 A 改名为 B</span><br></pre></td></tr></table></figure>
<p>怎么拿到压缩包内的文件名？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 输出压缩包内的信息</span><br><span class="line">$ unzip -v system_error.log.2020-11-01.20201105200830.zip</span><br><span class="line">Archive:  system_error.log.2020-11-01.20201105200830.zip</span><br><span class="line"> Length   Method    Size  Cmpr    Date    Time   CRC-32   Name</span><br><span class="line">--------  ------  ------- ---- ---------- ----- --------  ----</span><br><span class="line"> 4495560  Defl:N    78526  98% 11-01-2020 23:43 504551c6  system_error.log.2020-11-01</span><br><span class="line">--------          -------  ---                            -------</span><br><span class="line"> 4495560            78526  98%                            1 file</span><br><span class="line"></span><br><span class="line"> # 使用 awk 截取相关信息</span><br><span class="line"> # NR 行号，NF 最后一列</span><br><span class="line"> # unzip -v 的输出方式可能有变动，需要自己修改位置，以得到正确的结果</span><br><span class="line"> $ unzip -v system_error.log.2020-11-01.20201105200830.zip | awk &#x27;&#123;if(NR==4) print $NF&#125;&#x27;</span><br><span class="line"> system_error.log.2020-11-01</span><br></pre></td></tr></table></figure>

<h1 id="二、脚本信息"><a href="#二、脚本信息" class="headerlink" title="二、脚本信息"></a>二、脚本信息</h1><p>1.3 的问题解决了就可以开始写脚本</p>
<h2 id="2-1-脚本"><a href="#2-1-脚本" class="headerlink" title="2.1 脚本"></a>2.1 脚本</h2><p>文件名 uf.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">压缩包目录</span></span><br><span class="line">srcDir=$1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解压后文件存放目录</span></span><br><span class="line">dstDir=$2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">文件名序号</span></span><br><span class="line">seq=1</span><br><span class="line">for file in $&#123;srcDir&#125;/*</span><br><span class="line">do</span><br><span class="line">    # 判断是否为文件</span><br><span class="line">    if test -f $file</span><br><span class="line">    then</span><br><span class="line">        # 获取压缩包名称，例如：system_error.log.2020-11-01.20201105200830.zip</span><br><span class="line">        filename=$(basename $file)</span><br><span class="line">        # 解压文件，移动文件，并且改名(这里使用的是序号，可以截取原文件名拼接时间戳等避免重名)</span><br><span class="line">        unzip $filename &amp;&amp; mv `unzip -v $filename | awk &#x27;&#123;if(NR==4)&#123;print $8&#125;&#125;&#x27;` $&#123;dstDir&#125;/$((seq++))</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h2 id="2-2-使用方法"><a href="#2-2-使用方法" class="headerlink" title="2.2 使用方法"></a>2.2 使用方法</h2><p>注意，目前在目标目录下才能正确运行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chmod 775 uf.sh</span><br><span class="line">sh uf.sh ./src ./dst</span><br></pre></td></tr></table></figure>
<p>然后解决问题，解压所有 100 个压缩包，并且得到 100 个文件(文件名为 1~100)。</p>
<h1 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h1><p>不得不说解决问题是最快的学习方式<br>第一次写脚本相对耗时，也是一个不错的尝试过程。<br>对linux系统相关的命令&#x2F;函数不熟悉，导致到处查资料，有必要系统化的看看书。</p>
<h1 id="四、参考信息"><a href="#四、参考信息" class="headerlink" title="四、参考信息"></a>四、参考信息</h1><ul>
<li><a href="https://blog.csdn.net/FZ_9426/article/details/103434903">shell 命令解压缩zip文件夹并且对解压后的文件重命名(批量)</a><br>ps：没有提供注释，对新手不太友好</li>
<li><a href="https://www.jianshu.com/p/b70a1bea70d1">shell中变量自增</a></li>
<li><a href="http://zuyunfei.com/2016/03/23/Shell-Truncate-File-Extension/">Shell 截取文件名和后缀</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Spark第一个Java程序 - 字词统计 - Spark Java idea</title>
    <url>/20170802-Spark%E7%AC%AC%E4%B8%80%E4%B8%AAJava%E7%A8%8B%E5%BA%8F%20-%20%E5%AD%97%E8%AF%8D%E7%BB%9F%E8%AE%A1%20-%20Spark%20Java%20idea/</url>
    <content><![CDATA[<p>在本地利用idea，Java开发spark程序</p>
<p>原来并不用安装spark什么的这些东西</p>
<p>这样就不会那么繁琐，门槛也低了点</p>
<p>具体过程如下</p>
<h2 id="一、创建工程"><a href="#一、创建工程" class="headerlink" title="一、创建工程"></a>一、创建工程</h2><ol>
<li>idea -&gt; new Project -&gt; maven -&gt; create from archetype -&gt; maven-archetype-quickstart</li>
<li>pom.xml添加依赖</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spark-core_2.11&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.0.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>编写Java代码</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.spark;</span><br><span class="line"></span><br><span class="line">import org.apache.spark.SparkConf;</span><br><span class="line">import org.apache.spark.api.Java.JavaRDD;</span><br><span class="line">import org.apache.spark.api.Java.JavaSparkContext;</span><br><span class="line">import org.apache.spark.api.Java.function.Function;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 第一个spark程序</span><br><span class="line"> * Created by hisenyuan on 2017/8/2 at 16:36.</span><br><span class="line"> */</span><br><span class="line">public class SimpleApp &#123;</span><br><span class="line"></span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">    // Should be some file on your system</span><br><span class="line">    String logFile = &quot;D:\\logs\\boss_debug.log&quot;;</span><br><span class="line">    //设置本地运行，设置名称（在spark web ui上显示）</span><br><span class="line">    SparkConf sparkConf = new SparkConf().setMaster(&quot;local&quot;).setAppName(&quot;Simple Application&quot;);</span><br><span class="line">    JavaSparkContext JavaSparkContext = new JavaSparkContext(sparkConf);</span><br><span class="line">    JavaRDD&lt;String&gt; logData = JavaSparkContext.textFile(logFile).cache();</span><br><span class="line"></span><br><span class="line">    //统计包含a的次数</span><br><span class="line">    long countA = logData.filter(new Function&lt;String, Boolean&gt;() &#123;</span><br><span class="line">      public Boolean call(String s) throws Exception &#123;</span><br><span class="line">        return s.contains(&quot;a&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).count();</span><br><span class="line"></span><br><span class="line">    //统计包含b的次数</span><br><span class="line">    long countB = logData.filter(new Function&lt;String, Boolean&gt;() &#123;</span><br><span class="line">      public Boolean call(String s) throws Exception &#123;</span><br><span class="line">        return s.contains(&quot;b&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).count();</span><br><span class="line">    System.out.printf(&quot;Lines with a: %d, lines with b: %d\n&quot;, countA, countB);</span><br><span class="line">    //Lines with a: 11146, lines with b: 10760</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>运行main方法：结果：Lines with a: 11146, lines with b: 10760</li>
<li>日志如下：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\hisenwork\soft\jdk8\bin\Java -Dspark.master=local &quot;-Javaagent:C:\hisenwork\IntelliJ IDEA 2017.1.1\lib\idea_rt.jar=59366:C:\hisenwork\IntelliJ IDEA 2017.1.1\bin&quot; -Dfile.encoding=UTF-8 -classpath C:\hisenwork\soft\jdk8\jre\lib\charsets.jar;C:\hisenwork\soft\jdk8\jre\lib\deploy.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\access-bridge-64.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\cldrdata.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\dnsns.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\jaccess.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\jfxrt.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\localedata.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\nashorn.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\sunec.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\sunjce_provider.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\sunmscapi.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\sunpkcs11.jar;C:\hisenwork\soft\jdk8\jre\lib\ext\zipfs.jar;C:\hisenwork\soft\jdk8\jre\lib\Javaws.jar;C:\hisenwork\soft\jdk8\jre\lib\jce.jar;C:\hisenwork\soft\jdk8\jre\lib\jfr.jar;C:\hisenwork\soft\jdk8\jre\lib\jfxswt.jar;C:\hisenwork\soft\jdk8\jre\lib\jsse.jar;C:\hisenwork\soft\jdk8\jre\lib\management-agent.jar;C:\hisenwork\soft\jdk8\jre\lib\plugin.jar;C:\hisenwork\soft\jdk8\jre\lib\resources.jar;C:\hisenwork\soft\jdk8\jre\lib\rt.jar;C:\hisenwork\code\rmitec\SparkTest\target\classes;C:\hisenwork\soft\maven\org\apache\spark\spark-core_2.11\2.0.1\spark-core_2.11-2.0.1.jar;C:\hisenwork\soft\maven\org\apache\avro\avro-mapred\1.7.7\avro-mapred-1.7.7-hadoop2.jar;C:\hisenwork\soft\maven\org\apache\avro\avro-ipc\1.7.7\avro-ipc-1.7.7.jar;C:\hisenwork\soft\maven\org\apache\avro\avro\1.7.7\avro-1.7.7.jar;C:\hisenwork\soft\maven\org\apache\avro\avro-ipc\1.7.7\avro-ipc-1.7.7-tests.jar;C:\hisenwork\soft\maven\org\codehaus\jackson\jackson-core-asl\1.9.13\jackson-core-asl-1.9.13.jar;C:\hisenwork\soft\maven\org\codehaus\jackson\jackson-mapper-asl\1.9.13\jackson-mapper-asl-1.9.13.jar;C:\hisenwork\soft\maven\com\twitter\chill_2.11\0.8.0\chill_2.11-0.8.0.jar;C:\hisenwork\soft\maven\com\esotericsoftware\kryo-shaded\3.0.3\kryo-shaded-3.0.3.jar;C:\hisenwork\soft\maven\com\esotericsoftware\minlog\1.3.0\minlog-1.3.0.jar;C:\hisenwork\soft\maven\org\objenesis\objenesis\2.1\objenesis-2.1.jar;C:\hisenwork\soft\maven\com\twitter\chill-Java\0.8.0\chill-Java-0.8.0.jar;C:\hisenwork\soft\maven\org\apache\xbean\xbean-asm5-shaded\4.4\xbean-asm5-shaded-4.4.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-client\2.2.0\hadoop-client-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-common\2.2.0\hadoop-common-2.2.0.jar;C:\hisenwork\soft\maven\commons-cli\commons-cli\1.2\commons-cli-1.2.jar;C:\hisenwork\soft\maven\org\apache\commons\commons-math\2.1\commons-math-2.1.jar;C:\hisenwork\soft\maven\xmlenc\xmlenc\0.52\xmlenc-0.52.jar;C:\hisenwork\soft\maven\commons-io\commons-io\2.1\commons-io-2.1.jar;C:\hisenwork\soft\maven\commons-lang\commons-lang\2.5\commons-lang-2.5.jar;C:\hisenwork\soft\maven\commons-configuration\commons-configuration\1.6\commons-configuration-1.6.jar;C:\hisenwork\soft\maven\commons-collections\commons-collections\3.2.1\commons-collections-3.2.1.jar;C:\hisenwork\soft\maven\commons-digester\commons-digester\1.8\commons-digester-1.8.jar;C:\hisenwork\soft\maven\commons-beanutils\commons-beanutils\1.7.0\commons-beanutils-1.7.0.jar;C:\hisenwork\soft\maven\commons-beanutils\commons-beanutils-core\1.8.0\commons-beanutils-core-1.8.0.jar;C:\hisenwork\soft\maven\com\google\protobuf\protobuf-Java\2.5.0\protobuf-Java-2.5.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-auth\2.2.0\hadoop-auth-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\commons\commons-compress\1.4.1\commons-compress-1.4.1.jar;C:\hisenwork\soft\maven\org\tukaani\xz\1.0\xz-1.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-hdfs\2.2.0\hadoop-hdfs-2.2.0.jar;C:\hisenwork\soft\maven\org\mortbay\jetty\jetty-util\6.1.26\jetty-util-6.1.26.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-mapreduce-client-app\2.2.0\hadoop-mapreduce-client-app-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-mapreduce-client-common\2.2.0\hadoop-mapreduce-client-common-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-yarn-client\2.2.0\hadoop-yarn-client-2.2.0.jar;C:\hisenwork\soft\maven\com\google\inject\guice\3.0\guice-3.0.jar;C:\hisenwork\soft\maven\Javax\inject\Javax.inject\1\Javax.inject-1.jar;C:\hisenwork\soft\maven\aopalliance\aopalliance\1.0\aopalliance-1.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-yarn-server-common\2.2.0\hadoop-yarn-server-common-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-mapreduce-client-shuffle\2.2.0\hadoop-mapreduce-client-shuffle-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-yarn-api\2.2.0\hadoop-yarn-api-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-mapreduce-client-core\2.2.0\hadoop-mapreduce-client-core-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-yarn-common\2.2.0\hadoop-yarn-common-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-mapreduce-client-jobclient\2.2.0\hadoop-mapreduce-client-jobclient-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\hadoop\hadoop-annotations\2.2.0\hadoop-annotations-2.2.0.jar;C:\hisenwork\soft\maven\org\apache\spark\spark-launcher_2.11\2.0.1\spark-launcher_2.11-2.0.1.jar;C:\hisenwork\soft\maven\org\apache\spark\spark-network-common_2.11\2.0.1\spark-network-common_2.11-2.0.1.jar;C:\hisenwork\soft\maven\org\fusesource\leveldbjni\leveldbjni-all\1.8\leveldbjni-all-1.8.jar;C:\hisenwork\soft\maven\com\fasterxml\jackson\core\jackson-annotations\2.6.5\jackson-annotations-2.6.5.jar;C:\hisenwork\soft\maven\org\apache\spark\spark-network-shuffle_2.11\2.0.1\spark-network-shuffle_2.11-2.0.1.jar;C:\hisenwork\soft\maven\org\apache\spark\spark-unsafe_2.11\2.0.1\spark-unsafe_2.11-2.0.1.jar;C:\hisenwork\soft\maven\net\Java\dev\jets3t\jets3t\0.7.1\jets3t-0.7.1.jar;C:\hisenwork\soft\maven\commons-codec\commons-codec\1.3\commons-codec-1.3.jar;C:\hisenwork\soft\maven\commons-httpclient\commons-httpclient\3.1\commons-httpclient-3.1.jar;C:\hisenwork\soft\maven\org\apache\curator\curator-recipes\2.4.0\curator-recipes-2.4.0.jar;C:\hisenwork\soft\maven\org\apache\curator\curator-framework\2.4.0\curator-framework-2.4.0.jar;C:\hisenwork\soft\maven\org\apache\curator\curator-client\2.4.0\curator-client-2.4.0.jar;C:\hisenwork\soft\maven\org\apache\zookeeper\zookeeper\3.4.5\zookeeper-3.4.5.jar;C:\hisenwork\soft\maven\com\google\guava\guava\14.0.1\guava-14.0.1.jar;C:\hisenwork\soft\maven\Javax\servlet\Javax.servlet-api\3.1.0\Javax.servlet-api-3.1.0.jar;C:\hisenwork\soft\maven\org\apache\commons\commons-lang3\3.3.2\commons-lang3-3.3.2.jar;C:\hisenwork\soft\maven\org\apache\commons\commons-math3\3.4.1\commons-math3-3.4.1.jar;C:\hisenwork\soft\maven\com\google\code\findbugs\jsr305\1.3.9\jsr305-1.3.9.jar;C:\hisenwork\soft\maven\org\slf4j\slf4j-api\1.7.16\slf4j-api-1.7.16.jar;C:\hisenwork\soft\maven\org\slf4j\jul-to-slf4j\1.7.16\jul-to-slf4j-1.7.16.jar;C:\hisenwork\soft\maven\org\slf4j\jcl-over-slf4j\1.7.16\jcl-over-slf4j-1.7.16.jar;C:\hisenwork\soft\maven\log4j\log4j\1.2.17\log4j-1.2.17.jar;C:\hisenwork\soft\maven\org\slf4j\slf4j-log4j12\1.7.16\slf4j-log4j12-1.7.16.jar;C:\hisenwork\soft\maven\com\ning\compress-lzf\1.0.3\compress-lzf-1.0.3.jar;C:\hisenwork\soft\maven\org\xerial\snappy\snappy-Java\1.1.2.6\snappy-Java-1.1.2.6.jar;C:\hisenwork\soft\maven\net\jpountz\lz4\lz4\1.3.0\lz4-1.3.0.jar;C:\hisenwork\soft\maven\org\roaringbitmap\RoaringBitmap\0.5.11\RoaringBitmap-0.5.11.jar;C:\hisenwork\soft\maven\commons-net\commons-net\2.2\commons-net-2.2.jar;C:\hisenwork\soft\maven\org\scala-lang\scala-library\2.11.8\scala-library-2.11.8.jar;C:\hisenwork\soft\maven\org\json4s\json4s-jackson_2.11\3.2.11\json4s-jackson_2.11-3.2.11.jar;C:\hisenwork\soft\maven\org\json4s\json4s-core_2.11\3.2.11\json4s-core_2.11-3.2.11.jar;C:\hisenwork\soft\maven\org\json4s\json4s-ast_2.11\3.2.11\json4s-ast_2.11-3.2.11.jar;C:\hisenwork\soft\maven\com\thoughtworks\paranamer\paranamer\2.6\paranamer-2.6.jar;C:\hisenwork\soft\maven\org\scala-lang\scalap\2.11.0\scalap-2.11.0.jar;C:\hisenwork\soft\maven\org\scala-lang\scala-compiler\2.11.0\scala-compiler-2.11.0.jar;C:\hisenwork\soft\maven\org\scala-lang\modules\scala-parser-combinators_2.11\1.0.1\scala-parser-combinators_2.11-1.0.1.jar;C:\hisenwork\soft\maven\org\glassfish\jersey\core\jersey-client\2.22.2\jersey-client-2.22.2.jar;C:\hisenwork\soft\maven\Javax\ws\rs\Javax.ws.rs-api\2.0.1\Javax.ws.rs-api-2.0.1.jar;C:\hisenwork\soft\maven\org\glassfish\hk2\hk2-api\2.4.0-b34\hk2-api-2.4.0-b34.jar;C:\hisenwork\soft\maven\org\glassfish\hk2\hk2-utils\2.4.0-b34\hk2-utils-2.4.0-b34.jar;C:\hisenwork\soft\maven\org\glassfish\hk2\external\aopalliance-repackaged\2.4.0-b34\aopalliance-repackaged-2.4.0-b34.jar;C:\hisenwork\soft\maven\org\glassfish\hk2\external\Javax.inject\2.4.0-b34\Javax.inject-2.4.0-b34.jar;C:\hisenwork\soft\maven\org\glassfish\hk2\hk2-locator\2.4.0-b34\hk2-locator-2.4.0-b34.jar;C:\hisenwork\soft\maven\org\Javassist\Javassist\3.18.1-GA\Javassist-3.18.1-GA.jar;C:\hisenwork\soft\maven\org\glassfish\jersey\core\jersey-common\2.22.2\jersey-common-2.22.2.jar;C:\hisenwork\soft\maven\Javax\annotation\Javax.annotation-api\1.2\Javax.annotation-api-1.2.jar;C:\hisenwork\soft\maven\org\glassfish\jersey\bundles\repackaged\jersey-guava\2.22.2\jersey-guava-2.22.2.jar;C:\hisenwork\soft\maven\org\glassfish\hk2\osgi-resource-locator\1.0.1\osgi-resource-locator-1.0.1.jar;C:\hisenwork\soft\maven\org\glassfish\jersey\core\jersey-server\2.22.2\jersey-server-2.22.2.jar;C:\hisenwork\soft\maven\org\glassfish\jersey\media\jersey-media-jaxb\2.22.2\jersey-media-jaxb-2.22.2.jar;C:\hisenwork\soft\maven\Javax\validation\validation-api\1.1.0.Final\validation-api-1.1.0.Final.jar;C:\hisenwork\soft\maven\org\glassfish\jersey\containers\jersey-container-servlet\2.22.2\jersey-container-servlet-2.22.2.jar;C:\hisenwork\soft\maven\org\glassfish\jersey\containers\jersey-container-servlet-core\2.22.2\jersey-container-servlet-core-2.22.2.jar;C:\hisenwork\soft\maven\org\apache\mesos\mesos\0.21.1\mesos-0.21.1-shaded-protobuf.jar;C:\hisenwork\soft\maven\io\netty\netty-all\4.0.29.Final\netty-all-4.0.29.Final.jar;C:\hisenwork\soft\maven\io\netty\netty\3.8.0.Final\netty-3.8.0.Final.jar;C:\hisenwork\soft\maven\com\clearspring\analytics\stream\2.7.0\stream-2.7.0.jar;C:\hisenwork\soft\maven\io\dropwizard\metrics\metrics-core\3.1.2\metrics-core-3.1.2.jar;C:\hisenwork\soft\maven\io\dropwizard\metrics\metrics-jvm\3.1.2\metrics-jvm-3.1.2.jar;C:\hisenwork\soft\maven\io\dropwizard\metrics\metrics-json\3.1.2\metrics-json-3.1.2.jar;C:\hisenwork\soft\maven\io\dropwizard\metrics\metrics-graphite\3.1.2\metrics-graphite-3.1.2.jar;C:\hisenwork\soft\maven\com\fasterxml\jackson\core\jackson-databind\2.6.5\jackson-databind-2.6.5.jar;C:\hisenwork\soft\maven\com\fasterxml\jackson\core\jackson-core\2.6.5\jackson-core-2.6.5.jar;C:\hisenwork\soft\maven\com\fasterxml\jackson\module\jackson-module-scala_2.11\2.6.5\jackson-module-scala_2.11-2.6.5.jar;C:\hisenwork\soft\maven\org\scala-lang\scala-reflect\2.11.7\scala-reflect-2.11.7.jar;C:\hisenwork\soft\maven\com\fasterxml\jackson\module\jackson-module-paranamer\2.6.5\jackson-module-paranamer-2.6.5.jar;C:\hisenwork\soft\maven\org\apache\ivy\ivy\2.4.0\ivy-2.4.0.jar;C:\hisenwork\soft\maven\oro\oro\2.0.8\oro-2.0.8.jar;C:\hisenwork\soft\maven\net\razorvine\pyrolite\4.9\pyrolite-4.9.jar;C:\hisenwork\soft\maven\net\sf\py4j\py4j\0.10.3\py4j-0.10.3.jar;C:\hisenwork\soft\maven\org\apache\spark\spark-tags_2.11\2.0.1\spark-tags_2.11-2.0.1.jar;C:\hisenwork\soft\maven\org\scalatest\scalatest_2.11\2.2.6\scalatest_2.11-2.2.6.jar;C:\hisenwork\soft\maven\org\scala-lang\modules\scala-xml_2.11\1.0.2\scala-xml_2.11-1.0.2.jar;C:\hisenwork\soft\maven\org\spark-project\spark\unused\1.0.0\unused-1.0.0.jar com.hisen.spark.SimpleApp</span><br><span class="line">Using Spark&#x27;s default log4j profile: org/apache/spark/log4j-defaults.properties</span><br><span class="line">17/08/02 17:00:09 INFO SparkContext: Running Spark version 2.0.1</span><br><span class="line">17/08/02 17:00:10 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-Java classes where applicable</span><br><span class="line">17/08/02 17:00:10 INFO SecurityManager: Changing view acls to: Administrator</span><br><span class="line">17/08/02 17:00:10 INFO SecurityManager: Changing modify acls to: Administrator</span><br><span class="line">17/08/02 17:00:10 INFO SecurityManager: Changing view acls groups to:</span><br><span class="line">17/08/02 17:00:10 INFO SecurityManager: Changing modify acls groups to:</span><br><span class="line">17/08/02 17:00:10 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(Administrator); groups with view permissions: Set(); users  with modify permissions: Set(Administrator); groups with modify permissions: Set()</span><br><span class="line">17/08/02 17:00:11 INFO Utils: Successfully started service &#x27;sparkDriver&#x27; on port 59388.</span><br><span class="line">17/08/02 17:00:11 INFO SparkEnv: Registering MapOutputTracker</span><br><span class="line">17/08/02 17:00:11 INFO SparkEnv: Registering BlockManagerMaster</span><br><span class="line">17/08/02 17:00:11 INFO DiskBlockManager: Created local directory at C:\Users\Administrator\AppData\Local\Temp\blockmgr-630d8294-e5cb-428d-8189-4c3313e46fa3</span><br><span class="line">17/08/02 17:00:12 INFO MemoryStore: MemoryStore started with capacity 894.3 MB</span><br><span class="line">17/08/02 17:00:12 INFO SparkEnv: Registering OutputCommitCoordinator</span><br><span class="line">17/08/02 17:00:12 INFO Utils: Successfully started service &#x27;SparkUI&#x27; on port 4040.</span><br><span class="line">17/08/02 17:00:12 INFO SparkUI: Bound SparkUI to 0.0.0.0, and started at http://169.254.90.236:4040</span><br><span class="line">17/08/02 17:00:12 INFO Executor: Starting executor ID driver on host localhost</span><br><span class="line">17/08/02 17:00:12 INFO Utils: Successfully started service &#x27;org.apache.spark.network.netty.NettyBlockTransferService&#x27; on port 59397.</span><br><span class="line">17/08/02 17:00:12 INFO NettyBlockTransferService: Server created on 169.254.90.236:59397</span><br><span class="line">17/08/02 17:00:12 INFO BlockManagerMaster: Registering BlockManager BlockManagerId(driver, 169.254.90.236, 59397)</span><br><span class="line">17/08/02 17:00:12 INFO BlockManagerMasterEndpoint: Registering block manager 169.254.90.236:59397 with 894.3 MB RAM, BlockManagerId(driver, 169.254.90.236, 59397)</span><br><span class="line">17/08/02 17:00:12 INFO BlockManagerMaster: Registered BlockManager BlockManagerId(driver, 169.254.90.236, 59397)</span><br><span class="line">17/08/02 17:00:14 INFO MemoryStore: Block broadcast_0 stored as values in memory (estimated size 127.1 KB, free 894.2 MB)</span><br><span class="line">17/08/02 17:00:14 INFO MemoryStore: Block broadcast_0_piece0 stored as bytes in memory (estimated size 14.3 KB, free 894.2 MB)</span><br><span class="line">17/08/02 17:00:14 INFO BlockManagerInfo: Added broadcast_0_piece0 in memory on 169.254.90.236:59397 (size: 14.3 KB, free: 894.3 MB)</span><br><span class="line">17/08/02 17:00:14 INFO SparkContext: Created broadcast 0 from textFile at SimpleApp.Java:19</span><br><span class="line">17/08/02 17:00:14 ERROR Shell: Failed to locate the winutils binary in the hadoop binary path</span><br><span class="line">Java.io.IOException: Could not locate executable null\bin\winutils.exe in the Hadoop binaries.</span><br><span class="line">	at org.apache.hadoop.util.Shell.getQualifiedBinPath(Shell.Java:278)</span><br><span class="line">	at org.apache.hadoop.util.Shell.getWinUtilsPath(Shell.Java:300)</span><br><span class="line">	at org.apache.hadoop.util.Shell.&lt;clinit&gt;(Shell.Java:293)</span><br><span class="line">	at org.apache.hadoop.util.StringUtils.&lt;clinit&gt;(StringUtils.Java:76)</span><br><span class="line">	at org.apache.hadoop.mapred.FileInputFormat.setInputPaths(FileInputFormat.Java:362)</span><br><span class="line">	at org.apache.spark.SparkContext$$anonfun$hadoopFile$1$$anonfun$29.apply(SparkContext.scala:992)</span><br><span class="line">	at org.apache.spark.SparkContext$$anonfun$hadoopFile$1$$anonfun$29.apply(SparkContext.scala:992)</span><br><span class="line">	at org.apache.spark.rdd.HadoopRDD$$anonfun$getJobConf$6.apply(HadoopRDD.scala:176)</span><br><span class="line">	at org.apache.spark.rdd.HadoopRDD$$anonfun$getJobConf$6.apply(HadoopRDD.scala:176)</span><br><span class="line">	at scala.Option.map(Option.scala:146)</span><br><span class="line">	at org.apache.spark.rdd.HadoopRDD.getJobConf(HadoopRDD.scala:176)</span><br><span class="line">	at org.apache.spark.rdd.HadoopRDD.getPartitions(HadoopRDD.scala:195)</span><br><span class="line">	at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:248)</span><br><span class="line">	at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:246)</span><br><span class="line">	at scala.Option.getOrElse(Option.scala:121)</span><br><span class="line">	at org.apache.spark.rdd.RDD.partitions(RDD.scala:246)</span><br><span class="line">	at org.apache.spark.rdd.MapPartitionsRDD.getPartitions(MapPartitionsRDD.scala:35)</span><br><span class="line">	at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:248)</span><br><span class="line">	at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:246)</span><br><span class="line">	at scala.Option.getOrElse(Option.scala:121)</span><br><span class="line">	at org.apache.spark.rdd.RDD.partitions(RDD.scala:246)</span><br><span class="line">	at org.apache.spark.rdd.MapPartitionsRDD.getPartitions(MapPartitionsRDD.scala:35)</span><br><span class="line">	at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:248)</span><br><span class="line">	at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:246)</span><br><span class="line">	at scala.Option.getOrElse(Option.scala:121)</span><br><span class="line">	at org.apache.spark.rdd.RDD.partitions(RDD.scala:246)</span><br><span class="line">	at org.apache.spark.SparkContext.runJob(SparkContext.scala:1930)</span><br><span class="line">	at org.apache.spark.rdd.RDD.count(RDD.scala:1134)</span><br><span class="line">	at org.apache.spark.api.Java.JavaRDDLike$class.count(JavaRDDLike.scala:454)</span><br><span class="line">	at org.apache.spark.api.Java.AbstractJavaRDDLike.count(JavaRDDLike.scala:45)</span><br><span class="line">	at com.hisen.spark.SimpleApp.main(SimpleApp.Java:26)</span><br><span class="line">17/08/02 17:00:14 INFO FileInputFormat: Total input paths to process : 1</span><br><span class="line">17/08/02 17:00:14 INFO SparkContext: Starting job: count at SimpleApp.Java:26</span><br><span class="line">17/08/02 17:00:15 INFO DAGScheduler: Got job 0 (count at SimpleApp.Java:26) with 1 output partitions</span><br><span class="line">17/08/02 17:00:15 INFO DAGScheduler: Final stage: ResultStage 0 (count at SimpleApp.Java:26)</span><br><span class="line">17/08/02 17:00:15 INFO DAGScheduler: Parents of final stage: List()</span><br><span class="line">17/08/02 17:00:15 INFO DAGScheduler: Missing parents: List()</span><br><span class="line">17/08/02 17:00:15 INFO DAGScheduler: Submitting ResultStage 0 (MapPartitionsRDD[2] at filter at SimpleApp.Java:22), which has no missing parents</span><br><span class="line">17/08/02 17:00:15 INFO MemoryStore: Block broadcast_1 stored as values in memory (estimated size 3.2 KB, free 894.2 MB)</span><br><span class="line">17/08/02 17:00:15 INFO MemoryStore: Block broadcast_1_piece0 stored as bytes in memory (estimated size 1966.0 B, free 894.2 MB)</span><br><span class="line">17/08/02 17:00:15 INFO BlockManagerInfo: Added broadcast_1_piece0 in memory on 169.254.90.236:59397 (size: 1966.0 B, free: 894.3 MB)</span><br><span class="line">17/08/02 17:00:15 INFO SparkContext: Created broadcast 1 from broadcast at DAGScheduler.scala:1012</span><br><span class="line">17/08/02 17:00:15 INFO DAGScheduler: Submitting 1 missing tasks from ResultStage 0 (MapPartitionsRDD[2] at filter at SimpleApp.Java:22)</span><br><span class="line">17/08/02 17:00:15 INFO TaskSchedulerImpl: Adding task set 0.0 with 1 tasks</span><br><span class="line">17/08/02 17:00:15 INFO TaskSetManager: Starting task 0.0 in stage 0.0 (TID 0, localhost, partition 0, PROCESS_LOCAL, 5324 bytes)</span><br><span class="line">17/08/02 17:00:15 INFO Executor: Running task 0.0 in stage 0.0 (TID 0)</span><br><span class="line">17/08/02 17:00:15 INFO HadoopRDD: Input split: file:/D:/logs/boss_debug.log:0+4059273</span><br><span class="line">17/08/02 17:00:15 INFO deprecation: mapred.tip.id is deprecated. Instead, use mapreduce.task.id</span><br><span class="line">17/08/02 17:00:15 INFO deprecation: mapred.task.id is deprecated. Instead, use mapreduce.task.attempt.id</span><br><span class="line">17/08/02 17:00:15 INFO deprecation: mapred.task.is.map is deprecated. Instead, use mapreduce.task.ismap</span><br><span class="line">17/08/02 17:00:15 INFO deprecation: mapred.task.partition is deprecated. Instead, use mapreduce.task.partition</span><br><span class="line">17/08/02 17:00:15 INFO deprecation: mapred.job.id is deprecated. Instead, use mapreduce.job.id</span><br><span class="line">17/08/02 17:00:15 INFO MemoryStore: Block rdd_1_0 stored as values in memory (estimated size 5.7 MB, free 888.4 MB)</span><br><span class="line">17/08/02 17:00:15 INFO BlockManagerInfo: Added rdd_1_0 in memory on 169.254.90.236:59397 (size: 5.7 MB, free: 888.5 MB)</span><br><span class="line">17/08/02 17:00:15 INFO Executor: Finished task 0.0 in stage 0.0 (TID 0). 1842 bytes result sent to driver</span><br><span class="line">17/08/02 17:00:16 INFO TaskSetManager: Finished task 0.0 in stage 0.0 (TID 0) in 691 ms on localhost (1/1)</span><br><span class="line">17/08/02 17:00:16 INFO TaskSchedulerImpl: Removed TaskSet 0.0, whose tasks have all completed, from pool</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: ResultStage 0 (count at SimpleApp.Java:26) finished in 0.726 s</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: Job 0 finished: count at SimpleApp.Java:26, took 1.078428 s</span><br><span class="line">17/08/02 17:00:16 INFO SparkContext: Starting job: count at SimpleApp.Java:33</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: Got job 1 (count at SimpleApp.Java:33) with 1 output partitions</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: Final stage: ResultStage 1 (count at SimpleApp.Java:33)</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: Parents of final stage: List()</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: Missing parents: List()</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: Submitting ResultStage 1 (MapPartitionsRDD[3] at filter at SimpleApp.Java:29), which has no missing parents</span><br><span class="line">17/08/02 17:00:16 INFO MemoryStore: Block broadcast_2 stored as values in memory (estimated size 3.2 KB, free 888.4 MB)</span><br><span class="line">17/08/02 17:00:16 INFO MemoryStore: Block broadcast_2_piece0 stored as bytes in memory (estimated size 1967.0 B, free 888.4 MB)</span><br><span class="line">17/08/02 17:00:16 INFO BlockManagerInfo: Added broadcast_2_piece0 in memory on 169.254.90.236:59397 (size: 1967.0 B, free: 888.5 MB)</span><br><span class="line">17/08/02 17:00:16 INFO SparkContext: Created broadcast 2 from broadcast at DAGScheduler.scala:1012</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: Submitting 1 missing tasks from ResultStage 1 (MapPartitionsRDD[3] at filter at SimpleApp.Java:29)</span><br><span class="line">17/08/02 17:00:16 INFO TaskSchedulerImpl: Adding task set 1.0 with 1 tasks</span><br><span class="line">17/08/02 17:00:16 INFO TaskSetManager: Starting task 0.0 in stage 1.0 (TID 1, localhost, partition 0, PROCESS_LOCAL, 5324 bytes)</span><br><span class="line">17/08/02 17:00:16 INFO Executor: Running task 0.0 in stage 1.0 (TID 1)</span><br><span class="line">17/08/02 17:00:16 INFO BlockManager: Found block rdd_1_0 locally</span><br><span class="line">17/08/02 17:00:16 INFO Executor: Finished task 0.0 in stage 1.0 (TID 1). 954 bytes result sent to driver</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: ResultStage 1 (count at SimpleApp.Java:33) finished in 0.100 s</span><br><span class="line">17/08/02 17:00:16 INFO DAGScheduler: Job 1 finished: count at SimpleApp.Java:33, took 0.139033 s</span><br><span class="line">17/08/02 17:00:16 INFO TaskSetManager: Finished task 0.0 in stage 1.0 (TID 1) in 99 ms on localhost (1/1)</span><br><span class="line">17/08/02 17:00:16 INFO TaskSchedulerImpl: Removed TaskSet 1.0, whose tasks have all completed, from pool</span><br><span class="line"></span><br><span class="line">Lines with a: 11146, lines with b: 10760</span><br><span class="line"></span><br><span class="line">17/08/02 17:00:16 INFO SparkContext: Invoking stop() from shutdown hook</span><br><span class="line">17/08/02 17:00:16 INFO SparkUI: Stopped Spark web UI at http://169.254.90.236:4040</span><br><span class="line">17/08/02 17:00:16 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!</span><br><span class="line">17/08/02 17:00:16 INFO MemoryStore: MemoryStore cleared</span><br><span class="line">17/08/02 17:00:16 INFO BlockManager: BlockManager stopped</span><br><span class="line">17/08/02 17:00:16 INFO BlockManagerMaster: BlockManagerMaster stopped</span><br><span class="line">17/08/02 17:00:16 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!</span><br><span class="line">17/08/02 17:00:16 INFO SparkContext: Successfully stopped SparkContext</span><br><span class="line">17/08/02 17:00:16 INFO ShutdownHookManager: Shutdown hook called</span><br><span class="line">17/08/02 17:00:16 INFO ShutdownHookManager: Deleting directory C:\Users\Administrator\AppData\Local\Temp\spark-c40f2015-170f-4633-89dd-44dcd5bacfec</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>spark</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring - IOC和AOP的原理</title>
    <url>/20171120-Spring%20-%20IOC%E5%92%8CAOP%E7%9A%84%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<h2 id="简单理解IOC和AOP"><a href="#简单理解IOC和AOP" class="headerlink" title="简单理解IOC和AOP"></a>简单理解IOC和AOP</h2><h3 id="IOC：Inversion-of-Control，依赖倒置"><a href="#IOC：Inversion-of-Control，依赖倒置" class="headerlink" title="IOC：Inversion of Control，依赖倒置"></a>IOC：Inversion of Control，依赖倒置</h3><h4 id="生活场景助记"><a href="#生活场景助记" class="headerlink" title="生活场景助记"></a>生活场景助记</h4><p>如有有天你想喝一瓶矿泉水，你可以去小区便利店，告诉老板你要买矿泉水，然后老板卖给你。</p>
<p>但是你可能需要想这下雨天怎么去小卖部？是否要带伞？去了之后是否有我想要的水等一系列问题。</p>
<p>解决这个问题：</p>
<ol>
<li>使用外卖！到平台注册，告诉平台你需要什么水。</li>
<li>平台给你送到家，你只管付钱拿到水之后直接喝，不用考虑上述问题。</li>
</ol>
<p>是不是和Spring的做法很类似呢？Spring就是小卖部，你就是A对象，水就是B对象<br>第一：在Spring中声明一个类：A<br>第二：告诉Spring，A需要B</p>
<span id="more"></span>
<p>假设A是UserAction类，而B是UserService类</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;bean id=&quot;userService&quot; class=&quot;org.leadfar.service.UserService&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;documentService&quot; class=&quot;org.leadfar.service.DocumentService&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;orgService&quot; class=&quot;org.leadfar.service.OrgService&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;userAction&quot; class=&quot;org.leadfar.web.UserAction&quot;&gt;</span><br><span class="line">     &lt;property name=&quot;userService&quot; ref=&quot;userService&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>在Spring这个商店（工厂）中，有很多对象&#x2F;服务：userService,documentService,orgService</p>
<p>也有很多会员：userAction等等</p>
<p>声明userAction需要userService即可，</p>
<p>Spring将通过你给它提供的通道主动把userService送上门来，因此UserAction的代码示例类似如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package org.leadfar.web;</span><br><span class="line">public class UserAction&#123;</span><br><span class="line">     private UserService userService;</span><br><span class="line">     public String login()&#123;</span><br><span class="line">          userService.valifyUser(xxx);</span><br><span class="line">     &#125;</span><br><span class="line">     public void setUserService(UserService userService)&#123; </span><br><span class="line">          this.userService = userService;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这段代码里面，你无需自己创建UserService对象（Spring作为背后无形的手，把UserService对象通过你定义的setUserService()方法把它主动送给了你，这就叫依赖注入！）</p>
<p>Spring依赖注入的实现技术是：<strong>动态代理</strong></p>
<h3 id="AOP-Aspect-Oriented-Programming-面向切面编程"><a href="#AOP-Aspect-Oriented-Programming-面向切面编程" class="headerlink" title="AOP:Aspect Oriented Programming,面向切面编程"></a>AOP:Aspect Oriented Programming,面向切面编程</h3><p>你只要做你关注的事情，其他的事情一概不管，让AOP帮你去做</p>
<p>你可以灵活组合各种杂七杂八的事情交给AOP去做，而不会干扰你关注的事情。</p>
<p>从Spring的角度看，AOP最大的用途就在于提供了事务管理的能力。</p>
<p>事务管理就是一个关注点，你的正事就是去访问数据库，而你不想管事务（太烦）</p>
<p>所以，Spring在你访问数据库之前，自动帮你开启事务，当你访问数据库结束之后，自动帮你提交&#x2F;回滚事务！</p>
<h2 id="ICO-和-AOP的原理"><a href="#ICO-和-AOP的原理" class="headerlink" title="ICO 和 AOP的原理"></a>ICO 和 AOP的原理</h2><h3 id="IoC的实现形式有两种："><a href="#IoC的实现形式有两种：" class="headerlink" title="IoC的实现形式有两种："></a>IoC的实现形式有两种：</h3><ol>
<li>依赖查找：容器提供回调接口和上下文环境给组件。EJB和Apache Avalon都是使用这种方式。     </li>
<li>依赖注入：组件不做定位查询，只是提供普通的Java方法让容器去决定依赖关系。<br>容器全权负责组件的装配，它会把符合依赖关系的对象通过JavaBean属性或者构造子传递给需要的对象。</li>
</ol>
<p>通过JavaBean属性注射依赖关系的做法称为设值方法注入（Setter Injection）；</p>
<p>将依赖关系作为构造子参数传入的做法称为构造子注入（Constructor Injection）。</p>
<h3 id="AP实现有多种方案，主要包括："><a href="#AP实现有多种方案，主要包括：" class="headerlink" title="AP实现有多种方案，主要包括："></a>AP实现有多种方案，主要包括：</h3><ol>
<li>AspectJ (TM)：创建于Xerox PARC. 有近十年历史，技术成熟。但其过于复杂；破坏封装；而且需要专门的Java编译器，易用性较差。</li>
<li>动态代理AOP：使用JDK提供的动态代理API或字节码Bytecode处理技术来实现。基于动态代理API的具体项目有： JBoss 4.0 JBoss 4.0服务器。</li>
<li>基于字节码的AOP，例如：Aspectwerkz、CGlib、Spring等。</li>
</ol>
<h2 id="后期准备补充"><a href="#后期准备补充" class="headerlink" title="后期准备补充"></a>后期准备补充</h2><p>用过spring的朋友都知道spring的强大和高深，都觉得深不可测，</p>
<p>其实当你真正花些时间读一读源码就知道它的一些技术实现其实是建立在一些最基本的技术之上而已；<br>例如：</p>
<ol>
<li>AOP(面向方面编程)的实现是建立在CGLib提供的类代理和jdk提供的接口代理</li>
<li>IOC(控制反转)的实现建立在工厂模式、Java反射机制和jdk的操作XML的DOM解析方式.</li>
</ol>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://www.cnblogs.com/damowang/p/4305107.html">https://www.cnblogs.com/damowang/p/4305107.html</a></li>
<li><a href="http://blog.csdn.net/linxijun120903/article/details/56487073">http://blog.csdn.net/linxijun120903/article/details/56487073</a></li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Boot CLI 安装（windows）</title>
    <url>/20170713-Spring%20Boot%20CLI%20%E5%AE%89%E8%A3%85%EF%BC%88windows%EF%BC%89/</url>
    <content><![CDATA[<p>SpringBootCLI是一个命令行工具，可用于快速搭建基于spring的原型。</p>
<p>它支持运行Groovy脚本，这也就意味着你可以使用类似Java的语法，但不用写很多的模板代码。</p>
<p>Spring Boot不一定非要配合CLI使用，但它绝对是Spring应用取得进展的最快方式.</p>
<h2 id="下载分发包"><a href="#下载分发包" class="headerlink" title="下载分发包"></a>下载分发包</h2><ol>
<li>地址:<a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#getting-started-installing-the-cli" target="blank">getting-started-installing-the-cli<a/></li>
<li>下载：spring-boot-cli-x.x.x.RELEASE-bin.zip (例如：spring-boot-cli-1.5.4.RELEASE-bin.zip)</li>
<li>解压</li>
<li>设置环境变量：C:\hisenwork\soft\spring-1.5.4.RELEASE\bin （在path中添加）</li>
<li>cmd测试：spring –version</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">spring --version</span><br><span class="line">Spring CLI v1.5.4.RELEASE</span><br></pre></td></tr></table></figure>

<h2 id="运行一个简单程序"><a href="#运行一个简单程序" class="headerlink" title="运行一个简单程序"></a>运行一个简单程序</h2><span id="more"></span>
<p>文件名称：HelloController.groovy</p>
<p>文件内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@RestController</span><br><span class="line">class HelloController&#123;</span><br><span class="line">	@RequestMapping(&quot;/&quot;)</span><br><span class="line">	def hello()&#123;</span><br><span class="line">		return &quot;Hello World&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行程序：cmd进入文件所在文件夹，执行:spring run HelloController.groovy</p>
<p>提醒：Resolving dependencies第一次初始化时间会久一点，耐心等待</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">spring run HelloController.groovy</span><br><span class="line"></span><br><span class="line">Resolving dependencies..........................</span><br><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="line"> =========|_|==============|___/=/_/_/_/</span><br><span class="line"> :: Spring Boot ::        (v1.5.4.RELEASE)</span><br></pre></td></tr></table></figure>
<p>之后在浏览器中输入：http://localhost:8080/</p>
<p>就能看到：Hello World</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVC redirect &amp; return JSON &amp; set HTTP code</title>
    <url>/20180713-SpringMVC%20redirect%20&amp;%20return%20JSON%20&amp;%20set%20HTTP%20code/</url>
    <content><![CDATA[<p>springmvc正常情况下redirect并且设置指定响应码，异常情况下返回json数据</p>
<h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p>需求就是正常情况下能redirect到指定的页面<br>异常的情况下，能够返回JSON格式的错误信息<br>正常情况和异常情况都需要设置HTTP Code</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">webCharge</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">1</span>==<span class="number">1</span>) &#123;</span><br><span class="line">        response.setStatus(<span class="number">200</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:https://github.com/hisenyuan&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            response.setStatus(<span class="number">405</span>);</span><br><span class="line">            response.getWriter().write(JSON.toJSONString(<span class="string">&quot;hisenyuan&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVC把jsp改为Thymeleaf模版引擎</title>
    <url>/20170801-SpringMVC%E6%8A%8Ajsp%E6%94%B9%E4%B8%BAThymeleaf%E6%A8%A1%E7%89%88%E5%BC%95%E6%93%8E/</url>
    <content><![CDATA[<h2 id="Thymeleaf简介"><a href="#Thymeleaf简介" class="headerlink" title="Thymeleaf简介"></a>Thymeleaf简介</h2><p>前面的例子我们使用的视图技术主要是JSP。JSP的优点是它是Java EE容器的一部分，几乎所有Java EE服务器都支持JSP。缺点就是它在视图表现方面的功能很少，假如我们想迭代一个数组之类的，只能使用&lt;% %&gt;来包括Java语句进行。虽然有标准标签库（JSTL）的补足，但是使用仍然不太方便。另外JSP只能在Java EE容器中使用，如果我们希望渲染电子邮件之类的，JSP就无能为力了。</p>
<p>Java生态圈广泛，自然有很多视图框架，除了JSP之外，还有Freemarker、Velocity、Thymeleaf等很多框架。Thymeleaf的优点是它是基于HTML的，即使视图没有渲染成功，也是一个标准的HTML页面。因此它的可读性很不错，也可以作为设计原型来使用。而且它是完全独立于Java ee容器的，意味着我们可以在任何需要渲染HTML的地方使用Thymeleaf。</p>
<p>Thymeleaf也提供了spring的支持，我们可以非常方便的在Spring配置文件中声明Thymeleaf Beans，然后用它们渲染视图。</p>
<h2 id="改造-由jsp到Thymeleaf"><a href="#改造-由jsp到Thymeleaf" class="headerlink" title="改造 - 由jsp到Thymeleaf"></a>改造 - 由jsp到Thymeleaf</h2><ol>
<li>引入依赖</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--thymeleaf模版 spring4.x--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring4<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>配置ViewResolver(在spring的xml文件里)</li>
</ol>
<span id="more"></span>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置ViewResolver 使用：thymeleaf 模版引擎--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;templateResolver&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring4.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 缓存--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cacheable&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;templateEngine&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring4.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;templateResolver&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring4.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;templateEngine&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>接下来就可以直接使用了，跟之前的jsp没有什么不同</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/listpageplug/&#123;start&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">listPagePlug</span><span class="params">(<span class="meta">@PathVariable(&quot;start&quot;)</span> String start, Model model)</span> &#123;</span><br><span class="line">  PageHelper.startPage(Integer.valueOf(start), <span class="number">20</span>);</span><br><span class="line">  List&lt;Book&gt; readingList = bookService.getListPlug();</span><br><span class="line">  model.addAttribute(<span class="string">&quot;books&quot;</span>, readingList);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;readingList&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>到这里就改造完了，接下来就是Thymeleaf的各种用法了</p>
<p>这里举一个循环遍历的例子,后台返回了books对象集合</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--判断是否为空--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span> <span class="attr">th:unless</span>=<span class="string">&quot;$&#123;#lists.isEmpty(books)&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--循环--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;book : $&#123;books&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;book.bookId&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;book.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;book.number&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%=appPath%&gt;/book/detail/$&#123;book.bookId&#125;&quot;</span>&gt;</span>详情<span class="tag">&lt;/<span class="name">a</span>&gt;</span> |</span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%=appPath%&gt;/book/del/$&#123;book.bookId&#125;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="http://www.thymeleaf.org/doc/tutorials/2.1/thymeleafspring.html#integrating-thymeleaf-with-spring" target="_blank">thymeleaf官方指南</a></li>
<li><a href="http://www.tianmaying.com/tutorial/using-thymeleaf" target="_blank">新一代Java模板引擎Thymeleaf</a></li>
<li><a href="http://www.webinno.cn/blog/article/view/131" target="_blank">Thymeleaf基本知识</a></li>
<li><a href="http://v8en.com/news/list/47/0" target="_blank">thymeleaf总结文章</a></li>
<li><a href="http://www.cnblogs.com/lazio10000/p/5603955.html" target="_blank">Thymeleaf 模板的使用</a></li>
<li><a href="http://www.blogJava.net/bjwulin/archive/2013/02/07/395234.html" target="_blank">thymeleaf 学习笔记</a></li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>String 和 StringBuilder、StringBuffer的区别</title>
    <url>/20170208-String-%E5%92%8C-StringBuilder%E3%80%81StringBuffer%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<h2 id="String和StringBuilder、StringBuffer的区别？"><a href="#String和StringBuilder、StringBuffer的区别？" class="headerlink" title="String和StringBuilder、StringBuffer的区别？"></a>String和StringBuilder、StringBuffer的区别？</h2><p>答：Java平台提供了两种类型的字符串：String和StringBuffer&#x2F;StringBuilder，</p>
<p>它们可以储存和操作字符串。其中String是只读字符串，</p>
<p>也就意味着String引用的字符串内容是不能被改变的。</p>
<p>而StringBuffer&#x2F;StringBuilder类表示的字符串对象可以直接进行修改。</p>
<p>StringBuilder是Java 5中引入的，它和StringBuffer的方法完全相同，</p>
<p>区别在于它是在单线程环境下使用的，因为它的所有方面都没有被synchronized修饰，</p>
<p>因此它的效率也比StringBuffer要高。</p>
<p><strong>简而言之：</strong></p>
<p>String：不能被修改</p>
<p>StringBuffer：可以随意修改，有synchronized修饰，是线程安全的，效率略低</p>
<p>StringBuilder：可以随意修改，无synchronized修饰，不是线程安全的，效率高</p>
<span id="more"></span>

<h2 id="面试题1：说出程序的输出结果"><a href="#面试题1：说出程序的输出结果" class="headerlink" title="面试题1：说出程序的输出结果"></a><strong>面试题1：说出程序的输出结果</strong></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">classStringEqualTest &#123;</span><br><span class="line"></span><br><span class="line">	publicstaticvoidmain(String[] args) &#123;</span><br><span class="line">		<span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;Programming&quot;</span>;</span><br><span class="line">		<span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;Programming&quot;</span>);</span><br><span class="line">		<span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;Program&quot;</span> + <span class="string">&quot;ming&quot;</span>;</span><br><span class="line">		System.out.println(s1 == s2);<span class="comment">//false</span></span><br><span class="line">		System.out.println(s1 == s3);<span class="comment">//true</span></span><br><span class="line">		System.out.println(s1 == s1.intern());<span class="comment">//true</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>存在于.class文件中的常量池，在运行期被JVM装载，并且可以扩充。</p>
<p>String的intern()方法就是扩充常量池的一个方法；</p>
<p>当一个String实例str调用intern()方法时，</p>
<p>Java查找常量池中是否有相同Unicode的字符串常量，</p>
<p>如果有，则返回其的引用，</p>
<p>如果没有，则在常量池中增加一个Unicode等于str的字符串并返回它的引用</p>
<h2 id="面试题2"><a href="#面试题2" class="headerlink" title="面试题2"></a><strong>面试题2</strong></h2><p>什么情况下用+运算符进行字符串连接比调用StringBuffer&#x2F;StringBuilder对象的append方法连接字符串性能更好？</p>
<p>答：</p>
<p>如果使用少量的字符串操作，使用 (+运算符)连接字符串；</p>
<p>如果频繁的对大量字符串进行操作，则使用</p>
<p>1：全局变量或者需要多线程支持则使用StringBuffer；</p>
<p>2：局部变量或者单线程不涉及线程安全则使有StringBuilder。</p>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>StringBuilder</tag>
        <tag>StringBuffer的区别</tag>
      </tags>
  </entry>
  <entry>
    <title>Test Java Code</title>
    <url>/20170120-Test-Java-Code/</url>
    <content><![CDATA[<p>这里我只是贴一段代码测试一下</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hisen.interview;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 变量不能被重写</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hisenyuan 2017年1月18日 下午10:33:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AboutExtends</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fun</span><span class="params">()</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">static</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;Astatic&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		&#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;I&#x27;m A class&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fun</span><span class="params">()</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">static</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;Bstatic&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		&#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;I&#x27;m B class&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">// 里面的static块方法，new了就会执行</span></span><br><span class="line">		<span class="comment">// new new B()两个都执行，new new A()执行A的</span></span><br><span class="line">		<span class="comment">//static代码块在&#123;&#125;代码块后面执行</span></span><br><span class="line">		<span class="type">A</span> <span class="variable">classA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">		System.out.println(classA.a);</span><br><span class="line">		classA.fun();</span><br><span class="line">		<span class="comment">// 输出信息</span></span><br><span class="line">		<span class="comment">// Astatic</span></span><br><span class="line">		<span class="comment">// Bstatic</span></span><br><span class="line">		<span class="comment">// I&#x27;m A class</span></span><br><span class="line">		<span class="comment">// I&#x27;m B class</span></span><br><span class="line">		<span class="comment">// 1</span></span><br><span class="line">		<span class="comment">// B</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 多态记忆口诀</span></span><br><span class="line">		<span class="comment">// 变量多态看左边</span></span><br><span class="line">		<span class="comment">// 方法多态看右边</span></span><br><span class="line">		<span class="comment">// 静态多态看左边</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Thread Pool Monitor - 线程池监控</title>
    <url>/20190905-Thread-Pool-Monitor/</url>
    <content><![CDATA[<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>业务当中多处用到线程池进行异步处理;<br>为了得知线程池设置是否合理，故需要增加线程池监控;<br>常见的实现方式：</p>
<ol>
<li>org.springframework.scheduling.concurrent.ScheduledExecutorTask</li>
<li>org.springframework.scheduling.annotation.Scheduled</li>
</ol>
<p>本文使用1的方式实现，主要是方便进行配置，可以托管多个任务;</p>
<h1 id="二、效果预览"><a href="#二、效果预览" class="headerlink" title="二、效果预览"></a>二、效果预览</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">taskName:pool1-monitor. taskCount:820, completedTaskCount:820, largestPoolSize:30, poolSize:30, activeCount:0, corePoolSize:30, maximumPoolSize:50, queueSize:0</span><br><span class="line">taskName:pool2-monitor. taskCount:1703, completedTaskCount:1703, largestPoolSize:30, poolSize:30, activeCount:0, corePoolSize:30, maximumPoolSize:50, queueSize:0</span><br><span class="line">taskName:pool3-monitor. taskCount:820, completedTaskCount:448, largestPoolSize:30, poolSize:30, activeCount:30, corePoolSize:30, maximumPoolSize:50, queueSize:342</span><br></pre></td></tr></table></figure>

<h1 id="三、监控逻辑"><a href="#三、监控逻辑" class="headerlink" title="三、监控逻辑"></a>三、监控逻辑</h1><p>代码如下:</p>
<span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hisen.thread.monitor.threadpool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Java.util.List;</span><br><span class="line"><span class="keyword">import</span> Java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hisenyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019-09-05 19:45</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolMonitor</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(ThreadPoolMonitor.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// xml中注入</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;ThreadPoolTaskExecutor&gt; pools;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        monitorHandle(pools);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">monitorHandle</span><span class="params">(List&lt;ThreadPoolTaskExecutor&gt; pools)</span> &#123;</span><br><span class="line">        pools.forEach(<span class="built_in">this</span>::handleExecutor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">handleExecutor</span><span class="params">(ThreadPoolTaskExecutor p)</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">threadPoolExecutor</span> <span class="operator">=</span> p.getThreadPoolExecutor();</span><br><span class="line">        <span class="comment">// 线程池需要执行的任务数</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">taskCount</span> <span class="operator">=</span> threadPoolExecutor.getTaskCount();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 线程池在运行过程中已完成的任务数</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">completedTaskCount</span> <span class="operator">=</span> threadPoolExecutor.getCompletedTaskCount();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 曾经创建过的最大线程数</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">largestPoolSize</span> <span class="operator">=</span> threadPoolExecutor.getLargestPoolSize();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 线程池里的线程数量</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">poolSize</span> <span class="operator">=</span> threadPoolExecutor.getPoolSize();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 线程池里活跃的线程数量</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">activeCount</span> <span class="operator">=</span> threadPoolExecutor.getActiveCount();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 配置的核心线程数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">corePoolSize</span> <span class="operator">=</span> threadPoolExecutor.getCorePoolSize();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 配置的最大线程数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">maximumPoolSize</span> <span class="operator">=</span> threadPoolExecutor.getMaximumPoolSize();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 当前线程池队列的个数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">queueSize</span> <span class="operator">=</span> threadPoolExecutor.getQueue().size();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 线程池前缀名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">threadNamePrefix</span> <span class="operator">=</span> p.getThreadNamePrefix();</span><br><span class="line"></span><br><span class="line">        LOGGER.info(<span class="string">&quot;taskName:&#123;&#125;monitor. taskCount:&#123;&#125;, completedTaskCount:&#123;&#125;, largestPoolSize:&#123;&#125;, poolSize:&#123;&#125;, activeCount:&#123;&#125;, corePoolSize:&#123;&#125;, maximumPoolSize:&#123;&#125;, queueSize:&#123;&#125;&quot;</span></span><br><span class="line">                , threadNamePrefix</span><br><span class="line">                , taskCount</span><br><span class="line">                , completedTaskCount</span><br><span class="line">                , largestPoolSize</span><br><span class="line">                , poolSize</span><br><span class="line">                , activeCount</span><br><span class="line">                , corePoolSize</span><br><span class="line">                , maximumPoolSize</span><br><span class="line">                , queueSize);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;ThreadPoolTaskExecutor&gt; <span class="title function_">getPools</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pools;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPools</span><span class="params">(List&lt;ThreadPoolTaskExecutor&gt; pools)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pools = pools;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="四、spring-xml配置"><a href="#四、spring-xml配置" class="headerlink" title="四、spring xml配置"></a>四、spring xml配置</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ### 线程池监控 开始 ### --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;threadPoolMonitorRunnable&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hisen.thread.monitor.threadpool.ThreadPoolMonitor&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pools&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;pool1&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;pool2&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;pool3&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 定时执行的线程池 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;threadPoolMonitorTask&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.scheduling.concurrent.ScheduledExecutorTask&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;runnable&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;threadPoolMonitorRunnable&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 延迟时间，单位ms --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;delay&quot;</span> <span class="attr">value</span>=<span class="string">&quot;150000&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 间隔时间，单位ms --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;period&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5000&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 任务调度 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;scheduledExecutorFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.scheduling.concurrent.ScheduledExecutorFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 执行任务的线程池个数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 任务列表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;scheduledExecutorTasks&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;threadPoolMonitorTask&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ### 线程池监控 结束 ### --&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu 16 安装IDEA 并且设置快捷启动</title>
    <url>/20170304-Ubuntu%2016%20%E5%AE%89%E8%A3%85IDEA%20%E5%B9%B6%E4%B8%94%E8%AE%BE%E7%BD%AE%E5%BF%AB%E6%8D%B7%E5%90%AF%E5%8A%A8/</url>
    <content><![CDATA[<p>安装简单，下载官网的文件(with Java的比较方便)</p>
<p>解压之后在bin目录下执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo sh idea.sh</span><br></pre></td></tr></table></figure>
<p>就会进入安装程序，接下来会跳出图形界面，跟windows差不多的步骤</p>
<p>没有激活码可以看之前的文章</p>
<p>关键的一个是我发现网上说的建立桌面快捷方式不行</p>
<p>就这样弄个方便的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd ~</span><br><span class="line">ln -s /idea home/bin/idea.sh idea</span><br><span class="line">#接下来执行 idea &amp; 就可以打开，如果提示权限不够</span><br><span class="line">#就执行 sudo idea &amp;</span><br><span class="line">sudo idea &amp;</span><br><span class="line">#后面的 &amp; 代表后台运行的意思，不影响控制台</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>ubuntu root su 密码</title>
    <url>/20170704-Ubuntu%20root%20%E5%AF%86%E7%A0%81/</url>
    <content><![CDATA[<p>在安装完ubuntu的时候</p>
<p>只有自己设置的非root的帐号和密码</p>
<p>但是又要用root密码怎么办呢？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@ubuntu-1:~$ sudo passwd</span><br><span class="line">Enter new UNIX password:</span><br><span class="line">Retype new UNIX password:</span><br><span class="line">passwd: password updated successfully</span><br></pre></td></tr></table></figure>
<p>上面输入的密码就是你的root密码</p>
<p>检测一下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@ubuntu-1:~$ su</span><br><span class="line">Password:</span><br><span class="line">root@ubuntu-1:/home/hisen#</span><br></pre></td></tr></table></figure>
<p>通过，至此结束</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu 16 LTS 关闭图形界面</title>
    <url>/20170218-Ubuntu-16-LTS-%E5%85%B3%E9%97%AD%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2/</url>
    <content><![CDATA[<p>有两个方法。</p>
<h2 id="第一个方法"><a href="#第一个方法" class="headerlink" title="第一个方法"></a>第一个方法</h2><p>到了图形化界面，打开terminal(终端)执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo init 3</span><br></pre></td></tr></table></figure>
<p>就会跳转到命令行界面，并且只有命令行</p>
<p>就是一个全屏的terminal。</p>
<h2 id="第二个方法"><a href="#第二个方法" class="headerlink" title="第二个方法"></a>第二个方法</h2><p>在安装ubuntu的时候，有选择是否安装图形化界面的选项，选择不安装，那么系统将不带有图形化界面而默认进入命令行界面。</p>
<h2 id="第三个方法"><a href="#第三个方法" class="headerlink" title="第三个方法"></a>第三个方法</h2><p><a href="http://hisen.me/20170219-Oracle-VM-VirtualBox%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%93%E5%BC%80%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B9%B6%E4%B8%94%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C/" title="Oracle VM VirtualBox命令行打开虚拟机并且后台运行">http://hisen.me/20170219-Oracle-VM-VirtualBox%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%93%E5%BC%80%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B9%B6%E4%B8%94%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C/</a></p>
<h2 id="第四个方法"><a href="#第四个方法" class="headerlink" title="第四个方法"></a>第四个方法</h2><p>直接安装Ubuntu Server，目前我就是这样</p>
<p>不过装了之后还是推荐第三个方法！！！</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu 16 LTS 安装redis -  apt-get install redis-server</title>
    <url>/20170223-Ubuntu-16-LTS-%E5%AE%89%E8%A3%85redis-ape-get-install-redis-server/</url>
    <content><![CDATA[<p>配置文件的路径： &#x2F;etc&#x2F;redis&#x2F;redis.conf</p>
<p>redis服务路径: &#x2F;etc&#x2F;init.d&#x2F;redis-server</p>
<p>默认是开机启动</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#安装</span><br><span class="line">hisen@hisen-server:/$ sudo apt-get install redis-server</span><br><span class="line">#打开服务</span><br><span class="line">hisen@hisen-server:/$ service redis start</span><br><span class="line">==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ===</span><br><span class="line">Authentication is required to start &#x27;redis-server.service&#x27;.</span><br><span class="line">Authenticating as: hisen,,, (hisen)</span><br><span class="line">Password: </span><br><span class="line">==== AUTHENTICATION COMPLETE ===</span><br><span class="line">#打开客户端</span><br><span class="line">hisen@hisen-server:/$ redis-cli</span><br><span class="line">#操作数据库</span><br><span class="line">127.0.0.1:6379&gt; set hisen hisen.me</span><br><span class="line">OK</span><br><span class="line">#获取数据</span><br><span class="line">127.0.0.1:6379&gt; get hisen</span><br><span class="line">&quot;hisen.me&quot;</span><br><span class="line">127.0.0.1:6379&gt; </span><br><span class="line">#停止数据库</span><br><span class="line">hisen@hisen-server:/$ service redis stop</span><br><span class="line">==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ===</span><br><span class="line">Authentication is required to stop &#x27;redis-server.service&#x27;.</span><br><span class="line">Authenticating as: hisen,,, (hisen)</span><br><span class="line">Password: </span><br><span class="line">==== AUTHENTICATION COMPLETE ===</span><br><span class="line">hisen@hisen-server:/$ </span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu 16 LTS 安装zookeeper并开机启动</title>
    <url>/20170224-Ubuntu-16-LTS-%E5%AE%89%E8%A3%85zookeeper%E5%B9%B6%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/</url>
    <content><![CDATA[<h1 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install zookeeper</span><br></pre></td></tr></table></figure>
<p>默认信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#安装路径</span><br><span class="line">/usr/share/zookeeper</span><br><span class="line">#配置文件</span><br><span class="line">/etc/zookeeper/conf/zoo.cfg</span><br></pre></td></tr></table></figure>
<h1 id="二、启动服务端"><a href="#二、启动服务端" class="headerlink" title="二、启动服务端"></a>二、启动服务端</h1><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@hisen-server:/usr/share/zookeeper/bin$ sudo sh zkServer.sh</span><br></pre></td></tr></table></figure>
<p>如果报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">zkServer.sh: 81: /home/xxx/zookeeper-3.4.6/bin/zkEnv.sh: Syntax error: &quot;(&quot; unexpected (expecting &quot;fi&quot;)</span><br><span class="line">网上找了一圈原因，大概意思就是脚本里面用到的shell版本与系统当前使用的shell版本不兼容，导致异常。</span><br><span class="line">查看当前ubuntu系统的shell，默认是使用dash，但是脚本里面是使用的bash，问题就在这里了。</span><br><span class="line">解决步骤：</span><br><span class="line">修改当前系统的shell版本：</span><br><span class="line">dpkg-reconfigure dash</span><br><span class="line">Tab 移动到NO 回车即可(选择否)</span><br></pre></td></tr></table></figure>
<h1 id="三、验证是否成功"><a href="#三、验证是否成功" class="headerlink" title="三、验证是否成功"></a>三、验证是否成功</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@hisen-server:/usr/share/zookeeper/bin$ sudozkCli.sh -server localhost:2181</span><br><span class="line">WatchedEvent state:SyncConnected type:None path:null</span><br><span class="line">[zk: localhost:2181(CONNECTED) 0]</span><br></pre></td></tr></table></figure>
<p>出现上面的信息说明成功了</p>
<h1 id="四、设置开机启动"><a href="#四、设置开机启动" class="headerlink" title="四、设置开机启动"></a>四、设置开机启动</h1><p>1.创建配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vi /etc/init.d/zookeeper</span><br></pre></td></tr></table></figure>
<p>添加以下信息，注意自己的相关路径是否相同，不同修改之</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">#Configurations injected by install_server below....</span><br><span class="line">EXEC=/usr/share/zookeeper/bin/zkServer.sh</span><br><span class="line">ZOO_LOG_DIR=&quot;/var/zookeeper&quot;</span><br><span class="line">JAVA_HOME=/usr/hisen/soft/jdk8 </span><br><span class="line">PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br><span class="line">###############</span><br><span class="line"># SysV Init Information</span><br><span class="line"># chkconfig: - 58 74</span><br><span class="line"># description: zookeeper is the zookeeper daemon.</span><br><span class="line">### BEGIN INIT INFO</span><br><span class="line"># Provides: zookeeper</span><br><span class="line"># Required-Start: $network $local_fs $remote_fs</span><br><span class="line"># Required-Stop: $network $local_fs $remote_fs</span><br><span class="line"># Default-Start: 2 3 4 5</span><br><span class="line"># Default-Stop: 0 1 6</span><br><span class="line"># Should-Start: $syslog $named</span><br><span class="line"># Should-Stop: $syslog $named</span><br><span class="line"># Short-Description: start and stop zookeeper</span><br><span class="line"># Description: zookeeper daemon</span><br><span class="line">### END INIT INFO</span><br><span class="line">case $1 in</span><br><span class="line">          start)  /usr/share/zookeeper/bin/zkServer.sh start;;</span><br><span class="line">          stop)   /usr/share/zookeeper/bin/zkServer.sh stop;;</span><br><span class="line">          status) /usr/share/zookeeper/bin/zkServer.sh status;;</span><br><span class="line">          restart) /usr/share/zookeeper/bin/zkServer.sh restart;;</span><br><span class="line">          *)  echo &quot;require start|stop|status|restart&quot;  ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>2.授权</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo chmod +x zookeeper</span><br></pre></td></tr></table></figure>
<p>3.安装开机启动管理软件(一般自带)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install rcconf</span><br></pre></td></tr></table></figure>
<p>4.进入管理界面</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo rcconf</span><br></pre></td></tr></table></figure>
<p>↑ ↓ 移动光标，空格键选中zookeeper</p>
<p>Tab 使光标移动到OK 回车即可</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>zookeeper</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu 16 换阿里云源</title>
    <url>/20170218-Ubuntu-16-%E6%8D%A2%E9%98%BF%E9%87%8C%E4%BA%91%E6%BA%90/</url>
    <content><![CDATA[<ol>
<li>sudo vi &#x2F;etc&#x2F;apt&#x2F;sources.list</li>
<li>删除里面所有的内容，添加下面的内容</li>
<li>sudo apt-get update</li>
</ol>
<p>三步完成之后即可！</p>
<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>阿里云</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16.04使用阿里云镜像安装Mongodb &amp;　配置</title>
    <url>/20170219-Ubuntu16-04%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E5%AE%89%E8%A3%85Mongodb-%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="一、使用阿里云镜像安装Mongodb"><a href="#一、使用阿里云镜像安装Mongodb" class="headerlink" title="一、使用阿里云镜像安装Mongodb"></a>一、使用阿里云镜像安装Mongodb</h2><p>1 &gt; 添加 MongoDB 公共GPG钥匙</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927</span><br></pre></td></tr></table></figure>
<p>2 &gt; 创建列表文件</p>
<p>这里把官网repo.mongodb.org</p>
<p>换成了mirrors.aliyun.com</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo &quot;deb http://mirrors.aliyun.com/mongodb/apt/ubuntu xenial/mongodb-org/3.2 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-3.2.list</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>3 &gt; 重新加载本地包数据库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
<p>4 &gt; 安装MongoDB</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install -y mongodb-org</span><br></pre></td></tr></table></figure>
<p>5 &gt; 启动MongoDB</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo service mongod start</span><br></pre></td></tr></table></figure>
<p>6 &gt; 打开MongoDB客户端</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mongo</span><br></pre></td></tr></table></figure>
<p>7 &gt; 关闭MongoDB</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo service mongod stop</span><br></pre></td></tr></table></figure>

<p>展示一下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@hisen-server:~$ sudo service mongod start</span><br><span class="line">hisen@hisen-server:~$ mongo</span><br><span class="line">MongoDB shell version: 3.2.12</span><br><span class="line">connecting to: test</span><br><span class="line">&gt; 1 + 1</span><br><span class="line">2</span><br><span class="line">&gt; </span><br></pre></td></tr></table></figure>
<p>安装成功</p>
<p>MongoDB默认的数据文件和日志文件分别存储在下面的位置</p>
<p>数据文件：&#x2F;var&#x2F;lib&#x2F;mongodb </p>
<p>日志文件：&#x2F;var&#x2F;log&#x2F;mongodb </p>
<p>你可以修改&#x2F;etc&#x2F;mongod.conf 文件来改变相应的存储位置。</p>
<p>如果你想改变运行MongoDB的用户</p>
<p>你必须把 &#x2F;var&#x2F;lib&#x2F;mongodb </p>
<p>和 &#x2F;var&#x2F;log&#x2F;mongodb 2个目录的访问权限付给该用户</p>
<h2 id="二、配置MongoDB"><a href="#二、配置MongoDB" class="headerlink" title="二、配置MongoDB"></a>二、配置MongoDB</h2><p>1允许远程访问</p>
<p>绑定ip</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo vim /etc/mongod.conf</span><br></pre></td></tr></table></figure>
<p>打开配置文件，添加需要增加的</p>
<p>不建议采用注释掉  bindIP 的方案，非常容易受到攻击</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># network interfaces  </span><br><span class="line">net:  </span><br><span class="line">  port: 27017  </span><br><span class="line">  bindIp: 0.0.0.0</span><br></pre></td></tr></table></figure>
<p>接受所有ip</p>
<p>重启</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo service mongod restart</span><br></pre></td></tr></table></figure>

<p>2.配置防火墙 （不配置也行）<br>Ubuntu16.04 桌面版默认没有安装好 ipTable，用如下命令安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br><span class="line">sudo apt-get install iptables-persistent</span><br></pre></td></tr></table></figure>
<p>安装过程中，弹窗选择YES</p>
<p>安装完成后：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo iptables -A INPUT -p tcp --dport 27017 -j ACCEPT</span><br></pre></td></tr></table></figure>]]></content>
  </entry>
  <entry>
    <title>Linux-Ubuntu安装:JDK &amp; Tomcat &amp; Maven - 简单教程</title>
    <url>/20170218-Ubuntu%E5%AE%89%E8%A3%85JDK8-Tomcat-%E7%AE%80%E5%8D%95%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<p>在网速搜索很多教程，感觉写的都太难了我去</p>
<p>准备工作：</p>
<ol>
<li>下载JDK，并解压(选择适合自己的版本：<a href="http://www.oracle.com/technetwork/Java/Javase/downloads/jdk8-downloads-2133151.html" target="_blank">地址</a>)</li>
<li>下载Tomcat，并解压(选择适合自己的版本：<a href="http://tomcat.apache.org/download-80.cgi" target="_blank">地址</a>)</li>
<li>下载Maven，并解压(选择适合自己的版本：<a href="http://maven.apache.org/download.cgi" target="_blank">地址</a>)</li>
</ol>
<p>目录约定：</p>
<ol>
<li>Java路径：&#x2F;usr&#x2F;hisen&#x2F;soft&#x2F;Java&#x2F;jdk8</li>
<li>tomcat路径：&#x2F;usr&#x2F;hisen&#x2F;soft&#x2F;tomcat&#x2F;tomcat8</li>
<li>maven路径：&#x2F;usr&#x2F;hisen&#x2F;soft&#x2F;maven&#x2F;maven-3.5.0</li>
</ol>
<p>说明以上路径都是解压之后的，请解压之后自行重命名文件夹等工作</p>
<span id="more"></span>

<p>下面开始配置环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vi /etc/profile</span><br></pre></td></tr></table></figure>
<p>底部添加：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#Java的环境变量配置</span><br><span class="line">export JAVA_HOME=/usr/hisen/soft/Java/jdk8</span><br><span class="line">export JRE_HOME=$JAVA_HOME/jre</span><br><span class="line">export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br><span class="line"></span><br><span class="line">#tomcat的环境变量配置</span><br><span class="line">export CATALINA_HOME=/usr/hisen/soft/tomcat/tomcat8</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib:$CATALINA_HOME/lib</span><br><span class="line">export PATH=$PATH:$CATALINA_HOME/bin</span><br><span class="line"></span><br><span class="line">#maven环境变量</span><br><span class="line">export MAVEN_HOME=/usr/hisen/soft/maven/maven-3.5.0</span><br><span class="line">export MAVEN_OPTS=&quot;-Xms256m -Xmx512m&quot;</span><br><span class="line">export PATH=$&#123;MAVEN_HOME&#125;/bin:$PATH</span><br></pre></td></tr></table></figure>
<p>让刚刚的配置生效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<p>查看maven</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn -v</span><br></pre></td></tr></table></figure>
<p>查看Java版本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Java -version</span><br></pre></td></tr></table></figure>
<p>如果还是默认的OpenJDK</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/Java Java /usr/hisen/soft/Java/jdk8/bin/Java 300  </span><br><span class="line">sudo update-alternatives --install /usr/bin/Javac Javac /usr/hisen/soft/Java/jdk8/bin/Javac 300</span><br><span class="line"></span><br><span class="line">#选择默认JDK即可</span><br><span class="line">sudo update-alternatives --config Java</span><br></pre></td></tr></table></figure>
<p>进入tomcat的bin目录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vi catalina.sh</span><br></pre></td></tr></table></figure>
<p>顶部添加</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#让tomcat知道Java在哪里</span><br><span class="line">JAVA_HOME=/usr/hisen/soft/Java/jdk8</span><br><span class="line">JRE_HOME=$JAVA_HOME/jre</span><br></pre></td></tr></table></figure>

<p>之后进入在tomcat bin目录执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@hisen:/usr/hisen/soft/tomcat/tomcat8/bin$ sudo sh startup.sh</span><br><span class="line">Using CATALINA_BASE:   /usr/hisen/soft/tomcat/tomcat8</span><br><span class="line">Using CATALINA_HOME:   /usr/hisen/soft/tomcat/tomcat8</span><br><span class="line">Using CATALINA_TMPDIR: /usr/hisen/soft/tomcat/tomcat8/temp</span><br><span class="line">Using JRE_HOME:        /usr/hisen/soft/Java/jdk8/jre</span><br><span class="line">Using CLASSPATH:       /usr/hisen/soft/tomcat/tomcat8/bin/bootstrap.jar:/usr/hisen/soft/tomcat/tomcat8/bin/tomcat-juli.jar</span><br><span class="line">Tomcat started.</span><br></pre></td></tr></table></figure>
<h2 id="这样就启动了tomcat！！！！"><a href="#这样就启动了tomcat！！！！" class="headerlink" title="这样就启动了tomcat！！！！"></a>这样就启动了tomcat！！！！</h2><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>如果没有在 catalina.sh 添加Java路径，会报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@hisen-VirtualBox:/usr/hisen/soft/tomcat/tomcat8/bin$ sudo sh startup.sh</span><br><span class="line">Neither the JAVA_HOME nor the JRE_HOME environment variable is defined</span><br><span class="line">At least one of these environment variable is needed to run this program</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu虚拟机安装MySQL并且开启root远程访问</title>
    <url>/20170311-Ubuntu%E5%AE%89%E8%A3%85MySQL%E5%B9%B6%E4%B8%94%E5%BC%80%E5%90%AFroot%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/</url>
    <content><![CDATA[<p>安装mysql很简单，关键是开启这个远程很坑！！！</p>
<h2 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h2><p>1.安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure>
<p>等待完成即可，过程中需要设置密码</p>
<p>2.查看是否成功</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo netstat -tap | grep mysql</span><br></pre></td></tr></table></figure>
<p>3.登陆mysql</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>
<p>这条命令回车之后需要输入mysql密码</p>
<h2 id="二、开启远程访问"><a href="#二、开启远程访问" class="headerlink" title="二、开启远程访问"></a>二、开启远程访问</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class="line">#找到bind-address=127.0.0.1直接注释</span><br><span class="line">$ mysql -u root -p -h</span><br><span class="line">#登陆mysql</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">#使用mysql这个库</span><br><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO root@&quot;%&quot; IDENTIFIED BY &quot;hisen&quot;;</span><br><span class="line">#把root用户改成可以在任何ip上登陆，并且密码为：hisen</span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">#刷新</span><br></pre></td></tr></table></figure>
<p>重启：service mysql restart</p>
<p>接下来就可以在navicat里面连接了</p>
<h2 id="三、注意事项"><a href="#三、注意事项" class="headerlink" title="三、注意事项"></a>三、注意事项</h2><p>因为在网上找的很多教程，都是说改这个配置文件：这个是错误的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/etc/mysql/my.cf</span><br></pre></td></tr></table></figure>
<p>如果是通过apt-get方式安装的，默认的是第二步那个配置文件</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu安装RocketMQ - Quick Start</title>
    <url>/20170702-Ubuntu%E5%AE%89%E8%A3%85RocketMQ%20-%20Quick%20Start/</url>
    <content><![CDATA[<h2 id="安装需求："><a href="#安装需求：" class="headerlink" title="安装需求："></a>安装需求：</h2><ol>
<li>64位的系统 Linux&#x2F;Unix&#x2F;Mac</li>
<li>64bit JDK 1.8+;</li>
<li>Maven 3.2.x;</li>
<li>Git （一般自带）</li>
</ol>
<p>如果还未安装jdk、maven建议查看教程:<a herf="/20170218-Ubuntu安装JDK8-Tomcat-简单教程/" target="_blank">点击查看</a></p>
<h2 id="Clone-Build"><a href="#Clone-Build" class="headerlink" title="Clone &amp; Build"></a>Clone &amp; Build</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone -b develop https://github.com/apache/incubator-rocketmq.git</span><br><span class="line">cd incubator-rocketmq</span><br><span class="line">mvn -Prelease-all -DskipTests clean install -U</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Reactor Summary:</span><br><span class="line">[INFO] </span><br><span class="line">[INFO] Apache RocketMQ 4.2.0-incubating-SNAPSHOT .......... SUCCESS [01:07 min]</span><br><span class="line">[INFO] rocketmq-remoting 4.2.0-incubating-SNAPSHOT ........ SUCCESS [ 15.749 s]</span><br><span class="line">[INFO] rocketmq-common 4.2.0-incubating-SNAPSHOT .......... SUCCESS [ 10.243 s]</span><br><span class="line">[INFO] rocketmq-client 4.2.0-incubating-SNAPSHOT .......... SUCCESS [ 11.638 s]</span><br><span class="line">[INFO] rocketmq-store 4.2.0-incubating-SNAPSHOT ........... SUCCESS [ 13.108 s]</span><br><span class="line">[INFO] rocketmq-srvutil 4.2.0-incubating-SNAPSHOT ......... SUCCESS [  2.051 s]</span><br><span class="line">[INFO] rocketmq-filter 4.2.0-incubating-SNAPSHOT .......... SUCCESS [  3.917 s]</span><br><span class="line">[INFO] rocketmq-broker 4.2.0-incubating-SNAPSHOT .......... SUCCESS [  8.726 s]</span><br><span class="line">[INFO] rocketmq-tools 4.2.0-incubating-SNAPSHOT ........... SUCCESS [  6.002 s]</span><br><span class="line">[INFO] rocketmq-namesrv 4.2.0-incubating-SNAPSHOT ......... SUCCESS [  2.726 s]</span><br><span class="line">[INFO] rocketmq-logappender 4.2.0-incubating-SNAPSHOT ..... SUCCESS [  3.514 s]</span><br><span class="line">[INFO] rocketmq-openmessaging 4.2.0-incubating-SNAPSHOT ... SUCCESS [  2.668 s]</span><br><span class="line">[INFO] rocketmq-example 4.2.0-incubating-SNAPSHOT ......... SUCCESS [  2.390 s]</span><br><span class="line">[INFO] rocketmq-filtersrv 4.2.0-incubating-SNAPSHOT ....... SUCCESS [  2.145 s]</span><br><span class="line">[INFO] rocketmq-test 4.2.0-incubating-SNAPSHOT ............ SUCCESS [  5.428 s]</span><br><span class="line">[INFO] rocketmq-distribution 4.2.0-incubating-SNAPSHOT .... SUCCESS [ 27.002 s]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time: 03:07 min</span><br><span class="line">[INFO] Finished at: 2017-07-02T01:35:40+08:00</span><br><span class="line">[INFO] Final Memory: 60M/247M</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">cd distribution/target/apache-rocketmq</span><br></pre></td></tr></table></figure>
<p>Start Name Server</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nohup sh bin/mqnamesrv &amp;</span><br><span class="line">tail -f ~/logs/rocketmqlogs/namesrv.log</span><br><span class="line">The Name Server boot success...</span><br></pre></td></tr></table></figure>
<p>Start Broker</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nohup sh bin/mqbroker -n localhost:9876 &amp;</span><br><span class="line">tail -f ~/logs/rocketmqlogs/broker.log </span><br><span class="line">The broker[%s, 172.30.30.233:10911] boot success...</span><br></pre></td></tr></table></figure>
<p>Send &amp; Receive Messages</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Before sending/receiving messages, we need to tell clients the location of name servers. RocketMQ provides multiple ways to achieve this. For simplicity, we use environment variable NAMESRV_ADDR</span><br><span class="line">export NAMESRV_ADDR=localhost:9876</span><br><span class="line">sh bin/tools.sh org.apache.rocketmq.example.quickstart.Producer</span><br><span class="line">SendResult [sendStatus=SEND_OK, msgId= ...</span><br><span class="line"></span><br><span class="line">sh bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer </span><br><span class="line">ConsumeMessageThread_%d Receive New Messages: [MessageExt...</span><br></pre></td></tr></table></figure>
<p>Shutdown Servers</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sh bin/mqshutdown broker</span><br><span class="line">The mqbroker(36695) is running...</span><br><span class="line">Send shutdown request to mqbroker(36695) OK</span><br><span class="line"></span><br><span class="line">sh bin/mqshutdown namesrv</span><br><span class="line">The mqnamesrv(36664) is running...</span><br><span class="line">Send shutdown request to mqnamesrv(36664) OK</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>rocketmq</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu安装nginx</title>
    <url>/20170321-Ubuntu%E5%AE%89%E8%A3%85nginx/</url>
    <content><![CDATA[<p>Nginx (“engine x”) 是一个高性能的 HTTP 和 反向代理 服务器，也是一个 IMAP&#x2F;POP3&#x2F;SMTP 代理服务器。</p>
<p>Nginx 是由 Igor Sysoev 为俄罗斯访问量第二的 Rambler.ru 站点开发的，</p>
<p>第一个公开版本0.1.0发布于2004年10月4日。其将源代码以类BSD许可证的形式发布，</p>
<p>因它的稳定性、丰富的功能集、示例配置文件和低系统资源的消耗而闻名。</p>
<p>说明：这只是一个初步的安装，后续进一步实践</p>
<h2 id="安装Nginx依赖库"><a href="#安装Nginx依赖库" class="headerlink" title="安装Nginx依赖库"></a>安装Nginx依赖库</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#安装gcc g++的依赖库</span><br><span class="line">sudo apt-get install build-essential</span><br><span class="line">sudo apt-get install libtool</span><br><span class="line">#安装 pcre依赖库</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install libpcre3 libpcre3-dev</span><br><span class="line">#安装 zlib依赖库（http://www.zlib.net）</span><br><span class="line">sudo apt-get install zlib1g-dev</span><br><span class="line">#安装 ssl依赖库</span><br><span class="line">sudo apt-get install openssl</span><br><span class="line">#下载最新版本：</span><br><span class="line">wget http://nginx.org/download/nginx-1.9.9.tar.gz</span><br><span class="line">#解压</span><br><span class="line">tar -zxvf nginx-1.9.9.tar.gz</span><br><span class="line">#进入解压目录：</span><br><span class="line">cd nginx-1.9.9</span><br><span class="line">#配置：</span><br><span class="line">sudo ./configure --prefix=/usr/local/nginx </span><br><span class="line">#编辑nginx：</span><br><span class="line">sudo make</span><br><span class="line">#注意：这里可能会报错，提示“pcre.h No such file or directory”,具体详见：http://stackoverflow.com/questions/22555561/error-building-fatal-error-pcre-h-no-such-file-or-directory</span><br><span class="line">#需要安装 libpcre3-dev,命令为：sudo apt-get install libpcre3-dev</span><br><span class="line">#安装nginx：</span><br><span class="line">sudo make install</span><br><span class="line">#启动nginx：</span><br><span class="line">sudo /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line">#注意：-c 指定配置文件的路径，不加的话，nginx会自动加载默认路径的配置文件，可以通过 -h查看帮助命令。</span><br><span class="line">#查看nginx进程：</span><br><span class="line">ps -ef|grep nginx</span><br></pre></td></tr></table></figure>
<h2 id="Nginx常用命令"><a href="#Nginx常用命令" class="headerlink" title="Nginx常用命令"></a>Nginx常用命令</h2><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#启动</span><br><span class="line">sudo /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line">#进入目录</span><br><span class="line">cd /usr/local/nginx/</span><br><span class="line">#关闭</span><br><span class="line">sudo ./sbin/nginx -s quit</span><br><span class="line">#Nginx重新加载配置</span><br><span class="line">sudo ./sbin/nginx -s reload</span><br><span class="line">#指定配置文件</span><br><span class="line">sudo ./sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line">#查看版本</span><br><span class="line">sudo ./sbin/nginx -v</span><br><span class="line">#显示帮助</span><br><span class="line">sudo ./sbin/nginx -h</span><br></pre></td></tr></table></figure>
<p>安装之后就直接监听80端口，浏览器打开127.0.0.1即可访问出现如下页面：<br><img src="http://wx4.sinaimg.cn/mw690/b2e389b6ly1fdup21igsjj20g007ijrq.jpg" /></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>ubuntu重装系统 - 在ubuntu系统下重新安装</title>
    <url>/20170305-Ubuntu%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F%20-%20%E5%9C%A8ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%8B%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<p>有时候在linux环境下需要重新安装一下系统</p>
<p>这里我就说一下今天我安装的方法。</p>
<p>下载好ubuntu的镜像，随便放在一个非系统盘的根目录下</p>
<p>改名为：ubuntu.iso</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo chmod 777 /boot/grub/grub.cfg</span><br><span class="line">sudo vi  /boot/grub/grub.cfg</span><br><span class="line">#在 export linux_gfx_mode 下面添加如下内容</span><br><span class="line">menuentry &quot;install  ubuntu powered by hisen&quot; &#123;</span><br><span class="line">  search --set -f /ubuntu.iso</span><br><span class="line">  loopback loop /ubuntu.iso</span><br><span class="line">  set root=(loop)</span><br><span class="line">  linux /casper/vmlinuz.efi boot=casper iso-scan/filename=/ubuntu.iso</span><br><span class="line">  initrd /casper/initrd.lz</span><br><span class="line">  boot</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>保存退出，重启就会进入系统。</p>
<p>桌面上点击那个安装的图标即可完成重装</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Unable to ping server at localhost 1099 - 出现的原因</title>
    <url>/20170330-Unable%20to%20ping%20server%20at%20localhost%201099%20-%20%E5%87%BA%E7%8E%B0%E7%9A%84%E5%8E%9F%E5%9B%A0/</url>
    <content><![CDATA[<p>之前老是出现</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Application Server was not connected before run configuration stop, </span><br><span class="line">reason: Unable to ping server at localhost:1099</span><br></pre></td></tr></table></figure>
<p>我遇到这个问题一般是这些原因：</p>
<ol>
<li>这个端口被占用，一般进程管理把所有Java进程杀了可以解决</li>
<li>由于在IDEA中错误的给tomcat添加了参数,比如下面这个。去掉即可</li>
</ol>
<p>这是下VM option中加了：-URIEncoding&#x3D;UTF-8</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Error: Could not create the Java Virtual Machine.</span><br><span class="line">Error: A fatal exception has occurred. Program will exit.</span><br><span class="line">Unrecognized option: -URIEncoding=UTF-8</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>理解 Linux Load Averages</title>
    <url>/20201026-Understanding-Linux-Load-Averages/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>最近做压力测试，不同的系统的机器监控数据差异明显<br>A 系统：CPU 高 load 低<br>B 系统：CPU 低 load 高</p>
<p>那么是什么导致 A B 系统出现这种情况？<br>CPU 高了系统肯定跑不动了，那么 load 多高代表系统跑不动呢？</p>
<h1 id="一、解释"><a href="#一、解释" class="headerlink" title="一、解释"></a>一、解释</h1><ol>
<li>A 系统的原因<br>  CPU 很忙，没有等待其它资源，瓶颈在 CPU。</li>
<li>B 系统的原因<br>  等待磁盘 I&#x2F;O 完成的进程过多，导致进程队列长度过大，<br>  但是 CPU 运行的进程却很少，这样就导致负载过大，但 CPU 使用率低，瓶颈不在 CPU，可能在 I&#x2F;O。</li>
</ol>
<h1 id="二、load-averages-知识"><a href="#二、load-averages-知识" class="headerlink" title="二、load averages 知识"></a>二、load averages 知识</h1><ol>
<li><p>Linux 系统下代表的是 system load averages。</p>
</li>
<li><p>Linux load averages track not just runnable tasks, but also tasks in the uninterruptible sleep state.<br>  Linux 平均负载不仅跟踪可运行的任务，还跟踪处于不可中断睡眠状态的任务。</p>
</li>
<li><p>On Linux, load averages are (or try to be) “system load averages”, for the system as a whole, measuring the number of threads that are working and waiting to work (CPU, disk, uninterruptible locks). Put differently, it measures the number of threads that aren’t completely idle. Advantage: includes demand for different resources.<br>  在 Linux 上，负载平均值是(或试图是)“系统负载平均值” ，对于整个系统来说，测量正在工作和等待工作的线程数(CPU、磁盘、不可中断锁)。换句话说，它测量的是没有完全空闲的线程数量。优势: 包括对不同资源的需求。</p>
</li>
<li><p>In 1993, a Linux engineer found a nonintuitive case with load averages, and with a three-line patch changed them forever from “CPU load averages” to what one might call “system load averages.” His change included tasks in the uninterruptible state, so that load averages reflected demand for disk resources and not just CPUs.<br>  1993年，一位 Linux 工程师发现了一个与平均负载不直观的案例，一个三行补丁永远地将它们从“ CPU 负载平均值”改变为人们可能称之为“系统负载平均值”他的更改包括处于不可中断状态的任务，因此平均负载反映了对磁盘资源的需求，而不仅仅是 cpu。</p>
</li>
</ol>
<h1 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h1><ol>
<li>linux load averages 数字大，代表系统压力大;</li>
</ol>
<span id="more"></span>
<ol start="2">
<li>load 高可能的原因有(CPU、I&#x2F;O、不可中断锁);</li>
<li>load 1min load 5min load 15min，从左到右递增说明负载在增加，递减说明负载在降低;</li>
<li>负载多大才算高，没有定论，得看是否影响业务，如果业务正常那多半是没有问题的;</li>
</ol>
<h1 id="四、load-优化"><a href="#四、load-优化" class="headerlink" title="四、load 优化"></a>四、load 优化</h1><ol>
<li>优化算法，减少 CPU 计算;</li>
<li>减少 I&#x2F;O 交互的次数，以及大小;</li>
<li>分布式系统水平扩展更多的机器;</li>
</ol>
<h1 id="五、参考"><a href="#五、参考" class="headerlink" title="五、参考"></a>五、参考</h1><ol>
<li><a href="http://www.brendangregg.com/blog/2017-08-08/linux-load-averages.html">Linux Load Averages: Solving the Mystery</a> (发表于 2017 年)</li>
<li><a href="http://www.ruanyifeng.com/blog/2011/07/linux_load_average_explained.html">理解Linux系统负荷</a> （发表于 2011 年）</li>
<li><a href="https://blog.csdn.net/m0_37886429/article/details/78529681">Linux中CPU使用率低负载高</a></li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Unix文件超过大小限制移动到某目录</title>
    <url>/20190408-Unix%E6%96%87%E4%BB%B6%E8%B6%85%E8%BF%87%E5%A4%A7%E5%B0%8F%E9%99%90%E5%88%B6%E7%A7%BB%E5%8A%A8%E5%88%B0%E6%9F%90%E7%9B%AE%E5%BD%95/</url>
    <content><![CDATA[<p>某个文件夹下面有n个文件，需要移动大于10M的文件到&#x2F;tmp&#x2F;目录下</p>
<p>实现命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find . -type f -size +100M -exec mv &#123;&#125; /tmp/ \;</span><br></pre></td></tr></table></figure>
<p>find 查找<br>. 当前目录<br>-type 文件类型：f 文件，d 目录<br>-size 文件大小：+100M +：大于 -：小于 空：等于<br>-exec 管道命令，将前面的查询结果传递给后面的命令<br>{} 指前面传递过来的的查询结果<br>; 结束管道命令</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ValidSudoku - leetCode - 算法</title>
    <url>/20191103-ValidSudoku%20-%20leetCode%20-%20%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<h2 id="一、题目"><a href="#一、题目" class="headerlink" title="一、题目"></a>一、题目</h2><p><a href="https://leetcode.com/explore/interview/card/top-interview-questions-easy/92/array/769/">Valid Sudoku链接</a></p>
<p>题目要求：<br>Determine if a 9x9 Sudoku board is valid. Only the filled cells need to be validated according to the following rules:</p>
<ul>
<li>Each row must contain the digits 1-9 without repetition.</li>
<li>Each column must contain the digits 1-9 without repetition.</li>
<li>Each of the 9 3x3 sub-boxes of the grid must contain the digits 1-9 without repetition.</li>
</ul>
<p>每一行都不能重复1-9<br>每一列都不能重复1-9<br>每个3<em>3的小格子(9</em>9分为9个3*3)不能重复</p>
<h2 id="二、解题分析"><a href="#二、解题分析" class="headerlink" title="二、解题分析"></a>二、解题分析</h2><ul>
<li>每一行每一列的数据，我们可以通过遍历二维数组解决；</li>
<li>每个3<em>3的怎么解决呢？还是遍历二维数组，循环大(9</em>9)的二维数组时，符合条件再循环小(3*3)数组;</li>
<li>怎么判断没有重复？方法很多，这里通过数组下标计数，数组初始值为0，根据下标+1，+1之后如果发现&gt;1那么返回错误;</li>
</ul>
<p>开始解题的时候可以一个大循环解决一个小问题，后续再把循环合并即可;<br>开始的时候我是写了三个双重for循环：</p>
<ol>
<li>解决行重复判断问题;</li>
<li>解决列重复判断问题;</li>
<li>解决子矩阵重复判断问题;</li>
</ol>
<p>当发现每一步都可行之后，尝试着合并，以减少时间复杂度;</p>
<h2 id="三、代码样例"><a href="#三、代码样例" class="headerlink" title="三、代码样例"></a>三、代码样例</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isValidSudoku</span><span class="params">(<span class="type">char</span>[][] board)</span> &#123;</span><br><span class="line">    <span class="comment">// 处理 9 * 9</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; board.length; i++) &#123;</span><br><span class="line">        <span class="type">int</span>[] rowFlag = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="type">int</span>[] columnFlag = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; board.length; j++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">row</span> <span class="operator">=</span> board[i][j];</span><br><span class="line">            <span class="type">char</span> <span class="variable">column</span> <span class="operator">=</span> board[j][i];</span><br><span class="line">            <span class="keyword">if</span> (check(rowFlag, row)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (check(columnFlag, column)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 处理 3 * 3</span></span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">3</span> == <span class="number">0</span> &amp;&amp; j % <span class="number">3</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span>[] smallFlag = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i; k &lt; i + <span class="number">3</span>; k++) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> j; l &lt; j + <span class="number">3</span>; l++) &#123;</span><br><span class="line">                        <span class="type">char</span> <span class="variable">now</span> <span class="operator">=</span> board[k][l];</span><br><span class="line">                        <span class="keyword">if</span> (check(smallFlag, now)) &#123;</span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="四、代码详情"><a href="#四、代码详情" class="headerlink" title="四、代码详情"></a>四、代码详情</h2><p>可运行demo</p>
<span id="more"></span>
<p>github地址：<a href="https://github.com/hisenyuan/IDEAPractice/blob/master/src/main/Java/com/hisen/algorithms/leetcode/ValidSudoku.Java">ValidSudoku.Java</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>leetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>WebSocket - Java &amp; html &amp; JavaScript - 单发 &amp; 群发</title>
    <url>/20180728-WebSocket%20-%20Java%20&amp;%20html%20&amp;%20JavaScript%20-%20%E5%8D%95%E5%8F%91%20&amp;%20%E7%BE%A4%E5%8F%91/</url>
    <content><![CDATA[<h2 id="一、背景说明"><a href="#一、背景说明" class="headerlink" title="一、背景说明"></a>一、背景说明</h2><p>最近在做app后台相关接口</p>
<p>自建通知中心目前不能很好的支持给APP推送消息</p>
<p>长连接可以保持推送速度，目前app中内嵌了H5，所以考虑使用websocket</p>
<p>之前没有接触过websocket，百度了一堆之后，页面上可以正常使用</p>
<p>但是没有发现可用使用Java后台进行消息的发送，于是乎就琢磨了一上午，解决了这个问题</p>
<p>现在把这个小工程分享给大家，少走点弯路&#x3D;&#x3D;</p>
<p>ps：很多不能在后台发送消息，是因为缺少Java的客户端</p>
<h2 id="二、准备工作"><a href="#二、准备工作" class="headerlink" title="二、准备工作"></a>二、准备工作</h2><p>建立一个maven web 工程</p>
<p>添加依赖</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;Javax.websocket&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;Javax.websocket-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.neovisionaries&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;nv-websocket-client&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.13&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;compile&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h2 id="三、主要代码"><a href="#三、主要代码" class="headerlink" title="三、主要代码"></a>三、主要代码</h2><p>websocket服务端主逻辑</p>
<p>为了实现简单的非群发操作，在连接websocket的时候，加上了一些get参数</p>
<p>例如：ws:&#x2F;&#x2F;localhost:8080&#x2F;websocket?sendTo&#x3D;hisen&amp;method&#x3D;methodSingle&amp;user&#x3D;hisenyuan</p>
<p>然后在后端判断，根据参数做出不同的动作</p>
<p>demo完整工程：<a href="https://github.com/hisenyuan/IDEAPractice/tree/master/websocket-demo">https://github.com/hisenyuan/IDEAPractice/tree/master/websocket-demo</a></p>
<p>配置完Tomcat，即可使用，在Java后台运行测试类(com.hisen.ws.client.ClientApp4Java)可发送消息到页面</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hisen.ws.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hisen.ws.util.Constants;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Javax.websocket.*;</span><br><span class="line"><span class="keyword">import</span> Javax.websocket.server.ServerEndpoint;</span><br><span class="line"><span class="keyword">import</span> Java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> Java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> Java.util.List;</span><br><span class="line"><span class="keyword">import</span> Java.util.Map;</span><br><span class="line"><span class="keyword">import</span> Java.util.Optional;</span><br><span class="line"><span class="keyword">import</span> Java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ServerEndpoint</span> 注解是一个类层次的注解，它的功能主要是将目前的类定义成一个websocket服务器端,</span></span><br><span class="line"><span class="comment"> * 注解的值将被用于监听用户连接的终端访问URL地址,客户端可以通过这个URL来连接到WebSocket服务器端</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ServerEndpoint(&quot;/websocket&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSocketServer</span> &#123;</span><br><span class="line">    <span class="comment">// 静态变量，用来记录当前在线连接数。应该把它设计成线程安全的。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">onlineCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实现服务端与单一客户端通信的话，可以使用Map来存放，其中Key可以为用户标识</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ConcurrentHashMap&lt;String, WebSocketServer&gt; webSocketMap = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// 与某个客户端的连接会话，需要通过它来给客户端发送数据</span></span><br><span class="line">    <span class="keyword">private</span> Session session;</span><br><span class="line">    <span class="comment">// 当前用户</span></span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 客户端可以是web页面，也可以是Java后台</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * 通过连接或者message可以控制发送给谁</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message 客户端发送过来的消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session 可选的参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnMessage</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(String message, Session session)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;来自客户端的消息:&quot;</span> + message);</span><br><span class="line">        <span class="comment">// 获取url传过来的参数</span></span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; parameterMap = session.getRequestParameterMap();</span><br><span class="line">        <span class="comment">// 发送方式</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 发送给哪些人</span></span><br><span class="line">        List&lt;String&gt; receivers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 发送者</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sernder</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (parameterMap.containsKey(Constants.METHOD)) &#123;</span><br><span class="line">            method = parameterMap.get(Constants.METHOD).get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (parameterMap.containsKey(Constants.SEND_TO)) &#123;</span><br><span class="line">            receivers = parameterMap.get(Constants.SEND_TO);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (parameterMap.containsKey(Constants.USER)) &#123;</span><br><span class="line">            sernder = parameterMap.get(Constants.USER).get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;sender:&quot;</span> + sernder + <span class="string">&quot;,receivers:&quot;</span> + receivers.toString() + <span class="string">&quot;,method:&quot;</span> + method);</span><br><span class="line">        <span class="keyword">if</span> (method == <span class="literal">null</span> || method.equals(Constants.METHOD_ALL)) &#123;</span><br><span class="line">            <span class="comment">//发送所有</span></span><br><span class="line">            send2All(message);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//单发</span></span><br><span class="line">            send2Users(receivers, message);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接建立成功调用的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session 可选的参数。session为与某个客户端的连接会话，需要通过它来给客户端发送数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnOpen</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOpen</span><span class="params">(Session session)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.session = session;</span><br><span class="line">        <span class="built_in">this</span>.user = session.getRequestParameterMap().get(Constants.USER).get(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 放入map</span></span><br><span class="line">        webSocketMap.put(user, <span class="built_in">this</span>);</span><br><span class="line">        <span class="comment">//在线数加1</span></span><br><span class="line">        addOnlineCount();</span><br><span class="line">        System.out.println(<span class="string">&quot;有新连接加入！当前在线人数为&quot;</span> + getOnlineCount() + <span class="string">&quot;,session:&quot;</span> + session.getId() + <span class="string">&quot;,user:&quot;</span> + <span class="built_in">this</span>.user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接关闭调用的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnClose</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClose</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 移除</span></span><br><span class="line">        webSocketMap.remove(<span class="built_in">this</span>.user);</span><br><span class="line">        <span class="comment">//在线数减1</span></span><br><span class="line">        subOnlineCount();</span><br><span class="line">        System.out.println(<span class="string">&quot;有一连接关闭！当前在线人数为&quot;</span> + getOnlineCount() + <span class="string">&quot;,user:&quot;</span> + <span class="built_in">this</span>.user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">send2Users</span><span class="params">(List&lt;String&gt; receivers, String message)</span> &#123;</span><br><span class="line">        receivers.forEach(e -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;single receiver:&quot;</span> + e);</span><br><span class="line">            Optional.ofNullable(webSocketMap.get(e))</span><br><span class="line">                    .filter(webSocketServer -&gt; webSocketServer.session.isOpen())</span><br><span class="line">                    .ifPresent(webSocketServer -&gt; sendOnce(message, e, webSocketServer));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">send2All</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        webSocketMap.forEach((key, value) -&gt; &#123;</span><br><span class="line">            sendOnce(message, key, value);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendOnce</span><span class="params">(String message, String e, WebSocketServer webSocketServer)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            webSocketServer.sendMessage(message);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException exp) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;发送出错，receiver:&quot;</span> + e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发生错误时调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> error</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnError</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Session session, Throwable error)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;发生错误，user:&quot;</span> + <span class="built_in">this</span>.user);</span><br><span class="line">        error.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自定义的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.session.getBasicRemote().sendText(message);</span><br><span class="line">        <span class="comment">//this.session.getAsyncRemote().sendText(message);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="type">int</span> <span class="title function_">getOnlineCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> onlineCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">addOnlineCount</span><span class="params">()</span> &#123;</span><br><span class="line">        WebSocketServer.onlineCount++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">subOnlineCount</span><span class="params">()</span> &#123;</span><br><span class="line">        WebSocketServer.onlineCount--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
  </entry>
  <entry>
    <title>WeightAlgorithm - 权重算法 - Random、HashCode对比</title>
    <url>/20190322-WeightAlgorithm%20-%20%E6%9D%83%E9%87%8D%E7%AE%97%E6%B3%95%20-%20Random%E3%80%81HashCode%E5%AF%B9%E6%AF%94/</url>
    <content><![CDATA[<h1 id="一、权重算法"><a href="#一、权重算法" class="headerlink" title="一、权重算法"></a>一、权重算法</h1><p>权重算法一般在路由里面用的比较多，分布式环境下对等的服务有多个，加权随机选出一个服务来调用；</p>
<p>可能还有其他方面的用途，下面的代码简单的实现了这个权重，本质上就用到了数组，随机下标；</p>
<h1 id="二、代码概览"><a href="#二、代码概览" class="headerlink" title="二、代码概览"></a>二、代码概览</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    String[] weight = &#123;<span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;C&quot;</span>&#125;;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">500000</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">long</span> <span class="variable">hashStart</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    List&lt;String&gt; hashRes = getList4Hash(weight, times);</span><br><span class="line">    printRes(<span class="string">&quot;Hash&quot;</span>, hashStart, hashRes);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="type">long</span> <span class="variable">randomStart</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    List&lt;String&gt; randomRes = getList4Random(weight, times);</span><br><span class="line">    printRes(<span class="string">&quot;Random&quot;</span>, randomStart, randomRes);</span><br><span class="line"><span class="comment">//        Hash          use millis: 931</span></span><br><span class="line"><span class="comment">//        A:49.92%</span></span><br><span class="line"><span class="comment">//        B:29.99%</span></span><br><span class="line"><span class="comment">//        C:20.09%</span></span><br><span class="line"><span class="comment">//        Random        use millis: 50</span></span><br><span class="line"><span class="comment">//        A:50.08%</span></span><br><span class="line"><span class="comment">//        B:29.93%</span></span><br><span class="line"><span class="comment">//        C:19.99%</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="三、完整代码"><a href="#三、完整代码" class="headerlink" title="三、完整代码"></a>三、完整代码</h1><span id="more"></span>
<p>github:<a href="https://github.com/hisenyuan/IDEAPractice/blob/master/src/main/Java/com/hisen/algorithms/WeightAlgorithm.Java" target="_blank">show all code</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hisen.algorithms;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.common.collect.Lists;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> Java.util.List;</span><br><span class="line"><span class="keyword">import</span> Java.util.Map;</span><br><span class="line"><span class="keyword">import</span> Java.util.Random;</span><br><span class="line"><span class="keyword">import</span> Java.util.UUID;</span><br><span class="line"><span class="keyword">import</span> Java.util.function.Function;</span><br><span class="line"><span class="keyword">import</span> Java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> hisenyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> $end$</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2019/3/21 21:04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeightAlgorithm</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] weight = &#123;<span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;C&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">500000</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> <span class="variable">hashStart</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        List&lt;String&gt; hashRes = getList4Hash(weight, times);</span><br><span class="line">        printRes(<span class="string">&quot;Hash&quot;</span>, hashStart, hashRes);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> <span class="variable">randomStart</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        List&lt;String&gt; randomRes = getList4Random(weight, times);</span><br><span class="line">        printRes(<span class="string">&quot;Random&quot;</span>, randomStart, randomRes);</span><br><span class="line"><span class="comment">//        Hash          use millis: 931</span></span><br><span class="line"><span class="comment">//        A:49.92%</span></span><br><span class="line"><span class="comment">//        B:29.99%</span></span><br><span class="line"><span class="comment">//        C:20.09%</span></span><br><span class="line"><span class="comment">//        Random        use millis: 50</span></span><br><span class="line"><span class="comment">//        A:50.08%</span></span><br><span class="line"><span class="comment">//        B:29.93%</span></span><br><span class="line"><span class="comment">//        C:19.99%</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printRes</span><span class="params">(String method, <span class="type">long</span> start, List&lt;String&gt; resList)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> Map&lt;String, Long&gt; collect = resList.stream().collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));</span><br><span class="line">        <span class="keyword">final</span> <span class="type">double</span> <span class="variable">a</span> <span class="operator">=</span> collect.get(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">double</span> <span class="variable">b</span> <span class="operator">=</span> collect.get(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> collect.get(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">double</span> <span class="variable">sum</span> <span class="operator">=</span> a + b + c;</span><br><span class="line"></span><br><span class="line">        <span class="type">NumberFormat</span> <span class="variable">nt</span> <span class="operator">=</span> NumberFormat.getPercentInstance();</span><br><span class="line">        nt.setMinimumFractionDigits(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(method + <span class="string">&quot;\t use millis: &quot;</span> + (System.currentTimeMillis() - start));</span><br><span class="line">        System.out.println(<span class="string">&quot;A&quot;</span> + <span class="string">&quot;:&quot;</span> + nt.format(a / sum));</span><br><span class="line">        System.out.println(<span class="string">&quot;B&quot;</span> + <span class="string">&quot;:&quot;</span> + nt.format(b / sum));</span><br><span class="line">        System.out.println(<span class="string">&quot;C&quot;</span> + <span class="string">&quot;:&quot;</span> + nt.format(c / sum));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getList4Hash</span><span class="params">(String[] weight, <span class="type">int</span> times)</span> &#123;</span><br><span class="line">        List&lt;String&gt; result = Lists.newArrayList();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; times; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> UUID.randomUUID().toString() + System.currentTimeMillis();</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">hash</span> <span class="operator">=</span> a.hashCode();</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> hash &gt; <span class="number">0</span> ? hash : -hash;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> weight[index % weight.length];</span><br><span class="line">            result.add(res);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getList4Random</span><span class="params">(String[] weight, <span class="type">int</span> times)</span> &#123;</span><br><span class="line">        List&lt;String&gt; result = Lists.newArrayList();</span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; times; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> random.nextInt(weight.length);</span><br><span class="line">            <span class="keyword">final</span> <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> weight[index];</span><br><span class="line">            result.add(res);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows ssh连接 VirtualBox Ubuntu 16虚拟机</title>
    <url>/20170218-Windows%20ssh%E8%BF%9E%E6%8E%A5VirtualBox-Ubuntu-16%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
    <content><![CDATA[<p>安装完虚拟机之后想在windows下用xshell链接Ubuntu虚拟机</p>
<p>这种配置下，虚拟机能上网，又能跟win连接，感觉很完美</p>
<p>VirtualBox的端口转发很不错，可以转发tomcat什么的</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>1.给Ubuntu安装openssh-server</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>2.查看虚拟机ip 我的是：10.0.2.15(看上面那段)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@hisen-VirtualBox:/$ ifconfig -a</span><br><span class="line">enp0s3    Link encap:以太网  硬件地址 08:00:27:45:f3:35  </span><br><span class="line">          inet 地址:10.0.2.15  广播:10.0.2.255  掩码:255.255.255.0</span><br><span class="line">          inet6 地址: fe80::ed57:82d2:60cb:7f96/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  跃点数:1</span><br><span class="line">          接收数据包:169175 错误:0 丢弃:0 过载:0 帧数:0</span><br><span class="line">          发送数据包:34436 错误:0 丢弃:0 过载:0 载波:0</span><br><span class="line">          碰撞:0 发送队列长度:1000</span><br><span class="line">          接收字节:210738565 (210.7 MB)  发送字节:3633455 (3.6 MB)</span><br><span class="line"></span><br><span class="line">lo        Link encap:本地环回  </span><br><span class="line">          inet 地址:127.0.0.1  掩码:255.0.0.0</span><br><span class="line">          inet6 地址: ::1/128 Scope:Host</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  跃点数:1</span><br><span class="line">          接收数据包:1718 错误:0 丢弃:0 过载:0 帧数:0</span><br><span class="line">          发送数据包:1718 错误:0 丢弃:0 过载:0 载波:0</span><br><span class="line">          碰撞:0 发送队列长度:1</span><br><span class="line">          接收字节:234769 (234.7 KB)  发送字节:234769 (234.7 KB)</span><br></pre></td></tr></table></figure>
<h2 id="VirtualBox设置端口转发"><a href="#VirtualBox设置端口转发" class="headerlink" title="VirtualBox设置端口转发"></a>VirtualBox设置端口转发</h2><ol>
<li>在VirtualBox启动页面，右键Ubuntu —&gt;设置</li>
<li>网络 —&gt; 连接方式 —&gt; 网络地址转换(NAT)</li>
<li>高级 —&gt; 端口转发 —&gt; 点击添加按钮</li>
</ol>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">协议</th>
<th align="left">主机IP</th>
<th align="left">主机端口</th>
<th align="left">子系统IP</th>
<th align="left">子系统端口</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ssh</td>
<td align="left">TCP</td>
<td align="left">127.0.0.1</td>
<td align="left">2222</td>
<td align="left">10.0.2.15</td>
<td align="left">22</td>
</tr>
</tbody></table>
<p>子系统ip写你的虚拟机ip即可</p>
<h2 id="xshell链接Ubuntu虚拟机"><a href="#xshell链接Ubuntu虚拟机" class="headerlink" title="xshell链接Ubuntu虚拟机"></a>xshell链接Ubuntu虚拟机</h2><p>在xshell链接Ubuntu虚拟机的时候</p>
<p>ip写上麦的主机ip：127.0.0.1</p>
<p>端口写上面的主机端口：2222</p>
<p>然后上面配置的端口转发就可以转发到虚拟机上，顺利连接！！！</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title>windows10 专业版激活密钥</title>
    <url>/20170210-Windows10-%E4%B8%93%E4%B8%9A%E7%89%88%E6%BF%80%E6%B4%BB%E5%AF%86%E9%92%A5/</url>
    <content><![CDATA[<p>2017年2月10日 16:03:48<br>亲测可用，这比激活工具方便多了</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">VK7JG-NPHTM-C97JM-9MPGT-3V66T</span><br><span class="line"></span><br><span class="line">NPPR9-FWDCX-D2C8J-H872K-2YT43</span><br><span class="line"></span><br><span class="line">W269N-WFGWX-YVC9B-4J6C9-T83GX</span><br><span class="line"></span><br><span class="line">NYW94-47Q7H-7X9TT-W7TXD-JTYPM</span><br><span class="line"></span><br><span class="line">NJ4MX-VQQ7Q-FP3DB-VDGHX-7XM87</span><br><span class="line"></span><br><span class="line">MH37W-N47XK-V7XM9-C7227-GCQG9</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>soft</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows10开机bat启动VirtualBox虚拟机并且后台运行</title>
    <url>/20170220-Windows10%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8VirtualBox%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B9%B6%E4%B8%94%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C/</url>
    <content><![CDATA[<p>1.制作启动脚本</p>
<p>新建一个start.bat文件，内容如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@echo off</span><br><span class="line"></span><br><span class="line">echo 本命令可让us在后台运行</span><br><span class="line">echo 启动之后可以关闭本窗口</span><br><span class="line"></span><br><span class="line">::进入虚拟机目录</span><br><span class="line">cd C:\&quot;Program Files&quot;\Oracle\VirtualBox</span><br><span class="line"></span><br><span class="line">::执行相关命令 同时启动两台虚拟机</span><br><span class="line">VBoxManage startvm &quot;us&quot; --type headless</span><br><span class="line">::VBoxManage startvm &quot;ubuntu&quot; --type headless</span><br><span class="line"></span><br><span class="line">::执行完之后按回车退出窗口</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<p>2.设置开机启动</p>
<p>把start.bat文件复制到[启动]文件夹里面</p>
<p>[启动]文件夹路径</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp</span><br></pre></td></tr></table></figure>
<p>文件管理器地址栏显示大概是这样</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Windows &gt; [开始]菜单 &gt; 程序 &gt; 启动</span><br></pre></td></tr></table></figure>
<p>放进去之后就可以开机启动了！</p>
<p>启动之后Xshell连接即可</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>VirtualBox</tag>
        <tag>bat</tag>
      </tags>
  </entry>
  <entry>
    <title>windows任务栏由底部改到左边，并自动隐藏</title>
    <url>/20170215-Windows%E4%BB%BB%E5%8A%A1%E6%A0%8F%E7%94%B1%E5%BA%95%E9%83%A8%E6%94%B9%E5%88%B0%E5%B7%A6%E8%BE%B9%EF%BC%8C%E5%B9%B6%E8%87%AA%E5%8A%A8%E9%9A%90%E8%97%8F/</url>
    <content><![CDATA[<p>windows默认是在底部的</p>
<p>在底部任务栏空白处：</p>
<p>右键—设置—任务栏—在桌面模式下自动隐藏任务栏(开)—任务栏在屏幕上的位置(上 | 下 | 左 | 右)</p>
<p>这样就设置完毕了，毕竟笔记本太小<br>用idea的时候居然有些界面很难点击OK什么的！！！</p>
<hr>
<p>知乎有专门讨论任务栏放置位置分析，有兴趣的可以看看:</p>
<p><a href="https://www.zhihu.com/question/20519087" target="_blank">Windows 任务栏放在窗口左边和下面哪一种更合理？各有什么利弊？</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>关于数据一致性</title>
    <url>/20220717-about-data-consistency/</url>
    <content><![CDATA[<h1 id="1-背景"><a href="#1-背景" class="headerlink" title="1. 背景"></a>1. 背景</h1><p>电商场景下的订单系统<br>往往会有很多查询需求<br>单体数据库无法满足大量数据存储、各种复杂查询</p>
<h1 id="2-方案"><a href="#2-方案" class="headerlink" title="2. 方案"></a>2. 方案</h1><p>待更新</p>
<h1 id="3-总结"><a href="#3-总结" class="headerlink" title="3. 总结"></a>3. 总结</h1><p>待更新</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>db</tag>
      </tags>
  </entry>
  <entry>
    <title>关于互联网医疗</title>
    <url>/20210718-about-internet-medicine/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>由于近期换工作，停下了技术书籍，去了解行业<br>《移动健康和智慧医疗》算是互联网医疗的科普资料<br>前面部分的内容已经后面部分国际案例，了解之用足够<br>里面提到的『量化自我』，如果把世界量化分析，岂不是美哉？<br>随说：前提是大家相信分析出来的结论，以及按建议行事。</p>
<h1 id="一、微博读后感"><a href="#一、微博读后感" class="headerlink" title="一、微博读后感"></a>一、微博读后感</h1><p>《移动健康和智慧医疗》0711～0717<br>过去人口红利式的告诉发展逐渐降速<br>老龄化突显使疾病预防和控制更重要</p>
<p>医疗信息化建设提升医疗系统效率<br>医疗数据收集与分析改进医疗方案<br>多维度健康数据分析建议促进健康</p>
<p>减少医疗信息不对称<br>降低患者再次入院率<br>早运动早发现早治疗<br>有效地减少医疗支出</p>
<p>互联网医疗典型方向：</p>
<ol>
<li>促进健康</li>
<li>慢性病管理</li>
<li>诊断治疗(非急症性疾病)</li>
<li>院外康复指导和干预</li>
</ol>
<h1 id="二、摘抄-医疗相关"><a href="#二、摘抄-医疗相关" class="headerlink" title="二、摘抄(医疗相关)"></a>二、摘抄(医疗相关)</h1><span id="more"></span>
<p>《移动健康和智慧医疗》0711～0717<br>过去中国高速发展，目前人口红利逐渐消失，老龄化日益突显，使得以传染病为主，转向非传染性疾病的预防和控制 。</p>
<p>利用现代技术加强相关人员交流和互动</p>
<ol>
<li>加强医疗保健机构的信息化程度，降本增效</li>
<li>从 cure 为主转化为 cure + care，减少病患</li>
<li>从生到死一条龙健康医护服务，预防为主</li>
</ol>
<p>慢性病管理<br>血糖控制，通过监测行为特征，配合辅助功能，加强用户掌控能力，医生，家人远程支持与提醒。<br>随说：收集足够信息，给出专业建议</p>
<p>骨科手术后居家康复指导，尽快出院，获取足够信息与支持。<br>随说：给予高质量内容，提升自我恢复能力。</p>
<p>服务设计、实现、患者使用过程，均反应出一系列信息技术和预防、临床医学(流程、知识)之间的相互作用和支持，提现了互联网+多学科交叉，跨行业深度融合的思想。<br>随说：降本增效，沉淀数据，线上线下无缝对接</p>
<p>互联网医疗典型方向：健康促进、慢性病管理、诊断治疗、术后康复。</p>
<p>健康医疗APP重要因素：专业性、相关性、有效性、趣味性、社交化。<br>随说：社交？相互鼓励，交流心得</p>
<p>医疗云平台：数据汇集分发、电子健康档案、业务管理、安全体系、运维系统。</p>
<p>对多元异构多模态大数据进行处理、分析、挖掘，从中获取新知识和洞察，优化经营、管理，提升患者体验，提取最佳临床路径，辅助临床决策，实行计算机自动筛查和诊断，为其它利益相关方提供未知的信息资源等，这是互联网医疗追求的理想和目标。</p>
<p>研究发现我国近2&#x2F;3接受糖尿病治疗的患者未能适当控制血糖，因此会出现各种并发症，如：心脏病、中风、失明、肾功能衰竭等。</p>
<p>2014年，慢性疾病导致的死亡占中国总死亡人数的 85%，导致的疾病负担占总疾病负担的 70%。</p>
<p>虽然中国经济的增长速度赢得了世界的瞩目，但是如何提高慢性病是综合防治能力，减少慢性病的发病率、致残率和死亡率，降低费用支出，仍是健康医疗服务需要应对的巨大挑战。</p>
<p>著名卫生经济学家普林斯顿大学教授 WR 提出，各国医疗体系的本质在于国家价值观和国家性格决定其系统如何运行。</p>
<p>低功耗可穿戴设备使得随时随地采集健康医疗数据成为可能。这些大量的、连续的、包含上下文情境的健康医疗数据，为健康医疗提供决策依据、促进健康生活方式的养成、改善疾病监护、诊治状况。</p>
<p>移动互联网具有用户身份、位置可识别，随时交互、多元数据可采集、用户可高度参与等一系列技术特征，使得移动互联网与其他行业融合时带来新的解决方案、服务模式和发展机遇。</p>
<p>医护路径全流程服务：促进健康、预防&#x2F;慢性病管理、院前急救、诊断治疗、院外康复&#x2F;干预。</p>
<p>院前急救：伤者历史数据、辅助诊断、车载数据同步医院，医院提前准备。</p>
<p>远程问诊成本低，灵活性强，出现一些早期症状可以及时获得指导。<br>随说：小毛病挂专家号，会诊几分钟…</p>
<p>量化自我：2007年凯文凯利提出，通过设备和技术持续跟踪、采集自己的生理心理特征，形成生活日志，探索身体健康的奥秘。</p>
<p>可穿戴设备的数据如果作为对患者实施诊断、治疗等环节的重要依据，则属于医疗器械，需要监管。</p>
<p>智能服装才是可穿戴设备的终极形式。</p>
<p>单点登录的目的是为了让多个相关联的应用使用相同的登录过程，代码复用，提升体验。</p>
<p>CAS 是开源的企业级单点登录解决方案。</p>
<p>根据密钥的职责和重要性，一般分为：主密钥、二级密钥、初级密钥。初级密钥是直接使用的密钥。高级密钥对低一级密钥做加密，保护低一级的密钥。</p>
<p>不同级别的密钥应该分开存放，最好是异地、异设备。</p>
<p>密钥不以明文形式存储在数据库或传输媒介中：避免密钥被截获后直接用来解密数据，增强安全性。</p>
<p>HIS：医院信息系统<br>PACS：影像系统<br>LIS：检验信息系统<br>RIS：放射信息系统<br>EMR：电子病历<br>HIMSS：美国医疗信息和管理协会<br>EMRAM：电子病历采纳模型<br>CHA：康体佳健康联盟</p>
<p>流式计算的数据来自一个最近的时间窗口，数据延迟短但精度可能较低。</p>
<p>一个完全测序的人类基因组包含 100～1000G的数据。</p>
<p>精准医疗：根据每个人的基因、生活环境、生活方式等的不同，提供相适应的个性化疾病治疗和预防</p>
<p>健康医疗大数据的收集、分析、整理和挖掘对于患者健康医护路径的不同环节都有非常重要的价值。</p>
<p>任何疾病最有效的治疗方式是预防保健。</p>
<p>每年心脑血管医疗费用占比搞，且再次入院率高，如何有效管理心血管病、节省医疗开支、降低出院患者再次入院率已经成为社会各界关注的重点。</p>
<p>美国的分级诊疗制度、医生多点职业、医疗信息化、商业保险、医院集团管理等一系列成熟体系，为美国移动健康医疗的发展提供了肥沃土壤。</p>
<p>远程医疗服务提供简单、方便、低成本的方式为患者远程诊治感冒、流感、喉咙痛或其它简单非急症性疾病。</p>
<p>2014 年 5 月，阿里旗下的支付宝推出“未来医院计划”，支付宝对医疗机构开放自己的平台能力，包括：账户体系、移动平台、支付及金融解决方案、云计算能力、大数据平台等，旨在优化患者在医院的就医流程，提高就医体验，提升医院的管理效率。</p>
<p>2015年阿里健康业务</p>
<ol>
<li>药品零售</li>
<li>医疗服务(远程医疗平台，家庭医生等)</li>
<li>药监码(电子监管平台)</li>
<li>健康保险</li>
</ol>
<p>北京大学人民医院是中国最具实力的三级甲等研究型医院之一，积极推进医疗信息化建设，2014 年通过了国际上衡量医院信息化水准的 HIMSS EMRAM 最高等级(7级)的评审，成为亚洲第二，中国第一家。</p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>read</tag>
      </tags>
  </entry>
  <entry>
    <title>关于中断</title>
    <url>/20210306-about-interrupt/</url>
    <content><![CDATA[<h1 id="一、中断的解释"><a href="#一、中断的解释" class="headerlink" title="一、中断的解释"></a>一、中断的解释</h1><p>网络</p>
<blockquote>
<p>中断（Interrupt）是指 处理器接收到来自硬件或软件的信号，提示发生了某个事件，应该被注意，这种情况就称为中断。</p>
</blockquote>
<p>软中断 (form 《UNIX 操作系统设计》)</p>
<blockquote>
<p>内核在收到软中断信号的进程上下文中处理软中断信号，因此进程必须运行以便处理信号。<br>处理软中断信号的方式：</p>
</blockquote>
<ol>
<li>进程忽略软中断信号;</li>
<li>进程收到软中断信号后退出;</li>
<li>进程收到信号后执行一个特殊的(用户)函数;</li>
</ol>
<h1 id="二、Java-的中断"><a href="#二、Java-的中断" class="headerlink" title="二、Java 的中断"></a>二、Java 的中断</h1><p>Java API 中线程相关的方法主要有三个：</p>
<span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 中断当前线程，仅设置中断标识位。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">interrupt</span><span class="params">()</span></span><br><span class="line"><span class="comment">// 线程的中断标识位是否被标记</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">interrupted</span><span class="params">()</span></span><br><span class="line"><span class="comment">// 类似 interrupted，无论之前是否被中断，都不会清空中断标识位</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isInterrupted</span><span class="params">()</span></span><br></pre></td></tr></table></figure>

<p>Java 中不推荐使用抢断式中断，倡导：</p>
<blockquote>
<p>一个线程的生命不应该由其他线程终止，应当由它自己选择是否停止。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 业务代码</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">    <span class="comment">// 可选:退出 | 忽略 | 执行相关逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="三、扩展"><a href="#三、扩展" class="headerlink" title="三、扩展"></a>三、扩展</h1><ul>
<li>中断有优先级，在处理高优先级中断时，会屏蔽低优先级的中断。</li>
</ul>
<h1 id="四、参考"><a href="#四、参考" class="headerlink" title="四、参考"></a>四、参考</h1><ul>
<li><a href="https://book.douban.com/subject/1035710/">《UNIX 操作系统设计》</a></li>
<li><a href="https://juejin.cn/post/6844903679649120270">线程的中断</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>cs</tag>
      </tags>
  </entry>
  <entry>
    <title>关于学习 Rust</title>
    <url>/20220206-about-learning-rust/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>过年期间，看到 github 关注的人的动态当中<br>有人 star 了这个项目 <a href="https://github.com/sunface/rust-course">Rust语言圣经</a><br>这些年也听说过 Rust，一直没有特意去了解<br>当我看到大佬也关注了这个课程的时候<br>感觉应该是一个不错的学习资料</p>
<p>前面介绍学习的好处让我心动了<br>就跟着学习了前面 4 节课<br>目前感觉良好<br>有空继续学</p>
<p>不得不说，环境搭建特别方便！</p>
<h1 id="一、实践"><a href="#一、实践" class="headerlink" title="一、实践"></a>一、实践</h1><span id="more"></span>
<h2 id="1-1-code"><a href="#1-1-code" class="headerlink" title="1.1 code"></a>1.1 code</h2><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">greet_world</span>()&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">southern_germany</span> = <span class="string">&quot;Grüß Gott!&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">chinese</span> = <span class="string">&quot;世界，你好&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">english</span> = <span class="string">&quot;World, hello&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">regions</span> = [southern_germany, chinese, english];</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">region</span> <span class="keyword">in</span> regions.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, &amp;region);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">more_than_hello</span>()&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">penguin_data</span> = <span class="string">&quot;\</span></span><br><span class="line"><span class="string">    common name,length (cm)</span></span><br><span class="line"><span class="string">    Little penguin,33</span></span><br><span class="line"><span class="string">    Yellow-eyed penguin,65</span></span><br><span class="line"><span class="string">    Fiordland penguin,60</span></span><br><span class="line"><span class="string">    Invalid,data</span></span><br><span class="line"><span class="string">    &quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">records</span> = penguin_data.<span class="title function_ invoke__">lines</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i, record) <span class="keyword">in</span> records.<span class="title function_ invoke__">enumerate</span>()  &#123;</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span> || record.<span class="title function_ invoke__">trim</span>().<span class="title function_ invoke__">len</span>() == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">fields</span>: <span class="type">Vec</span>&lt;_&gt; = record</span><br><span class="line">        .<span class="title function_ invoke__">split</span>(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">        .<span class="title function_ invoke__">map</span>(|field| field.<span class="title function_ invoke__">trim</span>())</span><br><span class="line">        .<span class="title function_ invoke__">collect</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">cfg!</span>(debug_assertions) &#123;</span><br><span class="line">            <span class="built_in">eprintln!</span>(<span class="string">&quot;debug: &#123;:?&#125; -&gt; &#123;:?&#125;&quot;</span>, record, fields);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">name</span> = fields[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Ok</span>(length) = fields[<span class="number">1</span>].parse::&lt;<span class="type">f32</span>&gt;() &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;cm&quot;</span>, name, length);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="title function_ invoke__">greet_world</span>();</span><br><span class="line">    <span class="title function_ invoke__">more_than_hello</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-2-out-put"><a href="#1-2-out-put" class="headerlink" title="1.2 out put"></a>1.2 out put</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cargo run --release</span><br><span class="line">    Finished release [optimized] target(s) in 0.02s</span><br><span class="line">     Running `target/release/world_hello`</span><br><span class="line">Grüß Gott!</span><br><span class="line">世界，你好</span><br><span class="line">World, hello</span><br><span class="line">Little penguin, 33cm</span><br><span class="line">Yellow-eyed penguin, 65cm</span><br><span class="line">Fiordland penguin, 60cm</span><br></pre></td></tr></table></figure>
<h1 id="二、资源"><a href="#二、资源" class="headerlink" title="二、资源"></a>二、资源</h1><ul>
<li><a href="https://course.rs/into-rust.html">gitbook</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>rust</tag>
      </tags>
  </entry>
  <entry>
    <title>陆奇 | 年轻人的榜样</title>
    <url>/20211109-about-luqi/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>不知在哪听说过陆奇的传说<br>对于一位地位如此之高的华人<br>甚是敬仰，奈何相关资料甚少，很难深入了解<br>不像李开复、吴军那样，出过一些书，了解可以多些</p>
<p>榜样的力量或许很虚，关键看自己能悟多少，是否坚持行动。共勉！</p>
<h1 id="一、工程领导-Engineering-Leadership"><a href="#一、工程领导-Engineering-Leadership" class="headerlink" title="一、工程领导(Engineering Leadership)"></a>一、工程领导(Engineering Leadership)</h1><ul>
<li>Believe in 技术<br>未来任何一个工业都会变成软件工业。</li>
<li>站在巨人的肩膀上做创新<br>你所写的每一行代码是否值得？</li>
<li>追求 Engineering Excellence<br>追求工程技术的卓越的能力。</li>
<li>每天学习<br>每天学习，每天都争取变地更好。<br>学经济、学产品、懂商业、懂生态。</li>
<li>Ownership<br>把公司的事业，当成是自己的事业，own everything。从我做起，从身边的每一件事做起。</li>
</ul>
<h1 id="二、关于陆奇的文章"><a href="#二、关于陆奇的文章" class="headerlink" title="二、关于陆奇的文章"></a>二、关于陆奇的文章</h1><span id="more"></span>
<h2 id="2-1-摘要"><a href="#2-1-摘要" class="headerlink" title="2.1 摘要"></a>2.1 摘要</h2><ul>
<li>20岁：做让自己走得快的事情</li>
<li>30岁：做让自己走得远的事情：搭建系统</li>
<li>身体系统</li>
<li>家庭系统</li>
<li>人脉系统</li>
<li>40岁：找一个可以让你淋漓尽致发挥的舞台</li>
</ul>
<h2 id="2-2-原文"><a href="#2-2-原文" class="headerlink" title="2.2 原文"></a>2.2 原文</h2><h3 id="2-2-1-介绍"><a href="#2-2-1-介绍" class="headerlink" title="2.2.1 介绍"></a>2.2.1 介绍</h3><p>大部分人还不了解陆奇，但他值得让我们好好了解一下：</p>
<p>这几年陆奇被格外关注，始于2017年1月17日他被百度任命为百度总裁。这次任命份量极高，到今天百度创立19年，李彦宏给出如此高的权力，陆奇是唯一一个。</p>
<p>但陆奇值得。</p>
<p>陆奇在硅谷非常有名，拥有不错的人脉和江湖地位，凡接触过陆奇的人提起他，几乎是众口一词地称赞。</p>
<p>1998年陆奇加入雅虎，2007年任雅虎执行副总裁。</p>
<p>2008年他辞职时，杨致远当场洒泪，告别会上所有工程师穿上统一的T恤，T恤上印着“我曾与陆奇一起工作，你呢？”，以此纪念陆奇在雅虎的日子。</p>
<p>2008年加入微软，任全球执行副总裁，这是有史以来，华人在科技领域获得的最高职位。</p>
<p>2016年9月离职时，比尔·盖茨极力挽留甚至承诺：“你想要做什么业务，我们去搞个业务给你。或者你先休假一年两年，然后再回来当首席技术官，我们等着你就是了。”</p>
<p>微软现任 CEO 纳德拉曾对微软员工说：“五个人，对微软贡献巨大。一是创始人比尔·盖茨，二是CEO史蒂夫·鲍尔默，三是董事会主席约翰·汤普森，四是诗人奥斯卡·王尔德，最后一个就是陆奇。”</p>
<p>其实早在2005年前后，李彦宏就曾试图说服陆奇加入百度，只是当时并未如愿。</p>
<p>2017年陆奇加入百度后，李彦宏曾公开给了他很高的评价：陆奇上上下下有口皆碑，大家都很喜欢他，他有非常强的技术能力，又有很强的管理能力，并且工作极其玩命。</p>
<p>陆奇身上有太多值得我们学习的地方。</p>
<h3 id="2-2-2-采访"><a href="#2-2-2-采访" class="headerlink" title="2.2.2 采访"></a>2.2.2 采访</h3><p>前段时间《晚点》采访时就问陆奇：</p>
<p>你对20、30、40岁的年轻人各有什么建议？</p>
<p>陆奇：</p>
<p>20岁需要做让你可以走得很快的事情，快速学、快速失败。30岁你要让自己可以走得远，建立一个核心支撑体系能让你走得很远。这个体系包括你的身体、你厚实的家庭基础和几个志同道合你可以信任的朋友。</p>
<p>一个人到了35岁，到了打造产品的黄金时段，我已前很关注这个年龄阶段的人才，因为他&#x2F;她已经犯过不少错，他&#x2F;她最需要做一个好产品让他&#x2F;她的职业生涯有一个本质提升。</p>
<p>40岁后，理想情况是找到一个可以让你淋漓尽致去发挥的舞台，一个人的才华和一个公司的才华只有在真正被释放的情况下才能实现它的价值。如果这个舞台是你自己的最好。</p>
<p>这个回答很经典，我反复看了很多遍。但要真的看懂看透，我们还必须要放在陆奇的整个人生系统里看，我一口气翻看了所有关于陆奇重要的中文报道，从中得到了一个更完整清晰的答案。</p>
<p>20岁：做让自己走得快的事情</p>
<p>陆奇：“20岁需要做让你可以走得很快的事情，快速学、快速失败。”</p>
<p>1、20多岁，习得什么能力最重要？</p>
<p>陆奇认为有两个：</p>
<p>学习能力：在这个变化速度越来越快的世界里，拥有学习和持续学习的能力，不断提高自己在某一个专业领域以及在企业内开发产品和业务的认知能力是基础。</p>
<p>原因很简单，因为创新，世界变化的速度越来越快。唯一的应对，是与它共跑甚至赶超。方法就是学习，要持续不断的学习，让自己拥有更多更深的专业知识和技能，更强的在企业内开发产品和业务的能力。</p>
<p>交流能力：这是一个人与人之间愈发紧密联结的世界，通过各种数字通讯服务与工具，社交网络，人们能够以文字、图片乃至视频，与更多的人保持交流。</p>
<p>从长远角度看，一个人越擅长结识他人，表达自己，形成相互学习并共同完成某些理想的关系和友谊，对这个人就越好。</p>
<p>2、20多岁，去创业公司还是大公司？</p>
<p>陆奇认为，要看个人追求。</p>
<p>如果你的长远理想是自己开公司，那加入创业公司，甚至直接创业，都是最好的选择。加入创业公司或自己创业会愈发成为年轻人学习并拥有真正创新能力的重要途径。因为在创业企业，每天做的事就是为了生存而战斗，一个人的真实作战能力测试来的很快。创新或死亡，是创业企业每天面临的现实。就学习和人才发展角度，一个人能获得这样的学习机会是非常宝贵的。</p>
<p>如果你的长远理想是成为一家公司某个职能的高管，那就进入一家可以提供你学习和成长机会的大企业。</p>
<p>但陆奇认为，以上仅限于少部分清楚的知道自己长远目标的人，他对女儿说：大部分人在25岁之前，对于人生想要做什么，其实只有模糊的感觉。</p>
<p>所以，20多岁，要学会快速失败，尝试，反馈，改变。把自己的时间投资在更大的学习发展空间机会中，可能为未来创造更高的收入。</p>
<p>3、陆奇的20多岁，在做什么？</p>
<p>读书，以及继续读书。</p>
<p>1978年，全国恢复高考，17岁的陆奇埋头狠狠啃了两年书，考入复旦大学计算机专业。读书期间，陆奇特别用功。他的同学们回忆说：</p>
<p>“他瘦瘦小小的身影，每天穿行在教室和图书馆之间，夜里图书馆熄灯，他才穿过农田，回到另一区的寝室。”</p>
<p>“他背着大书包在校园里穿梭，在林荫道上反反复复背着单词。他是全年级最瘦小的男生，但扛着全年级最大的书包。”</p>
<p>凭着超凡的努力，陆奇顺利考取复旦的研究生。凭着读研期间优异的成绩，他毕业后留校任教。</p>
<p>勤奋学习和扎实的专业知识带给陆奇的远不止一份稳定而又体面的工作，还包括更多的人生选项。</p>
<p>1989 年，卡耐基梅隆大学教授克拉克到复旦交流讲学，讲学时间选在了周末。不巧地是，当天的天气很不给力，暴雨倾盆，周末加坏天气使得来听讲座的学生寥寥无几。校方为了不让教授尴尬，就安排周末留校的师生去听讲座，因为暴雨取消回家计划的陆奇就是其中之一。</p>
<p>克拉克教授讲完后，让在场师生提问。陆奇抓住这个机会，接连向教授提了几个专业问题，克拉克听完，立刻就对这个提问的复旦老师的学术水平刮目相看。讲座过后，他专门翻阅了陆奇写的论文，看过之后，克拉克就邀请陆奇去卡耐基梅隆大学读博。</p>
<p>那年陆奇28岁，有点犹豫：“在大学当老师已经是很不错的职业了”。</p>
<p>克拉克只回了一句：“你是鹰，不应该局限在笼子里。”</p>
<p>陆奇去了美国。</p>
<p>走上卡耐基梅隆大学这个更大的平台，才有了陆奇对计算机科学更深入的研究与理解、才有了陆奇与李开复的相识以及后面的开挂人生。</p>
<p>4、59岁的陆奇还在试图重构知识体系，20多岁怎能不学？</p>
<p>2016年陆奇在硅谷接受采访时说：“最近几年我重新觉悟——你必须要重新学习，以前学的东西不光过时了，而且现在很多理论包括物理学都已经有了全新的认识，所有你要从根本上重新构建知识、认识世界。”</p>
<p>陆奇从微软离职原因之一是练习倒骑自行车摔伤了腿，那辆车是他与同事改造的、反向骑行的自行车，骑车时人和身体反应全部是倒置，所以要忘记过去学习到的全部经验。</p>
<p>就连之前选择加入YC，其中一个原因也是学习：我还希望我的工作不能只利用过往的经验，而是要每天学新东西。不学新东西的话，就没什么乐趣。</p>
<p>这几年陆奇观察到人才市场里一个非常重要的宏观趋势，整体的需求从原来的技能驱动型人才，越来越往知识和创新驱动型人才转移。所以他认为，一个人的能否快速学习，并将学到的知识应用于创造新的价值也变得愈发重要。</p>
<p>现在他仍旧保持着每天学习英语、阅读计算机领域最前沿论文的习惯。他说：“我把自己想象成一个软件，今天的版本一定要比昨天的版本好，明天的版本一定要比今天的版本好。”</p>
<p>年近60岁，陆奇还试图重构知识体系，20多岁的我们又怎么能不学习？</p>
<p>30岁：做让自己走得远的事情：搭建系统</p>
<p>陆奇说：30岁你要让自己可以走得远。建立一个核心支撑体系，能让你走得很远。这个体系包括你的身体、你厚实的家庭基础和几个志同道合、可以信任的朋友。</p>
<p>陆奇是一个寻求最优解的人，方式就是建立系统。</p>
<p>任何一个问题他都有系统的固定方式去解决——就是把它变成一个非常理性化、可以拆解成任务的方程。</p>
<p>比如，陆奇的人生里几乎看不冒险，因为他只把机会成本的8%用来冒险，就算这8%，他还是会建立一个决策系统，理性决定——快速反馈——如果方向不对，立即掉头甚至放弃。</p>
<p>比如，看待自己在微软的贡献，他不计较几个产品的得失，还是要回到系统上：比起一个产品的成败，帮助企业建造长期的创新的生命力才是最重要的。</p>
<p>我们再看一下他上面着重提到的三个系统。</p>
<p>1、身体系统</p>
<p>陆奇极度自律，坚持了十几年早上4点起床。</p>
<p>过去十几年他是这样的：“4点起来先弄Email，弄完了以后跑步，跑30分钟，洗个澡，去办公室。跑步第一对呼吸系统是很好的锻炼，第二可以出一身汗，第三是我可以边跑边听书不浪费时间，有时候我会把PPT放在跑步机上翻着看。”</p>
<p>从微软离开后有所变化，他现在对自己的生活效率很不满意，因为骑反向自行车把腿摔伤后，跑步根本不行了，目前他正在找一个让自己感觉每天都很顺畅的方式。</p>
<p>不过他依然精力旺盛，百度期间，同事说他每日长时间工作，无论周末、假期，无论在北京还是在国外，只要开会，他总是准时出现在视频会议的另外一端。他有依然有自己严格的作息制度，有自己严格的生活习惯，也有非常严格的饮食习惯。</p>
<p>陆奇认为，每个人有不同的身体状况，他自己的做法不建议其他人学习。但是他有一套核心的方法论可以介绍给大家：</p>
<p>找到问题的核心，即：无论创业还是在大企业里从业，在工作中如何进行时间管理来让产出最大化，同时也能获得自我满足？</p>
<p>再找到核心的解决办法，即：</p>
<p>设计一个“马拉松快步跑”的时间管理方法和心态。</p>
<p>第一：要意识到这是一场马拉松，不是一场短跑。</p>
<p>第二：这场马拉松的速度需要很快，因为现实世界中，任何高价值的东西——创业公司、大企业的好岗位等——都会有非常激烈的竞争，你需要保持速度并持续领先。</p>
<p>设计这样一个工作节奏和时间管理方式，很类似在高速公路开车。</p>
<p>陆奇说：“你需要保持一个均匀的高速，然后时不时的加速一下，再回到之前均匀的高速。你要避免过度频繁的加速、减速。就像一辆车，如果一直都是高速前进，只是偶尔减速一下，这对与一辆车的损耗是很低的。但如果一辆车过度频繁的突然加速、减速，会对这辆车带来巨大损耗，不用多久车就可能垮掉。</p>
<p>因此，你需要设计属于你自己的一个工作和生活节奏，这种节奏是你可以保持住的高速，而这个高速可以给你带来最大的效率。同时，你也需要设计这个日程节奏，让它可以应对突发变化，可以时不时的冲刺一下，比如偶尔过度加班让工作在截止日期前完成，然后迅速回归之前的速度。必须避免经常性的透支，经常性的拼命追赶截止日期，经常性的处于疲累状态。身体和精神上偶尔透支可以补回，不可长期透支。”</p>
<p>跑一个高效率、可持续、并且可以应对临时突发状况的马拉松才是关键。</p>
<p>2、家庭系统</p>
<p>陆奇的家庭很少出现在媒体中，公开信息绝少，但陆奇在讲搭建系统时特意提到“厚实的家庭基础”，说明他的个人成功受“家庭系统”支持颇多。</p>
<p>2018年5月8日，百度宣布陆奇因“个人和家庭原因”离开百度。</p>
<p>这其实是拿陆奇最不可能的原因当了最常见的公关话术，陆奇的家庭一直是全力支持陆奇做他想做的事业，百度的一位高层说，陆奇就职微软期间，其长期在美国西雅图工作，家人为了陆奇就定居硅谷，“他早就把家庭的事情处理好了”。</p>
<p>陆奇回国加入百度后，为了照顾陆奇的饮食起居，陆奇家人曾一度迁居北京，百度还为陆奇的夫人配备了出入百度大厦的证件。</p>
<p>2018年8月16日，YC媒体沟通会上，主持人官宣陆奇加盟YC担任YC中国首任CEO。陆奇和太太、女儿都在现场。</p>
<p>陆奇的太太说：“我们有一半的时间在美国，他去哪里，我们就跟到哪里。”</p>
<p>陆奇现场致辞的最后，也特别感谢了他的太太和家人。而且说希望在美国、中国多花时间，为了家庭。</p>
<p>写这部分内容时，我突然想起小晚的《晚点》团队采访陆奇时曾问过这么一个问题：你是否经常会太过相信自己的力量？</p>
<p>陆奇说：会。我太太一直觉得我太过于自信了。她老觉得我自以为是。</p>
<p>这就是最好的支持吧，即便有时认为你的理想“不现实”，但只要你想做，我愿意陪你。这就是陆奇所说的“厚实的家庭基础”对一个人事业的重要性吧，如果你的梦想和成长能得到最亲近的人的支持，应该是最幸福的事了。</p>
<p>3、人脉系统</p>
<p>陆奇的人脉有多强？</p>
<p>陆奇的人脉有多好，我相信在开头介绍中，那些顶级大佬的评价就是最好的答案，接触过的人都愿意帮他，合作过的人都愿意捧他。</p>
<p>这里再讲几个点。</p>
<p>1996年，陆奇博士毕业，摆在他面前的有三个选项：回国；华尔街；硅谷。</p>
<p>他不知道该如何选择，就去请教李开复自己该去哪里、进哪个公司工作，李开复给出了自己的建议：“去硅谷吧，找一家技术类的公司。”</p>
<p>于是陆奇就去了IBM的Almaden研究实验室，在那里工作了两年。</p>
<p>之后，陆奇跳槽到雅虎，李开复又一次提醒他：“雅虎的股价不会一直在这个水平上，它要么会上涨5倍，要么下跌5倍。”</p>
<p>陆奇职业生涯的两次关键时刻，李开复都给出了自己的建议和判断，一次让他看清了自己的优势和发展方向，一次让他看清了一家公司的发展空间。</p>
<p>2008年，微软收购雅虎未果，当时已在微软任职的师兄沈向阳向鲍尔默引荐了陆奇，于是有了之后鲍尔默与陆奇长达6个小时的会谈。就这样，微软成功挖到了雅虎搜索引擎业务第一人——陆奇，陆奇也开启了他在微软的执行副总裁生涯。</p>
<p>沈向阳的引荐，让陆奇成为“硅谷最有权势的华人”。</p>
<p>再到2019年，YC撤出中国，陆奇独立运营新基金奇绩创坛，很快首期美元基金募集完成约1亿美金，出资人都是谁呢？</p>
<p>陆奇的朋友们，阵容相当豪华：比尔盖茨、孙正义、红杉中国、高瓴资本、北极光创投等。</p>
<p>陆奇如何看待人脉？</p>
<p>中国人常说，做成一件事就是：天时地利人和。</p>
<p>人和就是人脉。陆奇喜欢那句“机会总是留给有准备的人”，但他喜欢那句“机会是留给广结良友的人。”</p>
<p>陆奇说：我个人的经验里，除了准备充分，你所拥有的人脉的宽度和广度也很重要，要通过交流结识更多人，最好是拥有不同职业背景的人，并跟他们保持关系）。美国有一句谚语，你获得一份工作不是因为你知道什么，而是因为你认识谁。这句话在某种角度上其实很正确，至少在我个人的经验里，这句话很正确。</p>
<p>陆奇为什么有如此好的人脉资源？</p>
<p>这句按照查理芒格的说法，当然是陆奇配得上。</p>
<p>他做了什么让自己配得上？</p>
<p>我们来分析几点。</p>
<p>陆奇的人品。</p>
<p>小晚的团队采访他时，多次试图让他聊百度，我们看陆奇的表现。</p>
<p>比如问“回头来看，加入百度是一个错误的选择吗？”，陆奇回答“不好意思，我真的不想讲百度”。</p>
<p>记者追问“你可以谈微软，但是避免谈百度，为什么？”，陆奇回答“是职业道德，我不想为它带来任何Distraction（干扰）”。</p>
<p>我看完这句，佩服。</p>
<p>谈及老东家YC，陆奇说：我个人很感激YC，我一定要强调这一点，他们送我们到了他们能送到的最远的地方。</p>
<p>记者问：看着雅虎一步步走向衰落，为什么没有更早的离开？</p>
<p>陆奇答：因为我答应杨致远做10年。当时雅虎进入了一个危机，杨致远找我说，中国有一个传统，朋友有难的时候不应该离开。我说那我就不离开了。</p>
<p>膜拜。</p>
<p>陆奇的情商。</p>
<p>小晚团队问：你心中优秀的CEO是什么样子？你的榜样是谁？</p>
<p>陆奇答：最强的人愿意为你而来，这是我觉得最好的CEO。在中国我觉得马云做得不错。</p>
<p>后面的一个问题中，他特意提及了张小龙，“张小龙是我非常敬仰的人。中国的移动生态走得很远，很大因素是微信，微信可能是当代做得最出色的一个产品”。</p>
<p>赞美阿里的组织，赞美腾讯的产品。</p>
<p>陆奇的品质。</p>
<p>一个浑身闪耀着发光品质的人怎么会没朋友？</p>
<p>陆奇身上的优秀品质太多，略举一二。</p>
<p>比如准时。自媒体人辉哥曾和陆奇在百度共事，他说某次出差，他们先到楼下大堂等，距离预定出发的时间还有1分钟时，他有一些着急，问要不要给陆奇打个电话。熟悉他的人说“他会准时的”，话音刚落，电梯门打开，陆奇出现，一分不差他极度守时。</p>
<p>比如来信必回。无论是邮件还是微信，你只要发给他，他一定会回复，时间不确定，有时候是凌晨1-2点，有时是早晨5-6点左右。</p>
<p>比如永远正向。辉哥说，工作中永远难免会遇到困难，但陆奇任何时候都保持正向的态度。无论是在公司开会，还是做大会的 MC，或是回邮件，永远是用简短有力，但充满了力量和鼓舞人上进的精神。大家最累最困难的时候，只要陆奇在那里振臂一挥，大家顿时又像打了鸡血。</p>
<p>40岁：找一个可以让你淋漓尽致发挥的舞台</p>
<p>陆奇：“40岁后，理想情况是找到一个可以让你淋漓尽致去发挥的舞台，一个人的才华和一个公司的才华只有在真正被释放的情况下才能实现它的价值。如果这个舞台是你自己的最好。”</p>
<p>陆奇说过一句广为流传的话：</p>
<p>“人生不是线性的，不要以为一班车就能把你从现在的位置带到你自己所期望的位置。”</p>
<p>什么阶段做什么，40岁以后，就要找到一个可以让你淋漓尽致发挥的舞台。</p>
<p>为什么不是20岁？</p>
<p>前文也说了，陆奇认为那个阶段，绝大部分人对于人生想要做什么，其实只有模糊的感觉。</p>
<p>而且陆奇认为，20多岁你要考虑一些现实因素，比如财务方面，工作收入需要满足自己生活的需求以及其他潜在财务责任，比如资助父母兄妹等，理想情况下，还可以有一些存款。</p>
<p>20多岁多学多做多试，30多岁搭建系统，正是为了40岁以后真正有属于自己的舞台。</p>
<p>微软属于他的舞台，但不够，所以他离开，回到中国，找更合适的舞台。</p>
<p>比尔·盖茨一直挽留他，说：百度能给你什么，我都给你。</p>
<p>陆奇说：你不能给我中国。</p>
<p>中国是他现在更好的舞台，一个更大意义上的舞台，他要借助一家合适的平台在这个舞台上跳舞。很可惜，百度没能最终成为那个合适的舞台。后来他加入YC，很可惜YC也没最终成为那个合适的舞台。</p>
<p>后来陆奇认为：属于自己的舞台，如果真的“属于自己”，那是最好的。</p>
<p>“如果你想真正大规模改变世界，那你必须是这个企业的创始人，否则你永远受限于你的雇主。当这个平台是你亲手建造，那你可以发挥的能量和范围是最充分的。”</p>
<p>陆奇的的签名是：“Do more, know more, be more”。</p>
<p>这大概就是追求“be more”吧，40岁以后，自我更重要了。</p>
<p>这个问题，《晚点》和陆奇的对话很精彩：</p>
<p>《晚点》：甘地说，be the change you want to see in the world。成为更好的自我和建立一个更好的世界，后者难道不会推动人走得更远吗？</p>
<p>陆奇：自我才会让人更永久。赚很多钱、建设一个成功公司，甚至建造一个国家、世界，都是外在目标。如果一个目标是外在的，你永远会在达到目标之后变得一片空虚。</p>
<p>《晚点》：有一些商人，他们的目标就是赢，他们乐此不疲，似乎并不空虚。</p>
<p>陆奇：你的追求是建立在别人输的基础之上，为什么世界上一定要有人输你才觉得你的生命是有价值的？我认为人的目标是你自己而不是任何外在的因素。</p>
<p>如今他终于有了属于自己的舞台，奇绩创坛，也真的“属于自己”。</p>
<h1 id="三、参考"><a href="#三、参考" class="headerlink" title="三、参考"></a>三、参考</h1><ul>
<li><a href="https://mp.weixin.qq.com/s/GWW2KprMEEScisfF8z3JZA">陆奇最新演讲：如何成为一个优秀的工程师</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/101936153">传奇人物陆奇的一点人生感悟</a></li>
</ul>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>cs</tag>
      </tags>
  </entry>
  <entry>
    <title>为什么要写博客？</title>
    <url>/20240303-about-write-blog/</url>
    <content><![CDATA[<p>之前我也有想过一些写博客的好处：</p>
<ul>
<li>知识共享：把解决问题的过程记录下来，方便自己后续翻阅，也帮助他人解决问题。</li>
<li>教学相长：把学到的知识<strong>系统整理</strong>出来进行分享，<strong>发现盲区</strong>立马查缺补漏。</li>
<li>展示自我：可以在简历上放一个博客链接，让聘用单位有机会更多地了解你。</li>
<li>提高文档水平：提高协作水平，了解怎么排版更好，怎么用词更好。</li>
</ul>
<p>在看《软技能2》这本书的时候，发现里面提到很多博客相关的内容。<br>不管是在『营销』还是在『学习』相关的模块上，都频繁提到。</p>
<p>《软技能2》中比较系统的说法</p>
<span id="more"></span>
<ul>
<li>通过博客进行自我营销</li>
<li>博客可以让他人更了解你，因此会积累名声&#x2F;带来机会</li>
<li>让你成为更好的软件开发人员和传道者，能带给你许多意想不到的机会。</li>
<li>很多技术大牛都有技术博客，想想为什么？</li>
<li>许多著名的软件开发人员直接靠成功的博客赢得口碑。</li>
<li>博客有一个好处是你无法轻易抹杀的——<strong>提高你的沟通技巧</strong>。</li>
<li>组织自己的思想，并将其转化为文字，是一项颇具难度却也极具价值的技能。</li>
<li>定期更新博客，有助于持续刷新自己的技能，保证自己处于所在行业领域的前沿。</li>
<li>学习如何写博客实际上都能帮你写出更好的代码，因为你能更轻松地传达自己的意图。</li>
<li>博客还能帮你更好地传达自己的想法，令想法更有说服力。</li>
<li>打造成功博客的最大秘诀有且仅有一个——持之以恒。</li>
<li><strong>强烈建议一周更新一次博客</strong>。</li>
<li>高质量内容的内容才能让你的博客获得成功，想想别人看你博客能获得什么？</li>
<li>初始阶段，可以通过评论他人博客给自己引流。</li>
<li>可以撰写博客文章，作为对别人的某篇博客文章的回应(引流效果好)。</li>
</ul>
<p>《软技能2》建议采取行动开始写博客：</p>
<ul>
<li>看看你喜欢的博客，试着列出更新频率和文章的平均长度</li>
<li>开始写博客，制订一个时间表，强迫自己将来坚持写博客。</li>
<li>承诺至少更新一年博客，大多数人坚持一年作用就会看到相应的效果。</li>
<li>创建一个待办列表，有新的想法就往里面添加，在需要写的时候就可以挑一个写。</li>
</ul>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>成长</tag>
      </tags>
  </entry>
  <entry>
    <title>关于 Java static</title>
    <url>/20211112-about-static/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>同事分享《Effective Java》<br>其中第十章，并发部分例子有争议<br>变量是否需要(代码如下) static？<br>几个大佬说需要加，我众目睽睽下反驳不需要，略尴尬</p>
<p>&#x2F;&#x2F; 是否需要加 static？才能保证单例正确<br>private volatile Singleton singleton;</p>
<h1 id="一、程序关键代码"><a href="#一、程序关键代码" class="headerlink" title="一、程序关键代码"></a>一、程序关键代码</h1><h2 id="1-1-原程序-错误"><a href="#1-1-原程序-错误" class="headerlink" title="1.1 原程序(错误)"></a>1.1 原程序(错误)</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">volatile</span> Singleton singleton;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;</span><br><span class="line">         <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">            <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;</span><br><span class="line">               singleton = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> singleton;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-2-正确程序"><a href="#1-2-正确程序" class="headerlink" title="1.2 正确程序"></a>1.2 正确程序</h2><span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton singleton;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;</span><br><span class="line">         <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">            <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;</span><br><span class="line">               singleton = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> singleton;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="二、验证"><a href="#二、验证" class="headerlink" title="二、验证"></a>二、验证</h1><h2 id="2-1-验证程序"><a href="#2-1-验证程序" class="headerlink" title="2.1 验证程序"></a>2.1 验证程序</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">AtomicInteger</span> <span class="variable">COUNT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">   <span class="comment">// 通过volatile关键字来确保安全</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">volatile</span> Singleton singleton;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;</span><br><span class="line">         <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">            <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;</span><br><span class="line">               System.out.println(<span class="string">&quot;new:&quot;</span> + COUNT.addAndGet(<span class="number">1</span>));</span><br><span class="line">               singleton = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> singleton;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">taskCount</span> <span class="operator">=</span> <span class="number">700</span>;</span><br><span class="line">      <span class="comment">// 锁住所有线程，等待并发执行</span></span><br><span class="line">      <span class="keyword">final</span> <span class="type">CountDownLatch</span> <span class="variable">begin</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CountDownLatch</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">exec</span> <span class="operator">=</span> Executors.newFixedThreadPool(taskCount);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>; index &lt; taskCount; index++) &#123;</span><br><span class="line">         submitTask(begin, exec);</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(<span class="string">&quot;开始执行&quot;</span>);</span><br><span class="line">      <span class="comment">// begin 减1 ，开始并发执行</span></span><br><span class="line">      begin.countDown();</span><br><span class="line">      <span class="comment">//关闭执行</span></span><br><span class="line">      exec.shutdown();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">submitTask</span><span class="params">(CountDownLatch begin, ExecutorService exec)</span> &#123;</span><br><span class="line">      <span class="type">Runnable</span> <span class="variable">run</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 等待，所有一起执行</span></span><br><span class="line">            begin.await();</span><br><span class="line">            <span class="comment">//开始模拟等待。。。</span></span><br><span class="line">            <span class="type">Singleton</span> <span class="variable">singleton</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">            <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> singleton.getInstance();</span><br><span class="line">            System.out.println(Objects.isNull(instance));</span><br><span class="line">         &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      exec.submit(run);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-2-验证结果"><a href="#2-2-验证结果" class="headerlink" title="2.2 验证结果"></a>2.2 验证结果</h2><p>带 static 的结果符合预期<br>对象只创建一次，并且返回结果均不为 null</p>
<h3 id="2-2-1-不带-static"><a href="#2-2-1-不带-static" class="headerlink" title="2.2.1 不带 static"></a>2.2.1 不带 static</h3><p>开始执行<br>new:1<br>new:2<br>new:3<br>false<br>true<br>省略几十行….</p>
<h3 id="2-2-2-带-static"><a href="#2-2-2-带-static" class="headerlink" title="2.2.2 带 static"></a>2.2.2 带 static</h3><p>开始执行<br>new:1<br>false</p>
<h1 id="三、原因分析"><a href="#三、原因分析" class="headerlink" title="三、原因分析"></a>三、原因分析</h1><p>static变量也称作静态变量，静态变量和非静态变量的区别是：静态变量被所有的对象所共享，在内存中只有一个副本，它当且仅当在类初次加载时会被初始化。<br>而非静态变量是对象所拥有的，在创建对象的时候被初始化，存在多个副本，各个对象拥有的副本互不影响。</p>
<p>关键：static 变量在内存中只有一个副本，由所有对象共享。</p>
<h1 id="四、参考"><a href="#四、参考" class="headerlink" title="四、参考"></a>四、参考</h1><ul>
<li><a href="https://www.cnblogs.com/hexinwei1/p/9909555.html">Java并发（七）：双重检验锁定DCL</a></li>
<li><a href="https://www.cnblogs.com/dolphin0520/p/3799052.html">Java中的static关键字解析</a></li>
<li><a href="https://www.jianshu.com/p/a1d4876e7c87">线程池模拟高并发</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>apt-get 常用命令</title>
    <url>/20170815-apt-get%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>apt-get应该debian内核系列的系统都能用：</p>
<p>比如：debian、ubuntu、deepin等</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt-cache search package    #搜索包（相当于yum list | grep pkg）</span><br><span class="line">apt-cache show package      #显示包的相关信息，如说明、大小、版本等</span><br><span class="line">apt-cache showpg package    #显示包的相关信息，如Reverse Depends（反向依赖）、依赖等</span><br><span class="line">apt-get install package       #安装包</span><br><span class="line">apt-get reinstall package     #重新安装包</span><br><span class="line">apt-get -f install package    #强制安装</span><br><span class="line">apt-get remove package        #删除包（只是删掉数据和可执行文件，不删除配置文件）</span><br><span class="line">apt-get remove --purge package       #删除包，包括删除配置文件等</span><br><span class="line">apt-get autoremove --purge package   #删除包及其依赖的软件包+配置文件等</span><br><span class="line">apt-get update          #更新源</span><br><span class="line">apt-get upgrade         #更新已安装的包</span><br><span class="line">apt-get dist-upgrade    #升级系统</span><br><span class="line">apt-get dselect-upgrade        #使用 dselect 升级</span><br><span class="line">apt-cache depends package      #了解使用依赖</span><br><span class="line">apt-cache rdepends package     #查看该包被哪些包依赖</span><br><span class="line">apt-get build-dep package   #安装相关的编译环境</span><br><span class="line">apt-get source package      #下载该包的源代码</span><br><span class="line">apt-get clean &amp;&amp; apt-get autoclean  #清理下载文件的存档 &amp;&amp; 只清理过时的包</span><br><span class="line">apt-get check             #检查是否有损坏的依赖</span><br><span class="line">dpkg -S filename          #查找filename属于哪个软件包</span><br><span class="line">apt-file search filename  #查找filename属于哪个软件包</span><br><span class="line">apt-file list packagename #列出软件包的内容</span><br><span class="line">apt-file update           #更新apt-file的数据库</span><br><span class="line"></span><br><span class="line">dpkg -l      #列出当前系统中所有的包.可以和参数less一起使用在分屏查看（类似于rpm -qa）</span><br><span class="line">dpkg -l |grep -i &quot;pkg&quot;   #查看系统中与&quot;pkg&quot;相关联的包（类似于rpm -qa | grep pkg）</span><br><span class="line">dpkg -s pkg  #查询一个已安装的包的详细信息（类似于rpm -qi）</span><br><span class="line">dpkg -L pkg  #查询一个已安装的软件包释放了哪些文件（类似于rpm -ql）</span><br><span class="line">dpkg -S file     #查询系统中某个文件属于哪个软件包（类似于rpm -qf）</span><br><span class="line">dpkg -c pkg.deb  #查询一个未安装的deb包将会释放哪些文件（类似于rpm -qpl）</span><br><span class="line">dpkg -I pkg.deb  #查看一个未安装的deb包的详细信息（类似于rpm -qpi）</span><br><span class="line">dpkg -i pkg.deb  #手动安装软件包（不能解决软依赖性问题，可以用apt-get -f install解决）</span><br><span class="line">dpkg -r pkg      #卸载软件包（不是完全的卸载，它的配置文件还存在）</span><br><span class="line">dpkg -P pkg      #全部卸载（不能解决依赖性的问题）</span><br><span class="line">dpkg-reconfigure pkg     #重新配置</span><br><span class="line">dpkg -x pkg.deb dir      #将一个deb包解开至dir目录</span><br><span class="line">dpkg --pending --remove  #移除多余的软件</span><br><span class="line"></span><br><span class="line"># 强制安装一个包(忽略依赖及其它问题)</span><br><span class="line">dpkg --force-all -i pkg.deb    #可以参考dpkg --force-help</span><br><span class="line"></span><br><span class="line"># 强制卸载一个包</span><br><span class="line">dpkg --force-all -P pkg.deb</span><br><span class="line"></span><br><span class="line">aptitude update   #更新可用的包列表</span><br><span class="line">aptitude upgrade  #升级可用的包</span><br><span class="line">aptitude dist-upgrade     #将系统升级到新的发行版</span><br><span class="line">aptitude install pkgname  #安装包</span><br><span class="line">aptitude remove pkgname   #删除包</span><br><span class="line">aptitude purge pkgname    #删除包及其配置文件</span><br><span class="line">aptitude search string    #搜索包（相当于yum list | grep pkg，重要）</span><br><span class="line">aptitude show pkgname     #显示包的详细信息 （相当于yum info pkg，重要）</span><br><span class="line">aptitude clean            #删除下载的包文件</span><br><span class="line">aptitude autoclean        #仅删除过期的包文件</span><br><span class="line">apt-get install xrdp      #安装图形化</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>北京联通-光猫改桥接-并开启IPv6</title>
    <url>/20220604-bj-unicom-optical-modem-change-to-bridge-and-set-ipv6/</url>
    <content><![CDATA[<h1 id="0-背景"><a href="#0-背景" class="headerlink" title="0. 背景"></a>0. 背景</h1><p>现有的长城 100M 宽带太寒酸了<br>之前的住户说想升级光纤都没办法<br>于是乎咨询了下联通可否装光纤<br>答案是可以，换个套餐就行</p>
<p>桥接的好处就是，光猫只做光猫该做的事情。<br>其它事情由自己的路由器进行设置并且管理。<br>这样即使你搬家什么的，路由器搬走，<br>任何设备都不用动，包括固定内网 IP 等<br>我主要的点是固定内网 IP，因为我由 NAS</p>
<h1 id="1-操作"><a href="#1-操作" class="headerlink" title="1. 操作"></a>1. 操作</h1><h2 id="1-1-改为桥接"><a href="#1-1-改为桥接" class="headerlink" title="1.1 改为桥接"></a>1.1 改为桥接</h2><p>这一步是需要联系安装宽带的师傅<br>他们远程可以直接修改<br>如果改为桥接，那么原有网络无法使用</p>
<p>重点</p>
<ul>
<li>联系师傅索要宽带账号密码</li>
<li>要安装师傅修改光猫为桥接</li>
<li>修改之后进光猫后台较麻烦(不过用不到，都在路由器操作了)</li>
</ul>
<span id="more"></span>
<h2 id="1-2-路由器拨号"><a href="#1-2-路由器拨号" class="headerlink" title="1.2 路由器拨号"></a>1.2 路由器拨号</h2><p>我的路由器是网件 R8000，输入账号密码等配置生效。<br>完事之后就可以上午，但是，这时候 IPv6 是不好使的。</p>
<h2 id="1-3-IPv6"><a href="#1-3-IPv6" class="headerlink" title="1.3 IPv6"></a>1.3 IPv6</h2><p>找到 IPv6 相关设置(<em>高级—高级设置—IPv6</em>)<br>选择 PPPoE，使用 IPv4 一样的账号密码拨号<br>等待配置生效，即可发现 IPv6 正常<br>IPv6 测试网址：<a href="http://www.test-ipv6.com/">test-ipv6.com</a></p>
<p>至于为什么要 IPv6，那只能说懂得都懂，啊哈哈。</p>
<h1 id="2-参考"><a href="#2-参考" class="headerlink" title="2. 参考"></a>2. 参考</h1><p><a href="https://blog.csdn.net/weixin_36102930/article/details/112567860">桥接上网</a><br>这篇文章的一些观点我可能不太认同，<br>最重要的是，里面提到可以联系客服修改为桥接<br>这就很方便了，网上很多都是各种破解，挺麻烦。</p>
<p><a href="https://www.zhihu.com/question/296979333">电信光猫用桥接模式好还是路由模式好？</a></p>
]]></content>
      <categories>
        <category>RandomThoughts</category>
      </categories>
      <tags>
        <tag>IPv6</tag>
        <tag>ip</tag>
      </tags>
  </entry>
  <entry>
    <title>百度地图 API - 地址 转 经纬度</title>
    <url>/20220528-baidu-map-api-address-to-longitude-and-latitude/</url>
    <content><![CDATA[<h1 id="0-背景"><a href="#0-背景" class="headerlink" title="0. 背景"></a>0. 背景</h1><p>某做科研的朋友<br>需要对一些地点的坐标<br>然后在 WGS-84 坐标系的底图上呈现相关内容</p>
<p>BD09 vs WGS84<br>北京韩美林艺术馆,BD09:116.68347847243588,39.88148624000483<br>北京韩美林艺术馆,WGS84:116.67097966259838,39.87446583754102</p>
<h1 id="1-准备"><a href="#1-准备" class="headerlink" title="1. 准备"></a>1. 准备</h1><h2 id="1-1-寻找成品"><a href="#1-1-寻找成品" class="headerlink" title="1.1 寻找成品"></a>1.1 寻找成品</h2><p>找了几个网址，反馈说之前用过坐标不准确</p>
<h2 id="1-2-使用百度地图-API"><a href="#1-2-使用百度地图-API" class="headerlink" title="1.2 使用百度地图 API"></a>1.2 使用百度地图 API</h2><h3 id="1-2-1-注册百度地图开放平台"><a href="#1-2-1-注册百度地图开放平台" class="headerlink" title="1.2.1 注册百度地图开放平台"></a>1.2.1 注册百度地图开放平台</h3><p>服务免费<br>需要实名认证<br>网址：<a href="https://lbsyun.baidu.com/apiconsole/center">lbsyun.baidu.com</a></p>
<span id="more"></span>
<h3 id="1-2-2-创建应用"><a href="#1-2-2-创建应用" class="headerlink" title="1.2.2 创建应用"></a>1.2.2 创建应用</h3><p>我没有选择 IP 白名单<br>选择的是 SN 签名<br>获取 AK、SK</p>
<h3 id="1-2-3-文档"><a href="#1-2-3-文档" class="headerlink" title="1.2.3 文档"></a>1.2.3 文档</h3><p>接口文档<br>之前 V2 版本的接口已经停用了<br>地址：<a href="https://lbsyun.baidu.com/index.php?title=webapi/guide/webservice-geocoding">地理编码文档</a><br>SN 生成<br>注意文档的生成方式还是 V2 的例子<br>地址：<a href="https://lbsyun.baidu.com/index.php?title=webapi/appendix">SN 生成文档</a></p>
<h1 id="2-代码"><a href="#2-代码" class="headerlink" title="2. 代码"></a>2. 代码</h1><p>简单说明<br>地址文件格式一行一个<br>转换后会输出文件：地址,精度,纬度</p>
<p>CoordinateTransformUtil 在参考文档</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Baidu.com Inc.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2022 All Rights Reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> com.hisen.api.baidu.map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.google.common.base.Charsets;</span><br><span class="line"><span class="keyword">import</span> com.google.common.io.Files;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClientBuilder;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> org.joda.time.DateTime;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.DigestUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Java.io.File;</span><br><span class="line"><span class="keyword">import</span> Java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> Java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> Java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> Java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> Java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> Java.util.List;</span><br><span class="line"><span class="keyword">import</span> Java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hisenyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/5/28 10:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SnCal</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">URL</span> <span class="operator">=</span> <span class="string">&quot;https://api.map.baidu.com&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PATH</span> <span class="operator">=</span> <span class="string">&quot;/geocoding/v3/?&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 百度地图 AK</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">AK</span> <span class="operator">=</span> <span class="string">&quot;your ak&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 百度地图 SK</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SK</span> <span class="operator">=</span> <span class="string">&quot;your sk&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">LINE_BREAK</span> <span class="operator">=</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FORMAT</span> <span class="operator">=</span> <span class="string">&quot;yyyyMMdd_HH_mm_ss_SSS&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// 需要转换的文件，一行一个</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">file</span> <span class="operator">=</span> <span class="string">&quot;/Users/hisenyuan/Downloads/address.txt&quot;</span>;</span><br><span class="line">        <span class="comment">// 结果输出文件夹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resDir</span> <span class="operator">=</span> <span class="string">&quot;/Users/hisenyuan/Downloads/&quot;</span>;</span><br><span class="line">        <span class="type">File</span> <span class="variable">resFile</span> <span class="operator">=</span> getResFile(resDir);</span><br><span class="line">        <span class="comment">// 读取文件</span></span><br><span class="line">        List&lt;String&gt; addressList = getAddressList(file);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; addressList.size(); i++) &#123;</span><br><span class="line">            convertLocation(resFile, addressList, i);</span><br><span class="line">            System.out.println(<span class="string">&quot;current line:&quot;</span> + (i + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">use</span> <span class="operator">=</span> System.currentTimeMillis() - start;</span><br><span class="line">        <span class="comment">// 打印耗时</span></span><br><span class="line">        System.out.println(<span class="string">&quot;time us(ms):&quot;</span> + use);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">convertLocation</span><span class="params">(File resFile, List&lt;String&gt; addressList, <span class="type">int</span> index)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">address</span> <span class="operator">=</span> addressList.get(index);</span><br><span class="line">        <span class="type">String</span> <span class="variable">reqUrl</span> <span class="operator">=</span> getReqUrl(address);</span><br><span class="line">        <span class="comment">// 返回结果</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> sendUrlGet(reqUrl);</span><br><span class="line">        <span class="type">double</span>[] doubles = getWgs84(res);</span><br><span class="line">        <span class="type">String</span> <span class="variable">wgsRes</span> <span class="operator">=</span> address + <span class="string">&quot;,&quot;</span> + doubles[<span class="number">0</span>] + <span class="string">&quot;,&quot;</span> + doubles[<span class="number">1</span>];</span><br><span class="line">        Files.append(wgsRes + LINE_BREAK, resFile, Charsets.UTF_8);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getAddressList</span><span class="params">(String file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        List&lt;String&gt; addressList = Files.readLines(<span class="keyword">new</span> <span class="title class_">File</span>(file), StandardCharsets.UTF_8);</span><br><span class="line">        System.out.println(<span class="string">&quot;sum line:&quot;</span> + addressList.size());</span><br><span class="line">        <span class="keyword">return</span> addressList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> File <span class="title function_">getResFile</span><span class="params">(String resDir)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">DateTime</span> <span class="variable">dateTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DateTime</span>();</span><br><span class="line">        <span class="type">File</span> <span class="variable">resFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(resDir + <span class="string">&quot;处理结果_&quot;</span> + dateTime.toString(FORMAT) + <span class="string">&quot;.txt&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!resFile.exists()) &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">newFile</span> <span class="operator">=</span> resFile.createNewFile();</span><br><span class="line">            System.out.println(<span class="string">&quot;create file, result:&quot;</span> + (newFile ? <span class="string">&quot;success&quot;</span> : <span class="string">&quot;fail&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resFile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">double</span>[] getWgs84(String res) &#123;</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(res);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">result</span> <span class="operator">=</span> jsonObject.getJSONObject(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">location</span> <span class="operator">=</span> result.getJSONObject(<span class="string">&quot;location&quot;</span>);</span><br><span class="line">        <span class="type">Double</span> <span class="variable">lng</span> <span class="operator">=</span> location.getDouble(<span class="string">&quot;lng&quot;</span>);</span><br><span class="line">        <span class="type">Double</span> <span class="variable">lat</span> <span class="operator">=</span> location.getDouble(<span class="string">&quot;lat&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> CoordinateTransformUtil.bd09towgs84(lng, lat);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">getReqUrl</span><span class="params">(String address)</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        Map&lt;String, String&gt; paramsMap = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line">        paramsMap.put(<span class="string">&quot;address&quot;</span>, address);</span><br><span class="line">        paramsMap.put(<span class="string">&quot;output&quot;</span>, <span class="string">&quot;json&quot;</span>);</span><br><span class="line">        paramsMap.put(<span class="string">&quot;ak&quot;</span>, AK);</span><br><span class="line">        <span class="comment">// 参数值转为 UTF-8</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">paramsStr</span> <span class="operator">=</span> toQueryString(paramsMap);</span><br><span class="line">        <span class="comment">// 参与 MD5 计算的参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">wholeStr</span> <span class="operator">=</span> PATH + paramsStr + SK;</span><br><span class="line">        <span class="comment">// UTF-8</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">tempStr</span> <span class="operator">=</span> URLEncoder.encode(wholeStr, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// Md5 摘要( SN 计算)</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">md5</span> <span class="operator">=</span> md5(tempStr);</span><br><span class="line">        <span class="comment">// 请求地址</span></span><br><span class="line">        <span class="keyword">return</span> URL + PATH + paramsStr + <span class="string">&quot;&amp;sn=&quot;</span> + md5;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 值 UTF-8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">toQueryString</span><span class="params">(Map&lt;?, ?&gt; data)</span></span><br><span class="line">            <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">queryString</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;?, ?&gt; pair : data.entrySet()) &#123;</span><br><span class="line">            queryString.append(pair.getKey()).append(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">            queryString</span><br><span class="line">                    .append(URLEncoder.encode((String) pair.getValue(), StandardCharsets.UTF_8.name()))</span><br><span class="line">                    .append(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (queryString.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            queryString.deleteCharAt(queryString.length() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> queryString.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * md5 摘要</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">md5</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> DigestUtils.md5DigestAsHex(str.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发起 http 请求</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url 请求地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">sendUrlGet</span><span class="params">(String url)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">responseContent</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">CloseableHttpClient</span> <span class="variable">client</span> <span class="operator">=</span> HttpClientBuilder.create().build();</span><br><span class="line">            <span class="type">HttpGet</span> <span class="variable">httpGet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpGet</span>(url);</span><br><span class="line">            <span class="type">CloseableHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.execute(httpGet);</span><br><span class="line">            <span class="type">HttpEntity</span> <span class="variable">resEntity</span> <span class="operator">=</span> response.getEntity();</span><br><span class="line">            responseContent = EntityUtils.toString(resEntity, StandardCharsets.UTF_8);</span><br><span class="line">            <span class="comment">// close resources</span></span><br><span class="line">            response.close();</span><br><span class="line">            client.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> responseContent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-参考"><a href="#3-参考" class="headerlink" title="3. 参考"></a>3. 参考</h1><ul>
<li><a href="https://blog.csdn.net/a497785609/article/details/72356588">百度地图API实现 地址&amp;经纬度 互相转换</a></li>
<li><a href="https://github.com/geosmart/coordtransform/blob/master/src/main/Java/me/demo/util/geo/CoordinateTransformUtil.Java">CoordinateTransformUtil - wgs84, gcj02, bd09 三种坐标的互相转换</a></li>
</ul>
<p>注意，第一个文档的接口已经过时，新申请的用户无法使用</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建我的第一台服务器</title>
    <url>/20230423-build-my-first-server/</url>
    <content><![CDATA[<h1 id="1-简单介绍"><a href="#1-简单介绍" class="headerlink" title="1. 简单介绍"></a>1. 简单介绍</h1><p>当时看朋友买的 E5 CPU 到了白菜价<br>而且之前使用 dell 9020 sff 装的软路由也转给了朋友<br>就想着整一个性能更强一些的服务器在家跑着，方便自己折腾。</p>
<p>当前跑的服务</p>
<ul>
<li>DDNS 服务</li>
<li>网心云( 500M下行&#x2F;100M上行，收益应该可以覆盖网费+电费 )</li>
<li>homeassistant</li>
<li>青龙系统( JD 签到 )</li>
</ul>
<h1 id="2-配置清单"><a href="#2-配置清单" class="headerlink" title="2. 配置清单"></a>2. 配置清单</h1><span id="more"></span>

<table>
<thead>
<tr>
<th align="center">零件</th>
<th align="center">类型</th>
<th align="center">数量</th>
<th align="center">总价</th>
<th align="center">当前状态</th>
</tr>
</thead>
<tbody><tr>
<td align="center">电源 先马 金牌1000w</td>
<td align="center">全新</td>
<td align="center">1</td>
<td align="center">634.05</td>
<td align="center">在用</td>
</tr>
<tr>
<td align="center">机箱 先马 黑洞7</td>
<td align="center">全新</td>
<td align="center">1</td>
<td align="center">279</td>
<td align="center">在用</td>
</tr>
<tr>
<td align="center">散热 冰曼 6管双扇</td>
<td align="center">全新</td>
<td align="center">2</td>
<td align="center">113.52</td>
<td align="center">在用</td>
</tr>
<tr>
<td align="center">致钛 2T SSD(nvme)</td>
<td align="center">全新</td>
<td align="center">1</td>
<td align="center">819</td>
<td align="center">在用</td>
</tr>
<tr>
<td align="center">金胜维 480G SSD(m.2 SATA)</td>
<td align="center">全新</td>
<td align="center">1</td>
<td align="center">148.98</td>
<td align="center">在用(系统盘)</td>
</tr>
<tr>
<td align="center">转接 ssu nvme 转 PCIE</td>
<td align="center">全新</td>
<td align="center">1</td>
<td align="center">14.90</td>
<td align="center">在用</td>
</tr>
<tr>
<td align="center">主板 华硕 Z10PA-D8</td>
<td align="center">拆机</td>
<td align="center">1</td>
<td align="center">1150</td>
<td align="center">在用</td>
</tr>
<tr>
<td align="center">内存 三星 32G</td>
<td align="center">拆机</td>
<td align="center">2</td>
<td align="center">418</td>
<td align="center">在用</td>
</tr>
<tr>
<td align="center">硬盘 随机 480G</td>
<td align="center">拆机</td>
<td align="center">2</td>
<td align="center">218</td>
<td align="center">报废</td>
</tr>
<tr>
<td align="center">CPU E5 2650V4</td>
<td align="center">拆机</td>
<td align="center">2</td>
<td align="center">79</td>
<td align="center">在用</td>
</tr>
<tr>
<td align="center">整机</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">3874.75</td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li><a href="https://www.notion.so/hisenyuan/3c5cf0d34fb94293be0e675df936ec12?pvs=4#fc70c311c354418bae6b7300753fd028">CPU参数对比</a></li>
</ul>
<h1 id="3-踩坑感言"><a href="#3-踩坑感言" class="headerlink" title="3. 踩坑感言"></a>3. 踩坑感言</h1><p>不建议购买二手 SSD，特别是不知名品牌的。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>homelab</tag>
      </tags>
  </entry>
  <entry>
    <title>centos更换yum源为阿里云 - 三步搞定</title>
    <url>/20170217-centos%E6%9B%B4%E6%8D%A2yum%E6%BA%90%E4%B8%BA%E9%98%BF%E9%87%8C%E4%BA%91-%E4%B8%89%E9%83%A8%E6%90%9E%E5%AE%9A/</url>
    <content><![CDATA[<p>阿里云是最近新出的一个镜像源。得益于阿里云的高速发展，这么大的需求，肯定会推出自己的镜像源。<br>阿里云Linux安装镜像源地址：<a href="http://mirrors.aliyun.com/">http://mirrors.aliyun.com/</a></p>
<p>CentOS系统更换软件安装源</p>
<p>第一步：备份你的原镜像文件，以免出错后可以恢复。</p>
<p>1、备份<br>mv &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo.backup</p>
<p>2、下载新的CentOS-Base.repo 到&#x2F;etc&#x2F;yum.repos.d&#x2F;</p>
<p>（如果无wget命令，底部有具体说明）</p>
<p>CentOS 5</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-5.repo</span><br></pre></td></tr></table></figure>
<p>CentOS 6</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</span><br></pre></td></tr></table></figure>
<p>CentOS 7</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br></pre></td></tr></table></figure>
<p>3、之后运行yum makecache生成缓存</p>
<hr>
<p>ps：如果你跟我一样苦逼：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-bash: wget: command not found</span><br></pre></td></tr></table></figure>
<p>然后：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install wget #失败</span><br></pre></td></tr></table></figure>
<p>那么你可以直接选择上面对应系统的文件下载链接</p>
<p>下载好文件之后改名为CentOS-Base.repo</p>
<p>直接放到&#x2F;etc&#x2F;yum.repos.d&#x2F;目录下即可</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>count函数效率问题 - 了解count函数</title>
    <url>/20170303-count%E5%87%BD%E6%95%B0%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98%20-%20%E4%BA%86%E8%A7%A3count%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h2 id="count函数的作用"><a href="#count函数的作用" class="headerlink" title="count函数的作用"></a>count函数的作用</h2><p>想要真正的理解count函数，我们就必须明白count函数的作用。</p>
<p>作用一：统计某一列非空(not null)值得数量，即统计某列有值得结果数,使用count(col)。</p>
<p>作用二：统计结果集的行数，此时不用管某列是否为null值。即使用count(*).</p>
<p>明白了这点，我们就应该知道MySQL的count(*)并不是想象中的那样，统计每一列的值，而是直接忽视掉所有列，直接统计行数，那么它的效率肯定是很高的。</p>
<p>但是有一点，当col指定了该字段为NOT NULL时实际上，MySQL会自动将count(col)转为count(*),但是这样也同样耗费了些时间，如果col没有指定为NOT NULL的话，那么效率就更低了，MySQL就必须要判断每一行的值是否为空。</p>
<p>所以综上所述，如果是要统计行数最好优先使用select count(*)</p>
<p>当统计某一列等于多少的值得时候可以使用下面两种方法:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT SUM(IF(id = 23,1,0)) FROM table </span><br><span class="line">SELECT COUNT(id = 23 OR NULL) FROM table </span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>鳄龟记录 - 持续更新</title>
    <url>/20231231-crocodile-turtle-weight-record/</url>
    <content><![CDATA[<h1 id="1-生活环境"><a href="#1-生活环境" class="headerlink" title="1.生活环境"></a>1.生活环境</h1><p>20210927<br><img src="/../images/20210927-1.JPG" alt="生活环境-20210927"></p>
<span id="more"></span>
<p>20220611<br><img src="/../images/20220611.JPG" alt="生活环境-20220611"></p>
<h1 id="2-称重记录"><a href="#2-称重记录" class="headerlink" title="2.称重记录"></a>2.称重记录</h1><table>
<thead>
<tr>
<th align="center">日期</th>
<th align="center">猛龟体重(g)</th>
<th align="center">怂龟体重(g)</th>
</tr>
</thead>
<tbody><tr>
<td align="center">2021年10月07日</td>
<td align="center">290.2</td>
<td align="center">273.8</td>
</tr>
<tr>
<td align="center">2021年10月16日</td>
<td align="center">290</td>
<td align="center">278.8</td>
</tr>
<tr>
<td align="center">2021年10月30日</td>
<td align="center">301.7</td>
<td align="center">294.4</td>
</tr>
<tr>
<td align="center">2021年11月13日</td>
<td align="center">330</td>
<td align="center">317.1</td>
</tr>
<tr>
<td align="center">2021年12月11日</td>
<td align="center">420.5</td>
<td align="center">371.6</td>
</tr>
<tr>
<td align="center">2022年03月05日</td>
<td align="center">506.5</td>
<td align="center">373.4</td>
</tr>
<tr>
<td align="center">2022年05月21日</td>
<td align="center">552.4</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">2022年05月30日</td>
<td align="center">644</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">2022年06月12日</td>
<td align="center">734.5</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">2022年06月26日</td>
<td align="center">822</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">2022年07月24日</td>
<td align="center">1141.7</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">2022年08月14日</td>
<td align="center">1429</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">2022年10月30日</td>
<td align="center">1718</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">2023年03月11日</td>
<td align="center">2104</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">2023年12月31日</td>
<td align="center">3356</td>
<td align="center">-</td>
</tr>
</tbody></table>
<h1 id="3-体重趋势"><a href="#3-体重趋势" class="headerlink" title="3.体重趋势"></a>3.体重趋势</h1><p><img src="/../images/turtle-20231231.png" alt="测试图片"></p>
<h1 id="4-一些特写"><a href="#4-一些特写" class="headerlink" title="4.一些特写"></a>4.一些特写</h1><p><img src="/../images/20210927-2.JPG" alt="20210927"></p>
]]></content>
      <categories>
        <category>NatureAndPets</category>
      </categories>
      <tags>
        <tag>水族</tag>
      </tags>
  </entry>
  <entry>
    <title>优雅地分桶 - 数据分片 - list 拆分</title>
    <url>/20220218-divide-barrels-gracefully/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>最近在做数据迁移<br>为了加速迁移速度<br>其中就需要把查询到的数据( max 100 条)<br>拆分成 5 份，然后执行 5 个子任务，加速处理</p>
<h1 id="一、代码"><a href="#一、代码" class="headerlink" title="一、代码"></a>一、代码</h1><h2 id="1-1-常规做法"><a href="#1-1-常规做法" class="headerlink" title="1.1 常规做法"></a>1.1 常规做法</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;List&lt;T&gt;&gt; <span class="title function_">split2</span><span class="params">(List&lt;T&gt; lists, <span class="type">int</span> subCount)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (CollectionUtils.isEmpty(lists) || subCount &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    List&lt;List&lt;T&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> lists.size();</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> (size + subCount - <span class="number">1</span>) / subCount;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">        List&lt;T&gt; subList = lists.subList(i * subCount, (Math.min((i + <span class="number">1</span>) * subCount, size)));</span><br><span class="line">        result.add(subList);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-2-新颖做法"><a href="#1-2-新颖做法" class="headerlink" title="1.2 新颖做法"></a>1.2 新颖做法</h2><span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;List&lt;T&gt;&gt; <span class="title function_">split</span><span class="params">(List&lt;T&gt; lists, <span class="type">int</span> subCount)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (CollectionUtils.isEmpty(lists) || subCount &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 简约的计算分桶次数，避免判断是否有余数，再+1</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">splitTimes</span> <span class="operator">=</span> (lists.size() + subCount - <span class="number">1</span>) / subCount;</span><br><span class="line">    <span class="keyword">return</span> Stream</span><br><span class="line">            <span class="comment">// 每次递增指定子列表个数</span></span><br><span class="line">            .iterate(<span class="number">0</span>, n -&gt; n + subCount)</span><br><span class="line">            <span class="comment">// 限制循环次数</span></span><br><span class="line">            .limit(splitTimes)</span><br><span class="line">            <span class="comment">// 转换成想要的结果</span></span><br><span class="line">            .map(item -&gt; lists.stream()</span><br><span class="line">                    <span class="comment">// 跳过之前的下标</span></span><br><span class="line">                    .skip(item)</span><br><span class="line">                    <span class="comment">// 限制每次的个数为子表个数</span></span><br><span class="line">                    .limit(subCount)</span><br><span class="line">                    <span class="comment">// 转换为子列表</span></span><br><span class="line">                    .collect(Collectors.toList()))</span><br><span class="line">            <span class="comment">// 转换为主列表</span></span><br><span class="line">            .collect(Collectors.toList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="三、性能"><a href="#三、性能" class="headerlink" title="三、性能"></a>三、性能</h1><h2 id="3-1-结果"><a href="#3-1-结果" class="headerlink" title="3.1 结果"></a>3.1 结果</h2><p>从结果可以看出，一味地追求新颖也不是好事，需要知其然<br>Java 8 的 stream 并不占优势，性能相差好几个数量级…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Benchmark              Mode  Cnt       Score       Error  Units</span><br><span class="line">ListSplit.split2Test  thrpt   <span class="number">10</span>  <span class="number">306050.155</span> ± <span class="number">24646.689</span>  ops/s</span><br><span class="line">ListSplit.splitTest   thrpt   <span class="number">10</span>     <span class="number">353.048</span> ±   <span class="number">122.423</span>  ops/s</span><br></pre></td></tr></table></figure>
<h2 id="3-3-压测代码"><a href="#3-3-压测代码" class="headerlink" title="3.3 压测代码"></a>3.3 压测代码</h2><p>压测教程：<a href="/20210511-JMH-use-cases-date-format-performance">JMH 使用参考</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.api.client.util.Lists;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Benchmark;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.BenchmarkMode;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Fork;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Measurement;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Mode;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Scope;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Setup;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.State;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Warmup;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.CollectionUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> Java.util.List;</span><br><span class="line"><span class="keyword">import</span> Java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> Java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hisenyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/2/18 20:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 默认的 State，每个测试线程分配一个实例</span></span><br><span class="line"><span class="meta">@State(Scope.Thread)</span></span><br><span class="line"><span class="comment">// 如果 fork 数是 2 的话，则 JMH 会 fork 出两个进程来进行测试。</span></span><br><span class="line"><span class="meta">@Fork(1)</span></span><br><span class="line"><span class="comment">// 预热的次数 3 次基准测试(不是执行三次方法)</span></span><br><span class="line"><span class="meta">@Warmup(iterations = 1)</span></span><br><span class="line"><span class="comment">// 基准执行次数 10 次(参数含义同上)</span></span><br><span class="line"><span class="meta">@Measurement(iterations = 10)</span></span><br><span class="line"><span class="meta">@BenchmarkMode(Mode.Throughput)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListSplit</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;Integer&gt; INTEGERS = Lists.newArrayList();</span><br><span class="line">    <span class="meta">@Setup</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list = Stream.iterate(<span class="number">0</span>, n -&gt; n + <span class="number">1</span>)</span><br><span class="line">                .limit(<span class="number">1000</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        INTEGERS.addAll(list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">splitTest</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; listList = split(INTEGERS, <span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">split2Test</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; listList = split2(INTEGERS, <span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;List&lt;T&gt;&gt; <span class="title function_">split</span><span class="params">(List&lt;T&gt; lists, <span class="type">int</span> subCount)</span> &#123;</span><br><span class="line">        <span class="comment">// 简约的计算分桶次数，避免判断是否有余数，再+1</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">splitTimes</span> <span class="operator">=</span> (lists.size() + subCount - <span class="number">1</span>) / subCount;</span><br><span class="line">        <span class="keyword">return</span> Stream</span><br><span class="line">                <span class="comment">// 每次递增指定子列表个数</span></span><br><span class="line">                .iterate(<span class="number">0</span>, n -&gt; n + subCount)</span><br><span class="line">                <span class="comment">// 限制循环次数</span></span><br><span class="line">                .limit(splitTimes)</span><br><span class="line">                <span class="comment">// 转换成想要的结果</span></span><br><span class="line">                .map(item -&gt; lists.stream()</span><br><span class="line">                        <span class="comment">// 跳过之前的下标</span></span><br><span class="line">                        .skip(item)</span><br><span class="line">                        <span class="comment">// 限制每次的个数为子表个数</span></span><br><span class="line">                        .limit(subCount)</span><br><span class="line">                        <span class="comment">// 转换为子列表</span></span><br><span class="line">                        .collect(Collectors.toList()))</span><br><span class="line">                <span class="comment">// 转换为主列表</span></span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;List&lt;T&gt;&gt; <span class="title function_">split2</span><span class="params">(List&lt;T&gt; list, <span class="type">int</span> len)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isEmpty(list) || len &lt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;List&lt;T&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> list.size();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> (size + len - <span class="number">1</span>) / len;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            List&lt;T&gt; subList = list.subList(i * len, (Math.min((i + <span class="number">1</span>) * len, size)));</span><br><span class="line">            result.add(subList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="四、后话"><a href="#四、后话" class="headerlink" title="四、后话"></a>四、后话</h1><!--more-->
<p>其中不错的一点我觉得是</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">splitTimes</span> <span class="operator">=</span> (lists.size() + subCount - <span class="number">1</span>) / subCount;</span><br></pre></td></tr></table></figure>
<p>这样巧妙的计算，避免了先取模，后判断是否有余数的繁杂。<br>这个不是我想到的，也不知道怎么通过数学证明，但是这样就是对的 &#x3D;&#x3D;</p>
<p>ps:是谁说数学没用的 ？？？？</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>开源画图工具(各种图)：draw.io 支持 Web、macOS、Windows、Linux</title>
    <url>/20200406-draw.io-open-source-drawing-tools-support-web-mac-windows-linux/</url>
    <content><![CDATA[<p>draw.io 一个很棒的开源画图工具，可以导出 xml、pdf、html、png 等各种格式<br>其实重点是开源，目前好几个地方看到有在用，之前用网页版，现在用桌面版多些</p>
<p>网页版：<a href="https://draw.io/">draw.io</a><br>桌面版：<a href="https://github.com/jgraph/drawio-desktop/releases">github 下载支持：Windows、macOS、Linux、Google Chrome OS</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>soft</tag>
      </tags>
  </entry>
  <entry>
    <title>dubbo transport Data length too large-14277263-max payload-8388608 channel-NettyChannel</title>
    <url>/20190307-dubbo%20transport%20Data%20length%20too%20large-14277263-max%20payload-8388608%20channel-NettyChannel/</url>
    <content><![CDATA[<h1 id="一、报错信息"><a href="#一、报错信息" class="headerlink" title="一、报错信息"></a>一、报错信息</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">com.alibaba.dubbo.remoting.transport.ExceedPayloadLimitException: Data length too large: 14277263, max payload: 8388608, channel: NettyChannel [channel=[id: 0x12a13c8f, /172.0.0.1:49402 =&gt; /172.0.0.2:23888]]</span><br></pre></td></tr></table></figure>
<h1 id="二、报错原因"><a href="#二、报错原因" class="headerlink" title="二、报错原因"></a>二、报错原因</h1><p>dubbo默认使用Netty传输协议<br>并且默认的大小限制为：默认为8M，即8388608</p>
<h1 id="三、解决办法"><a href="#三、解决办法" class="headerlink" title="三、解决办法"></a>三、解决办法</h1><ol>
<li><p>修改接口<br>出现这种情况是因为一个接口查某个表的所有数据(几万条)<br>一般这种接口肯定是需要分页的</p>
</li>
<li><p>更改配置信息<br>在dubbo.properties 中增加如下</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dubbo.protocol.dubbo.payload=11557050</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>netty</tag>
        <tag>dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title>dubbo与zookeeper的关系</title>
    <url>/20171115-dubbo%E4%B8%8Ezookeeper%E7%9A%84%E5%85%B3%E7%B3%BB/</url>
    <content><![CDATA[<h2 id="Zookeeper的作用"><a href="#Zookeeper的作用" class="headerlink" title="Zookeeper的作用"></a>Zookeeper的作用</h2><p>zookeeper用来注册服务和进行负载均衡，哪一个服务由哪一个机器来提供必需让调用者知道，简单来说就是ip地址和服务名称的对应关系。</p>
<p>当然也可以 通过硬编码的方式把这种对应关系在调用方业务代码中实现，但是如果提供服务的机器挂掉调用者无法知晓，如果不更改代码会继续请求挂掉的机器提供服务。 </p>
<p>zookeeper通过心跳机制可以检测挂掉的机器并将挂掉机器的ip和服务对应关系从列表中删除。至于支持高并发，简单来说就是横向扩展，在不更改代码 的情况通过添加机器来提高运算能力。</p>
<p>通过添加新的机器向zookeeper注册服务，服务的提供者多了能服务的客户就多了。</p>
<h2 id="dubbo"><a href="#dubbo" class="headerlink" title="dubbo"></a>dubbo</h2><p>是管理中间层的工具，在业务层到数据仓库间有非常多服务的接入和服务提供者需要调度，dubbo提供一个框架解决这个问题。</p>
<p>注意这里的dubbo只是一个框架，至于你架子上放什么是完全取决于你的，就像一个汽车骨架，你需要配你的轮子引擎。</p>
<p>这个框架中要完成调度必须要有一个分布式的注册中心，储存所有服务的元数据，你可以用zk，也可以用别的，只是大家都用zk。</p>
<h2 id="zookeeper和dubbo的关系"><a href="#zookeeper和dubbo的关系" class="headerlink" title="zookeeper和dubbo的关系"></a>zookeeper和dubbo的关系</h2><p>Dubbo的将注册中心进行抽象，是得它可以外接不同的存储媒介给注册中心提供服务，有ZooKeeper，Memcached，Redis等。</p>
<p> 引入了ZooKeeper作为存储媒介，也就把ZooKeeper的特性引进来。</p>
<ol>
<li>负载均衡:单注册中心的承载能力是有限的，在流量达到一定程度的时 候就需要分流，负载均衡就是为了分流而存在的，一个ZooKeeper群配合相应的Web应用就可以很容易达到负载均衡；</li>
<li>资源同步:单单有负载均衡还不 够，节点之间的数据和资源需要同步，ZooKeeper集群就天然具备有这样的功能；</li>
<li>命名服务:将树状结构用于维护全局的服务地址列表，服务提供者在启动 的时候，向ZK上的指定节点&#x2F;dubbo&#x2F;${serviceName}&#x2F;providers目录下写入自己的URL地址，这个操作就完成了服务的发布</li>
<li>Mast选举，分布式锁等。</li>
</ol>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://www.cnblogs.com/xiaofei1208/p/7077733.html">https://www.cnblogs.com/xiaofei1208/p/7077733.html</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>eclipse无法链接github</title>
    <url>/20170208-eclipse%E6%97%A0%E6%B3%95%E9%93%BE%E6%8E%A5github/</url>
    <content><![CDATA[<p>浏览器什么的都能打开github.com<br>就是eclipse无法提交到github，每次都是连接超时<br>然后就直接修改host了，目前有效<br>2017年1月14日 18:01:34</p>
<p>host位置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Windows\System32\drivers\etc</span><br></pre></td></tr></table></figure>
<p>host文件最后一行加上下面内容即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">192.30.253.112       github.com</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>eclipse</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>github api - github api中文说明</title>
    <url>/20170428-github%20api%20-%20github%20api%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E/</url>
    <content><![CDATA[<p>github api的网址</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://api.github.com/</span><br></pre></td></tr></table></figure>
<p>这里介绍两个api</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#获取个人信息</span><br><span class="line">https://api.github.com/users/&#123;user&#125;;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">key</th>
<th align="left">含义</th>
<th align="left">value</th>
</tr>
</thead>
<tbody><tr>
<td align="left">login</td>
<td align="left">登录名称</td>
<td align="left">hisen-yuan</td>
</tr>
<tr>
<td align="left">id</td>
<td align="left">数字编号</td>
<td align="left">16789019</td>
</tr>
<tr>
<td align="left">avatar_url</td>
<td align="left">头像地址</td>
<td align="left"><a href="https://avatars1.githubusercontent.com/u/16789019?v=3">https://avatars1.githubusercontent.com/u/16789019?v=3</a></td>
</tr>
<tr>
<td align="left">name</td>
<td align="left">用户昵称</td>
<td align="left">hisenyuan</td>
</tr>
<tr>
<td align="left">blog</td>
<td align="left">博客地址</td>
<td align="left"><a href="http://hisen.me/">http://hisen.me</a></td>
</tr>
<tr>
<td align="left">location</td>
<td align="left">地理位置</td>
<td align="left">China</td>
</tr>
<tr>
<td align="left">bio</td>
<td align="left">个人说明</td>
<td align="left">Java R &amp; D</td>
</tr>
<tr>
<td align="left">public_repos</td>
<td align="left">仓库个数</td>
<td align="left">11</td>
</tr>
<tr>
<td align="left">created_at</td>
<td align="left">创建时间</td>
<td align="left">2016-01-20 01:57:15Z</td>
</tr>
<tr>
<td align="left">updated_at</td>
<td align="left">最后更新</td>
<td align="left">2017-04-20 14:03:27Z</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#获取项目信息</span><br><span class="line">https://api.github.com/users/&#123;user&#125;/repos</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">key</th>
<th align="left">含义</th>
<th align="left">value</th>
</tr>
</thead>
<tbody><tr>
<td align="left">id</td>
<td align="left">项目编号</td>
<td align="left">88646378</td>
</tr>
<tr>
<td align="left">name</td>
<td align="left">项目名称</td>
<td align="left">dubbo</td>
</tr>
<tr>
<td align="left">html_url</td>
<td align="left">项目地址</td>
<td align="left"><a href="https://github.com/hisen-yuan/dubbo">https://github.com/hisen-yuan/dubbo</a></td>
</tr>
<tr>
<td align="left">created_at</td>
<td align="left">创建时间</td>
<td align="left">2017-04-18T16:21:57Z</td>
</tr>
<tr>
<td align="left">updated_at</td>
<td align="left">更新时间</td>
<td align="left">2017-04-18T16:23:16Z</td>
</tr>
<tr>
<td align="left">pushed_at</td>
<td align="left">提交时间</td>
<td align="left">2017-04-19T02:33:33Z</td>
</tr>
<tr>
<td align="left">size</td>
<td align="left">项目大小</td>
<td align="left">6514</td>
</tr>
<tr>
<td align="left">language</td>
<td align="left">编程语言</td>
<td align="left">Java</td>
</tr>
</tbody></table>
<p>github提供的所有api</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">current_user_url: &quot;https://api.github.com/user&quot;,</span><br><span class="line">current_user_authorizations_html_url: &quot;https://github.com/settings/connections/applications&#123;/client_id&#125;&quot;,</span><br><span class="line">authorizations_url: &quot;https://api.github.com/authorizations&quot;,</span><br><span class="line">code_search_url: &quot;https://api.github.com/search/code?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;&quot;,</span><br><span class="line">commit_search_url: &quot;https://api.github.com/search/commits?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;&quot;,</span><br><span class="line">emails_url: &quot;https://api.github.com/user/emails&quot;,</span><br><span class="line">emojis_url: &quot;https://api.github.com/emojis&quot;,</span><br><span class="line">events_url: &quot;https://api.github.com/events&quot;,</span><br><span class="line">feeds_url: &quot;https://api.github.com/feeds&quot;,</span><br><span class="line">followers_url: &quot;https://api.github.com/user/followers&quot;,</span><br><span class="line">following_url: &quot;https://api.github.com/user/following&#123;/target&#125;&quot;,</span><br><span class="line">gists_url: &quot;https://api.github.com/gists&#123;/gist_id&#125;&quot;,</span><br><span class="line">hub_url: &quot;https://api.github.com/hub&quot;,</span><br><span class="line">issue_search_url: &quot;https://api.github.com/search/issues?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;&quot;,</span><br><span class="line">issues_url: &quot;https://api.github.com/issues&quot;,</span><br><span class="line">keys_url: &quot;https://api.github.com/user/keys&quot;,</span><br><span class="line">notifications_url: &quot;https://api.github.com/notifications&quot;,</span><br><span class="line">organization_repositories_url: &quot;https://api.github.com/orgs/&#123;org&#125;/repos&#123;?type,page,per_page,sort&#125;&quot;,</span><br><span class="line">organization_url: &quot;https://api.github.com/orgs/&#123;org&#125;&quot;,</span><br><span class="line">public_gists_url: &quot;https://api.github.com/gists/public&quot;,</span><br><span class="line">rate_limit_url: &quot;https://api.github.com/rate_limit&quot;,</span><br><span class="line">repository_url: &quot;https://api.github.com/repos/&#123;owner&#125;/&#123;repo&#125;&quot;,</span><br><span class="line">repository_search_url: &quot;https://api.github.com/search/repositories?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;&quot;,</span><br><span class="line">current_user_repositories_url: &quot;https://api.github.com/user/repos&#123;?type,page,per_page,sort&#125;&quot;,</span><br><span class="line">starred_url: &quot;https://api.github.com/user/starred&#123;/owner&#125;&#123;/repo&#125;&quot;,</span><br><span class="line">starred_gists_url: &quot;https://api.github.com/gists/starred&quot;,</span><br><span class="line">team_url: &quot;https://api.github.com/teams&quot;,</span><br><span class="line">user_url: &quot;https://api.github.com/users/&#123;user&#125;&quot;,</span><br><span class="line">user_organizations_url: &quot;https://api.github.com/user/orgs&quot;,</span><br><span class="line">user_repositories_url: &quot;https://api.github.com/users/&#123;user&#125;/repos&#123;?type,page,per_page,sort&#125;&quot;,</span><br><span class="line">user_search_url: &quot;https://api.github.com/search/users?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;&quot;</span><br></pre></td></tr></table></figure>]]></content>
  </entry>
  <entry>
    <title>找到好的学习方法</title>
    <url>/20200226-find-a-good-way-to-learn/</url>
    <content><![CDATA[<p>时间是公平的，对每个人都一样，不同之处在于每个人单位时间的产出值会有差异。<br>一直在寻找适合于自己的学习方法以提高时间的利用效率，以便不影响诗和远方&#x3D;&#x3D;<br>奈何目前也没有太多满意的答案，或许生命的意义就是在于探索未知而又刺激的世界。<br>分享一些文字，提到了一些好的学习方法，抛砖引玉，共勉。</p>
<p>《贫穷的本质》告诉我们，贫穷的本质是认知。其实很多时候真的是认知，方法论决定了一个人可以走多远。</p>
<p>《刻意练习》原地踏步的练习是没意义的，大众眼里一万小时定律基本上是错误的，需要的是有进步练习;</p>
<p>《学习之道》十个不错的方法：运用回想、知识组块、简化类比、方法交替、间隔重复、注意休息、心理对照、自我测试、保持专注、困难先行;</p>
<p>《如何阅读一本书》里面有提到主题阅读，不同的人对同一主题会有不同的看法，可以对比吸收;</p>
<p>《程序员的职业素养》有提到卡塔练习，提高我们的肌肉反应，让写代码像聊天打字一遍的顺畅;</p>
<p>早些天看到一篇不错的帖子<br>对我感触最深的就是：4<br>标题：如果高效学习有什么秘诀的话，那就都在这里了：）</p>
<span id="more"></span>
<p>1）不要完美主义！<br>2）不要过度“学习路径依赖”，学习要冲着自己的目标去。<br>3）不要迷信权威的“好”教材。<br>4）不要看不起“薄薄”的“傻”教材，这些你看不起的学习材料，可能是你入门某个领域的关键。<br>5）不要迷信单一教材。<br>6）实践！<br>7）debug非常非常重要。<br>8）量变到质变。<br>9）最后，一定要相信时间的力量。</p>
<p>参考：</p>
<ol>
<li>《贫穷的本质》</li>
<li>《刻意练习》</li>
<li>《学习之道》</li>
<li>《如果阅读一本书》</li>
<li><a href="https://mp.weixin.qq.com/s/mvRBDwzVebz4BGAEr8MMtw">如果高效学习有什么秘诀的话，那就都在这里了：）</a></li>
</ol>
]]></content>
      <categories>
        <category>RandomThoughts</category>
      </categories>
      <tags>
        <tag>随说</tag>
      </tags>
  </entry>
  <entry>
    <title>git版本差异报告 - git difftool分支对比 - gitLab compare</title>
    <url>/20190309-git%E7%89%88%E6%9C%AC%E5%B7%AE%E5%BC%82%E6%8A%A5%E5%91%8A%20-%20git%20difftool%E5%88%86%E6%94%AF%E5%AF%B9%E6%AF%94%20-%20gitLab%20compare/</url>
    <content><![CDATA[<h1 id="一、初衷"><a href="#一、初衷" class="headerlink" title="一、初衷"></a>一、初衷</h1><p>有时候上线会出现合错代码，比如功能，或者maven的pom文件；</p>
<p>人都不是十全十美的人，只要是人就会犯错<br>关键是要想办法去避免，只有工具才不犯错</p>
<p>所以尽量想办法利用工具来防止我们犯错，git来说有很多办法；<br>简单的命令，或者gitlab的compare报告；<br>每次上线之前，开发自己看一遍当前版本与线上版本的区别，确认每一个点都是正确的改动；</p>
<h1 id="二、gitlab-compare功能-推荐"><a href="#二、gitlab-compare功能-推荐" class="headerlink" title="二、gitlab compare功能(推荐)"></a>二、gitlab compare功能(推荐)</h1><p>2.1 入口：工程首页 -&gt; Repository -&gt; Compare<br>2.2 选择：上一个版本，当前版本，点击Compare<br>2.2 结果：一次能看到两个版本的所有commit、改动点</p>
<h1 id="三、git命令"><a href="#三、git命令" class="headerlink" title="三、git命令"></a>三、git命令</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 显示版本之间改动的文件名</span><br><span class="line">git difftool master 1.2.4 --stat</span><br><span class="line"></span><br><span class="line"># 在命令行挨个显示版本某个文件具体差异</span><br><span class="line">git difftool master 1.2.4</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>gitLab</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>通过 OpenWrt 利用 Cloudflare tunnel 回家 - 连上家庭内网</title>
    <url>/20221114-go_home_by_cloudflare_via_openwrt/</url>
    <content><![CDATA[<h1 id="1-写在前面"><a href="#1-写在前面" class="headerlink" title="1. 写在前面"></a>1. 写在前面</h1><p>需要注册 Cloudflare 账号<br>这个服务目前是可以免费使用</p>
<p>速度的话一般，勉强可以接受。<br>后续再折腾看看是什么问题。</p>
<h1 id="2-主要操作步骤"><a href="#2-主要操作步骤" class="headerlink" title="2. 主要操作步骤"></a>2. 主要操作步骤</h1><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 安装客户端</span><br><span class="line">opkg install cloudflared</span><br><span class="line"># 登录, 返回一个 cloudflare 官方连接，点击会生成密钥</span><br><span class="line">cloudflared tunnel login</span><br><span class="line"># 创建一条隧道，&lt;NAME&gt; 替换成你喜欢的名字</span><br><span class="line">cloudflared tunnel create &lt;NAME&gt;</span><br><span class="line"># 创建一个域名解析</span><br><span class="line">cloudflared tunnel route dns hisen home.hisenyuan.xyz</span><br><span class="line"># 配置 xxx.yml</span><br><span class="line">url: http://192.168.0.10 # 内网的网关，注意做好鉴权</span><br><span class="line">tunnel: d42a48c9-26da-4734-b249-1b9eee69ba8c</span><br><span class="line">credentials-file: /root/.cloudflared/d42a48c9-26da-4734-b249-1b9eee69ba8c.json</span><br><span class="line"># 启动一个内网穿透服务</span><br><span class="line">cloudflared tunnel --config xxx.yml run</span><br></pre></td></tr></table></figure>
<h1 id="3-参考文档"><a href="#3-参考文档" class="headerlink" title="3. 参考文档"></a>3. 参考文档</h1><ul>
<li><a href="https://dmesg.app/argo-tunnel.html">Cloudflare Argo Tunnel 小试：我终于可以用树莓派做网站啦</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>OpenWrt</tag>
      </tags>
  </entry>
  <entry>
    <title>go程序设计语言练习 - 同统计重复 - gop1.io/ch1/dup2/dup2.go</title>
    <url>/20181027-go%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80%E7%BB%83%E4%B9%A0%20-%20%E5%90%8C%E7%BB%9F%E8%AE%A1%E9%87%8D%E5%A4%8D/</url>
    <content><![CDATA[<p>一直在写Java，看语法逻辑什么的没有问题</p>
<p>但是刚刚看书上写出来的这个程序，居然不知道怎么在goland里面运行…</p>
<p>于是曲线救国，了解到打印输入的参数。</p>
<p>这断代码就是为了找出输入数据中的重复行</p>
<ol>
<li>直接启动，不带参数，启动之后输入参数</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">参数0: /private/var/folders/lk/p8gbq87n6rvfndk7wlk23y8r0000gn/T/___go_build_dup2_go</span><br><span class="line">1 # 一行输入一个</span><br><span class="line">1 # 一行输入一个</span><br><span class="line">^D #这是command + D</span><br><span class="line">2	1 # 输出的结果：个数 输入值</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在命令行启动，带</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ go run dup2.go &#x27;hisen.txt&#x27;</span><br><span class="line">参数0: /var/folders/lk/p8gbq87n6rvfndk7wlk23y8r0000gn/T/go-build525680776/b001/exe/dup2</span><br><span class="line">参数1: hisen.txt #代码同级目录的文件名</span><br><span class="line">2       hisen</span><br><span class="line">2       hisenyuan</span><br><span class="line">2       123</span><br></pre></td></tr></table></figure>

<p>代码如下：</p>
<span id="more"></span>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">本程序只能在终端运行：go run dup2.go &#x27;hisen.txt&#x27;</span></span><br><span class="line"><span class="comment">hisen.txt 为本文件同级目录的文件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 遍历输出的参数</span></span><br><span class="line">	<span class="keyword">for</span> idx, args := <span class="keyword">range</span> os.Args &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;参数&quot;</span>+strconv.Itoa(idx)+<span class="string">&quot;:&quot;</span>, args)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// map[string,int]</span></span><br><span class="line">	counts := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">	<span class="comment">// 拿到文件名，从第二个参数开始</span></span><br><span class="line">	files := os.Args[<span class="number">1</span>:]</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(files) == <span class="number">0</span> &#123;</span><br><span class="line">		countLines(os.Stdin, counts)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// 遍历文件</span></span><br><span class="line">		<span class="keyword">for</span> _, arg := <span class="keyword">range</span> files &#123;</span><br><span class="line">			<span class="comment">// 读取文件内容</span></span><br><span class="line">			f, err := os.Open(arg)</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">				fmt.Fprintf(os.Stderr, <span class="string">&quot;dup2: %v\n&quot;</span>, err)</span><br><span class="line">				<span class="keyword">continue</span></span><br><span class="line">			&#125;</span><br><span class="line">			countLines(f, counts)</span><br><span class="line">			f.Close()</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历map</span></span><br><span class="line">	<span class="keyword">for</span> line, n := <span class="keyword">range</span> counts &#123;</span><br><span class="line">		<span class="keyword">if</span> n &gt; <span class="number">1</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;%d\t%s\n&quot;</span>, n, line)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把数据装入map</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countLines</span><span class="params">(file *os.File, counts <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 从文件中加载数据</span></span><br><span class="line">	input := bufio.NewScanner(file)</span><br><span class="line">	<span class="comment">// 遍历文件内容</span></span><br><span class="line">	<span class="keyword">for</span> input.Scan() &#123;</span><br><span class="line">		counts[input.Text()]++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>春节期间的收获 | 记第一次在外过年</title>
    <url>/20210218-harvest-during-chinese-spring-festival/</url>
    <content><![CDATA[<h1 id="零、摘要"><a href="#零、摘要" class="headerlink" title="零、摘要"></a>零、摘要</h1><p>响应国家就地过年的号召，今年第一次在外过年。<br>弹指一挥间，12 天的假期已经成为过去。<br>期间还是有不少的收获，最主要的是看了 4 本书。<br>以及在微博上面看到了不少的人和事，甚是触动。</p>
<p>找到自己的兴趣，追求精进，坚持做对的事情。</p>
<h1 id="一、阅读"><a href="#一、阅读" class="headerlink" title="一、阅读"></a>一、阅读</h1><h2 id="1-1-《-UML-和模式应用》0113-0207"><a href="#1-1-《-UML-和模式应用》0113-0207" class="headerlink" title="1.1 《 UML 和模式应用》0113~0207"></a>1.1 《 UML 和模式应用》0113~0207</h2><p>这本书是 leader 推荐给大家的<br>基于职责去做设计的理念确实很棒，值得观摩实践。</p>
<span id="more"></span>
<h2 id="1-2-《段永平投资问答录-商业逻辑篇-》0120-0214"><a href="#1-2-《段永平投资问答录-商业逻辑篇-》0120-0214" class="headerlink" title="1.2 《段永平投资问答录(商业逻辑篇)》0120~0214"></a>1.2 《段永平投资问答录(商业逻辑篇)》0120~0214</h2><p>春节之前断断续续看了一部分，后面主要是春节在看。<br>关键是：要做对的事情，把事情做对。(前者更重要)<br>创始人对公司的文化影响很大，文化又对公司影响大。</p>
<p>有自己清晰的不为清单，发现错了立马纠正，因为这时候止损成本最低。</p>
<p>段永平的投资问答录其实很多时候也适合于人生建议，都是相通的。<br>很幸运有如此成功的人愿意与普通人进行交流，传授经验。</p>
<p>书本当中也能接触到不少成功人士，正所谓近朱者赤，<br>还有所谓的圈子，多看多想多学，总是会进步的。</p>
<h2 id="1-3-《代码精进之路-从码农到工匠》0216-0217"><a href="#1-3-《代码精进之路-从码农到工匠》0216-0217" class="headerlink" title="1.3 《代码精进之路:从码农到工匠》0216~0217"></a>1.3 《代码精进之路:从码农到工匠》0216~0217</h2><p>实践出真知，作者成就非凡<br>其中的很多理念深度赞同<br>是一本值得翻阅的书，收益颇多</p>
<p>eg：</p>
<ol>
<li>写好代码的技艺不是一蹴而就的，它是一个系统化的工程，不是看几本书、写几年代码就能轻松习得的，而需要我们对自己的思维习惯、学习方法和工程实践进行彻底的反省和重构。</li>
<li>在计算机科学中有两件难事：缓存失效和命名。</li>
<li>通常，如果你无法想出一个合适的名字，很可能意味着代码“坏味道”、设计有问题。</li>
<li>写好代码、追求卓越和工匠精神是每个程序员都应该具备的优秀品质。</li>
<li>管理者的一个很重要的使命就是帮助团队成长，包括制定规范和技术传承。</li>
<li>没有抽象思维，就没有人类今天灿烂的文明。</li>
<li>分治和抽象一样，都是人类进化过程中形成的伟大智慧，也是我们解决复杂问题的不二选择。</li>
<li>在学习之前，我们一定要问自己，这次学习的目标是什么？</li>
<li>技术 leader 要以德服人+以技服人</li>
</ol>
<h2 id="1-4-《硅谷钢铁侠-埃隆·马斯克的冒险人生》0217-0218"><a href="#1-4-《硅谷钢铁侠-埃隆·马斯克的冒险人生》0217-0218" class="headerlink" title="1.4 《硅谷钢铁侠:埃隆·马斯克的冒险人生》0217~0218"></a>1.4 《硅谷钢铁侠:埃隆·马斯克的冒险人生》0217~0218</h2><p>看完对马斯克以及他的企业和野心有更多的了解<br>羡慕他精力旺盛、超强的学习能力、以及追求梦想的执着</p>
<h1 id="二、微博"><a href="#二、微博" class="headerlink" title="二、微博"></a>二、微博</h1><p>触动最大的就是@纯银V 一位产品经理的微博<br>特别是关于一个 95 后实习生的故事<br>也很佩服纯银从一个法警做到如此高阶的产品经理<br>羡慕他把看产品的思路套用在看公司上，然后 2020 投资中概股收益颇丰</p>
<p>感悟就是：积极、主动、为自己工作，找到喜欢的事情，持续精进。</p>
<h1 id="三、生活"><a href="#三、生活" class="headerlink" title="三、生活"></a>三、生活</h1><p>和家里亲戚去郊区玩了几天，还是比较放松。<br>有时候不管是家人之间的沟通，还是朋友之间，可能更多的时候需要的是倾听，而不是讲道理。<br>犹如《代码精进之路》里讲的”不过在家里，我依然是输多赢少，后来我才发现，原来家不是一个讲逻辑的地方。”</p>
<p>安排好自己的时间，加强执行力！</p>
]]></content>
      <categories>
        <category>RandomThoughts</category>
      </categories>
      <tags>
        <tag>随说</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 升级 &amp; 优化</title>
    <url>/20250719-hexo-upgrade-and-optimize/</url>
    <content><![CDATA[<h1 id="1-概览"><a href="#1-概览" class="headerlink" title="1. 概览"></a>1. 概览</h1><p>换了电脑，hexo 一直没迁移。乘着周末，折腾一下。<br>幸好之前有一个记录可以参考一下：<a href="/20170120-hexo%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/">hexo安装过程</a><br>最新版本的 node 和 老版本的 hexo 有兼容性问题(<a href="https://hexo.io/zh-cn/docs/#Node-js-%E7%89%88%E6%9C%AC%E9%99%90%E5%88%B6">hexo 官方说明</a>)，所以需要升级。</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>折腾前</th>
<th>折腾后</th>
</tr>
</thead>
<tbody><tr>
<td>hexo 版本</td>
<td>3.9.0</td>
<td>7.3.0</td>
</tr>
<tr>
<td>托管</td>
<td>GitHub</td>
<td>Cloudflare</td>
</tr>
<tr>
<td>原始域名</td>
<td><a href="http://hisenyuan.github.io/">hisenyuan.github.io</a></td>
<td><a href="http://hisenyuan-github-io.pages.dev/">hisenyuan-github-io.pages.dev</a></td>
</tr>
</tbody></table>
<h1 id="2-过程"><a href="#2-过程" class="headerlink" title="2. 过程"></a>2. 过程</h1><p>过程比较挫折，我就写最后的过程。<br>插件+主题等都需要重新安装和配置，网上都有教程。</p>
<span id="more"></span>
<h2 id="2-1-安装"><a href="#2-1-安装" class="headerlink" title="2.1 安装"></a>2.1 安装</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 安装 node</span><br><span class="line">$ brew install node</span><br><span class="line"># 安装 hexo (如果按官方的安装方式，最新只能安装 4.x)</span><br><span class="line">$ brew install hexo</span><br><span class="line"># 查看 hexo 版本</span><br><span class="line">$ hexo version</span><br><span class="line">INFO  Validating config</span><br><span class="line">hexo: 7.3.0</span><br><span class="line">hexo-cli: 4.3.2</span><br><span class="line">os: darwin 24.4.0 15.4.1</span><br><span class="line"># 初始化新 hexo</span><br><span class="line">$ hexo init blog</span><br><span class="line"># 安装 git 提交插件</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"># 安装体积缩小插件(性能优化)</span><br><span class="line">npm install hexo-neat --save</span><br><span class="line"># 安装图片懒加载插件</span><br><span class="line">npm install hexo-lazyload-image --save</span><br><span class="line"># 安装本地检索给你</span><br><span class="line">npm install hexo-generator-searchdb</span><br></pre></td></tr></table></figure>
<h2 id="2-2-迁移数据"><a href="#2-2-迁移数据" class="headerlink" title="2.2 迁移数据"></a>2.2 迁移数据</h2><p>把旧电脑的整个 blog 拷贝到新电脑。<br>然后把 source 目录迁移到新初始化( <em>hexo init blog</em> 这步 )<br>confi 相关的话就看新老都 diff，看着配置&#x3D;&#x3D;</p>
<h2 id="2-3-配置主题"><a href="#2-3-配置主题" class="headerlink" title="2.3 配置主题"></a>2.3 配置主题</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git clone https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>
<p>然后在 blog 的站点配置里面修改主题 theme: next<br>其它的就在 next 的配置里面进行调整</p>
<h2 id="2-4-配置检索"><a href="#2-4-配置检索" class="headerlink" title="2.4 配置检索"></a>2.4 配置检索</h2><p>安装完 hexo-generator-searchdb 和主题之后。<br>需要在两个地方进行本地检索配置。</p>
<p>站点配置：.&#x2F;_config.yml 最后面添加</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># search</span><br><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  content: true</span><br><span class="line">  format: html</span><br><span class="line">  unescape: true</span><br></pre></td></tr></table></figure>
<p>主题配置：.&#x2F;themes&#x2F;_config.yml 调整对应的值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Local Search</span><br><span class="line"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span><br><span class="line">local_search:</span><br><span class="line">  enable: true</span><br><span class="line">  # If auto, trigger search by changing input.</span><br><span class="line">  # If manual, trigger search by pressing enter key or search button.</span><br><span class="line">  trigger: auto</span><br><span class="line">  # Show top n results per article, show all results by setting to -1</span><br><span class="line">  top_n_per_article: 1</span><br><span class="line">  # Unescape html strings to the readable one.</span><br><span class="line">  unescape: true</span><br><span class="line">  # Preload the search data when the page loads.</span><br><span class="line">  preload: true</span><br></pre></td></tr></table></figure>

<p>这里有个小插曲<br><img src="/../images/20250723_search_style_error.png" alt="检索样式错误"><br>如果只修改 <em>主题配置</em> 右上角会有排版问题，但是 unescape 会生效。<br>如果同时改 <em>站点配置</em> 右上角排班恢复正常，但是 unescape 失效，体积增大。</p>
<h2 id="2-5-迁移到-Cloudflare"><a href="#2-5-迁移到-Cloudflare" class="headerlink" title="2.5 迁移到 Cloudflare"></a>2.5 迁移到 Cloudflare</h2><p>Cloudflare 也有 pages 的功能。原理是授权 github 给 Cloudflare 自动拉取部署。<br>迁移之前: hisen.me -&gt; Cloudflare -&gt; github.io<br>迁移之后: hisen.me -&gt; Cloudflare</p>
<p>具体的操作过程：</p>
<ol>
<li>登录 Cloudflare</li>
<li>找到 Worker</li>
<li>创建</li>
<li>Pages</li>
<li>导入现有 Git 存储库</li>
<li>授权(建议仅授权仓库)</li>
<li>保存并部署</li>
<li>可以设置域名(我这一步很顺利，因为之前就在用 Cloudflare CDN)</li>
</ol>
<h3 id="2-5-1-一次提交构建过程"><a href="#2-5-1-一次提交构建过程" class="headerlink" title="2.5.1 一次提交构建过程"></a>2.5.1 一次提交构建过程</h3><p>提交：2025-07-19 16:12:08<br>构建：2025-07-19 16:12:40<br>耗时：8s</p>
<h4 id="2-5-1-1-hexo-提交"><a href="#2-5-1-1-hexo-提交" class="headerlink" title="2.5.1.1 hexo 提交"></a>2.5.1.1 hexo 提交</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[main 5a25906] Site updated: 2025-07-19 16:12:08</span><br><span class="line"> 601 files changed, 1271 insertions(+), 1195 deletions(-)</span><br><span class="line"> create mode 100644 20250719-hexo-upgrade-and-optimize/index.html</span><br><span class="line"> create mode 100644 archives/2025/07/index.html</span><br><span class="line"> create mode 100644 archives/2025/index.html</span><br><span class="line"> create mode 100644 tags/hexo/page/2/index.html</span><br><span class="line">Enumerating objects: 2105, done.</span><br><span class="line">Counting objects: 100% (2105/2105), done.</span><br><span class="line">Delta compression using up to 12 threads</span><br><span class="line">Compressing objects: 100% (644/644), done.</span><br><span class="line">Writing objects: 100% (1227/1227), 695.41 KiB | 3.16 MiB/s, done.</span><br><span class="line">Total 1227 (delta 583), reused 0 (delta 0), pack-reused 0</span><br><span class="line">remote: Resolving deltas: 100% (583/583), completed with 264 local objects.</span><br><span class="line">To github.com:hisenyuan/hisenyuan.github.io.git</span><br><span class="line">   8ee58fc..5a25906  HEAD -&gt; master</span><br><span class="line">branch &#x27;main&#x27; set up to track &#x27;git@github.com:hisenyuan/hisenyuan.github.io.git/master&#x27;.</span><br><span class="line">INFO  Deploy done: git</span><br></pre></td></tr></table></figure>
<h4 id="2-5-1-2-Cloudflare-构建"><a href="#2-5-1-2-Cloudflare-构建" class="headerlink" title="2.5.1.2 Cloudflare 构建"></a>2.5.1.2 Cloudflare 构建</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">16:12:24.762	Cloning repository...</span><br><span class="line">16:12:25.822	From https://github.com/hisenyuan/hisenyuan.github.io</span><br><span class="line">16:12:25.822	 * branch            5a259063ef0189af5c31801cfc15d90817c95c9b -&gt; FETCH_HEAD</span><br><span class="line">16:12:25.822</span><br><span class="line">16:12:25.925	HEAD is now at 5a25906 Site updated: 2025-07-19 16:12:08</span><br><span class="line">16:12:25.926</span><br><span class="line">16:12:26.004</span><br><span class="line">16:12:26.005	Using v2 root directory strategy</span><br><span class="line">16:12:26.028	Success: Finished cloning repository files</span><br><span class="line">16:12:27.685	Checking for configuration in a Wrangler configuration file (BETA)</span><br><span class="line">16:12:27.686</span><br><span class="line">16:12:28.794	No wrangler.toml file found. Continuing.</span><br><span class="line">16:12:28.794	No build command specified. Skipping build step.</span><br><span class="line">16:12:28.795	Note: No functions dir at /functions found. Skipping.</span><br><span class="line">16:12:28.795	Validating asset output directory</span><br><span class="line">16:12:31.586	Deploying your site to Cloudflare&#x27;s global network...</span><br><span class="line">16:12:33.708	Uploading... (34/635)</span><br><span class="line">16:12:35.115	Uploading... (235/635)</span><br><span class="line">16:12:35.117	Uploading... (435/635)</span><br><span class="line">16:12:35.394	Uploading... (635/635)</span><br><span class="line">16:12:35.394	✨ Success! Uploaded 601 files (34 already uploaded) (2.00 sec)</span><br><span class="line">16:12:35.394</span><br><span class="line">16:12:35.827	✨ Upload complete!</span><br><span class="line">16:12:39.096	Success: Assets published!</span><br><span class="line">16:12:40.432	Success: Your site was deployed!</span><br></pre></td></tr></table></figure>

<h1 id="3-注意事项"><a href="#3-注意事项" class="headerlink" title="3. 注意事项"></a>3. 注意事项</h1><p>升级了 hexo 之后(之前是 3.x)<br>语法上有点变化，最大就是波浪号( ~ ),如果不带空格，那么即使换行了，也会被认为是删除线。</p>
<h2 id="3-1-波浪线处理前"><a href="#3-1-波浪线处理前" class="headerlink" title="3.1 波浪线处理前"></a>3.1 波浪线处理前</h2><p>效果源码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">我是~第一行</span><br><span class="line">我是~第二行</span><br></pre></td></tr></table></figure>
<p>效果预览：<br>我是<del>第一行<br>我是</del>第二行</p>
<h2 id="3-2-波浪线处理后"><a href="#3-2-波浪线处理后" class="headerlink" title="3.2 波浪线处理后"></a>3.2 波浪线处理后</h2><p>效果源码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">我是 ~ 第一行</span><br><span class="line">我是 ~ 第二行</span><br></pre></td></tr></table></figure>
<p>效果预览：<br>我是 ~ 第一行<br>我是 ~ 第二行</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo安装过程</title>
    <url>/20170120-hexo%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li>Node.js：<a href="https://nodejs.org/en/" target="_blank">点击下载</a></li>
<li>git：<a href="https://git-for-windows.github.io/" target="_blank">点击下载</a></li>
<li>MarkdownPad：<a href="http://markdownpad.com/" target="_blank">点击下载</a></li>
</ol>
<p>安装好上面三个工具<br>可能会遇到的问题：</p>
<p>**1、**Git Bash执行<code>node -v</code>提示无效 或者 <code>npm install</code> 报 command not found</p>
<p>解决办法：在环境变量 - 用户变量中 - 新建用户变量 - 添加nodejs安装路径</p>
<p>如：C:\tool\nodejs</p>
<p>**2、**ERROR Deployer not found : github</p>
<p>解决办法：</p>
<ol>
<li>配置文件有问题，冒号后面都有一个空格的</li>
<li>执行：npm install hexo-deployer-git –save （这命令是为了解决hexo新版本的部署问题）</li>
</ol>
<p><strong>3</strong>使用淘宝镜像加快安装速度<br>安装cnpm，使用命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install cnpm -g --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><ol>
<li>打开Git Bash</li>
<li>进入nodejs安装目录</li>
<li>开始安装hexo，输入下面代码</li>
<li><code>npm install -g hexo</code>#等待安装完成，这个过程可能会快也可能很慢，耐心等待</li>
<li><code>mkdir blog &amp;&amp; cd blog</code> #上面这个代码是创建一个博客存放的目录</li>
<li><code>hexo init</code>#初始化</li>
<li><code>cnpm install</code> #安装依赖包</li>
<li>完成之后，本地博客就搭建完成</li>
<li><code>hexo g</code> #生成静态页面</li>
<li><code>hexo s</code> #启动服务器，打开<a href="http://localhost:4000/">http://localhost:4000</a> 就是本地博客</li>
</ol>
<p>本地博客安装完成，下面介绍发布到github上</p>
<ol>
<li>登陆github，没有就注册</li>
<li>点击右上角加号+</li>
<li>Create a new repository</li>
<li>名字写：<code>yourgithubname.github.io</code></li>
<li>创建完成</li>
<li>点击<code>Setting</code></li>
<li>选择一个主题，然后就好了</li>
<li>编辑blog文件夹里面的<code>_config.yml</code>配置文件</li>
<li>最后面添加</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: http://github.com/yourname/yourname.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<p>最后执行</p>
<ol>
<li><code>hexo g</code>#重新生成静态博客</li>
<li><code>hexo d</code>#将本地静态博客部署到github</li>
</ol>
<p>现在你在浏览器打开：<a href="http://yourname.github.io就可以访问你的博客了/">http://yourname.github.io就可以访问你的博客了</a><br>到此为止就搭建完了一个博客</p>
<p>开始写第一篇文章：<br>执行：hexo new “你的文章标题”<br>然后你在<code>blog/source/_posts</code>文件夹下面有文件，用markdownpad打开编辑<br>执行：</p>
<ol>
<li><code>hexo g</code>#重新生成</li>
<li><code>hexo s</code>#本地查看效果</li>
<li><code>hexo d</code>#上传到github</li>
<li>或者不预览，直接一步上传到github：<code>hexo d -g</code></li>
</ol>
]]></content>
      <tags>
        <tag>hexo</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo新建文章时候默认带上categories，tags</title>
    <url>/20170209-hexo%E6%96%B0%E5%BB%BA%E6%96%87%E7%AB%A0%E6%97%B6%E5%80%99%E9%BB%98%E8%AE%A4%E5%B8%A6%E4%B8%8Acategories%EF%BC%8Ctags/</url>
    <content><![CDATA[<p>在博客的 <strong>scaffolds</strong> 文件夹里有个<strong>post.md</strong> 添加上需要的配置就行</p>
<p>这里是创建post的模板。</p>
<p>我的默认设置成这样：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags: []</span><br><span class="line">categories:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>tags: [关键词1,关键词2]</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo百度抓取失败解决办法</title>
    <url>/20170216-hexo%E7%99%BE%E5%BA%A6%E6%8A%93%E5%8F%96%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<p>上一篇帖子说明了一下百度抓取不到的原因是因为github把百度爬虫给屏蔽了</p>
<p>这里给出的解决办法是用hexo自动提交插件</p>
<p>需要获取一个自动提交的token</p>
<ol>
<li>注册百度站长工具：<a href="http://zhanzhang.baidu.com/">http://zhanzhang.baidu.com</a></li>
<li>添加你的hexo域名</li>
<li>找到网页抓取 - 链接提交 - 下拉选择你的hexo站点</li>
<li>数据提交方式 - 自动提交 - 主动推送(实时)</li>
<li>推送接口</li>
<li>接口调用地址： <a href="http://data.zz.baidu.com/urls?site=hisen.me&token=XmxXyESxyz1hANxE">http://data.zz.baidu.com/urls?site=hisen.me&amp;token=XmxXyESxyz1hANxE</a></li>
<li>复制上面token&#x3D;后面的内容，那就是你的token</li>
</ol>
<p>安装自动提交插件：</p>
<span id="more"></span>
<ol>
<li>npm install hexo-baidu-url-submit –save</li>
<li>编辑站点配置文件_config.yml，添加一下内容</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">baidu_url_submit:</span><br><span class="line">  count: 1 ## 提交最新的一个链接</span><br><span class="line">  host: www.hui-wang.info ## 在百度站长平台中注册的域名</span><br><span class="line">  token: your_token ## 请注意这是您的秘钥， 所以请不要把博客源代码发布在公众仓库里!</span><br><span class="line">  path: baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里</span><br></pre></td></tr></table></figure>
<p>加入新的deployer: 原来type前面是没有 - 的</p>
<p>但是不这样处理执行hexo g 会报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- type: git</span><br><span class="line">  repository: yoururl</span><br><span class="line">  branch: master</span><br><span class="line">- type: baidu_url_submitter</span><br></pre></td></tr></table></figure>
<p>生成效果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Generating Baidu urls for last 1 posts</span><br><span class="line">INFO  Posts urls generated in baidu_urls.txt</span><br><span class="line">http://hisen.me/20170216-hexo百度抓取失败解决办法/</span><br><span class="line">INFO  Files loaded in 1.31 s</span><br><span class="line"></span><br><span class="line">$ hexo d</span><br><span class="line">INFO  Deploy done: git</span><br><span class="line">INFO  Deploying: baidu_url_submitter</span><br><span class="line">INFO  Submitting urls</span><br><span class="line">http://hisen.me/20170216-hexo百度抓取失败解决办法/</span><br><span class="line">&#123;&quot;remain&quot;:1,&quot;success&quot;:1&#125;</span><br><span class="line">INFO  Deploy done: baidu_url_submitter</span><br></pre></td></tr></table></figure>

<p>感谢插件作者：<a href="http://hui-wang.info/2016/10/23/Hexo%E6%8F%92%E4%BB%B6%E4%B9%8B%E7%99%BE%E5%BA%A6%E4%B8%BB%E5%8A%A8%E6%8F%90%E4%BA%A4%E9%93%BE%E6%8E%A5/" target="_blank">王辉的博客</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>homelab - 参考博文</title>
    <url>/20231231-homelab-blog-list/</url>
    <content><![CDATA[<h1 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h1><p>折腾的意义在于折腾之后带来的满足，以及过程中的主动学习。<br>个人感觉折腾 HomeLab 最骚的还是 SRE boy &#x3D;&#x3D;</p>
<h1 id="2-如何搭建家用-HomeLab-系列"><a href="#2-如何搭建家用-HomeLab-系列" class="headerlink" title="2. 如何搭建家用 HomeLab 系列"></a>2. 如何搭建家用 HomeLab 系列</h1><ul>
<li><a href="https://icyleaf.com/2022/02/how-to-homelab-part-0/">如何搭建家用 homelab: 先导篇</a></li>
<li><a href="https://icyleaf.com/2023/01/how-to-homelab-part-1-hardware-and-architecture/">如何搭建家用 homelab: 硬件和架构</a></li>
<li><a href="https://icyleaf.com/2023/04/how-to-homelab-part-2-openwrt-soft-router/">如何搭建家用 homelab: Openwrt 软路由</a></li>
<li><a href="https://icyleaf.com/2023/07/how-to-homelab-part-3-storages/">如何搭建家用 homelab: 数据存储</a></li>
</ul>
<h1 id="3-其它记录"><a href="#3-其它记录" class="headerlink" title="3. 其它记录"></a>3. 其它记录</h1><ul>
<li><a href="https://www.manjusaka.blog/posts/2023/12/28/how-do-I-build-homelab-part2/index.html">家庭 Homelab 升级计划: v2</a></li>
<li><a href="https://blog.k8s.li/homelab.html">垃圾佬的 HomeLab 折腾记录</a></li>
<li><a href="https://soulteary.com/2021/07/02/cheap-home-workstation-solution-part-one.html">廉价的家用工作站方案：前篇</a></li>
<li><a href="https://soulteary.com/2023/11/09/home-workstation-solution-thinkbook-14-2023.html">家用工作站方案：ThinkBook 14 2023 版</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>homelab</tag>
      </tags>
  </entry>
  <entry>
    <title>我是怎样爱上阅读的</title>
    <url>/20200201-how-i-fell-in-love-with-reading/</url>
    <content><![CDATA[<h2 id="零、概览"><a href="#零、概览" class="headerlink" title="零、概览"></a>零、概览</h2><p>2015 年刚毕业的我懵懵懂懂看书都想睡觉<br>很开心来到北京遇到了许多美好的人和事<br>受到环境的影响一路走来成长加速收获颇丰</p>
<p>从 2016 开始慢慢喜欢上了阅读<br>从开始看书就想睡觉到现在一个6层书架都放不下的纸质书<br>从开始的『kindle voyage』到现在的『kindle oasis』第三代<br>从开始的只是在北京地铁5号线看下电子书到现在有点时间就看<br>慢慢地养成了阅读的习惯，生活也没有那么无聊，工作慢慢步入正轨<br>非技术书籍喜欢用 kindle 看，技术书还是纸书比较合适翻阅</p>
<p>简单统计<br>2020 51本<br>2019 71本<br>2018 38本<br>2017 48本(2017以及之前)</p>
<h2 id="一、常见问题"><a href="#一、常见问题" class="headerlink" title="一、常见问题"></a>一、常见问题</h2><p>Q:看书想睡觉怎么办？<br>A:先找有兴趣&#x2F;好奇的主题</p>
<span id="more"></span>
<p>Q:看书记不住怎么办？<br>A:能不能记住无所谓，看的过程中有思考即可，好的书多看几遍</p>
<p>Q:哪来这么多时间？<br>A:合理安排时间，少浪费时间即可(通勤+早晚+中午，最少有3个小时时间)</p>
<h2 id="二、为什么要阅读"><a href="#二、为什么要阅读" class="headerlink" title="二、为什么要阅读"></a>二、为什么要阅读</h2><p>读书使人充实，读史使人明智，读诗使人灵秀，<br>数学使人周密，科学使人深刻，伦理使人庄重，逻辑修辞学使人善辩</p>
<p>古人说开卷有益(无营养的除外)<br>通过阅读我们可以了解他人的经历<br>在他人的经历中我们可以得到经验<br>在他人的经验当中我们可以得到思想<br>一个人毕竟阅历有限，站在巨人的肩膀上你可以看的更高</p>
<p>科普性的书很多时候会恍然大悟<br>技术性的书能获得很多优秀的设计和实践以及学习新的技能<br>人文历史地里这些基本上是扩展知识面、提高个人综合素养、探索人生存在的意义</p>
<h2 id="三、怎么开始阅读"><a href="#三、怎么开始阅读" class="headerlink" title="三、怎么开始阅读"></a>三、怎么开始阅读</h2><p>从 <a href="/booklist/">我的书单</a> 当中可以看出<br>刚开始的时候基本上都是兴趣导向<br>俗话说兴趣是最好的老师，有些好书恨不得立马就看完，<br>接触很多人说看书就想睡觉，其实那不是我们的错，<br>是书没有写好，换一本就好了，如果还是不行，那就继续换。</p>
<p>当找到感兴趣的主题，看了一段时间之后<br>会发现阅读速度会有所提升，也会有很强的满足感<br>毕竟看的过程中总会有所收获，有所思考</p>
<p>兴趣是最好的老师，但是兴趣不能当饭吃<br>这个时候应该开始找一些通俗易懂的技术书，而不是那些很难啃的枕头<br>还是以有趣，通俗易懂为主<br>坚持一段时间，技术上也会有所收获<br>慢慢的就可以驰骋技术书籍的战场了<br>如果有时候发现看不下去了<br>那么就切换其它类型的书籍(我一般都是一本技术一本非技术)</p>
<p>建议看看《如何阅读一本书》</p>
<h2 id="四、怎么沉迷于阅读"><a href="#四、怎么沉迷于阅读" class="headerlink" title="四、怎么沉迷于阅读"></a>四、怎么沉迷于阅读</h2><p>当通过阅读，名利双收的时候，我想没有几个人会不沉迷于阅读<br>想做到名利双收，需要养成好的习惯，挑选好的书籍<br>建议看看相关领域大佬分享的书单，或者直接咨询<br>书籍看多了实践也得跟上<br>有条件可以合志同道合的人一起看同一本书，看的时候多交流探讨，会有意想不到的效果</p>
<h2 id="五、去哪儿找书单"><a href="#五、去哪儿找书单" class="headerlink" title="五、去哪儿找书单"></a>五、去哪儿找书单</h2><ol>
<li><a href="/booklist/">我的书单</a></li>
<li>去问身边比自己强的人</li>
<li>查看业界大佬的书单(比如他们的博客&#x2F;世界读书日分享等)</li>
<li>电子商务网站是看相关领域的排行榜</li>
<li>GitHub 上各种学习类型的仓库之推荐书籍</li>
</ol>
<h2 id="六、小结"><a href="#六、小结" class="headerlink" title="六、小结"></a>六、小结</h2><p>贫穷的本质是认知的差异<br>阅读、反馈、实践慢慢迭代认知<br>有长远的目标，不负韶华，坚持学习，努力提高</p>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>read</tag>
      </tags>
  </entry>
  <entry>
    <title>如何做一个让人讨厌的产品经理 - 《人人都是产品经理 2.0》读后感</title>
    <url>/20210130-how-to-be-a-disgusting-product-manager/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>本文灵感来自《人人都是产品经理 2.0》<br>位置：7.4.2 如何做一个让 Ta 们讨厌的人</p>
<p>作为一个研发，工作过程中如果能及时发现如下场景，<br>及时给对方负反馈，否则受伤的是整个团队。<br>看了这本书之后，感觉对产品有新的认知，<br>知道他们在做什么，怎么做，后续可以更好的与他们沟通。<br>而且里面的内容对于研发来讲也是适用的。</p>
<h1 id="一、开始实施之前"><a href="#一、开始实施之前" class="headerlink" title="一、开始实施之前"></a>一、开始实施之前</h1><h2 id="1-1-不说清需求价值"><a href="#1-1-不说清需求价值" class="headerlink" title="1.1 不说清需求价值"></a>1.1 不说清需求价值</h2><p>技术问”为什么要做”时：<br>1、时支支吾吾<br>2、这是老板(XXX)要的，假装自己是个传话筒<br>3、我接的是二手需求，什么都不知道<br>随说：其实正确的做法是追溯这个需求的初衷，有利于评估 ROI (投入产出比)，以及排优先级，以及增进对业务的理解。</p>
<h2 id="1-2-不去想细节功能"><a href="#1-2-不去想细节功能" class="headerlink" title="1.2 不去想细节功能"></a>1.2 不去想细节功能</h2><span id="more"></span>
<p>技术问细节(业务细节，非技术细节)时：<br>1、装作自己完全没有想过<br>2、那就这样做<br>3、肯能那样做也可以<br>4、要不你来定吧<br>随说：这些表现其实都是不负责的！没有明确的需要，后期容易扯皮，也可能做出来的东西有问题。</p>
<h2 id="1-3-帮技术评估工作量"><a href="#1-3-帮技术评估工作量" class="headerlink" title="1.3 帮技术评估工作量"></a>1.3 帮技术评估工作量</h2><p>1、这不是很简单嘛，就改个 XXX，几行代码就搞定<br>2、这些我都评估过了，都能做<br>3、不要偷懒，不要忽悠我，我抖动<br>随说：评估真是个高难度的活，往往只见树木不见森林</p>
<h2 id="1-4-逼着技术团队承诺"><a href="#1-4-逼着技术团队承诺" class="headerlink" title="1.4 逼着技术团队承诺"></a>1.4 逼着技术团队承诺</h2><p>1、任何时候只知道公事公办，技术承诺了却做不到，自己就没有责任了。<br>随说：互联网企业更多的只是一个”预测”，而非”承诺”，因为变化太快，承诺是技术对产品的责任，而预测是产研一起担责。</p>
<h1 id="二、实施过程中"><a href="#二、实施过程中" class="headerlink" title="二、实施过程中"></a>二、实施过程中</h1><h2 id="2-1-做了一半改需求"><a href="#2-1-做了一半改需求" class="headerlink" title="2.1 做了一半改需求"></a>2.1 做了一半改需求</h2><p>1、经常在某个迭代周期内做”非受迫的需求变更”，这招杀伤力很大，技术同学一般受不了。<br>随说：非受迫，意味着是产品没有想清楚，然后导致研发无谓劳动。万万不可取。</p>
<h2 id="2-2-开发过程中消失"><a href="#2-2-开发过程中消失" class="headerlink" title="2.2 开发过程中消失"></a>2.2 开发过程中消失</h2><p>1、可以想各种办法隔绝与研发的联系。<br>随说：一般都需要多次沟通，反复确认细节。</p>
<h2 id="2-3-过度关注细节"><a href="#2-3-过度关注细节" class="headerlink" title="2.3 过度关注细节"></a>2.3 过度关注细节</h2><p>1、帮技术确定各种技术方案，这个应该这样实现…<br>随说：这种一般少见，研发转岗产品的多一些</p>
<h1 id="三、产品发布之后"><a href="#三、产品发布之后" class="headerlink" title="三、产品发布之后"></a>三、产品发布之后</h1><h2 id="3-1-没有发布后的反馈"><a href="#3-1-没有发布后的反馈" class="headerlink" title="3.1 没有发布后的反馈"></a>3.1 没有发布后的反馈</h2><p>1、发布之后，犹如石沉大海，不告诉大家任何结果，甚至庆功宴都不叫 Ta 们，紧接着继续安排他们干活。<br>随说：技术人员也需要从市场、用户那里获得反馈，从而对自己做的事情产生价值感和成就感。</p>
<h2 id="3-2-任务无节奏感"><a href="#3-2-任务无节奏感" class="headerlink" title="3.2 任务无节奏感"></a>3.2 任务无节奏感</h2><p>1、让研发一阵忙一阵闲，发布之后再开始研究接下来做什么。<br>2、一会儿让研发有着天天通宵的高强度，给 deadline，下死命令，做完之后不知道做什么。<br>随说：保持合理的安排，让研发有个合理的预期比较好。而不是等你们上了大学就自由了这种…</p>
<h2 id="四、全程适用"><a href="#四、全程适用" class="headerlink" title="四、全程适用"></a>四、全程适用</h2><h2 id="4-1-优柔挂断"><a href="#4-1-优柔挂断" class="headerlink" title="4.1 优柔挂断"></a>4.1 优柔挂断</h2><p>1、你定吧，你说往哪儿走我们照办<br>2、啊…那个…方案各有利弊，我也不知道怎么办，你们有什么好想法<br>随说：自己左手和右手互搏，思考清楚之后给大家一个明确的结果。</p>
<h2 id="4-2-报喜不报忧"><a href="#4-2-报喜不报忧" class="headerlink" title="4.2 报喜不报忧"></a>4.2 报喜不报忧</h2><p>1、藏着噎着一些坏消息，eg:老板正考虑干掉这个项目等，大家只能通过小道消息得知<br>随说：这样很破坏信任感</p>
<h2 id="4-3-不把-Ta-们当人看"><a href="#4-3-不把-Ta-们当人看" class="headerlink" title="4.3 不把 Ta 们当人看"></a>4.3 不把 Ta 们当人看</h2><p>1、只关注结果，不关注人的成长，永远把合作伙伴当”资源”<br>随说：结果导向没有问题，但是没有成长，留不住人。</p>
]]></content>
      <categories>
        <category>RandomThoughts</category>
      </categories>
      <tags>
        <tag>随说</tag>
      </tags>
  </entry>
  <entry>
    <title>英语文档：how-to-manage-a-redis-database.pdf</title>
    <url>/20201010-how-to-manage-a-redis-database/</url>
    <content><![CDATA[<p>当初这个文档应该是在『科技爱好者周刊』上还是哪里发现的<br>看这个文档本来的目的是每天坚持阅读英文文档<br>技术文档一般都比较简洁易懂，英语是一个长期的过程，还得继续坚持阅读~</p>
<p>看的过程中发现，结合一定的场景，和示例<br>和官方文档相比，没有那么枯燥，也更好理解<br>甚至有一些之前未曾关注的用法让我感到惊艳</p>
<p>所以推荐一下</p>
<p>下载地址：<a href="https://assets.digitalocean.com/books/how-to-manage-a-redis-database.pdf">how-to-manage-a-redis-database.pdf</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>redis</tag>
        <tag>database</tag>
      </tags>
  </entry>
  <entry>
    <title>怎么移除TVOC(甲醛等)</title>
    <url>/20240303-how-to-remove-TOVC/</url>
    <content><![CDATA[<h1 id="1-什么是-TVOC"><a href="#1-什么是-TVOC" class="headerlink" title="1. 什么是 TVOC"></a>1. 什么是 TVOC</h1><p>TVOC 是“Total Volatile Organic Compounds”的英文缩写，意思是总挥发性有机化合物。<br>包含：苯类、烷类、芳烃类、烯类、卤烃类、酯类、醛类、酮类和其他。</p>
<h1 id="2-装修怎么快速去除甲醛？"><a href="#2-装修怎么快速去除甲醛？" class="headerlink" title="2. 装修怎么快速去除甲醛？"></a>2. 装修怎么快速去除甲醛？</h1><p>答案是没法快速去除，否则就没有 ENF、E0 这些等级之分了。</p>
<p>市面上比较流行的方法</p>
<ol>
<li>绿萝等绿植( 12㎡ 60盆才有效果..)</li>
<li>闷放通风</li>
<li>加热加湿闷放通风</li>
<li>持续通风</li>
</ol>
<p>1 和 4 的可能比较少，<br>各种网络信息，比较推崇的是『闷放法』<br>实际上比较有用的是：<strong>持续通风+风扇吹家具(加快客气流动)</strong><br>数据：连续通风法，通风两天，板材累计释放甲醛质量为485mg，是加热加湿闷放法、闷放法的10倍之多。<br>数据说明：不一定准确，但是有数据有对比，比较可信。详情看下面数据来源</p>
<span id="more"></span>
<p>数据来源：<a href="https://www.zhihu.com/question/629126368/answer/3278933264">https://www.zhihu.com/question/629126368/answer/3278933264</a></p>
<h1 id="3-小插曲"><a href="#3-小插曲" class="headerlink" title="3. 小插曲"></a>3. 小插曲</h1><p>最后写一个插曲<br>今天家里领导说要使用加热加湿闷放法，从原理上出发，我觉得没什么依据：</p>
<ul>
<li><ol>
<li>密闭空间，到了一定浓度，不利于板材”散味”，而且散的不一定有开窗通风快</li>
</ol>
</li>
<li><ol start="2">
<li>密闭一段时间进去，浓度太高，吸入对身体不好</li>
</ol>
</li>
<li><ol start="3">
<li>家庭条件很难达到所谓的”高温高湿”</li>
</ol>
</li>
</ul>
<p>探讨下来，领导给出的理由是</p>
<ol>
<li>网上都这么说，但是给出某红书的链接，就纯靠嘴说，没有任何数据。</li>
<li>她同事装修过，也是这么处理的。</li>
</ol>
<p>这么看来自媒体火不是没有道理的，<br>会独立思考的太少。人云亦云的人太多。</p>
]]></content>
      <categories>
        <category>RandomThoughts</category>
      </categories>
      <tags>
        <tag>生活</tag>
      </tags>
  </entry>
  <entry>
    <title>html - 原生Javascript动态显示当前时间和日期</title>
    <url>/20170412-html%20-%20%E5%8E%9F%E7%94%9FJavascript%E5%8A%A8%E6%80%81%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%E5%92%8C%E6%97%A5%E6%9C%9F/</url>
    <content><![CDATA[<p>显示当前时间：</p>
<p>2017年04月12日 18:26:37 星期三</p>
<p>示例如下：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;显示当前时间 - 原生Javascript&lt;/title&gt;</span><br><span class="line">&lt;script type=&quot;text/Javascript&quot; language=&quot;Javascript&quot;&gt;    </span><br><span class="line">function show_cur_times()&#123;    </span><br><span class="line">//获取当前日期    </span><br><span class="line">var date_time = new Date();    </span><br><span class="line">//定义星期    </span><br><span class="line">var week;    </span><br><span class="line">//switch判断    </span><br><span class="line">switch (date_time.getDay())&#123;    </span><br><span class="line">case 1: week=&quot;星期一&quot;; break;    </span><br><span class="line">case 2: week=&quot;星期二&quot;; break;    </span><br><span class="line">case 3: week=&quot;星期三&quot;; break;    </span><br><span class="line">case 4: week=&quot;星期四&quot;; break;    </span><br><span class="line">case 5: week=&quot;星期五&quot;; break;    </span><br><span class="line">case 6: week=&quot;星期六&quot;; break;    </span><br><span class="line">default:week=&quot;星期天&quot;; break;    </span><br><span class="line">&#125;    </span><br><span class="line">//年    </span><br><span class="line">var year = date_time.getFullYear();    </span><br><span class="line"> 	//判断小于10，前面补0    </span><br><span class="line">if(year&lt;10)&#123;    </span><br><span class="line"> 	year=&quot;0&quot;+year;    </span><br><span class="line">&#125;    </span><br><span class="line">//月    </span><br><span class="line">var month = date_time.getMonth()+1;    </span><br><span class="line"> 	//判断小于10，前面补0    </span><br><span class="line">if(month&lt;10)&#123;    </span><br><span class="line">month=&quot;0&quot;+month;    </span><br><span class="line">&#125;    </span><br><span class="line">//日    </span><br><span class="line">var day = date_time.getDate();    </span><br><span class="line"> 	//判断小于10，前面补0    </span><br><span class="line">if(day&lt;10)&#123;    </span><br><span class="line"> 	day=&quot;0&quot;+day;    </span><br><span class="line">&#125;    </span><br><span class="line">//时    </span><br><span class="line">var hours =date_time.getHours();    </span><br><span class="line"> 	//判断小于10，前面补0    </span><br><span class="line">if(hours&lt;10)&#123;    </span><br><span class="line"> 	hours=&quot;0&quot;+hours;    </span><br><span class="line">&#125;    </span><br><span class="line">//分    </span><br><span class="line">var minutes =date_time.getMinutes();    </span><br><span class="line"> 	//判断小于10，前面补0    </span><br><span class="line">if(minutes&lt;10)&#123;    </span><br><span class="line"> 	minutes=&quot;0&quot;+minutes;    </span><br><span class="line">&#125;    </span><br><span class="line">//秒    </span><br><span class="line">var seconds=date_time.getSeconds();    </span><br><span class="line"> 	//判断小于10，前面补0    </span><br><span class="line">if(seconds&lt;10)&#123;    </span><br><span class="line"> 	seconds=&quot;0&quot;+seconds;    </span><br><span class="line">&#125;    </span><br><span class="line">//拼接年月日时分秒    </span><br><span class="line">var date_str = year+&quot;年&quot;+month+&quot;月&quot;+day+&quot;日 &quot;+hours+&quot;:&quot;+minutes+&quot;:&quot;+seconds+&quot; &quot;+week;    </span><br><span class="line">//显示在id为showtimes的容器里    </span><br><span class="line">document.getElementById(&quot;showtimes&quot;).innerHTML= date_str;    </span><br><span class="line">&#125;    </span><br><span class="line">//设置1秒调用一次show_cur_times函数    </span><br><span class="line">setInterval(&quot;show_cur_times()&quot;,100);    </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">显示当前时间：&lt;p id=&quot;showtimes&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
  </entry>
  <entry>
    <title>iTerm2自动连接远程服务器</title>
    <url>/20180720-iTerm2%E8%87%AA%E5%8A%A8%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    <content><![CDATA[<p>mac自带的终端总感觉不大好用，于是乎就被安利了iTerm2</p>
<p>然后就搜了下自动连接远程服务，于是就发现了一个不错的脚步</p>
<p>整个设置过程还是比较顺畅，</p>
<p>操作步骤：</p>
<ol>
<li>新建一个sh文件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi auto_ssh.sh</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>输入如下内容，[lindex $argv 0] 这个为第一个参数的占位符</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/expect</span></span><br><span class="line"></span><br><span class="line">set timeout 30</span><br><span class="line">spawn ssh -p[lindex $argv 0] [lindex $argv 1]@[lindex $argv 2]</span><br><span class="line">expect &#123;</span><br><span class="line">&quot;(yes/no)?&quot;</span><br><span class="line">&#123;send &quot;yes\n&quot;;exp_continue&#125;</span><br><span class="line">&quot;password:&quot;</span><br><span class="line">&#123;send &quot;[lindex $argv 3]\n&quot;&#125;</span><br><span class="line">&#125;</span><br><span class="line">interact</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>复制脚本到bin下并且赋予执行权限</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo cp auto_ssh.sh /usr/local/bin/</span><br><span class="line">cd /usr/local/bin/</span><br><span class="line">sudo chmod +x auto_ssh.sh</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>设置<br>在iTerm2中Command+o呼出profile</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 界面右下角，点击：</span><br><span class="line">edit profiles</span><br><span class="line"># 界面左下角，点击：</span><br><span class="line">+</span><br><span class="line"># 界面上方，点击：</span><br><span class="line">General</span><br><span class="line"># 界面靠上，写这个登录的名字：</span><br><span class="line">name</span><br><span class="line"># 界面中间，点击选择：</span><br><span class="line">Login shell</span><br><span class="line"># 找到这个提示符：Send text at start，输入如下字符</span><br><span class="line">auto_ssh.sh 8022 root 10.10.20.20 hisenyuan</span><br><span class="line"># 脚本名称   端口  用户名  ip地址       密码</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>运行<br> 设置完了之后，关闭窗口，重新command+o呼出配置文件，双击刚刚配置的即可自动登录</li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
  </entry>
  <entry>
    <title>IDEA failed to create jvm:error code -1</title>
    <url>/20170303-idea%20failed%20to%20create%20jvm%20error%20code%20-1/</url>
    <content><![CDATA[<p>今天先更改了 idea64.exe.vmoptions 这个配置文件</p>
<p>一直么有重启，后来就安装了个插件重启一下，结果就泪崩了</p>
<p>一直出现这个错误<br><img src="http://wx4.sinaimg.cn/mw690/b2e389b6gy1fd9suz8h9dj20db06ujr9.jpg"  alt="IDEA failed to create jvm:error code -1,jvm:error code -1" /><br>总以为是环境变量配置的问题，或者是文件损坏了什么</p>
<p>重启，重装jdk，重新配置什么都试过，不管用。</p>
<p>后来替换了配置文件就好了！！！</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>配置文件路径：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">\IDEA HOME\bin\idea64.exe.vmoptions</span><br><span class="line">或者</span><br><span class="line">\IDEA HOME\bin\idea.exe.vmoptions</span><br></pre></td></tr></table></figure>
<p>默认配置文件内容如下：</p>
<p>32bit</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-server</span><br><span class="line">-Xms128m</span><br><span class="line">-Xmx512m</span><br><span class="line">-XX:ReservedCodeCacheSize=240m</span><br><span class="line">-XX:+UseConcMarkSweepGC</span><br><span class="line">-XX:SoftRefLRUPolicyMSPerMB=50</span><br><span class="line">-ea</span><br><span class="line">-Dsun.io.useCanonCaches=false</span><br><span class="line">-DJava.net.preferIPv4Stack=true</span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError</span><br><span class="line">-XX:-OmitStackTraceInFastThrow</span><br></pre></td></tr></table></figure>
<p>64bit</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-Xms128m</span><br><span class="line">-Xmx750m</span><br><span class="line">-XX:ReservedCodeCacheSize=240m</span><br><span class="line">-XX:+UseConcMarkSweepGC</span><br><span class="line">-XX:SoftRefLRUPolicyMSPerMB=50</span><br><span class="line">-ea</span><br><span class="line">-Dsun.io.useCanonCaches=false</span><br><span class="line">-DJava.net.preferIPv4Stack=true</span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError</span><br><span class="line">-XX:-OmitStackTraceInFastThrow</span><br></pre></td></tr></table></figure>

<p>by the way:</p>
<p>IDEA 写博客真是舒服啊~</p>
<p>完全不用切换来切换去的！</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>idea jrebel 7.0 破解 - 获取JRebel激活码</title>
    <url>/20170303-idea%20jrebel%207.0%20%E7%A0%B4%E8%A7%A3%20-%20%E8%8E%B7%E5%8F%96JRebel%E6%BF%80%E6%B4%BB%E7%A0%81/</url>
    <content><![CDATA[<p>其实这玩意完全不要破解，直接官网注册就会给一个注册码</p>
<p>注册地址：<a href="https://zeroturnaround.com/software/jrebel/download/" target="_blank">https://zeroturnaround.com</a></p>
<p>注册完了之后在IDEA里面去设置，会提醒激活。</p>
<p>tomcat部署了项目之后，点击JR启动是可以热部署的！！！</p>
<p>改了Java代码都不要重新启动项目，哈哈！！！</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>idea启动tomcat服务失败 SEVERE [RMI TCP Connection(3)-127.0.0.1]</title>
    <url>/20170215-idea%E5%90%AF%E5%8A%A8tomcat%E6%9C%8D%E5%8A%A1%E5%A4%B1%E8%B4%A5-SEVERE-RMI-TCP-Connection-3-127-0-0-1/</url>
    <content><![CDATA[<p>工程是从eclipse生成的，用idea开发。</p>
<p>重复了一遍以往正常的不能再正常了的导入配置，结果遇到了如下问题：</p>
<p>SEVERE [<strong>RMI TCP Connection(3)-127.0.0.1</strong>] </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">15-Feb-2017 11:05:25.993 严重 [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.StandardContext.listenerStart Skipped installing application listeners due to previous error(s)</span><br></pre></td></tr></table></figure>

<h2 id="删除导入项目中的web-xml文件"><a href="#删除导入项目中的web-xml文件" class="headerlink" title="删除导入项目中的web.xml文件"></a>删除导入项目中的web.xml文件</h2><p>因为idea要用的东西自己会自动生成</p>
<p>然后就搞定了这个纠结我一天的问题</p>
<p>我是百度搜索这个错误：<strong>RMI TCP Connection(3)-127.0.0.1</strong></p>
<p>得到的答案，感谢10100：<a href="http://www.cnblogs.com/A-QBlog/p/5865578.html" target="_blank">查看原文</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>idea</tag>
        <tag>tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>水族入门</title>
    <url>/20220612-introduction-to-aquarium/</url>
    <content><![CDATA[<h1 id="0-概览"><a href="#0-概览" class="headerlink" title="0. 概览"></a>0. 概览</h1><h2 id="0-1-简介"><a href="#0-1-简介" class="headerlink" title="0.1 简介"></a>0.1 简介</h2><p>入坑水族几年，和年纪无关…<br>修生养性，培养一个兴趣爱好，毕竟生命在于折腾<br>下班回家，看着鱼儿在水中游，喂喂乌龟，也蛮有趣</p>
<p>最近几天在折腾过滤，<br>进一步了解了一下过滤系统，<br>也有朋友在问养鱼养龟方面的问题，<br>于是就想着写一篇博客简单的记录一下。</p>
<p>不懂的多百度，设备什么的购物平台搜搜。<br>有兴趣可以逛逛：南美水族论坛、乌龟吧(百度贴吧)，等水族相关内容。</p>
<h2 id="0-2-预防针"><a href="#0-2-预防针" class="headerlink" title="0.2 预防针"></a>0.2 预防针</h2><p>需要有一定的金钱投入，更重要的是精力投入，长期维护。</p>
<h2 id="0-3-我的水族"><a href="#0-3-我的水族" class="headerlink" title="0.3 我的水族"></a>0.3 我的水族</h2><ul>
<li>鱼缸<ul>
<li>动物：宝莲灯、孔雀鱼、苹果螺、杀手螺、黑壳虾</li>
<li>植物：小水兰、珍珠草</li>
<li>过滤：伊罕滤桶</li>
<li>灯具：LED 水草灯</li>
</ul>
</li>
<li>乌龟缸<ul>
<li>动物：鳄鱼龟(互动性不错)、苹果螺、黑壳虾</li>
<li>植物：石菖蒲、水竹、紫芋</li>
<li>过滤：侧滤 + 沼泽 + 滴滤</li>
<li>灯具：LED 水草灯</li>
</ul>
</li>
</ul>
<span id="more"></span>
<h1 id="1-动物选择"><a href="#1-动物选择" class="headerlink" title="1. 动物选择"></a>1. 动物选择</h1><p>养宠物之前<br>一定要先了解清楚<br>自己喜欢什么，适合什么<br>先了解学习一些经验，不要着急入手</p>
<p>鳄鱼龟：互动性不错，有点危险，长的很快.<br>宝莲灯：个人比较喜欢的热带灯科鱼，小型的.</p>
<h1 id="2-植物选择"><a href="#2-植物选择" class="headerlink" title="2. 植物选择"></a>2. 植物选择</h1><p>鱼缸</p>
<ul>
<li>阴性草<ul>
<li>优点：简单好养，不需要水草灯、二氧化氮设备</li>
<li>缺点：不太好看</li>
</ul>
</li>
<li>阳性草<ul>
<li>优点：好看</li>
<li>缺点：需要一定的养护技巧，还有相关的设备</li>
</ul>
</li>
</ul>
<p>龟缸<br>主要考虑过滤使用<br>选择根系强大的挺水植物</p>
<h1 id="3-容器选择"><a href="#3-容器选择" class="headerlink" title="3. 容器选择"></a>3. 容器选择</h1><p>选择透明的玻璃容器，观赏性比较好<br>鱼缸</p>
<ul>
<li>选择 5 面超白长方体鱼缸，尽量避免异形鱼缸</li>
<li>尺寸(cm 长宽高)：60x45x45、90x45x45、120x45x45、等等常规尺寸</li>
</ul>
<p>龟缸</p>
<ul>
<li>和鱼缸类似</li>
<li>入门也可以考虑乌龟周转箱</li>
</ul>
<h1 id="4-过滤选择"><a href="#4-过滤选择" class="headerlink" title="4. 过滤选择"></a>4. 过滤选择</h1><p>俗话说，养鱼先养水。<br>要想养好水，就需要过滤器材。</p>
<p>关于自来水<br>开缸尽量不要用自来水，<br>使用自来水最好是晾晒 2 天，<br>水质稳定之后，换水的时候也可以直接注入少量自来水。</p>
<h2 id="4-1-建议"><a href="#4-1-建议" class="headerlink" title="4.1 建议"></a>4.1 建议</h2><p>使用过滤器</p>
<ul>
<li>上滤：安全、方便，不美观</li>
<li>底滤：有点麻烦，美观</li>
<li>侧滤：有点麻烦，不美观</li>
<li>滤桶：安全，美观，不够强大</li>
</ul>
<p>尽量增大水体体积<br>尽量增大水与滤材的接触面积(过滤效果好)</p>
<ul>
<li>装更多的滤材</li>
<li>使用接触面积更大的滤材</li>
</ul>
<p>滤材表面积大利于细菌进行生长繁殖，可保持干净稳定的水。<br>滤材选择：表面积越大越好，一般比较贵；便宜的可以以量取胜。</p>
<h2 id="4-2-背景知识"><a href="#4-2-背景知识" class="headerlink" title="4.2 背景知识"></a>4.2 背景知识</h2><p>异养细菌，把食物残渣、动物粪便等，转化成无机物，氨气(对动物有害)等。<br>硝化细菌，把氨气转换为硝酸盐(对动物无害)，可以供植物吸收。</p>
<p>水循环大概过程：<br>『有机物(残渣、粪便)』 一异养细菌一&gt; 『氨(有害)等其它无害物质』 一硝化细菌一&gt; 『硝酸』 一&gt; 『植物吸收』   </p>
<h3 id="4-2-1-详细解释"><a href="#4-2-1-详细解释" class="headerlink" title="4.2.1 详细解释"></a>4.2.1 详细解释</h3><p>硝化细菌：属于生产者，包括亚硝酸细菌(将氨氧化成亚硝酸)，硝酸细菌(将亚硝酸氧化成硝酸)，<br>硝化细菌（英语：nitrifying bacteria）是一群好氧的化能自养生物之统称，属于生产者，<br>细菌能通过食用无机氮化合物生长。硝化细菌以二氧化碳为碳源，通过代谢将氨或铵盐氧化成硝酸盐。</p>
<p>自养生物（英语：autotroph）也称为生产者（producer）<br>指食物链底端可以利用阳光（光合作用）或无机物氧化配以地热能（化能合成）<br>将空气和周边环境中的二氧化碳、水以及无机盐等制造成有机物来提供代谢底物并存储化学能的生物，<br>主要包括绿色植物、海藻和少数微生物（浮游植物）。</p>
<p>异养生物（英语：heterotroph），也称为消费者( consumer)<br>指不能直接利用无机物或有机物维生，必须摄取现成的养分来维持生存机能的生物。</p>
<h1 id="5-参考"><a href="#5-参考" class="headerlink" title="5. 参考"></a>5. 参考</h1><ul>
<li><a href="https://baike.baidu.com/item/%E7%A1%9D%E5%8C%96%E7%BB%86%E8%8F%8C">硝化细菌-百度百科</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%A1%9D%E5%8C%96%E7%BB%86%E8%8F%8C">硝化细菌-维基百科</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E8%87%AA%E5%85%BB%E7%94%9F%E7%89%A9">自养生物-维基百科</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%95%B0%E7%87%9F%E7%94%9F%E7%89%A9">异养生物-维基百科</a></li>
</ul>
]]></content>
      <categories>
        <category>NatureAndPets</category>
      </categories>
      <tags>
        <tag>水族</tag>
      </tags>
  </entry>
  <entry>
    <title>JVM系列-MetaSpace(元空间)</title>
    <url>/20210430-jvm-series-metaspace/</url>
    <content><![CDATA[<h1 id="一、结论"><a href="#一、结论" class="headerlink" title="一、结论"></a>一、结论</h1><p>JDK8 因未指定 MetaSpace 大小，程序启动过程中元空间不够用，触发 full gc。</p>
<p>详细如下：<br>JDK8 因未指定 MetaSpace 大小，默认初始大小约 21M<br>程序启动，元空间大小占用稳定在 90M<br>因为超过了默认元空间大小，导致元空间扩容(每次扩容会 full gc)<br>从 GC 日志来看，每次元空间扩容都是增加 20M 左右，所以程序启动时 full gc 4 次</p>
<h1 id="二、问题"><a href="#二、问题" class="headerlink" title="二、问题"></a>二、问题</h1><p>应用启动时出现 full gc;</p>
<p>gc日志重点：GC (Metadata GC Threshold) [PSYoungGen: 354024K-&gt;15340K(1376256K)</p>
<h1 id="三、排查过程"><a href="#三、排查过程" class="headerlink" title="三、排查过程"></a>三、排查过程</h1><span id="more"></span>
<p>启动过程中，出现了 JVM Full GC 告警。<br>由于启动过程中之前没有遇到这种情况，找不到其它原因。<br>于是修改 JVM 参数，增加 GC 日志，于是就看到了『二』中的内容。</p>
<p>看原因是元空间内存不够大导致的<br>通过 GC 日志可以看到元空间实际占用大小，100M<br>于是调整 JVM 元空间大小至 128M，问题解决。</p>
<p>问题是解决了，但是原因是什么呢？<br>在结论部分已经讲了，这里不重复。</p>
<p>所谓知其然，更要知其所以然。<br>只有这样才能明白问题的本质，学到知识。</p>
<h1 id="四、背景知识"><a href="#四、背景知识" class="headerlink" title="四、背景知识"></a>四、背景知识</h1><p><a href="https://www.cnblogs.com/williamjie/p/9558094.html">Metaspace整体介绍</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>jvm</tag>
      </tags>
  </entry>
  <entry>
    <title>Java JVM 工具与知识 | JVM 调优</title>
    <url>/20211009-jvm-tool-and-knowledge/</url>
    <content><![CDATA[<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>曾经整理过一个帖子，不过是在公司内网。<br>今天突然想起，博客上零散的 jvm 相关内容，<br>但未系统整理相关知识和工具，遂写一篇文章。</p>
<p>学习的过程需要不断发现好的资源，深入钻研某个领域。</p>
<h1 id="二、知识"><a href="#二、知识" class="headerlink" title="二、知识"></a>二、知识</h1><h2 id="2-1-图书"><a href="#2-1-图书" class="headerlink" title="2.1 图书"></a>2.1 图书</h2><ul>
<li>《深入理解 Java 虚拟机》</li>
<li>《Java 性能优化权威指南》</li>
<li>《性能之巅》</li>
</ul>
<h2 id="2-2-文档"><a href="#2-2-文档" class="headerlink" title="2.2 文档"></a>2.2 文档</h2><ul>
<li><a href="https://docs.oracle.com/Javase/specs/">Java Language and Virtual Machine Specifications</a></li>
</ul>
<h2 id="2-3-文章"><a href="#2-3-文章" class="headerlink" title="2.3 文章"></a>2.3 文章</h2><span id="more"></span>
<ul>
<li><a href="https://www.cnblogs.com/Javaadu/p/11220234.html">【译】深入理解G1的GC日志（一）</a></li>
<li><a href="https://tech.meituan.com/2017/12/29/jvm-optimize.html">从实际案例聊聊Java应用的GC优化</a></li>
<li><a href="https://tech.meituan.com/2019/10/10/jvm-cpu-profiler.html">JVM CPU Profiler技术原理及源码深度解析</a></li>
<li><a href="https://tech.meituan.com/2016/09/23/g1.html">Java Hotspot G1 GC的一些关键技术</a></li>
<li><a href="https://tech.meituan.com/2020/11/12/Java-9-cms-gc.html">Java中9种常见的CMS GC问题分析与解决</a></li>
<li><a href="https://tech.meituan.com/2020/08/06/new-zgc-practice-in-meituan.html">新一代垃圾回收器ZGC的探索与实践</a></li>
<li><a href="https://tech.meituan.com/2016/09/23/g1.html">Java Hotspot G1 GC的一些关键技术</a></li>
</ul>
<h1 id="三、工具"><a href="#三、工具" class="headerlink" title="三、工具"></a>三、工具</h1><ul>
<li><a href="https://opts.console.heapdump.cn/">JVM参数优化(创业者来自阿里性能团队)</a></li>
<li><a href="https://gceasy.io/">gc日志在线分析</a></li>
<li><a href="https://www.fastthread.io/">Java Thread Dump Analyzer</a></li>
<li><a href="https://heaphero.io/">Java &amp; Android Heap Dump Analyzer</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>jvm</tag>
      </tags>
  </entry>
  <entry>
    <title>linux cal date命令详解</title>
    <url>/20170314-linux%20cal%20date%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">##显示当月的日历</span><br><span class="line">hisen@ubuntu:~$ cal</span><br><span class="line">     March 2017       </span><br><span class="line">Su Mo Tu We Th Fr Sa  </span><br><span class="line">          1  2  3  4  </span><br><span class="line"> 5  6  7  8  9 10 11  </span><br><span class="line">12 13 14 15 16 17 18  </span><br><span class="line">19 20 21 22 23 24 25  </span><br><span class="line">26 27 28 29 30 31     </span><br><span class="line"></span><br><span class="line">##指定显示1997年11月当月的日历</span><br><span class="line">hisen@ubuntu:~$ cal 11 1997</span><br><span class="line">   November 1997      </span><br><span class="line">Su Mo Tu We Th Fr Sa  </span><br><span class="line">                   1  </span><br><span class="line"> 2  3  4  5  6  7  8  </span><br><span class="line"> 9 10 11 12 13 14 15  </span><br><span class="line">16 17 18 19 20 21 22  </span><br><span class="line">23 24 25 26 27 28 29  </span><br><span class="line">30   </span><br><span class="line">##显示2018年全年12个月的日历</span><br><span class="line">hisen@ubuntu:~$ cal -m 12 -y 2018</span><br><span class="line">                            2018</span><br><span class="line">      January               February               March          </span><br><span class="line">Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  </span><br><span class="line">    1  2  3  4  5  6               1  2  3               1  2  3  </span><br><span class="line"> 7  8  9 10 11 12 13   4  5  6  7  8  9 10   4  5  6  7  8  9 10  </span><br><span class="line">14 15 16 17 18 19 20  11 12 13 14 15 16 17  11 12 13 14 15 16 17  </span><br><span class="line">21 22 23 24 25 26 27  18 19 20 21 22 23 24  18 19 20 21 22 23 24  </span><br><span class="line">28 29 30 31           25 26 27 28           25 26 27 28 29 30 31  </span><br><span class="line">                                                                  </span><br><span class="line"></span><br><span class="line">       April                  May                   June          </span><br><span class="line">Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  </span><br><span class="line"> 1  2  3  4  5  6  7         1  2  3  4  5                  1  2  </span><br><span class="line"> 8  9 10 11 12 13 14   6  7  8  9 10 11 12   3  4  5  6  7  8  9  </span><br><span class="line">15 16 17 18 19 20 21  13 14 15 16 17 18 19  10 11 12 13 14 15 16  </span><br><span class="line">22 23 24 25 26 27 28  20 21 22 23 24 25 26  17 18 19 20 21 22 23  </span><br><span class="line">29 30                 27 28 29 30 31        24 25 26 27 28 29 30  </span><br><span class="line">                                                                  </span><br><span class="line"></span><br><span class="line">        July                 August              September        </span><br><span class="line">Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  </span><br><span class="line"> 1  2  3  4  5  6  7            1  2  3  4                     1  </span><br><span class="line"> 8  9 10 11 12 13 14   5  6  7  8  9 10 11   2  3  4  5  6  7  8  </span><br><span class="line">15 16 17 18 19 20 21  12 13 14 15 16 17 18   9 10 11 12 13 14 15  </span><br><span class="line">22 23 24 25 26 27 28  19 20 21 22 23 24 25  16 17 18 19 20 21 22  </span><br><span class="line">29 30 31              26 27 28 29 30 31     23 24 25 26 27 28 29  </span><br><span class="line">                                            30                    </span><br><span class="line"></span><br><span class="line">      October               November              December        </span><br><span class="line">Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  </span><br><span class="line">    1  2  3  4  5  6               1  2  3                     1  </span><br><span class="line"> 7  8  9 10 11 12 13   4  5  6  7  8  9 10   2  3  4  5  6  7  8  </span><br><span class="line">14 15 16 17 18 19 20  11 12 13 14 15 16 17   9 10 11 12 13 14 15  </span><br><span class="line">21 22 23 24 25 26 27  18 19 20 21 22 23 24  16 17 18 19 20 21 22  </span><br><span class="line">28 29 30 31           25 26 27 28 29 30     23 24 25 26 27 28 29  </span><br><span class="line">                                            30 31                 </span><br><span class="line">##输出当前日期</span><br><span class="line">hisen@ubuntu:~$ date</span><br><span class="line">Tue Mar 14 11:48:14 CST 2017</span><br><span class="line">##格式化输出年月日</span><br><span class="line">hisen@ubuntu:~$ date &quot;+%Y-%m-%d&quot;</span><br><span class="line">2017-03-14</span><br><span class="line">##格式化输出当前时间</span><br><span class="line">hisen@ubuntu:~$ date &quot;+%H:%M:%S&quot;</span><br><span class="line">11:49:10</span><br><span class="line">##格式化输出年月日时间</span><br><span class="line">hisen@ubuntu:~$ date &quot;+%Y-%m-%d %H:%M:%S&quot; </span><br><span class="line">2017-03-14 11:49:18</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 查看日志文件常用命令</title>
    <url>/20170407-linux-log-command/</url>
    <content><![CDATA[<p>linux查看日志文件内容命令tail、cat、tac、head、echo</p>
<p>tail -f test.log</p>
<p>你会看到屏幕不断有内容被打印出来. 这时候中断第一个进程Ctrl-C,</p>
<p>cat -n hisen.log | grep ‘907’</p>
<p>在文件当中查找指定的内容，这里是查询：907</p>
<hr>
<p>linux 如何显示一个文件的某几行(中间几行)</p>
<p>从第3000行开始，显示1000行。即显示3000~3999行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat filename | tail -n +3000 | head -n 1000</span><br></pre></td></tr></table></figure>
<p>显示1000行到3000行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat filename| head -n 3000 | tail -n +1000</span><br></pre></td></tr></table></figure>
<p>*注意两种方法的顺序<br>分解：</p>
<ol>
<li>tail -n 1000：显示最后1000行</li>
<li>tail -n +1000：从1000行开始显示，显示1000行以后的</li>
<li>head -n 1000：显示前面1000行</li>
</ol>
<p>用sed命令<br>sed -n ‘5,10p’ filename 这样你就可以只查看文件的第5行到第10行。</p>
<p>例：cat mylog.log | tail -n 1000 #输出mylog.log 文件最后一千行</p>
<hr>
<p>cat主要有三大功能：</p>
<p>1.一次显示整个文件。$ cat filename</p>
<p>2.从键盘创建一个文件。$ cat &gt; filename</p>
<p>只能创建新文件,不能编辑已有文件.</p>
<p>3.将几个文件合并为一个文件： $cat file1 file2 &gt; file</p>
<p>参数：</p>
<p>-n 或 –number 由 1 开始对所有输出的行数编号</p>
<p>-b 或 –number-nonblank 和 -n 相似，只不过对于空白行不编号</p>
<p>-s 或 –squeeze-blank 当遇到有连续两行以上的空白行，就代换为一行的空白行</p>
<p>-v 或 –show-nonprinting</p>
<p>例：</p>
<p>把 textfile1 的档案内容加上行号后输入 textfile2 这个档案里</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat -n textfile1 &gt; textfile2</span><br></pre></td></tr></table></figure>
<p>把 textfile1 和 textfile2 的档案内容加上行号（空白行不加）之后将内容附加到 textfile3 里。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat -b textfile1 textfile2 &gt;&gt; textfile3</span><br></pre></td></tr></table></figure>
<p>把test.txt文件扔进垃圾箱，赋空值test.txt</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat /dev/null &gt; /etc/test.txt</span><br></pre></td></tr></table></figure>

<p>注意：&gt;意思是创建，&gt;&gt;是追加。千万不要弄混了。</p>
<hr>
<p>tac (反向列示)</p>
<p>tac 是将 cat 反写过来，所以他的功能就跟 cat 相反， cat 是由第一行到最后一行连续显示在萤幕上，</p>
<p>而 tac 则是由最后一行到第一行反向在萤幕上显示出来！</p>
<hr>
<p>在Linux中echo命令用来在标准输出上显示一段字符，比如：<br>echo “the echo command test!”</p>
<p>这个就会输出“the echo command test!”这一行文字！</p>
<p>echo “the echo command test!”&gt;a.sh</p>
<p>这个就会在a.sh文件中输出“the echo command test!”这一行文字！</p>
<p>该命令的一般格式为： echo [ -n ] 字符串其中选项n表示输出文字后不换行；字符串能加引号，也能不加引号。</p>
<p>用echo命令输出加引号的字符串时，将字符串原样输出；</p>
<p>用echo命令输出不加引号的字符串时，将字符串中的各个单词作为字符串输出，各字符串之间用一个空格分割。</p>
<h2 id="一些实例"><a href="#一些实例" class="headerlink" title="一些实例"></a>一些实例</h2><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#在整个文件搜索含有907的内容</span><br><span class="line">hisen@ubuntu:~/dl$ cat -n hisen.log | grep &#x27;907&#x27;</span><br><span class="line">    25	[2017-04-07 03:49:04,907] Artifact ssm_study:war exploded: Art</span><br><span class="line">    26	[2017-04-07 03:49:04,907] Artifact ssm_study:war exploded: Dep</span><br><span class="line"></span><br><span class="line">#从第3行开始,显示10行 即：3~12 并且显示行号</span><br><span class="line">hisen@ubuntu:~/dl$ cat -n hisen.log | tail -n +3 | head -n 10</span><br><span class="line">     3	07-Apr-2017 15:48:50.072 信息 [main] org.apache.coyote.Abstrac</span><br><span class="line">     4	07-Apr-2017 15:48:50.137 信息 [main] Using a shared selector f</span><br><span class="line">     5	07-Apr-2017 15:48:50.172 测试 [main] Initializing ProtocolHand</span><br><span class="line">     6	07-Apr-2017 15:48:50.186 信息 [main] Using a shared selector f</span><br><span class="line">     7	07-Apr-2017 15:48:50.187 你猜 [main] load Initialization proce</span><br><span class="line">     8	07-Apr-2017 15:48:50.261 信息 [main] StandardService.startInte</span><br><span class="line">     9	07-Apr-2017 15:48:50.261 信息 [main] Servlet Engine: Apache To</span><br><span class="line">    10	07-Apr-2017 15:48:50.293 信息 [main] Starting ProtocolHandler</span><br><span class="line">    11	07-Apr-2017 15:48:50.318 哪里 [main] ProtocolHandler [ajp-nio-</span><br><span class="line">    12	07-Apr-2017 15:48:50.328 信息 [main] start Server startup in 1</span><br><span class="line">#显示10行前三行</span><br><span class="line">hisen@ubuntu:~/dl$ cat -n hisen.log | head -n +10 | tail -n 3</span><br><span class="line">     8	07-Apr-2017 15:48:50.261 信息 [main] StandardService.startInte</span><br><span class="line">     9	07-Apr-2017 15:48:50.261 信息 [main] Servlet Engine: Apache To</span><br><span class="line">    10	07-Apr-2017 15:48:50.293 信息 [main] Starting ProtocolHandler</span><br><span class="line"></span><br><span class="line">#显示3-10行</span><br><span class="line">hisen@ubuntu:~/dl$ cat -n hisen.log | head -n 10 | tail -n +3</span><br><span class="line">     3	07-Apr-2017 15:48:50.072 信息 [main] org.apache.coyote.Abstrac</span><br><span class="line">     4	07-Apr-2017 15:48:50.137 信息 [main] Using a shared selector f</span><br><span class="line">     5	07-Apr-2017 15:48:50.172 测试 [main] Initializing ProtocolHand</span><br><span class="line">     6	07-Apr-2017 15:48:50.186 信息 [main] Using a shared selector f</span><br><span class="line">     7	07-Apr-2017 15:48:50.187 你猜 [main] load Initialization proce</span><br><span class="line">     8	07-Apr-2017 15:48:50.261 信息 [main] StandardService.startInte</span><br><span class="line">     9	07-Apr-2017 15:48:50.261 信息 [main] Servlet Engine: Apache To</span><br><span class="line">    10	07-Apr-2017 15:48:50.293 信息 [main] Starting ProtocolHandler</span><br><span class="line"></span><br><span class="line">#显示倒数第二行</span><br><span class="line">hisen@ubuntu:~/dl$ cat -n hisen.log | tail -n 2</span><br><span class="line">    25	[2017-04-07 03:49:04,907] Artifact ssm_study:war exploded: Art</span><br><span class="line">    26	[2017-04-07 03:49:04,907] Artifact ssm_study:war exploded: Dep</span><br><span class="line"></span><br><span class="line">#从24行开始，显示到最后</span><br><span class="line">hisen@ubuntu:~/dl$ cat -n hisen.log | tail -n +24</span><br><span class="line">    24	07-Apr-2017 15:49:04.585 信息 during time.</span><br><span class="line">    25	[2017-04-07 03:49:04,907] Artifact ssm_study:war exploded: Art</span><br><span class="line">    26	[2017-04-07 03:49:04,907] Artifact ssm_study:war exploded: Dep</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>log4j:WARN No appenders could be found for logger</title>
    <url>/20170208-log4j-WARN-No-appenders-could-be-found-for-logger/</url>
    <content><![CDATA[<p>解决办法为：在项目的src下面新建file名为log4j.properties文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">###设置</span><br><span class="line">log4j.rootLogger = debug,stdout,D,E</span><br><span class="line"></span><br><span class="line">###输出信息到控制抬</span><br><span class="line">log4j.appender.stdout = org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.Target = System.out</span><br><span class="line">log4j.appender.stdout.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern = [%-5p] %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; method:%l%n%m%n</span><br><span class="line"></span><br><span class="line">###输出DEBUG 级别以上的日志到=E://logs/error.log</span><br><span class="line">log4j.appender.D = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.D.File = E://logs/log.log</span><br><span class="line">log4j.appender.D.Append = true</span><br><span class="line">log4j.appender.D.Threshold = DEBUG </span><br><span class="line">log4j.appender.D.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.D.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n</span><br><span class="line"></span><br><span class="line">###输出ERROR 级别以上的日志到=E://logs/error.log</span><br><span class="line">log4j.appender.E = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.E.File =E://logs/error.log </span><br><span class="line">log4j.appender.E.Append = true</span><br><span class="line">log4j.appender.E.Threshold = ERROR </span><br><span class="line">log4j.appender.E.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.E.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n</span><br></pre></td></tr></table></figure>
<p>log4j详细使用方法:<a href="http://www.codeceo.com/article/log4j-usage.html" target="_blank">点击查看</a></p>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>log4j</tag>
      </tags>
  </entry>
  <entry>
    <title>log4j日志信息插入mysql数据库</title>
    <url>/20170321-log4j%E6%97%A5%E5%BF%97%E4%BF%A1%E6%81%AF%E6%8F%92%E5%85%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<p>以前不知道这玩意还能直接插入MySQL数据库</p>
<p>我是使用IDEA，maven</p>
<p>具体的目录结果见github：<a href="https://github.com/hisen-yuan/IDEAPractice/tree/master/src/main/Java/com/hisen/log4j/log4j2MySQL" target="_blank">github</a></p>
<h2 id="log4j配置文件"><a href="#log4j配置文件" class="headerlink" title="log4j配置文件"></a>log4j配置文件</h2><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#可以设置级别：debug&gt;info&gt;error</span><br><span class="line">#debug：显示debug、info、error</span><br><span class="line">#info：显示info、error</span><br><span class="line">#error：只error</span><br><span class="line">log4j.rootLogger=debug,info,database</span><br><span class="line">#注意的地方database 对应 log4j.appender.database.URL的database 若认log4j.rootLogger=debug,info,db 那么 log4j.appender.database.URL的database 要改成db</span><br><span class="line">#log4j.appender.logfile=org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">#log4j.appender.logfile.DatePattern=.yyyy-MM-dd</span><br><span class="line">#log4j.appender.logfile.layout=org.apache.log4j.PatternLayout</span><br><span class="line">#输出到控制台</span><br><span class="line">#log4j.appender.appender1=org.apache.log4j.ConsoleAppender</span><br><span class="line">#样式为TTCCLayout</span><br><span class="line">#log4j.appender.appender1.layout=org.apache.log4j.TTCCLayout</span><br><span class="line">#设置级别：</span><br><span class="line">#log4j.rootLogger=debug,appender1</span><br><span class="line"></span><br><span class="line">#输出到文件(这里默认为追加方式)</span><br><span class="line">#log4j.appender.appender1=org.apache.log4j.FileAppender</span><br><span class="line">#设置文件输出路径</span><br><span class="line">#【1】文本文件</span><br><span class="line">#log4j.appender.appender1.File=c:/Log4JDemo02.log</span><br><span class="line">#【2】HTML文件</span><br><span class="line">log4j.appender.appender1.File=c:/Log4JDemo02.html   </span><br><span class="line">#设置文件输出样式</span><br><span class="line">#log4j.appender.appender1.layout=org.apache.log4j.TTCCLayout</span><br><span class="line">log4j.appender.appender1.layout=org.apache.log4j.HTMLLayout  </span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %p [%c] - - &lt;%m&gt;%n</span><br><span class="line">log4j.appender.logfile=org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.logfile.DatePattern=.yyyy-MM-dd</span><br><span class="line">log4j.appender.logfile.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.logfile.layout.ConversionPattern=%d %p [%c] wang- &lt;%m&gt;%n</span><br><span class="line">#下面是配置将日志信息插入数据库，</span><br><span class="line">#配置输出目标为数据库（假如要将日志在控制台输出，配置为log4j.appender. stdout =org.apache.log4j.ConsoleAppender；将日志写入文件，配置为log4j.appender.logfile=org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">#这样的配置在许多地方都要有，需要可查有关资料）,当然你也可以自己扩展org.apache.log4j.jdbc.JDBCAppender这个类，只需要在这里配置就可以了例如我们配置我自己扩展的MyJDBCAppender，配置为#log4j.appender.db=com.neam.commons.MyJDBCAppender</span><br><span class="line">log4j.appender.database.Threshold=info</span><br><span class="line">#定义什么级别的错误将写入到数据库中</span><br><span class="line">log4j.appender.database.BufferSize=1</span><br><span class="line">#设置缓存大小，就是当有1条日志信息是才往数据库插一次</span><br><span class="line">log4j.appender.database=org.apache.log4j.jdbc.JDBCAppender</span><br><span class="line">log4j.appender.database.driver=com.mysql.jdbc.Driver</span><br><span class="line">#设置要将日志插入到数据库的驱动</span><br><span class="line">log4j.appender.database.URL=jdbc:mysql://127.0.0.1:3306/log4j?useUnicode=true&amp;characterEncoding=UTF-8</span><br><span class="line">log4j.appender.database.user=root</span><br><span class="line">log4j.appender.database.password=hisen</span><br><span class="line"></span><br><span class="line">log4j.appender.database.sql=insert into log (Class,Mothod,createTime,LogLevel,MSG) values (&#x27;%C&#x27;,&#x27;%M&#x27;,&#x27;%d&#123;yyyy-MM-dd HH:mm:ss&#125;&#x27;,&#x27;%p&#x27;,&#x27;%m&#x27;)</span><br><span class="line">log4j.appender.database.layout=org.apache.log4j.PatternLayout</span><br></pre></td></tr></table></figure>

<h2 id="测试类"><a href="#测试类" class="headerlink" title="测试类"></a>测试类</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.log4j.log4j2MySQL;</span><br><span class="line"></span><br><span class="line">import org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 测试一下log4j把日志插入到mysql数据库</span><br><span class="line"> * 插入语句和数据库配置在log4j的配置文件中</span><br><span class="line"> * Created by hisenyuan on 2017/3/21 at 14:23.</span><br><span class="line"> */</span><br><span class="line">public class Log4jDemo &#123;</span><br><span class="line">    private static Logger logger = Logger.getLogger(Log4jDemo.class);</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        logger.debug(&quot;这是debug信息&quot;);</span><br><span class="line">        // 记录info级别的信息</span><br><span class="line">        logger.info(&quot;这是info信息&quot;);</span><br><span class="line">        logger.info(&quot;这里做了一个XX操作，入库，做操作日志&quot;);</span><br><span class="line">        // 记录error级别的信息</span><br><span class="line">        logger.error(&quot;这是error信息&quot;);</span><br><span class="line">        hisen();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void hisen() &#123;</span><br><span class="line">        logger.debug(&quot;这是方法中debug信息&quot;);</span><br><span class="line">        // 记录info级别的信息</span><br><span class="line">        logger.info(&quot;这是方法中info信息&quot;);</span><br><span class="line">        // 记录error级别的信息</span><br><span class="line">        logger.error(&quot;这是方法中error信息&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>mac docker compose timezone 问题解决</title>
    <url>/20181221-mac%20docker%20compose%20timezone%20%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<h1 id="一、背景介绍"><a href="#一、背景介绍" class="headerlink" title="一、背景介绍"></a>一、背景介绍</h1><p>想用docker搭建一个lnmp环境</p>
<p>使用这个脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://github.com/buxiaomo/docker-compose/tree/master/lnmp</span><br></pre></td></tr></table></figure>

<p>执行命令之后报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-compose -f lnmp.yml up -d</span><br><span class="line">WARNING: Some services (mysql, nginx, php, redis) use the &#x27;deploy&#x27; key, which will be ignored. Compose does not support &#x27;deploy&#x27; configuration - use `docker stack deploy` to deploy to a swarm.</span><br><span class="line">WARNING: Some services (mysql, nginx, php) use the &#x27;configs&#x27; key, which will be ignored. Compose does not support &#x27;configs&#x27; configuration - use `docker stack deploy` to deploy to a swarm.</span><br><span class="line">lnmp_mysql_1 is up-to-date</span><br><span class="line">Starting lnmp_redis_1 ...</span><br><span class="line">lnmp_nginx_1 is up-to-date</span><br><span class="line">Starting lnmp_redis_1 ... error</span><br><span class="line"></span><br><span class="line">ERROR: for lnmp_redis_1  Cannot start service redis: b&#x27;Mounts denied: \r\nThe path /usr/share/zoneinfo/Asia/Shanghai\r\nis not shared from OS X and is not known to Docker.\r\nYou can configure shared paths from Docker -&gt; Preferences... -&gt; File Sharing.\r\nSee https://docs.docker.com/docker-for-mac/osxfs/#namespaces for more info.\r\n.&#x27;</span><br><span class="line"></span><br><span class="line">                    memory: 100M</span><br><span class="line">ERROR: for redis  Cannot start service redis: b&#x27;Mounts denied: \r\nThe path /usr/share/zoneinfo/Asia/Shanghai\r\nis not shared from OS X and is not known to Docker.\r\nYou can configure shared paths from Docker -&gt; Preferences... -&gt; File Sharing.\r\nSee https://docs.docker.com/docker-for-mac/osxfs/#namespaces for more info.\r\n.&#x27;</span><br><span class="line">ERROR: Encountered errors while bringing up the project.</span><br></pre></td></tr></table></figure>

<h1 id="二、报错原因"><a href="#二、报错原因" class="headerlink" title="二、报错原因"></a>二、报错原因</h1><ol>
<li>mac机器的时间路径与linux不一样</li>
<li>lnmp.yml redis用到了这个时间</li>
</ol>
<h1 id="三、解决办法"><a href="#三、解决办法" class="headerlink" title="三、解决办法"></a>三、解决办法</h1><ol>
<li>查看当前机器时间文件真实位置(&#x2F;etc&#x2F;localtime 这个路径是不让共享给docker的)</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ls -la /etc/localtime</span><br><span class="line">lrwxr-xr-x  1 root  wheel  39 10 19 11:13 /etc/localtime -&gt; /var/db/timezone/zoneinfo/Asia/Shanghai</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>设置位置 ：Docker -&gt; Preferences… -&gt; File Sharing</li>
<li>新增共享目录：&#x2F;var&#x2F;db&#x2F;timezone</li>
<li>apply &amp; restart</li>
<li>修改lnmp.yml配置文件 全局替换：&#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;Asia&#x2F;Shanghai 为：&#x2F;var&#x2F;db&#x2F;timezone&#x2F;zoneinfo&#x2F;Asia&#x2F;Shanghai</li>
</ol>
<h1 id="四、成功信息"><a href="#四、成功信息" class="headerlink" title="四、成功信息"></a>四、成功信息</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-compose -f lnmp.yml up -d</span><br><span class="line">WARNING: Some services (mysql, nginx, php, redis) use the &#x27;deploy&#x27; key, which will be ignored. Compose does not support &#x27;deploy&#x27; configuration - use `docker stack deploy` to deploy to a swarm.</span><br><span class="line">WARNING: Some services (mysql, nginx, php) use the &#x27;configs&#x27; key, which will be ignored. Compose does not support &#x27;configs&#x27; configuration - use `docker stack deploy` to deploy to a swarm.</span><br><span class="line">Removing lnmp_redis_1</span><br><span class="line">Starting lnmp_nginx_1                ... done</span><br><span class="line">Starting lnmp_mysql_1                ... done</span><br><span class="line">Recreating f5b9db566588_lnmp_redis_1 ... done</span><br><span class="line">Starting lnmp_php_1                  ... done</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>mac安装Go环境 &amp; IDE(GoLand) &amp; 基本运行方法(标准输入)</title>
    <url>/20180908-mac%E5%AE%89%E8%A3%85Go%E7%8E%AF%E5%A2%83%20&amp;%20IDE(GoLand)%20&amp;%20%E5%9F%BA%E6%9C%AC%E8%BF%90%E8%A1%8C%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h2 id="一、安装GO"><a href="#一、安装GO" class="headerlink" title="一、安装GO"></a>一、安装GO</h2><p>1.1 使用Homebrew安装go环境(如果很慢，可以换个源)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">brew install go</span><br></pre></td></tr></table></figure>
<p>1.2 查看安装信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go env</span><br></pre></td></tr></table></figure>
<p>主要关注如下输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GOROOT=&quot;/usr/local/Cellar/go/1.10.3/libexec&quot; # 安装目录</span><br></pre></td></tr></table></figure>
<p>1.3 配置环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi ~/.bash_profile # 没有的话会新建一个文件</span><br></pre></td></tr></table></figure>
<p>输入如下内容，第一行是安装的目录，第三行是工作目录(可以改成自己喜欢的路径)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GOROOT=/usr/local/Cellar/go/1.10.3/libexec</span><br><span class="line">export GOROOT</span><br><span class="line">export GOPATH=/Users/hisenyuan/golang</span><br><span class="line">export GOBIN=$GOPATH/bin</span><br><span class="line">export PATH=$PATH:$GOBIN:$GOROOT/bin</span><br></pre></td></tr></table></figure>
<p>1.4 让配置文件生效并且查看环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source ~/.bash_profile</span><br><span class="line">go env # 这时你会发现环境变量已经有改变</span><br></pre></td></tr></table></figure>

<h2 id="二、安装GoLand"><a href="#二、安装GoLand" class="headerlink" title="二、安装GoLand"></a>二、安装GoLand</h2><p>我是习惯了用jetbrains的idea</p>
<p>发现它家也有go语言的IDE GoLand</p>
<p>于是就去官网下载，安装，找个注册码，修改一下host防止注册码失效</p>
<p>这里就不再累赘了</p>
<h2 id="三、运行需要输入的程序"><a href="#三、运行需要输入的程序" class="headerlink" title="三、运行需要输入的程序"></a>三、运行需要输入的程序</h2><p>买了一本《Go语言程序设计》</p>
<span id="more"></span>
<p>有些程序需要从标准输入获取信息，然后进行处理，例如dup2</p>
<p>运行之后不知道该肿么办，百度一番之后发现了方法</p>
<p>命令行：Ctl + D</p>
<p>GoLand：command + D</p>
<p>贴一段程序和运行的结果</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// dup2 打印输入中多次出现的文本和行数</span></span><br><span class="line"><span class="comment">// 它从stdin或指定的文件到文件列表读取</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	counts := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">	files := os.Args[<span class="number">1</span>:]</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(files) == <span class="number">0</span> &#123;</span><br><span class="line">		countLines(os.Stdin, counts)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">for</span> _, arg := <span class="keyword">range</span> files &#123;</span><br><span class="line">			f, err := os.Open(arg)</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">				fmt.Fprintf(os.Stderr, <span class="string">&quot;dup2: %v\n&quot;</span>, err)</span><br><span class="line">				<span class="keyword">continue</span></span><br><span class="line">			&#125;</span><br><span class="line">			countLines(f, counts)</span><br><span class="line">			f.Close()</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> line, n := <span class="keyword">range</span> counts &#123;</span><br><span class="line">		<span class="keyword">if</span> n &gt; <span class="number">1</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;%d\t%s\n&quot;</span>, n, line)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countLines</span><span class="params">(f *os.File, counts <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	input := bufio.NewScanner(f)</span><br><span class="line">	<span class="keyword">for</span> input.Scan()&#123;</span><br><span class="line">		counts[input.Text()]++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 执行的过程中，得按command d</span></span><br><span class="line"><span class="comment">//123</span></span><br><span class="line"><span class="comment">//123</span></span><br><span class="line"><span class="comment">//123</span></span><br><span class="line"><span class="comment">//111</span></span><br><span class="line"><span class="comment">//222</span></span><br><span class="line"><span class="comment">//222</span></span><br><span class="line"><span class="comment">//112</span></span><br><span class="line"><span class="comment">//111^D</span></span><br><span class="line"><span class="comment">//3	123</span></span><br><span class="line"><span class="comment">//2	222</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>maven环境搭建</title>
    <url>/20170214-maven%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h2 id="一、环境的配置"><a href="#一、环境的配置" class="headerlink" title="一、环境的配置"></a>一、环境的配置</h2><ol>
<li>下载maven：<a href="http://maven.apache.org/download.cgi" target="_blank">http://maven.apache.org/download.cgi</a></li>
<li>解压到相关目录</li>
<li>配置环境变量：计算机—系统属性—高级系统设置—环境变量</li>
<li>系统变量新建：M2_HOME 变量值：C:\tool\JAVA\apache-maven-3.3.9</li>
<li>path中添加：%M2_HOME%\bin; (注意看看前面有没有分号隔开，没有添上)</li>
<li>启动cmd，输入mvm -v可以查看版本</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T00:41:47+08:00)</span><br><span class="line">Maven home: C:\tool\JAVA\apache-maven-3.3.9</span><br><span class="line">Java version: 1.7.0_51, vendor: Oracle Corporation</span><br><span class="line">Java home: C:\hisenwork\Java\jdk1.7.0_51\jre</span><br><span class="line">Default locale: zh_CN, platform encoding: GBK</span><br><span class="line">OS name: &quot;windows 8&quot;, version: &quot;6.2&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;</span><br></pre></td></tr></table></figure>

<h2 id="二、自定义设置-优化"><a href="#二、自定义设置-优化" class="headerlink" title="二、自定义设置(优化)"></a>二、自定义设置(优化)</h2><p>1.自定义下载目录，修改配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\hisenwork\soft\maven-3.3.9\conf\settings.xml</span><br></pre></td></tr></table></figure>
<p><strong>C:\hisenwork\soft\maven-3.3.9</strong>为你解压的maven路径</p>
<hr>
<p>**ps：**如果不想自己设置，我有现成的settings.xml，直接复制粘贴，覆盖原来的即可<br>现成的settings.xml内容我放在底部</p>
<span id="more"></span>
<p>搜索：localRepository</p>
<p>在注释外添加以下代码，以后下载maven相关文件就会在这</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--自定义存放目录--&gt;</span><br><span class="line">  &lt;localRepository&gt;C:\hisenwork\soft\maven</span><br><span class="line">&lt;/localRepository&gt;</span><br></pre></td></tr></table></figure>
<p>2.自定义镜像(推荐阿里云，速度飞快)</p>
<p>搜索：mirrors</p>
<p>在里面添加：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--阿里云--&gt;</span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">	&lt;id&gt;nexus-aliyun&lt;/id&gt;</span><br><span class="line">	&lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</span><br><span class="line">	&lt;name&gt;Nexus aliyun&lt;/name&gt;</span><br><span class="line">	&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt; </span><br></pre></td></tr></table></figure>

<p>3.运行命令初始化maven</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn  help:system</span><br></pre></td></tr></table></figure>
<p>然后你会看到命令行飞快的移动，在你刚刚设置的目录下会出现很多东西</p>
<p>类似于这样</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ mvn  help:system</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.5/maven-clean-plugin-2.5.pom</span><br><span class="line">Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.5/maven-clean-plugin-2.5.pom (4 KB at 1.8 KB/sec)</span><br><span class="line">Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/22/maven-plugins-22.pom</span><br><span class="line">Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/22/maven-plugins-22.pom (13 KB at 15.9 KB/sec)</span><br><span class="line">Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/21/maven-parent-21.pom</span><br><span class="line">Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/21/maven-parent-21.pom (26 KB at 15.5 KB/sec)</span><br><span class="line">Downloading: https://repo.maven.apache.org/maven2/org/apache/apache/10/apache-10.pom</span><br><span class="line">Downloaded: https://repo.maven.apache.org/maven2/org/apache/apache/10/apache-10.pom (15 KB at 19.3 KB/sec)</span><br><span class="line">Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.5/maven-clean-plugin-2.5.jar</span><br><span class="line">Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.5/maven-clean-plugin-2.5.jar (25 KB at 30.6 KB/sec)</span><br><span class="line">Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install-plugin/2.4/maven-install-plugin-2.4.pom</span><br><span class="line">Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install-plugin/2.4/maven-install-plugin-2.4.pom (7 KB at 5.5 KB/sec)</span><br><span class="line">Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/23/maven-plugins-23.pom</span><br><span class="line">Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/23/maven-plugins-23.pom (9 KB at 8.2 KB/sec)</span><br><span class="line">Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/22/maven-parent-22.pom</span><br><span class="line">Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/22/maven-parent-22.pom (30 KB at 7.9 KB/sec)</span><br><span class="line">Downloading: https://repo.maven.apache.org/maven2/org/apache/apache/11/apache-11.pom</span><br><span class="line">Downloaded: https://repo.maven.apache.org/maven2/org/apache/apache/11/apache-11.pom (15 KB at 12.8 KB/sec)</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time: 49.223 s</span><br><span class="line">[INFO] Finished at: 2017-02-14T13:09:33+08:00</span><br><span class="line">[INFO] Final Memory: 11M/152M</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<h2 id="三、maven相关命令"><a href="#三、maven相关命令" class="headerlink" title="三、maven相关命令"></a>三、maven相关命令</h2><p>创建 Maven 项目</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn archetype:create</span><br></pre></td></tr></table></figure>
<p>编译源代码（编译到target文件夹中）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn compile</span><br></pre></td></tr></table></figure>
<p>编译测试代码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn test-compile</span><br></pre></td></tr></table></figure>
<p>运行应用程序中的单元测试</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn test</span><br></pre></td></tr></table></figure>
<p>生成项目相关信息的网站</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn site</span><br></pre></td></tr></table></figure>
<p>清除目标目录中的生成结果（把默认target文件夹中的数据清理）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn clean</span><br></pre></td></tr></table></figure>
<p>项目打包</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn package</span><br></pre></td></tr></table></figure>
<p>将打包好的包安装到本地仓库中，以使其塔项目能够调用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn install</span><br></pre></td></tr></table></figure>
<p>生成 Eclipse 项目文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn eclipse:eclipse</span><br></pre></td></tr></table></figure>
<p>忽略测试文档编译</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mvn -Dmaven.test.skip=true</span><br></pre></td></tr></table></figure>
<p>部署到私有服务器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cargo:deploy</span><br></pre></td></tr></table></figure>

<h2 id="四、settings-xml"><a href="#四、settings-xml" class="headerlink" title="四、settings.xml"></a>四、settings.xml</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">author：HiSEN</span><br><span class="line">website：http://hisen.me</span><br><span class="line">--&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">Licensed to the Apache Software Foundation (ASF) under one</span><br><span class="line">or more contributor license agreements.  See the NOTICE file</span><br><span class="line">distributed with this work for additional information</span><br><span class="line">regarding copyright ownership.  The ASF licenses this file</span><br><span class="line">to you under the Apache License, Version 2.0 (the</span><br><span class="line">&quot;License&quot;); you may not use this file except in compliance</span><br><span class="line">with the License.  You may obtain a copy of the License at</span><br><span class="line"></span><br><span class="line">    http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"></span><br><span class="line">Unless required by applicable law or agreed to in writing,</span><br><span class="line">software distributed under the License is distributed on an</span><br><span class="line">&quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span><br><span class="line">KIND, either express or implied.  See the License for the</span><br><span class="line">specific language governing permissions and limitations</span><br><span class="line">under the License.</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line"> | This is the configuration file for Maven. It can be specified at two levels:</span><br><span class="line"> |</span><br><span class="line"> |  1. User Level. This settings.xml file provides configuration for a single user,</span><br><span class="line"> |                 and is normally provided in $&#123;user.home&#125;/.m2/settings.xml.</span><br><span class="line"> |</span><br><span class="line"> |                 NOTE: This location can be overridden with the CLI option:</span><br><span class="line"> |</span><br><span class="line"> |                 -s /path/to/user/settings.xml</span><br><span class="line"> |</span><br><span class="line"> |  2. Global Level. This settings.xml file provides configuration for all Maven</span><br><span class="line"> |                 users on a machine (assuming they&#x27;re all using the same Maven</span><br><span class="line"> |                 installation). It&#x27;s normally provided in</span><br><span class="line"> |                 $&#123;maven.home&#125;/conf/settings.xml.</span><br><span class="line"> |</span><br><span class="line"> |                 NOTE: This location can be overridden with the CLI option:</span><br><span class="line"> |</span><br><span class="line"> |                 -gs /path/to/global/settings.xml</span><br><span class="line"> |</span><br><span class="line"> | The sections in this sample file are intended to give you a running start at</span><br><span class="line"> | getting the most out of your Maven installation. Where appropriate, the default</span><br><span class="line"> | values (values used when the setting is not specified) are provided.</span><br><span class="line"> |</span><br><span class="line"> |--&gt;</span><br><span class="line">&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span><br><span class="line">          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">          xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;</span><br><span class="line">  &lt;!-- localRepository</span><br><span class="line">   | The path to the local repository maven will use to store artifacts.</span><br><span class="line">   |</span><br><span class="line">   | Default: $&#123;user.home&#125;/.m2/repository</span><br><span class="line">  &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</span><br><span class="line">  --&gt;</span><br><span class="line">  &lt;!--自定义存放目录--&gt;</span><br><span class="line">  &lt;localRepository&gt;C:\hisenwork\soft\maven</span><br><span class="line">  &lt;/localRepository&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- interactiveMode</span><br><span class="line">   | This will determine whether maven prompts you when it needs input. If set to false,</span><br><span class="line">   | maven will use a sensible default value, perhaps based on some other setting, for</span><br><span class="line">   | the parameter in question.</span><br><span class="line">   |</span><br><span class="line">   | Default: true</span><br><span class="line">  &lt;interactiveMode&gt;true&lt;/interactiveMode&gt;</span><br><span class="line">  --&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- offline</span><br><span class="line">   | Determines whether maven should attempt to connect to the network when executing a build.</span><br><span class="line">   | This will have an effect on artifact downloads, artifact deployment, and others.</span><br><span class="line">   |</span><br><span class="line">   | Default: false</span><br><span class="line">  &lt;offline&gt;false&lt;/offline&gt;</span><br><span class="line">  --&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- pluginGroups</span><br><span class="line">   | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.</span><br><span class="line">   | when invoking a command line like &quot;mvn prefix:goal&quot;. Maven will automatically add the group identifiers</span><br><span class="line">   | &quot;org.apache.maven.plugins&quot; and &quot;org.codehaus.mojo&quot; if these are not already contained in the list.</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;pluginGroups&gt;</span><br><span class="line">    &lt;!-- pluginGroup</span><br><span class="line">     | Specifies a further group identifier to use for plugin lookup.</span><br><span class="line">    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/pluginGroups&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- proxies</span><br><span class="line">   | This is a list of proxies which can be used on this machine to connect to the network.</span><br><span class="line">   | Unless otherwise specified (by system property or command-line switch), the first proxy</span><br><span class="line">   | specification in this list marked as active will be used.</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;proxies&gt;</span><br><span class="line">    &lt;!-- proxy</span><br><span class="line">     | Specification for one proxy, to be used in connecting to the network.</span><br><span class="line">     |</span><br><span class="line">    &lt;proxy&gt;</span><br><span class="line">      &lt;id&gt;optional&lt;/id&gt;</span><br><span class="line">      &lt;active&gt;true&lt;/active&gt;</span><br><span class="line">      &lt;protocol&gt;http&lt;/protocol&gt;</span><br><span class="line">      &lt;username&gt;proxyuser&lt;/username&gt;</span><br><span class="line">      &lt;password&gt;proxypass&lt;/password&gt;</span><br><span class="line">      &lt;host&gt;proxy.host.net&lt;/host&gt;</span><br><span class="line">      &lt;port&gt;80&lt;/port&gt;</span><br><span class="line">      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;</span><br><span class="line">    &lt;/proxy&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/proxies&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- servers</span><br><span class="line">   | This is a list of authentication profiles, keyed by the server-id used within the system.</span><br><span class="line">   | Authentication profiles can be used whenever maven must make a connection to a remote server.</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;servers&gt;</span><br><span class="line">    &lt;!-- server</span><br><span class="line">     | Specifies the authentication information to use when connecting to a particular server, identified by</span><br><span class="line">     | a unique name within the system (referred to by the &#x27;id&#x27; attribute below).</span><br><span class="line">     |</span><br><span class="line">     | NOTE: You should either specify username/password OR privateKey/passphrase, since these pairings are</span><br><span class="line">     |       used together.</span><br><span class="line">     |</span><br><span class="line">    &lt;server&gt;</span><br><span class="line">      &lt;id&gt;deploymentRepo&lt;/id&gt;</span><br><span class="line">      &lt;username&gt;repouser&lt;/username&gt;</span><br><span class="line">      &lt;password&gt;repopwd&lt;/password&gt;</span><br><span class="line">    &lt;/server&gt;</span><br><span class="line">    --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Another sample, using keys to authenticate.</span><br><span class="line">    &lt;server&gt;</span><br><span class="line">      &lt;id&gt;siteServer&lt;/id&gt;</span><br><span class="line">      &lt;privateKey&gt;/path/to/private/key&lt;/privateKey&gt;</span><br><span class="line">      &lt;passphrase&gt;optional; leave empty if not used.&lt;/passphrase&gt;</span><br><span class="line">    &lt;/server&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/servers&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- mirrors</span><br><span class="line">   | This is a list of mirrors to be used in downloading artifacts from remote repositories.</span><br><span class="line">   |</span><br><span class="line">   | It works like this: a POM may declare a repository to use in resolving certain artifacts.</span><br><span class="line">   | However, this repository may have problems with heavy traffic at times, so people have mirrored</span><br><span class="line">   | it to several places.</span><br><span class="line">   |</span><br><span class="line">   | That repository definition will have a unique id, so we can create a mirror reference for that</span><br><span class="line">   | repository, to be used as an alternate download site. The mirror site will be the preferred</span><br><span class="line">   | server for that repository.</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;mirrors&gt;</span><br><span class="line">    &lt;!-- mirror</span><br><span class="line">     | Specifies a repository mirror site to use instead of a given repository. The repository that</span><br><span class="line">     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used</span><br><span class="line">     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.</span><br><span class="line">     |</span><br><span class="line">    &lt;mirror&gt;</span><br><span class="line">      &lt;id&gt;mirrorId&lt;/id&gt;</span><br><span class="line">      &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;</span><br><span class="line">      &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;</span><br><span class="line">      &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt;</span><br><span class="line">    &lt;/mirror&gt;</span><br><span class="line">     --&gt;</span><br><span class="line">	&lt;!--阿里云--&gt;</span><br><span class="line">	&lt;mirror&gt;</span><br><span class="line">		&lt;id&gt;nexus-aliyun&lt;/id&gt;</span><br><span class="line">		&lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</span><br><span class="line">		&lt;name&gt;Nexus aliyun&lt;/name&gt;</span><br><span class="line">		&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span><br><span class="line">	&lt;/mirror&gt; </span><br><span class="line">  &lt;/mirrors&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- profiles</span><br><span class="line">   | This is a list of profiles which can be activated in a variety of ways, and which can modify</span><br><span class="line">   | the build process. Profiles provided in the settings.xml are intended to provide local machine-</span><br><span class="line">   | specific paths and repository locations which allow the build to work in the local environment.</span><br><span class="line">   |</span><br><span class="line">   | For example, if you have an integration testing plugin - like cactus - that needs to know where</span><br><span class="line">   | your Tomcat instance is installed, you can provide a variable here such that the variable is</span><br><span class="line">   | dereferenced during the build process to configure the cactus plugin.</span><br><span class="line">   |</span><br><span class="line">   | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles</span><br><span class="line">   | section of this document (settings.xml) - will be discussed later. Another way essentially</span><br><span class="line">   | relies on the detection of a system property, either matching a particular value for the property,</span><br><span class="line">   | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a</span><br><span class="line">   | value of &#x27;1.4&#x27; might activate a profile when the build is executed on a JDK version of &#x27;1.4.2_07&#x27;.</span><br><span class="line">   | Finally, the list of active profiles can be specified directly from the command line.</span><br><span class="line">   |</span><br><span class="line">   | NOTE: For profiles defined in the settings.xml, you are restricted to specifying only artifact</span><br><span class="line">   |       repositories, plugin repositories, and free-form properties to be used as configuration</span><br><span class="line">   |       variables for plugins in the POM.</span><br><span class="line">   |</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;profiles&gt;</span><br><span class="line">    &lt;!-- profile</span><br><span class="line">     | Specifies a set of introductions to the build process, to be activated using one or more of the</span><br><span class="line">     | mechanisms described above. For inheritance purposes, and to activate profiles via &lt;activatedProfiles/&gt;</span><br><span class="line">     | or the command line, profiles have to have an ID that is unique.</span><br><span class="line">     |</span><br><span class="line">     | An encouraged best practice for profile identification is to use a consistent naming convention</span><br><span class="line">     | for profiles, such as &#x27;env-dev&#x27;, &#x27;env-test&#x27;, &#x27;env-production&#x27;, &#x27;user-jdcasey&#x27;, &#x27;user-brett&#x27;, etc.</span><br><span class="line">     | This will make it more intuitive to understand what the set of introduced profiles is attempting</span><br><span class="line">     | to accomplish, particularly when you only have a list of profile id&#x27;s for debug.</span><br><span class="line">     |</span><br><span class="line">     | This profile example uses the JDK version to trigger activation, and provides a JDK-specific repo.</span><br><span class="line">    &lt;profile&gt;</span><br><span class="line">      &lt;id&gt;jdk-1.4&lt;/id&gt;</span><br><span class="line"></span><br><span class="line">      &lt;activation&gt;</span><br><span class="line">        &lt;jdk&gt;1.4&lt;/jdk&gt;</span><br><span class="line">      &lt;/activation&gt;</span><br><span class="line"></span><br><span class="line">      &lt;repositories&gt;</span><br><span class="line">        &lt;repository&gt;</span><br><span class="line">          &lt;id&gt;jdk14&lt;/id&gt;</span><br><span class="line">          &lt;name&gt;Repository for JDK 1.4 builds&lt;/name&gt;</span><br><span class="line">          &lt;url&gt;http://www.myhost.com/maven/jdk14&lt;/url&gt;</span><br><span class="line">          &lt;layout&gt;default&lt;/layout&gt;</span><br><span class="line">          &lt;snapshotPolicy&gt;always&lt;/snapshotPolicy&gt;</span><br><span class="line">        &lt;/repository&gt;</span><br><span class="line">      &lt;/repositories&gt;</span><br><span class="line">    &lt;/profile&gt;</span><br><span class="line">    --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">     | Here is another profile, activated by the system property &#x27;target-env&#x27; with a value of &#x27;dev&#x27;,</span><br><span class="line">     | which provides a specific path to the Tomcat instance. To use this, your plugin configuration</span><br><span class="line">     | might hypothetically look like:</span><br><span class="line">     |</span><br><span class="line">     | ...</span><br><span class="line">     | &lt;plugin&gt;</span><br><span class="line">     |   &lt;groupId&gt;org.myco.myplugins&lt;/groupId&gt;</span><br><span class="line">     |   &lt;artifactId&gt;myplugin&lt;/artifactId&gt;</span><br><span class="line">     |</span><br><span class="line">     |   &lt;configuration&gt;</span><br><span class="line">     |     &lt;tomcatLocation&gt;$&#123;tomcatPath&#125;&lt;/tomcatLocation&gt;</span><br><span class="line">     |   &lt;/configuration&gt;</span><br><span class="line">     | &lt;/plugin&gt;</span><br><span class="line">     | ...</span><br><span class="line">     |</span><br><span class="line">     | NOTE: If you just wanted to inject this configuration whenever someone set &#x27;target-env&#x27; to</span><br><span class="line">     |       anything, you could just leave off the &lt;value/&gt; inside the activation-property.</span><br><span class="line">     |</span><br><span class="line">    &lt;profile&gt;</span><br><span class="line">      &lt;id&gt;env-dev&lt;/id&gt;</span><br><span class="line"></span><br><span class="line">      &lt;activation&gt;</span><br><span class="line">        &lt;property&gt;</span><br><span class="line">          &lt;name&gt;target-env&lt;/name&gt;</span><br><span class="line">          &lt;value&gt;dev&lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">      &lt;/activation&gt;</span><br><span class="line"></span><br><span class="line">      &lt;properties&gt;</span><br><span class="line">        &lt;tomcatPath&gt;/path/to/tomcat/instance&lt;/tomcatPath&gt;</span><br><span class="line">      &lt;/properties&gt;</span><br><span class="line">    &lt;/profile&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/profiles&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- activeProfiles</span><br><span class="line">   | List of profiles that are active for all builds.</span><br><span class="line">   |</span><br><span class="line">  &lt;activeProfiles&gt;</span><br><span class="line">    &lt;activeProfile&gt;alwaysActiveProfile&lt;/activeProfile&gt;</span><br><span class="line">    &lt;activeProfile&gt;anotherAlwaysActiveProfile&lt;/activeProfile&gt;</span><br><span class="line">  &lt;/activeProfiles&gt;</span><br><span class="line">  --&gt;</span><br><span class="line">&lt;/settings&gt;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>mongodb - failed with errno13 Permission denied</title>
    <url>/20170712-mongodb%20-%20failed%20with%20errno%2013%20Permission%20denied/</url>
    <content><![CDATA[<p>在命令行输入：mongo报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@ubuntu:~$ mongo</span><br><span class="line">MongoDB shell version: 3.2.13</span><br><span class="line">connecting to: test</span><br><span class="line">2017-07-11T23:11:23.827+0800 I STORAGE  [main] In File::open(), ::open for &#x27;/home/hisen/.mongorc.js&#x27; failed with errno:13 Permission denied</span><br><span class="line">The &quot;.mongorc.js&quot; file located in your home folder could not be executed</span><br></pre></td></tr></table></figure>
<p>看倒数第二行，应该是权限的问题，于是</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@ubuntu:~$ sudo chown -R hisen /home/hisen/.mongorc.js</span><br><span class="line">hisen@ubuntu:~$ mongo</span><br><span class="line">MongoDB shell version: 3.2.13</span><br><span class="line">connecting to: test</span><br><span class="line">Server has startup warnings: </span><br><span class="line">2017-07-11T23:11:15.845+0800 I CONTROL  [initandlisten] </span><br><span class="line">2017-07-11T23:11:15.845+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is &#x27;always&#x27;.</span><br><span class="line">2017-07-11T23:11:15.845+0800 I CONTROL  [initandlisten] **        We suggest setting it to &#x27;never&#x27;</span><br><span class="line">2017-07-11T23:11:15.845+0800 I CONTROL  [initandlisten] </span><br><span class="line">2017-07-11T23:11:15.845+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is &#x27;always&#x27;.</span><br><span class="line">2017-07-11T23:11:15.845+0800 I CONTROL  [initandlisten] **        We suggest setting it to &#x27;never&#x27;</span><br><span class="line">2017-07-11T23:11:15.845+0800 I CONTROL  [initandlisten] </span><br></pre></td></tr></table></figure>
<p>完美解决，用户权限的问题。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title>mybatis - Invalid bound statement (not found)</title>
    <url>/20170802-mybatis%20-%20Invalid%20bound%20statement%20(not%20found)/</url>
    <content><![CDATA[<p>运行报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.hisen.dao.UserMapper.insert</span><br></pre></td></tr></table></figure>
<p>使用mybatis生成插件，产生的mapper，由于路径不对移动了一下mapper.Java文件</p>
<p>所以造成mapper.xml里面的namespace错误，无法映射</p>
<p>所以把namespace改为正确的即可</p>
<p>例如：</p>
<p>mapper.UserMapper</p>
<p>改为</p>
<p>com.hisen.dao.UserMapper</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>mybatis常用jdbctype</title>
    <url>/20170310-mybatis%E5%B8%B8%E7%94%A8jdbctype/</url>
    <content><![CDATA[<p>Mybatis中JavaType和jdbcType对应关系</p>
<table>
<thead>
<tr>
<th align="left">JDBC Type</th>
<th align="left">Java Type</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CHAR</td>
<td align="left">String</td>
</tr>
<tr>
<td align="left">VARCHAR</td>
<td align="left">String</td>
</tr>
<tr>
<td align="left">LONGVARCHAR</td>
<td align="left">String</td>
</tr>
<tr>
<td align="left">NUMERIC</td>
<td align="left">Java.math.BigDecimal</td>
</tr>
<tr>
<td align="left">DECIMAL</td>
<td align="left">Java.math.BigDecimal</td>
</tr>
<tr>
<td align="left">BIT</td>
<td align="left">boolean</td>
</tr>
<tr>
<td align="left">BOOLEAN</td>
<td align="left">boolean</td>
</tr>
<tr>
<td align="left">TINYINT</td>
<td align="left">byte</td>
</tr>
<tr>
<td align="left">SMALLINT</td>
<td align="left">short</td>
</tr>
<tr>
<td align="left">INTEGER</td>
<td align="left">int</td>
</tr>
<tr>
<td align="left">BIGINT</td>
<td align="left">long</td>
</tr>
<tr>
<td align="left">REAL</td>
<td align="left">float</td>
</tr>
<tr>
<td align="left">FLOAT</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">DOUBLE</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">BINARY</td>
<td align="left">byte[]</td>
</tr>
<tr>
<td align="left">VARBINARY</td>
<td align="left">byte[]</td>
</tr>
<tr>
<td align="left">LONGVARBINARY</td>
<td align="left">byte[]</td>
</tr>
<tr>
<td align="left">DATE</td>
<td align="left">Java.sql.Date</td>
</tr>
<tr>
<td align="left">TIME</td>
<td align="left">Java.sql.Time</td>
</tr>
<tr>
<td align="left">TIMESTAMP</td>
<td align="left">Java.sql.Timestamp</td>
</tr>
<tr>
<td align="left">CLOB</td>
<td align="left">Clob</td>
</tr>
<tr>
<td align="left">BLOB</td>
<td align="left">Blob</td>
</tr>
<tr>
<td align="left">ARRAY</td>
<td align="left">Array</td>
</tr>
<tr>
<td align="left">DISTINCT</td>
<td align="left">mapping of underlying type</td>
</tr>
<tr>
<td align="left">STRUCT</td>
<td align="left">Struct</td>
</tr>
<tr>
<td align="left">REF</td>
<td align="left">Ref</td>
</tr>
<tr>
<td align="left">DATALINK</td>
<td align="left">Java.net.URL</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>mybatis：No constructor found in xxx matching</title>
    <url>/20170317-mybatis%EF%BC%9ANo%20constructor%20found%20in%20xxx%20matching%20%5BJava.lang.Integer,%20Java.lang.String,%20Java.lang.Integer%5D/</url>
    <content><![CDATA[<p>如下错误提示：</p>
<p>mybatis：No constructor found in xxx matching [Java.lang.Integer, Java.lang.String, Java.lang.Integer]</p>
<p>原因：xxx 这个bean缺少一个默认的构造方法！</p>
<hr>
<p>解决：加上默认的构造方法即可</p>
<hr>
<p>我是在单元测试的时候遇到这个问题</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL分页查询</title>
    <url>/20200712-mysql-page-query/</url>
    <content><![CDATA[<h1 id="零、分页查询"><a href="#零、分页查询" class="headerlink" title="零、分页查询"></a>零、分页查询</h1><p>分页查询一般都会想到 offset limit</p>
<h2 id="问题1"><a href="#问题1" class="headerlink" title="问题1"></a>问题1</h2><p>当不停机需要全量同步数据时<br>有可能会漏掉或者重复处理很多数据<br>因为中途会有数据改动<br>每次分页内的数据与预期的会有出入</p>
<h2 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h2><p>offset 会进行全表扫描</p>
<h1 id="一、推荐方案"><a href="#一、推荐方案" class="headerlink" title="一、推荐方案"></a>一、推荐方案</h1><p>通过不变的字段进行排序<br>最好是使用递增的主键索引</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select *</span><br><span class="line">  from hisen</span><br><span class="line">where id &gt; $&#123;lastId&#125;</span><br><span class="line">  order by id</span><br><span class="line">limit $&#123;pageSize&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="二、参考"><a href="#二、参考" class="headerlink" title="二、参考"></a>二、参考</h1><span id="more"></span>
<p><a href="https://hackernoon.com/please-dont-use-offset-and-limit-for-your-pagination-8ux3u4y">请不要将OFFSET和LIMIT用于分页</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>new ImageIcon()无法加载同目录图片</title>
    <url>/20170208-new-ImageIcon-%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD%E5%90%8C%E7%9B%AE%E5%BD%95%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<p>错误：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">new ImageIcon(&quot;1.jpg&quot;)</span><br></pre></td></tr></table></figure>
<p>正确：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">new ImageIcon(&quot;src/com/hisen/thread/progressbar/1.jpg&quot;)</span><br></pre></td></tr></table></figure>
<p>图片路径：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">test\src\com\hisen\thread\progressbar\1.jpg</span><br></pre></td></tr></table></figure>
<p>所谓的相对路径，是相对于这个工程而言的，而不是当前文件夹而言。</p>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>jframe</tag>
      </tags>
  </entry>
  <entry>
    <title>powerdesigner Oracle mysql comment 缺少右括号</title>
    <url>/20170622-powerdesigner%20Oracle%20mysql%20comment%20%E7%BC%BA%E5%B0%91%E5%8F%B3%E6%8B%AC%E5%8F%B7/</url>
    <content><![CDATA[<p>powerdesigner Oracle mysql comment 缺少右括号</p>
<p>今天人家给我个powerdesigner设计好的表</p>
<p>要我去间数据库，直接复制出来去oracle执行，结果报错。</p>
<p>在comment附近，如果把comment去掉则可以正确执行</p>
<p>最后找到罪魁祸首：powerdesigner没有设置对数据库</p>
<p>解决办法，在powerdesigner页面</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">database--&gt;change curren DBMS </span><br></pre></td></tr></table></figure>
<p>上面是设置你需要的数据库</p>
<p>下面是为更改前的数据库</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>rabbitMQ的安装和Demo</title>
    <url>/20180111-rabbitMQ%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8CDemo/</url>
    <content><![CDATA[<h1 id="零、rabbitMQ介绍"><a href="#零、rabbitMQ介绍" class="headerlink" title="零、rabbitMQ介绍"></a>零、rabbitMQ介绍</h1><p><a href="http://blog.csdn.net/whycold/article/details/41119807">rabbitMQ详细介绍</a></p>
<ol>
<li>如果某个queue有多个订阅，消息分均分到消费者，而不是所有人都收到全部</li>
<li>接收消息有ack(acknowledgment)机制，发送消息是没有这个机制的</li>
<li>生产者将消息发送到Exchange（交换器），由Exchange将消息路由到一个或多个Queue中（或者丢弃）。</li>
</ol>
<h1 id="一、在ununtu上安装"><a href="#一、在ununtu上安装" class="headerlink" title="一、在ununtu上安装"></a>一、在ununtu上安装</h1><h2 id="1-1-安装"><a href="#1-1-安装" class="headerlink" title="1.1 安装"></a>1.1 安装</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo &#x27;deb http://www.rabbitmq.com/debian/ testing main&#x27; | sudo tee /etc/apt/sources.list.d/rabbitmq.list</span><br><span class="line"></span><br><span class="line">wget -O- https://www.rabbitmq.com/rabbitmq-release-signing-key.asc | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line">sudo apt-get install rabbitmq-server</span><br></pre></td></tr></table></figure>
<h2 id="1-2-配置"><a href="#1-2-配置" class="headerlink" title="1.2 配置"></a>1.2 配置</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 打开管理页面功能</span><br><span class="line">sudo rabbitmq-plugins enable rabbitmq_management</span><br><span class="line"># 查看安装的插件</span><br><span class="line">sudo rabbitmqctl list_users</span><br><span class="line"># 查看用户</span><br><span class="line">sudo rabbitmqctl list_users</span><br><span class="line"># 新增管理员用户</span><br><span class="line">sudo rabbitmqctl add_user admin admin</span><br><span class="line"># 授予管理员权限</span><br><span class="line">sudo rabbitmqctl set_user_tags admin administrator</span><br><span class="line"># 管理页面地址，用刚设置的账户登录管理页面</span><br></pre></td></tr></table></figure>
<p> <a href="http://127.0.0.1:15672/">http://127.0.0.1:15672</a></p>
<h1 id="二、Java小Demo"><a href="#二、Java小Demo" class="headerlink" title="二、Java小Demo"></a>二、Java小Demo</h1><h2 id="2-1-遇到的问题"><a href="#2-1-遇到的问题" class="headerlink" title="2.1 遇到的问题"></a>2.1 遇到的问题</h2><ol>
<li><p>ACCESS_REFUSED - Login was refused using authentication mechanism PLAIN.<br>帐号密码错误，建议使用2.3配置的账户，guest账户不靠谱</p>
</li>
<li><p>connection error<br>ip或者port错误，确认信息是否正确，虚拟机的话看看端口映射是否正常</p>
</li>
</ol>
<h2 id="2-2-配置用户"><a href="#2-2-配置用户" class="headerlink" title="2.2 配置用户"></a>2.2 配置用户</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 添加普通用户</span><br><span class="line">sudo rabbitmqctl add_user hisen hisen</span><br><span class="line"># 添加权限</span><br><span class="line">rabbitmqctl set_permissions -p &quot;/&quot;  hisen &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br><span class="line"># 列出用户权限</span><br><span class="line">rabbitmqctl list_user_permissions hisen</span><br></pre></td></tr></table></figure>
<h2 id="2-3-添加maven依赖"><a href="#2-3-添加maven依赖" class="headerlink" title="2.3 添加maven依赖"></a>2.3 添加maven依赖</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;5.0.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-4-发送端代码"><a href="#2-4-发送端代码" class="headerlink" title="2.4 发送端代码"></a>2.4 发送端代码</h2><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.jars.rabbitmq;</span><br><span class="line"></span><br><span class="line">import com.rabbitmq.client.Channel;</span><br><span class="line">import com.rabbitmq.client.Connection;</span><br><span class="line">import com.rabbitmq.client.ConnectionFactory;</span><br><span class="line">import Java.io.IOException;</span><br><span class="line">import Java.util.concurrent.TimeoutException;</span><br><span class="line"></span><br><span class="line">public class Send &#123;</span><br><span class="line">  // 定义队列名字</span><br><span class="line">  public static final String QUEUE_NAME = &quot;hello&quot;;</span><br><span class="line"></span><br><span class="line">  public static void main(String[] args) throws IOException, TimeoutException &#123;</span><br><span class="line">    // 创建连接工厂</span><br><span class="line">    ConnectionFactory factory = new ConnectionFactory();</span><br><span class="line">    factory.setHost(&quot;127.0.0.1&quot;);</span><br><span class="line">    factory.setPort(5672);</span><br><span class="line">    factory.setUsername(&quot;hisen&quot;);</span><br><span class="line">    factory.setPassword(&quot;hisen&quot;);</span><br><span class="line">    Connection connection = null;</span><br><span class="line">    Channel channel = null;</span><br><span class="line">    try &#123;</span><br><span class="line">      // 创建连接</span><br><span class="line">      connection = factory.newConnection();</span><br><span class="line">      // 创建信道</span><br><span class="line">      channel = connection.createChannel();</span><br><span class="line">      // 声明一个队列：名称、持久性的（重启仍存在此队列）、非私有的、非自动删除的</span><br><span class="line">      channel.queueDeclare(QUEUE_NAME, false, false, false, null);</span><br><span class="line">      for (int i = 0; i &lt; 10; i++) &#123;</span><br><span class="line">        // 定义消息内容</span><br><span class="line">        String message = &quot;Hello World - &quot; + i;</span><br><span class="line">        // 通过信道发布内容</span><br><span class="line">        channel.basicPublish(&quot;&quot;, QUEUE_NAME, null, message.getBytes());</span><br><span class="line">        System.out.println(&quot;send : &quot; + message);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; catch (TimeoutException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">      if (null!=channel) &#123;</span><br><span class="line">        channel.close();</span><br><span class="line">      &#125;</span><br><span class="line">      if (null!= connection ) &#123;</span><br><span class="line">        connection.close();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-5-接收端代码"><a href="#2-5-接收端代码" class="headerlink" title="2.5 接收端代码"></a>2.5 接收端代码</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.hisen.jars.rabbitmq;</span><br><span class="line"></span><br><span class="line">import com.rabbitmq.client.AMQP.BasicProperties;</span><br><span class="line">import com.rabbitmq.client.Channel;</span><br><span class="line">import com.rabbitmq.client.Connection;</span><br><span class="line">import com.rabbitmq.client.ConnectionFactory;</span><br><span class="line">import com.rabbitmq.client.DefaultConsumer;</span><br><span class="line">import com.rabbitmq.client.Envelope;</span><br><span class="line">import Java.io.IOException;</span><br><span class="line">import Java.util.concurrent.TimeoutException;</span><br><span class="line">import org.joda.time.DateTime;</span><br><span class="line"></span><br><span class="line">public class Receive&#123;</span><br><span class="line">  // 定义队列名字</span><br><span class="line">  public static final String QUEUE_NAME = &quot;hello&quot;;</span><br><span class="line"></span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">    // 创建连接工厂</span><br><span class="line">    ConnectionFactory factory = new ConnectionFactory();</span><br><span class="line">    factory.setHost(&quot;127.0.0.1&quot;);</span><br><span class="line">    factory.setUsername(&quot;hisen&quot;);</span><br><span class="line">    factory.setPassword(&quot;hisen&quot;);</span><br><span class="line">    try &#123;</span><br><span class="line">      // 创建连接</span><br><span class="line">      Connection connection = factory.newConnection();</span><br><span class="line">      // 创建信道</span><br><span class="line">      Channel channel = connection.createChannel();</span><br><span class="line">      // 声明一个队列：名称、持久性的（重启仍存在此队列）、非私有的、非自动删除的</span><br><span class="line">      channel.queueDeclare(QUEUE_NAME, false, false, false, null);</span><br><span class="line">      System.out.println(&quot;watting for message&quot;);</span><br><span class="line"></span><br><span class="line">      /* 定义消费者 */</span><br><span class="line">      DefaultConsumer consumer = new DefaultConsumer(channel) &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void handleDelivery(String consumerTag, Envelope envelope,</span><br><span class="line">            BasicProperties properties, byte[] body)</span><br><span class="line">            throws IOException &#123;</span><br><span class="line">          String message = new String(body, &quot;UTF-8&quot;);</span><br><span class="line">          System.out.println(&quot;Received time:&quot; + new DateTime().toString(&quot;yyyy-MM-dd HH:mm:ss:SSS EE&quot;)+ &quot; the message is -&gt; &quot; + message);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      // 将消费者绑定到队列，并设置自动确认消息（即无需显示确认，如何设置请慎重考虑）</span><br><span class="line">      channel.basicConsume(QUEUE_NAME, true, consumer);</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; catch (TimeoutException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>rabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>读后感：《凤凰架构》</title>
    <url>/20210613-reaction-of-the-fenix-project/</url>
    <content><![CDATA[<h1 id="一、简短感受"><a href="#一、简短感受" class="headerlink" title="一、简短感受"></a>一、简短感受</h1><p>简单介绍，《凤凰架构》作者，周志明。<br>他最出名的书籍非《深入理解Java虚拟机》莫属了<br>书中了解到他对技术的态度，以及持续奋战一线值得学习，《程序员之路》值得一看(底部有链接)。</p>
<p>阅读时间：0531～0612<br>构建凤凰磐涅般的系统<br>介绍了一整套技术体系<br>穿插着技术的来龙去脉<br>着实是一部不错的书籍<br>架构的前提是足够了解<br>综合实际情况做出权衡<br>给人感觉不太像架构书<br>总的来说还是值得一看</p>
<p>用输出倒逼输入<br>这就是写博客等其它输出手段的作用</p>
<p>目前的软件没有烟囱式的，都是金字塔类型，所以底层基础要牢固！</p>
<h1 id="二、部分摘抄"><a href="#二、部分摘抄" class="headerlink" title="二、部分摘抄"></a>二、部分摘抄</h1><span id="more"></span>
<p>四层负载均衡的优势是性能高<br>主要工作在<br>数据链路层(2层)，改写Mac地址<br>网络层(3层)，改写 IP 地址</p>
<p>七层负载均衡的优势是功能强</p>
<p>将简单的校验交给 bean validation，<br>而把复杂校验留给自己，简直就是买株还珠。<br>可以使用自定义注解，优雅地解决校验问题。<br>检查校验项预置好默认提示信息。<br>基础校验直接放在 bean 属性上，业务的单开类。</p>
<p>能够使用确定的操作，促使状态间产生确定的转移结果的计算模型，在计算机科学中被称为状态机。</p>
<p>状态机特性：任何初始状态一样的状态机，如果执行的命令序列一样，则最终达到的状态也一样。(可用于分布式协商…)</p>
<p>广播指令、状态机复制。</p>
<p>让各个系统节点不受局部网络分区、机器崩溃、执行性能、其它因素影响，都能最终表现出整体一致的过程，被称为各个节点的协商共识。</p>
<p>一致性是指数据不同副本之间的差异，<br>共识是指达成一致性的方法与过程。</p>
<p>足可见技术圈里即使再有本事，也需要好好包装一下。paxos 论文发表三次后，被谷歌实现之后，凭着谷歌大拿的高度评价，获得了极大的关注。</p>
<p>操作转移模型<br>状态转移模型</p>
<p>达成共识的三步</p>
<ol>
<li>如何选主</li>
<li>如何把数据复制到各个节点</li>
<li>如何保证过程是安全的</li>
</ol>
<p>网关 ＝ 路由器(基础职能) + 过滤器(可选职能)</p>
<p>打饭解释各种 I&#x2F;O 模型<br>异步 I&#x2F;O ：下完外卖订单后干别的去，骑手送上门<br>同步 I&#x2F;O<br>    阻塞：打饭发现饭还没好，就一直干等着<br>    非阻塞：打饭发现饭还没好，per 3min 看好了没<br>    多路复用：同上，只是一个人可以处理多个请求<br>    信号驱动：发现饭没好，让厨师好了通知你</p>
<p>BFF网关：backends for frontends，针对网关这种边缘节点，对同样的后端集群，裁剪、适配、聚合出不一样的前端服务，有助于后端的稳定，也有助于前端的赋能。</p>
<p>由于服务随时都有可能崩溃，因此快速的失败检测和自动恢复就显得至关重要。</p>
<p>lstio(mesh) 在 1.5 之前是使用微服务架构开发<br>模块如下</p>
<ol>
<li>mixer：鉴权策略与遥测</li>
<li>pilot：对接 envoy 的数据平面，xds 策略分发</li>
<li>galley：配置管理，提供外部配置感知能离</li>
<li>citadel：安全加密，RABC 权限控制</li>
</ol>
<p>微服务的目的是有效拆分应用，实现敏捷开发和部署。</p>
<p>凡事总该现有目的，有预期收益再谈行动才显得合理。</p>
<p>《没有银弹》：硬件的成本能够持续稳定地下降，而软件开发的成本则不可能。</p>
<p>系统的架构趋同于系统设计团队的沟通解构。<br>康威定律核心观点：沟通决定设计</p>
<p>大厂研发收到追捧，出除了企业本身的光环外(来自于哪里？)，有大型系统浸染的经验，更有可能属于技术专家，也是其中的原因。</p>
<p>微服务对普通业务研发友好，但是对架构要求极高。</p>
<p>微服务的前提</p>
<ol>
<li>决策者与执行者都能意识到康威定律在软件设计中的关键作用</li>
<li>组织中具备对微服务有充分理解、有一定实战经验的技术专家</li>
<li>追求以自治为目标的监控、度量能力</li>
<li>复杂性已经成为制约生产力的主要矛盾</li>
</ol>
<p>需要想清楚做一件事的目的是什么？考虑 ROI</p>
<p>长期来看，多数服务端结局都是报废而非演进–Martin Fowler。<br>随说：良好设计的系统，应该是能够报废的，而非一味追求一步到位。</p>
<p>微服务拆分粒度<br>下界：独立(发布 &#x2F; 部署 &#x2F; 运行 &#x2F; 测试)，内聚(本地事务)<br>上界：2 披萨团队 (6~12)在一个研发周期完成全部需求。</p>
<p>治理，系统复杂性下的产物。</p>
<p>软件研发的认知负荷，本质上是来自技术的认知复杂度。</p>
<p>分布式系统早已放弃 Unix 所追求的简单性设计哲学。</p>
<p>治理架构腐化唯一有效的办法就是演进式设计。<br>开发过程中少妥协，否则会形成破窗效应。</p>
<p>Architect 架构师一词从建筑行业借鉴而来，让人容易误解架构师类似于给建筑设计骨架、绘制图纸的建筑架构师。演进式设计更像是“换房子”而不是“造房子”。</p>
<p>先进的生产力都伴随着更高的复杂性，需要有与生产力符合的生产关系来匹配，敏锐地捕捉到生产力的变化，随时调整生产关系，这才是架构师治理复杂性的终极方法。</p>
<p>1992 Java write once，run anywhere。<br>2018 graal vm，run programs faster anywhere。</p>
<p>目前 graal vm<br>优势：启动时间快，打包小，内存消耗少<br>劣势：无法无缝支持动态代理技术，延迟、吞吐量、可监控方面略差，性能劣于 hotspot jit 优化。毕竟是运行时优化，各种分支预测～</p>
<p>将思考具象化。<br>如果不把自己思考的内容输出给他人，<br>我们很容易就被自己所欺骗，<br>误以为自己已经理解得足够完备了。<br>随说：用输出倒逼输入。</p>
<h1 id="三、图书资源"><a href="#三、图书资源" class="headerlink" title="三、图书资源"></a>三、图书资源</h1><p>纸书作者应该还在初版中，目前看的是 PDF.<br>这本书属于开源书籍，开源地址：<a href="http://icyfenix.cn/summary/">《凤凰架构》</a><br>凤凰架构附录的一篇文章不错：<a href="http://icyfenix.cn/tricks/2021/geekbang.html">《程序员之路》</a></p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>read</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis 开发与运维</title>
    <url>/20220523-redis_dev_ops/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>鉴于目前 Redis 使用广泛<br>虽然数据结构、API 比较简单<br>但是想使用好，还是有一定难度<br>建议了解下《Redis 开发与运维》<br>以达到知其然且知其所以然的境界</p>
<h1 id="一、使用场景"><a href="#一、使用场景" class="headerlink" title="一、使用场景"></a>一、使用场景</h1><p>大规模互联网在线应用<br>流量比较大，响应时间要求高<br>Redis 作为一款流行的高性能数据库</p>
<p>对于读多写少的场景，一般作为缓存使用<br>某大型电商订单系统读写比大概在 10:1<br>并且订单读取 90% 的流量都是创建订单当天查询</p>
<p>对于可容忍丢数据，但是对性能有极致要求，<br>比如优惠券发放，流量高，这种情况下当做 DB 用也挺好。</p>
<h1 id="二、问题与建议"><a href="#二、问题与建议" class="headerlink" title="二、问题与建议"></a>二、问题与建议</h1><h2 id="2-1-常见问题"><a href="#2-1-常见问题" class="headerlink" title="2.1 常见问题"></a>2.1 常见问题</h2><ul>
<li>网络抖动导致 redis 操作失败</li>
<li>定时任务清理过期 key 导致 IOPS 高<ul>
<li>redis 做了二次开发，更激进的惰性删除( 针对大面积过期场景 )</li>
</ul>
</li>
<li>热 key 导致流量倾斜<ul>
<li>考虑 Server 端旁路监听，做统计，然后推送到客户端做内存缓存</li>
<li>京东有开源热 Key 方案</li>
</ul>
</li>
<li>redis slot 分配不均匀，导致某节点提前内存告警<ul>
<li>建议分配内存按 slot 分配，而不是节点</li>
</ul>
</li>
</ul>
<h2 id="2-2-建议"><a href="#2-2-建议" class="headerlink" title="2.2 建议"></a>2.2 建议</h2><ul>
<li>缓存时间动态可配</li>
</ul>
<span id="more"></span>
<ul>
<li>上线后根据业务灵活调整，节约资源</li>
<li>大促过程中，扩容来不及，可以根据趋势缩短缓存时间，避免淘汰</li>
<li>使用 ProtoStuff 之类的高效序列化工具</li>
<li>使用 snappy 等高效压缩算法</li>
</ul>
<h1 id="三、阅读摘抄"><a href="#三、阅读摘抄" class="headerlink" title="三、阅读摘抄"></a>三、阅读摘抄</h1><p>《Redis开发与运维》20 1121～1122</p>
<p>dbsize 获取当前数据库中键总数，复杂度 O(1)</p>
<p>keys * 复杂度 O(n)</p>
<p>type key 返回 redis 外部数据结构</p>
<p>object encoding key 返回 redis 内部编码实现</p>
<p>redis 为单线程模型，所有命令都进队列。</p>
<p>redis 单线程为何还这么快？</p>
<ol>
<li>纯内存访问，内存响应约 100 ns，快的基础</li>
<li>非阻塞 I&#x2F;O，事件驱动</li>
<li>单线程避免了线程切换和竞态产生的消耗</li>
</ol>
<p>锁和线程切换通常是性能杀手。</p>
<p>单线程可以简化数据结构和算法。</p>
<p>由于是单线程，所以对每个命令执行时间有要求。<br>redis 是面向快速执行场景的数据库。</p>
<p>mget 结果是按照传入键的顺序返回。</p>
<p>redis 中每个中文占 3 个字节<br>随说：utf-8 汉字 3 ，ascii unicode 2</p>
<p>字符串类型的内部编码有 3 种：</p>
<ol>
<li>int：8 字节的长整形</li>
<li>embstr：≤ 39 字节的字符串</li>
<li>raw：＞ 39 字节的字符串</li>
</ol>
<p>list 的 lrange 操作获取指定索引范围的元素。</p>
<ul>
<li>索引下标从左到右是 0～N-1</li>
<li>索引下标从右到左是 -1～-N</li>
<li>并且 end 包含了自身，很多编程语言不包含</li>
</ul>
<p>对于字符串类型的键，再次执行 set 命令会将上次的过期时间去掉。</p>
<p>纯内存存储、I&#x2F;O多路复用技术、单线程架构是 redis 高性能的三个因素。</p>
<p>了解每个命令的时间复杂度在</p>
<p>redis 命令真正执行的时间通常在微妙级别，所以才会有 redis 性能瓶颈是网络的说法。</p>
<p>原生批命令与 pipeline 的区别：</p>
<ol>
<li>原生批命令是原子的，pipeline 是非原子的</li>
<li>原生一命令多 key，pipeline 支持多命令</li>
<li>原生是 redis 服务端实现，pipeline 客户端+服务端 实现</li>
</ol>
<p>pipeline 只能操作一个 redis 实例，但即使在分布式 redis 场景中，也可以作为批量操作的重要优化手段。</p>
<p>redis 3.2 版本提供了 geo 功能，支持 LBS 服务。<br>geo 功能是 redis 借鉴了 ardb 功能实现，ardb 的作者来自中国。</p>
<p>输出缓冲区由两部分组成：</p>
<ol>
<li>固定缓冲区 16KB，返回比较小的执行结果</li>
<li>动态缓冲区，列表实现，返回较大的结果</li>
</ol>
<p>RESP(Redis Serialization Protocol Redis)，协议。<br>保证客户端与服务端的正常通信，是各种编程语言开发客户端的基础。</p>
<p>jedis 没有内置序列化工具，需要自己选用。<br>page 121 有使用 protostuff (protobuf的Java客户端)进行操作的例子。<br>随说：这块 21 年出实际场景测试过，时间、空间复杂度优化幅度都蛮大</p>
<p>理解 redis 通信原理和建立完善的监控系统对快速定位客户端常见问题非常有帮助。</p>
<p>redis 默认采用 LZF 算法对生成的 RDB 文件做压缩处理，压缩后的文件远远小于内存大小。</p>
<p>正常情况下，fork 操作耗时应该是每 GB 消耗 20 毫秒左右。</p>
<p>redis 是 CPU 密集型服务，不要做绑定单核 CPU 操作。<br>由于子进程非常消耗 CPU，会和父进程产生单核资源竞争。</p>
<p>子进程通过 fork 操作产生，理论上需要两倍的内存来完成持久化，<br>但 Linux 有写时复制机制(copy-on-write)，<br>父子进程会共享相同的物理内存页，<br>当父进程处理写请求时会把要修改的页创建副本，<br>而子进程在 fork 操作过程中共享整个父进程内存快照。</p>
<p>复制功能是高可用 redis 的基础。</p>
<p>主从复制延迟，redis 提供了 repl-disable-tcp-nodelay 参数控制是否关闭，<br>TCP_NODELAY，默认为 no，即开启 TCP_NODELAY 功能，<br>这时主节点会合并较小的 TCP 数据包节省带宽但是增大了主从之间的延迟，<br>适用于跨机房部署。如果为 yes，那么会立即发送，适合同机房网络。</p>
<p>对于写并发量较高的场景，<br>多个从节点会导致主节点写命令的多次发送从而过度消耗网络带宽，<br>同时也加重了主节点的负载影响服务稳定性。</p>
<p>psync 2.8 以上支持，有全量复制，部分复制<br>需要组件支持：</p>
<ol>
<li>主从节点各自复制偏移量</li>
<li>主节点复制积压缓冲区</li>
<li>主节点运行 id</li>
</ol>
<p>redis 支持无盘复制，repl-diskless-sync，试验阶段，<br>rdb 文件不保存到硬盘而直接通过网络发送给从节点。</p>
<p>为了降低主从延迟，<br>一般把 redis 主从部署在同机房 &#x2F; 同城机房，<br>避免网络延迟和网络分区造成的心跳中断等情况。</p>
<p>对于读写分离，会造成从节点数据延迟，<br>可以编写外部监控程序监听主从节点的复制偏移量，<br>当延迟较大时出发报警或者通知客户端避免读取延迟过高的从节点。</p>
<p>为了保证复制一致性，从节点自身永远不会主动删除超时数据。</p>
<p>建议做读写分离之前，<br>可以考虑使用 redis cluster 等分布式解决方案，<br>这样不止扩展了读性能还可以扩展写性能和可支撑数据规模，<br>并且一致性和故障转移也可以得到保证，<br>对客户端的维护逻辑也相对容易。读写分离成本太高</p>
<p>redis-cli –bigkeys<br>把历史扫描过的最大对象统计出来，分析优化</p>
<p>带宽瓶颈通常出现在以下几个方面：</p>
<ol>
<li>机器网卡带宽</li>
<li>机架交换机带宽</li>
<li>房之间专线带宽</li>
</ol>
<p>网络快慢：同物理机 ＞ 同机架 ＞ 跨机架 ＞ 同机房 ＞ 同城机房 ＞ 异地机房<br>随说：但它们的容灾性正好相反</p>
<p>redis 进程的内存消耗主要包括：自身内存 + 对象内存 + 缓冲内存 + 内存碎片。</p>
<p>对象内存是 redis 内存占用最大的一块，存储着用户所有的数据。</p>
<p>输入输出缓冲区在大流量的场景中容易失控，造成 redis 内存的不稳定，需要重点关注。</p>
<p>由于进程内保存大量的键，<br>维护每个键精准的过期删除机制会导致消耗大量的 CPU，<br>对于单线程的 redis 来说成本过高，<br>因此 redis 采用惰性删除和定时任务删除机制实现过期键的内存回收。</p>
<p>在高并发放场景下，建议字符串长度控制在 39 字节以内，<br>以减少 redisObject 内存分配次数，从而提高性能。</p>
<p>尽量减少字符串频繁修改操作如 append、setrange，<br>改为直接使用 set 修改字符串，降低预分配带来的内存浪费和内存碎片化。</p>
<p>redis sentinel 有一套合理的监控机来判断节点不可达，有三个定时任务：</p>
<ol>
<li>每 10s 向主节点发送 info 信息获取最新拓扑</li>
<li>每 2s 向 sentinel 频道发送对主节点的判断以及自身的信息</li>
<li>每 1s sentinel 向主节点、从节点、其余 sentinel 发送 ping 做心跳检测，来确认节点是否可达。</li>
</ol>
<p>redis 使用 raft 算法实现领导者的选举。</p>
<p>redis sentinel 是 redis 的高可用方案实现：故障发现、故障自动转移、配置中心、客户端通知</p>
<p>redis sentinel 模式下，客户端初始化连接的是 sentinel 节点集合，<br>不再是具体的 redis 节点，但 sentinel 只是配置中心不是代理。</p>
<p>redis cluster 是 redis 的分布式解决方案。当遇到单机内存、并发、流量等瓶颈时，<br>可以采用 cluster 架构方案达到负载均衡的目的。</p>
<p>redis cluster 之前的分布式方案：</p>
<ol>
<li>客户端分片，客户端比较重，需要处理路由、高可用、故障转移等问题。</li>
<li>代理方案，部署麻烦，性能损耗。</li>
</ol>
<p>数据分区是分布式存储的核心，<br>理解和灵活运用数据分区规则对于掌握 redis cluster 非常有帮助。</p>
<p>redis cluster 限制：</p>
<ol>
<li>批量操作支持有限，目前 mget、mset 只支持具有相同 slot 值的 key 执行批量操作。</li>
<li>key 事务操作支持有限</li>
<li>key为数据分区最小力度，hash list 在单机</li>
<li>不支持多数据库空间</li>
<li>复制结构只支持一层，不支持嵌套树状</li>
</ol>
<p>在分布式存储中需要提供维护节点元数据信息的机制，<br>所谓元数据是指：节点负责哪些数据，是否出现故障等状态信息。</p>
<p>常见的元数据维护方式分为：集中式、P2P方式</p>
<p>redis cluster 采用 P2P 的 Gossip(流言) 协议，<br>Gossip 协议工作原理就是节点彼此不断通信交换信息，<br>一段时间之后所有节点都会知道集群完整信息。</p>
<p>虽然 Gossip 协议的信息交换机制具有天然的分布式特性，但他是有成本的。<br>redis 集群内节点通信频率为每秒 10次。单次通信消息 ＞ 2KB，<br>消息体携带的数据量根集群节点数息息相关，更大的集群代表更大的通信成本。<br>因此对于 redis 集群来说并不是大而全的集群更好，需要对集群的规模做限制。<br>随说：大规模集群可以考虑使用哨兵模式、或者拆分 redis cluster</p>
<p>集群内 Gossip 消息通信本身会消耗带宽，官方建议集群最大规模在 1000 以内。</p>
<p>redis cluster 可以实现对节点的灵活上下线控制。<br>其中原理可以抽象为槽和对应数据在不同节点之间的灵活移动。</p>
<p>集群伸缩＝槽和数据在节点之间移动。</p>
<p>MOVED 重定向：在集群模式下 redis 接收 key 相关命令先计算对应的槽，再根据槽找到节点，<br>如果节点是自身，则处理命令，否则返回 MOVED 重定向错误，通知客户端请求正确的节点。</p>
<p>键使用大括号包含的内容又叫做 hash_tag，它提供不同的键可以具备相同的 slot 功能，<br>常用于 redis I&#x2F;O 优化。在集群模式下实现 mget mset pipeline 等操作。</p>
<p>smart 客户端通过在内部维护<br>slot → node 的映射关系，本地就可以实现<br>key → node 的查找，从而保证 I&#x2F;O 效率低最大化，而 MOVED 重定向负责协助 smart 客户端更新 slot → node 映射。</p>
<p>jediscluster 解析 cluster slots 结果缓存到本地，为每个节点创建唯一的 jedispool 连接池。</p>
<p>cluster slots 风暴：</p>
<ol>
<li>重试机制导致 I&#x2F;O 通信放大问题</li>
<li>个别节点异常导致频繁获取 slots 信息</li>
<li>频繁触发更新本地 slots 缓存操作，内部用了写锁，阻塞对集群所有的命令调用。</li>
</ol>
<p>针对以上问题，jedis 2.8.2 版本做了改进：</p>
<ol>
<li>当接收到 JedisConnectionException 时不再轻易初始化 slots 缓存，大幅降低内部 I&#x2F;O 次数。</li>
<li>当更新 slots 缓存时，不再使用 ping 检测节点活跃度，并且使用 redis covering 变量保证同一时刻只有一个线程更新 slots 缓存，其它线程忽略，优化了写锁阻塞和 cluster slots 调用次数</li>
</ol>
<p>jedis cluster 中由于 key 分布在不同的节点上，会造成无法实现 mget、mset 等功能。<br>但是可以利用 CRC16 计算出 key → slot，以及 smart 客户端保存 slot → node 的特性，<br>将属于同一个 redis 节点的 key 进行归类，<br>然后分别对每个节点对应的子 key 列表执行 mget 或者 pipeline 操作。</p>
<p>ASK 与 MOVED 都是对客户端重定向控制，ASK 表示集群正在进行 slot 迁移，<br>不知道什么时候完成。MOVED 明确表示 slot 对应的节点，因此需要更新 slot 缓存。</p>
<p>配置纪元的应用场景有：</p>
<ol>
<li>新节点加入</li>
<li>槽节点映射冲突检测</li>
<li>从节点投票选举冲突检测</li>
</ol>
<p>配置纪元的主要作用：</p>
<ol>
<li>标示集群内每个主节点的不同版本和当前集群最大版本。</li>
<li>每次集群发生重要事件，都会递增纪元</li>
<li>大的纪元表示更新的状态</li>
</ol>
<p>唯品会开发的 redis-migrate-tool 支持在线迁移，<br>采用多线程加速，提供数据校验和查看迁移状态等功能。<br>随说：在 github 开源了</p>
<p>缓存更新策略最佳实践</p>
<ol>
<li>低一致性业务建议配置最大内存和淘汰策略</li>
<li>高一致性业务结合 expire 和主动更新</li>
</ol>
<p>缓存粒度问题</p>
<ol>
<li>全部字段缓存通用易维护，报文大性能低</li>
<li>部分字段缓存通用性低，维护复杂，高效<br>随说：考虑使用 hash 全量存，按需取</li>
</ol>
<p>使用布隆过滤器减少缓存击穿，page 351<br>随说：订单业务很难做到，特别是订单量大</p>
<p>无底洞：投入越多不一定产出越多</p>
<ol>
<li>客户端一次批量操作会涉及多次网络开销，节点越多越耗时</li>
<li>网络连接数变多，对性能也会有影响</li>
</ol>
<p>无底洞优化</p>
<ol>
<li>命令本身的优化，例如优化 SQL 语句</li>
<li>减少网络通信次数</li>
<li>降低接入成本，使用连接池 &#x2F; NIO 等</li>
<li>客户端 n 次 get，n 次网络 + n 次 get 命令</li>
<li>客户端 1 次 pipeline get，1 网络 + n get</li>
<li>客户端 1 次 mget，1 网络 + 1 mget<br>随说：以上针对单个 redis 节点，非 cluster</li>
</ol>
<p>NTP 是一种保证不同时钟一致性的服务。</p>
<p>redis cluster | sentinel 如果多个节点时间不一致，<br>会影响日志排查，但不会影响功能，节点依赖各自的时钟。</p>
<p>redis 公网无密码情况下，黑客可以写入公钥，通过设置 rdb 文件目录到 &#x2F;root&#x2F;.ssh 目录，<br>并且文件名设置为 authorized_keys 即可实现免密登录。爆破主机。</p>
<p>redis bind 参数指定的是 redis 和哪个网卡绑定(建议绑定内网)，和客户端什么网段没有关系。</p>
<p>bigkey，一般字符串类型 value 超过 10KB 就是 bigkey 了，但这个值和具体的 OPS 相关。</p>
<p>redis 查看 key 的大小：debug object key<br>看其中的 serializedlength 即可。</p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Java 日志配置文件 - self4j 之 logback 和 log4j</title>
    <url>/20200406-self4j-logback-log4j-log-properties/</url>
    <content><![CDATA[<p>写这种博客总感觉很低级<br>但是不得不承认自己从来没有认真的了解过打日志这件事<br>这里开个头，先从常见的日志配置文件开始，后续再深入了解</p>
<p>“I wish i had” vs “I’m glad i did”<br>人生会不会留下遗憾，在 20 年之后的这两句话中就能看出。<br>希望 20 年后的自己，能够很自豪的说：I’m glad i did.</p>
<h1 id="一、self4j"><a href="#一、self4j" class="headerlink" title="一、self4j"></a>一、self4j</h1><p>这是一个只定义了标准的日志组件</p>
<h1 id="二、logback"><a href="#二、logback" class="headerlink" title="二、logback"></a>二、logback</h1><p>常见配置：logback.xml</p>
<span id="more"></span>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;APP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;hisenyuan-log-project&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--文件输出--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--存储路径--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>/export/log/$&#123;APP&#125;/$&#123;APP&#125;_detail.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--按天分割--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">FileNamePattern</span>&gt;</span>/www/log/$&#123;APP&#125;/$&#123;APP&#125;_detail.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">FileNamePattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yy-MM-dd.HH:mm:ss.SSS&#125; [%-16t] %-5p %-22c&#123;0&#125; %X&#123;trace-id&#125; - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--控制台--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yy-MM-dd.HH:mm:ss.SSS&#125; [%-16t] %-5p %-22c&#123;0&#125; %X&#123;trace-id&#125; - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--你想排除xxx包下面的日志--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;kafka.utils.Logging&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--允许WARN以及以上的打印--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.http&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;WARN&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--日志级别--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--启用日志文件打印日志--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!----&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="三、log4j"><a href="#三、log4j" class="headerlink" title="三、log4j"></a>三、log4j</h1><p>常见配置：log4j.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">log4j</span>:configuration <span class="keyword">SYSTEM</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/doc-files/log4j.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">log4j:configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ConversionPattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%d&#123;yy-MM-dd.HH:mm:ss.SSS&#125; [%-16t] %-5p %-22c&#123;1&#125; - %m%n&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.varia.LevelRangeFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;LevelMin&quot;</span> <span class="attr">value</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;LevelMax&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ERROR&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.DailyRollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;DatePattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#x27;.&#x27;yyyy-MM-dd&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;Append&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/www/log/hisenyuan-log-project.log&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ConversionPattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%d&#123;yy-MM-dd.HH:mm:ss.SSS&#125; [%-16t] %-5p %-22c&#123;1&#125; - %m%n&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.varia.LevelRangeFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;LevelMin&quot;</span> <span class="attr">value</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;LevelMax&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ERROR&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;kafka.utils.Logging&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.http&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">priority</span> <span class="attr">value</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>resteasy fastjson版本冲突问题</title>
    <url>/20190804-resteasy%20fastjson%E7%89%88%E6%9C%AC%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="零、相关介绍"><a href="#零、相关介绍" class="headerlink" title="零、相关介绍"></a>零、相关介绍</h1><p>关键错误信息：<br>Java.lang.RuntimeException: RESTeasy Provider Factory is null, do you have the ResteasyBootstrap listener configured?<br>Java.lang.RuntimeException: Illegal to inject a message body into a singleton into public com.alibaba.fastjson.support.jaxrs.FastJsonProvider(Java.lang.String)</p>
<p>resteasy:JBoss的一个开源项目，提供一套完整的框架帮助开发人员构建RESTful Web Service和RESTful Java应用程序。<br>fastjson:由阿里开发的一个性能很好的Java JSON 解析器和生成器。</p>
<p>引起错误的依赖</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.58&lt;/version&gt;&lt;!--改为：1.1.34.sec01相安无事--&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.1.GA&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jaxrs-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.1.GA&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;resteasy-spring&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.1.GA&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h1 id="一、错误日志"><a href="#一、错误日志" class="headerlink" title="一、错误日志"></a>一、错误日志</h1><p>本地启动Server报错</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2019-08-03 11:51:22,491 ERROR - [RMI TCP Connection(2)-127.0.0.1] - Context initialization failed</span><br><span class="line">Java.lang.RuntimeException: RESTeasy Provider Factory is null, do you have the ResteasyBootstrap listener configured?</span><br><span class="line">	at org.jboss.resteasy.plugins.spring.SpringContextLoaderSupport.customizeContext(SpringContextLoaderSupport.Java:53)</span><br><span class="line">	at org.jboss.resteasy.plugins.spring.SpringContextLoader.customizeContext(SpringContextLoader.Java:30)</span><br><span class="line">	at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.Java:382)</span><br><span class="line">	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.Java:283)</span><br><span class="line">	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.Java:112)</span><br><span class="line">	at org.jboss.resteasy.plugins.spring.SpringContextLoaderListener.contextInitialized(SpringContextLoaderListener.Java:44)</span><br><span class="line">	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.Java:5197)</span><br><span class="line">	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.Java:5720)</span><br><span class="line">	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.Java:145)</span><br><span class="line">	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.Java:1018)</span><br><span class="line">	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.Java:994)</span><br><span class="line">	at org.apache.catalina.core.StandardHost.addChild(StandardHost.Java:662)</span><br><span class="line">	at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.Java:1899)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.Java:301)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.Java:819)</span><br><span class="line">	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.Java:801)</span><br><span class="line">	at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.Java:619)</span><br><span class="line">	at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.Java:566)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.Java:301)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.Java:819)</span><br><span class="line">	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.Java:801)</span><br><span class="line">	at com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.Java:468)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.Java:1487)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.Java:97)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.Java:1328)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.Java:1427)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.Java:848)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.Java:322)</span><br><span class="line">	at sun.rmi.transport.Transport$2.run(Transport.Java:202)</span><br><span class="line">	at sun.rmi.transport.Transport$2.run(Transport.Java:199)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.rmi.transport.Transport.serviceCall(Transport.Java:198)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.Java:567)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.Java:828)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.access$400(TCPTransport.Java:619)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$1.run(TCPTransport.Java:684)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$1.run(TCPTransport.Java:681)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.Java:681)</span><br><span class="line">	at Java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.Java:1145)</span><br><span class="line">	at Java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.Java:615)</span><br><span class="line">	at Java.lang.Thread.run(Thread.Java:745)</span><br></pre></td></tr></table></figure>
<p>tomcat localhost long</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">八月 03, 2019 11:51:22 上午 org.apache.catalina.core.ApplicationContext log</span><br><span class="line">信息: No Spring WebApplicationInitializer types detected on classpath</span><br><span class="line">八月 03, 2019 11:51:22 上午 org.apache.catalina.core.StandardContext listenerStart</span><br><span class="line">严重: Exception sending context initialized event to listener instance of class org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</span><br><span class="line">Java.lang.RuntimeException: Java.lang.RuntimeException: Unable to instantiate MessageBodyReader</span><br><span class="line">	at org.jboss.resteasy.plugins.providers.RegisterBuiltin.register(RegisterBuiltin.Java:35)</span><br><span class="line">	at org.jboss.resteasy.spi.ResteasyDeployment.start(ResteasyDeployment.Java:211)</span><br><span class="line">	at org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap.contextInitialized(ResteasyBootstrap.Java:28)</span><br><span class="line">	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.Java:5197)</span><br><span class="line">	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.Java:5720)</span><br><span class="line">	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.Java:145)</span><br><span class="line">	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.Java:1018)</span><br><span class="line">	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.Java:994)</span><br><span class="line">	at org.apache.catalina.core.StandardHost.addChild(StandardHost.Java:662)</span><br><span class="line">	at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.Java:1899)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.Java:301)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.Java:819)</span><br><span class="line">	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.Java:801)</span><br><span class="line">	at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.Java:619)</span><br><span class="line">	at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.Java:566)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.Java:301)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.Java:819)</span><br><span class="line">	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.Java:801)</span><br><span class="line">	at com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.Java:468)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.Java:1487)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.Java:97)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.Java:1328)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.Java:1427)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.Java:848)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.Java:322)</span><br><span class="line">	at sun.rmi.transport.Transport$2.run(Transport.Java:202)</span><br><span class="line">	at sun.rmi.transport.Transport$2.run(Transport.Java:199)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.rmi.transport.Transport.serviceCall(Transport.Java:198)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.Java:567)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.Java:828)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.access$400(TCPTransport.Java:619)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$1.run(TCPTransport.Java:684)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$1.run(TCPTransport.Java:681)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.Java:681)</span><br><span class="line">	at Java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.Java:1145)</span><br><span class="line">	at Java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.Java:615)</span><br><span class="line">	at Java.lang.Thread.run(Thread.Java:745)</span><br><span class="line">Caused by: Java.lang.RuntimeException: Unable to instantiate MessageBodyReader</span><br><span class="line">	at org.jboss.resteasy.spi.ResteasyProviderFactory.registerProvider(ResteasyProviderFactory.Java:760)</span><br><span class="line">	at org.jboss.resteasy.plugins.providers.RegisterBuiltin.registerProviders(RegisterBuiltin.Java:70)</span><br><span class="line">	at org.jboss.resteasy.plugins.providers.RegisterBuiltin.register(RegisterBuiltin.Java:31)</span><br><span class="line">	... 51 more</span><br><span class="line">Caused by: Java.lang.RuntimeException: Illegal to inject a message body into a singleton into public com.alibaba.fastjson.support.jaxrs.FastJsonProvider(Java.lang.String)</span><br><span class="line">	at org.jboss.resteasy.core.MessageBodyParameterInjector.inject(MessageBodyParameterInjector.Java:209)</span><br><span class="line">	at org.jboss.resteasy.core.ConstructorInjectorImpl.injectableArguments(ConstructorInjectorImpl.Java:63)</span><br><span class="line">	at org.jboss.resteasy.core.ConstructorInjectorImpl.construct(ConstructorInjectorImpl.Java:129)</span><br><span class="line">	at org.jboss.resteasy.spi.ResteasyProviderFactory.getProviderInstance(ResteasyProviderFactory.Java:1038)</span><br><span class="line">	at org.jboss.resteasy.spi.ResteasyProviderFactory.addMessageBodyReader(ResteasyProviderFactory.Java:478)</span><br><span class="line">	at org.jboss.resteasy.spi.ResteasyProviderFactory.registerProvider(ResteasyProviderFactory.Java:756)</span><br><span class="line">	... 53 more</span><br><span class="line"></span><br><span class="line">八月 03, 2019 11:51:22 上午 org.apache.catalina.core.ApplicationContext log</span><br><span class="line">信息: Initializing Spring root WebApplicationContext</span><br><span class="line">八月 03, 2019 11:51:22 上午 org.apache.catalina.core.StandardContext listenerStart</span><br><span class="line">严重: Exception sending context initialized event to listener instance of class org.jboss.resteasy.plugins.spring.SpringContextLoaderListener</span><br><span class="line">Java.lang.RuntimeException: RESTeasy Provider Factory is null, do you have the ResteasyBootstrap listener configured?</span><br><span class="line">	at org.jboss.resteasy.plugins.spring.SpringContextLoaderSupport.customizeContext(SpringContextLoaderSupport.Java:53)</span><br><span class="line">	at org.jboss.resteasy.plugins.spring.SpringContextLoader.customizeContext(SpringContextLoader.Java:30)</span><br><span class="line">	at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.Java:382)</span><br><span class="line">	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.Java:283)</span><br><span class="line">	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.Java:112)</span><br><span class="line">	at org.jboss.resteasy.plugins.spring.SpringContextLoaderListener.contextInitialized(SpringContextLoaderListener.Java:44)</span><br><span class="line">	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.Java:5197)</span><br><span class="line">	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.Java:5720)</span><br><span class="line">	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.Java:145)</span><br><span class="line">	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.Java:1018)</span><br><span class="line">	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.Java:994)</span><br><span class="line">	at org.apache.catalina.core.StandardHost.addChild(StandardHost.Java:662)</span><br><span class="line">	at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.Java:1899)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.Java:301)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.Java:819)</span><br><span class="line">	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.Java:801)</span><br><span class="line">	at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.Java:619)</span><br><span class="line">	at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.Java:566)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.Java:301)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.Java:819)</span><br><span class="line">	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.Java:801)</span><br><span class="line">	at com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.Java:468)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.Java:1487)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.Java:97)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.Java:1328)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.Java:1427)</span><br><span class="line">	at Javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.Java:848)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.Java:57)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.Java:43)</span><br><span class="line">	at Java.lang.reflect.Method.invoke(Method.Java:606)</span><br><span class="line">	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.Java:322)</span><br><span class="line">	at sun.rmi.transport.Transport$2.run(Transport.Java:202)</span><br><span class="line">	at sun.rmi.transport.Transport$2.run(Transport.Java:199)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.rmi.transport.Transport.serviceCall(Transport.Java:198)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.Java:567)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.Java:828)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.access$400(TCPTransport.Java:619)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$1.run(TCPTransport.Java:684)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$1.run(TCPTransport.Java:681)</span><br><span class="line">	at Java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.Java:681)</span><br><span class="line">	at Java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.Java:1145)</span><br><span class="line">	at Java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.Java:615)</span><br><span class="line">	at Java.lang.Thread.run(Thread.Java:745)</span><br></pre></td></tr></table></figure>
<h1 id="三、解决办法"><a href="#三、解决办法" class="headerlink" title="三、解决办法"></a>三、解决办法</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.1.34.sec01&lt;/version&gt;&lt;!--改为：1.1.34.sec01相安无事--&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.1.GA&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jaxrs-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.1.GA&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;resteasy-spring&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.1.GA&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h1 id="四、细节说明"><a href="#四、细节说明" class="headerlink" title="四、细节说明"></a>四、细节说明</h1><p>暂时不知道引起的原因，后期补充</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>shell &amp; expect 实现 MySQL 命令行自动登录</title>
    <url>/20220603-shell-and-expect-for-mysql-auto-login/</url>
    <content><![CDATA[<h1 id="0-背景"><a href="#0-背景" class="headerlink" title="0. 背景"></a>0. 背景</h1><p>由于目前经常需要登录数据库查询相关数据<br>每次进行登录一系列操作，有点费劲<br>于是乎想着看看怎么自动化</p>
<p>限制：需要在堡垒机进行操作</p>
<h1 id="1-知识"><a href="#1-知识" class="headerlink" title="1. 知识"></a>1. 知识</h1><h2 id="1-1-expcet"><a href="#1-1-expcet" class="headerlink" title="1.1 expcet"></a>1.1 expcet</h2><p>expect是一个自动化交互套件，<br>主要应用于执行命令和程序时，<br>系统以交互形式要求输入指定字符串，实现交互通信。</p>
<h2 id="1-2-awk"><a href="#1-2-awk" class="headerlink" title="1.2 awk"></a>1.2 awk</h2><p>Awk是一种便于使用且表达能力强的程序设计语言，<br>可应用于各种计算和数据处理任务。<br><a href="https://awk.readthedocs.io/en/latest/index.html">入门指南</a></p>
<h1 id="2-脚本"><a href="#2-脚本" class="headerlink" title="2. 脚本"></a>2. 脚本</h1><h2 id="2-1-自动登录脚本"><a href="#2-1-自动登录脚本" class="headerlink" title="2.1 自动登录脚本"></a>2.1 自动登录脚本</h2><p>说明：基于 expect<br>文件：mysqlLogin.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr//bin/expect -f</span></span><br><span class="line">set ip [lindex $argv 0]</span><br><span class="line">set port [lindex $argv 1]</span><br><span class="line">set user [lindex $argv 2]</span><br><span class="line">set password [lindex $argv 3]</span><br><span class="line"></span><br><span class="line">spawn mysql -h$ip -u$user -P$port -p</span><br><span class="line">set timeout 1000</span><br><span class="line">expect &quot;Enter password:&quot;</span><br><span class="line">send &quot;$password\r&quot;</span><br><span class="line">expect &quot;&gt;&quot;</span><br><span class="line">send &quot;use xxx_database\r&quot;</span><br><span class="line">interact</span><br></pre></td></tr></table></figure>
<span id="more"></span>

<h2 id="2-2-获取信息并登录"><a href="#2-2-获取信息并登录" class="headerlink" title="2.2 获取信息并登录"></a>2.2 获取信息并登录</h2><p>说明：通过 shell 动态获取登录信息<br>文件：autologin.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/bash</span></span><br><span class="line">ips=`get_single_ip_by_domain hisen.me`</span><br><span class="line">ip=($(echo $ips | awk &#x27;&#123;print $2&#125;&#x27;))</span><br><span class="line">port=($(echo $ips | awk &#x27;&#123;print $3&#125;&#x27;))</span><br><span class="line">echo &quot;+---------------------------+&quot;</span><br><span class="line">echo &quot;| Login to MySQL offline |&quot;</span><br><span class="line">echo &quot;+---------------------------+&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">调用上面的脚本，包含 4 个参数</span></span><br><span class="line">expect /root/soft/login/mysqlLogin.sh $ip $port user pwd</span><br></pre></td></tr></table></figure>

<h2 id="2-3-快捷命令设置"><a href="#2-3-快捷命令设置" class="headerlink" title="2.3 快捷命令设置"></a>2.3 快捷命令设置</h2><p>设置完成之后，输入 ma 命令，即可自动登录到 MySQL 客户端</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat ~/.bashrc</span><br><span class="line">alias ma=&#x27;sh /root/soft/login/autologin.sh&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="3-参考文档"><a href="#3-参考文档" class="headerlink" title="3. 参考文档"></a>3. 参考文档</h1><ul>
<li><a href="https://blog.csdn.net/sky_100/article/details/102589786">shell自动化程序之-MySQL自动登录</a></li>
<li><a href="https://awk.readthedocs.io/en/latest/index.html">awk 入门指南</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>软件工程师面试指引</title>
    <url>/20200805-software-engineer-interview-guide/</url>
    <content><![CDATA[<h1 id="零、关于面试"><a href="#零、关于面试" class="headerlink" title="零、关于面试"></a>零、关于面试</h1><p>面试决定因子：70% 能力、20% 缘分、10% 行情。<br>软件工程师是条不归路，每天进步一点点，早日走上人生巅峰。</p>
<h1 id="一、面经-知识点"><a href="#一、面经-知识点" class="headerlink" title="一、面经&#x2F;知识点"></a>一、面经&#x2F;知识点</h1><p>仓库的内容更多是抛砖引玉，提供通用与重要的技术，<br>真正掌握还得贴合自身需要，花时间持续深入地学习。</p>
<p>基础指引：<a href="https://github.com/Snailclimb/JavaGuide">https://github.com/Snailclimb/JavaGuide</a><br>进阶之路：<a href="https://github.com/doocs/advanced-Java">https://github.com/doocs/advanced-Java</a><br>编程书籍：<a href="https://github.com/jobbole/awesome-programming-books">https://github.com/jobbole/awesome-programming-books</a><br>算法小抄：<a href="https://labuladong.gitbook.io/algo/">https://labuladong.gitbook.io/algo/</a><br>大厂试题：<a href="https://github.com/0voice/interview_internal_reference">https://github.com/0voice/interview_internal_reference</a><br>简历打磨：<a href="https://github.com/geekcompany/ResumeSample/blob/master/Java.md">https://github.com/geekcompany/ResumeSample/blob/master/Java.md</a></p>
<p>后续持续更新，多交流，共同成长。</p>
<h1 id="二、相关内容"><a href="#二、相关内容" class="headerlink" title="二、相关内容"></a>二、相关内容</h1><p><a href="/20210219-teach-or-improve-yourself-computer-science/">计算机科学的自我修炼</a><br><a href="/booklist/">技术人的自我修炼(书单)</a></p>
<h1 id="三、更新记录"><a href="#三、更新记录" class="headerlink" title="三、更新记录"></a>三、更新记录</h1><h2 id="2020-12-18"><a href="#2020-12-18" class="headerlink" title="2020-12-18"></a>2020-12-18</h2><span id="more"></span>
<ol>
<li>新增『算法小抄』，很佩服作者的计划、执行能力。关于作者部分很认同。</li>
</ol>
<h2 id="2021-02-18"><a href="#2021-02-18" class="headerlink" title="2021-02-18"></a>2021-02-18</h2><ol>
<li>新增『计算机科学的自我修炼』相关链接</li>
</ol>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>面试</tag>
      </tags>
  </entry>
  <entry>
    <title>赢得财富：用独到的知识/责任感/杠杆</title>
    <url>/20200517-specific-knowledge-accountability-leverage/</url>
    <content><![CDATA[<h1 id="零、读后感"><a href="#零、读后感" class="headerlink" title="零、读后感"></a>零、读后感</h1><p>美国风险投资家 Naval Ravikant 通过一个很长的推特阐明了他的商业观，感觉挺精辟。<br>积累独到的知识(无法批量复制的)，为社会提供他们需要的。<br>财富不是靠出卖时间获得，应该通过杠杆(资本、人力、一本万利的工具&lt;写书等&gt;)去积累。<br>选择一个可以长期从事的行业，寻找一批可以长期共事的人。</p>
<h1 id="一、原文-及翻译"><a href="#一、原文-及翻译" class="headerlink" title="一、原文(及翻译)"></a>一、原文(及翻译)</h1><ol>
<li><p>Seek wealth, not money or status. Wealth is having assets that earn while you sleep. Money is how we transfer time and wealth. Status is your place in the social hierarchy.</p>
<blockquote>
<p>去寻求财富，而非金钱或地位。财富就是你拥有资产，而资产在你睡觉的时候都还在为你赚钱；金钱是我们转换时间和财富的工具；身份是你在社会等级体系里所处的位置。</p>
</blockquote>
</li>
<li><p>Understand that ethical wealth creation is possible. If you secretly despise wealth, it will elude you.</p>
<blockquote>
<p>要明白一件事：一个人完全可以不靠坑蒙拐骗站着赚取财富。如果你在暗中鄙视财富，那么财富也会躲着你。</p>
</blockquote>
</li>
<li><p>Ignore people playing status games. They gain status by attacking people playing wealth creation games.</p>
<blockquote>
<p>别去理会那些热衷于玩身份游戏的人，他们通过攻击那些创造财富的人以获得自己的身份。</p>
</blockquote>
</li>
<li><p>You’re not going to get rich renting out your time. You must own equity — a piece of a business — to gain your financial freedom.</p>
<blockquote>
<p>你不会通过出租自己的时间而变得富有。你必须拥有产权，也就是生意的一部分，以此才能赢得个人财务自由。</p>
</blockquote>
</li>
</ol>
<span id="more"></span>
<ol start="5">
<li><p>You will get rich by giving society what it wants but does not yet know how to get. At scale.</p>
<blockquote>
<p>提供社会大众想要但是他们还不知道如何获取的东西，你就会因此而致富。但有一点：你必须规模化地供应社会。</p>
</blockquote>
</li>
<li><p>Pick an industry where you can play long term games with long term people.</p>
<blockquote>
<p>选择一个你可以长期从事的产业，寻找一批可以一起长期共事的人。</p>
</blockquote>
</li>
<li><p>The Internet has massively broadened the possible space of careers. Most people haven’t figured this out yet.</p>
<blockquote>
<p>互联网极大拓展了一个人职业生涯的可能性。绝大多数人对此毫无认知。</p>
</blockquote>
</li>
<li><p>Play iterated games. All the returns in life, whether in wealth, relationships, or knowledge, come from compound interest.</p>
<blockquote>
<p>玩就玩复利游戏。无论是财富，人际关系或者是知识，所有你人生里获得的回报，都来自复利。</p>
</blockquote>
</li>
<li><p>Pick business partners with high intelligence, energy, and, above all, integrity.</p>
<blockquote>
<p>在选择商业合作伙伴的时候，选择那些高智商、精力旺盛的家伙，但在这一切之上，他应该是个正直诚实的人。</p>
</blockquote>
</li>
<li><p>Don’t partner with cynics and pessimists. Their beliefs are self-fulfilling.</p>
<blockquote>
<p>不要和愤世嫉俗者和悲观主义者合作，因为他们会任由坏事发生，以此证明他们的负面看法是正确的。</p>
</blockquote>
</li>
<li><p>Learn to sell. Learn to build. If you can do both, you will be unstoppable.</p>
<blockquote>
<p>学会如何销售，学会如何创建。如果你同时能做到这两件事，你的成功将无可阻挡。</p>
</blockquote>
</li>
<li><p>Arm yourself with specific knowledge, accountability, and leverage.</p>
<blockquote>
<p>用独到知识，责任感和杠杆武装自己。</p>
</blockquote>
</li>
<li><p>Specific knowledge is knowledge that you cannot be trained for. If society can train you, it can train someone else, and replace you.</p>
<blockquote>
<p>独到知识是那种不可以通过培训而获得的知识。这是因为，如果这种知识可以经由培训而得，那么其他人同样也可以，并且以此取代你。</p>
</blockquote>
</li>
<li><p>Specific knowledge is found by pursuing your genuine curiosity and passion rather than whatever is hot right now.</p>
<blockquote>
<p>在真正的好奇心和热情驱使你前进的路上，你更有可能获得独到知识，而不是在追逐潮流热点的闻风起舞脚步里。</p>
</blockquote>
</li>
<li><p>Building specific knowledge will feel like play to you but will look like work to others.</p>
<blockquote>
<p>创建独到知识的过程对于你就像是在玩，而对于别人则像是工作。</p>
</blockquote>
</li>
<li><p>When specific knowledge is taught, it’s through apprenticeships, not schools.</p>
<blockquote>
<p>不能通过学校教育教会一个人独到知识，它只能通过学徒制口传身教。</p>
</blockquote>
</li>
<li><p>Specific knowledge is often highly technical or creative. It cannot be outsourced or automated.</p>
<blockquote>
<p>独到知识通常极富技术性和创造性，因此它不能被外包或自动实现。</p>
</blockquote>
</li>
<li><p>Embrace accountability, and take business risks under your own name. Society will reward you with responsibility, equity, and leverage.</p>
<blockquote>
<p>拥抱责任感，押上自己的声誉以承担商业风险。社会也会以责任，产权和杠杆作为回报。</p>
</blockquote>
</li>
<li><p>The most accountable people have singular, public, and risky brands: Oprah, Trump, Kanye, Elon.</p>
<blockquote>
<p>最具责任感的人都具有独一无二的、世人皆知的、敢于冒险的个性特征，如奥普拉、川普、坎耶、埃隆。</p>
</blockquote>
</li>
<li><p>“Give me a lever long enough, and a place to stand, and I will move the earth.” — Archimedes</p>
<blockquote>
<p>只要给我一根足够长的杠杆，一处可以立足的地方，我就能撬起地球。——阿基米德</p>
</blockquote>
</li>
<li><p>Fortunes require leverage. Business leverage comes from capital, people, and products with no marginal cost of replication (code and media).</p>
<blockquote>
<p>财富增长需要使用杠杆。商业杠杆有三个来源：1、资本；2、人力；3、复制起来边际成本为零的产品（如：代码和媒体）。</p>
</blockquote>
</li>
<li><p>Capital means money. To raise money, apply your specific knowledge, with accountability, and show resulting good judgment.</p>
<blockquote>
<p>资本的意思就是钱。想要融资，那就运用你的独到知识，配合你责任感，展示出你良好的判断力。</p>
</blockquote>
</li>
<li><p>Labor means people working for you. It’s the oldest and most fought-over form of leverage. Labor leverage will impress your parents, but don’t waste your life chasing it.</p>
<blockquote>
<p>人力指的就是为你干活的人，它是最古老也是争夺最激烈的杠杆。人力杠杆会让你父母因为你手下有许多人为你工作而感到骄傲，但你不要浪费生命去追求这一点。</p>
</blockquote>
</li>
<li><p>Capital and labor are permissioned leverage. Everyone is chasing capital, but someone has to give it to you. Everyone is trying to lead, but someone has to follow you.</p>
<blockquote>
<p>资本和劳动力是需要征得许可才能使用的杠杆。每个人都在追逐资本，但总得有个什么人给你才行；每个人都想要领导其它人，但总得有什么人愿意跟着你才行。</p>
</blockquote>
</li>
<li><p>Code and media are permissionless leverage. They’re the leverage behind the newly rich. You can create software and media that works for you while you sleep.</p>
<blockquote>
<p>代码和媒体是无需要许可即可使用的杠杆。它们是新贵人群背后的杠杆，你可以通过自己创建的软件和媒体，在睡觉时仍然为你干活。</p>
</blockquote>
</li>
<li><p>An army of robots is freely available — it’s just packed in data centers for heat and space efficiency. Use it.</p>
<blockquote>
<p>一支机器人军团已经集结待命，只是为了节约空间和热效能，它们被打包放进数据中心。去用吧。</p>
</blockquote>
</li>
<li><p>If you can’t code, write books and blogs, record videos and podcasts.</p>
<blockquote>
<p>如果你不会编程，那你还可以写书和博客，或者做视频或者音频节目。</p>
</blockquote>
</li>
<li><p>Leverage is a force multiplier for your judgement.</p>
<blockquote>
<p>杠杆能够成倍地放大你的判断力（所产生的效能）。</p>
</blockquote>
</li>
<li><p>Judgement requires experience, but can be built faster by learning foundational skills.</p>
<blockquote>
<p>判断力需要经验，但它可以通过学习基本技能的方法更快速地建立起来。</p>
</blockquote>
</li>
<li><p>There is no skill called “business.” Avoid business magazines and business classes.</p>
<blockquote>
<p>并不存在一种叫做“商业”的能力。尽量避开商业杂志和商业课程。</p>
</blockquote>
</li>
<li><p>Study microeconomics, game theory, psychology, persuasion, ethics, mathematics, and computers.</p>
<blockquote>
<p>去学习微观经济学、博弈论、心理学、说服术、伦理学、数学和计算机科学。</p>
</blockquote>
</li>
<li><p>Reading is faster than listening. Doing is faster than watching.</p>
<blockquote>
<p>读比听快，做比看快。</p>
</blockquote>
</li>
<li><p>You should be too busy to “do coffee,” while still keeping an uncluttered calendar.</p>
<blockquote>
<p>你应该忙得没有社交的时间才对，与此同时你应该始终保证日程安排井井有条。</p>
</blockquote>
</li>
<li><p>Set and enforce an aspirational personal hourly rate. If fixing a problem will save less than your hourly rate, ignore it. If outsourcing a task will cost less than your hourly rate, outsource it.</p>
<blockquote>
<p>你应该为自己设定一个有抱负的个人时薪数，并且坚持执行。如果解决一个问题所能节省下来的成本低于你的个人时薪，那就忽略这个问题好了；如果一项任务的外包成本低于你的个人时薪，就把它外包出去。</p>
</blockquote>
</li>
<li><p>Work as hard as you can. Even though who you work with and what you work on are more important than how hard you work.</p>
<blockquote>
<p>尽管你跟谁一起工作、做什么工作，要远比你的努力程度更加重要。但还是要倾尽全力去工作。</p>
</blockquote>
</li>
<li><p>Become the best in the world at what you do. Keep redefining what you do until this is true.</p>
<blockquote>
<p>你所做的事情，要努力做到世界最好。不断重新定义你在做什么，直到真的做到世界最好。</p>
</blockquote>
</li>
<li><p>There are no get rich quick schemes. That’s just someone else getting rich off you.</p>
<blockquote>
<p>这个世界上并没有快速赚钱致富的方法，如果你想要找寻这种方法，那它只会让别人从你身上赚钱致富。</p>
</blockquote>
</li>
<li><p>Apply specific knowledge, with leverage, and eventually you will get what you deserve.</p>
<blockquote>
<p>运用你的独到知识，配合上杠杆，最终你会得到你应该得到的东西。</p>
</blockquote>
</li>
<li><p>When you’re finally wealthy, you’ll realize that it wasn’t what you were seeking in the first place. But that’s for another day.</p>
<blockquote>
<p>终有一天当你变得富有，你会发现那一切并不是你最开始想要的东西。但是那就是另外一回事了。</p>
</blockquote>
</li>
</ol>
<h2 id="二、译者注释"><a href="#二、译者注释" class="headerlink" title="二、译者注释"></a>二、译者注释</h2><ol>
<li><p>财富就是你睡着觉，你的资产也在为你继续赚钱。这是一个越来越被广泛接受的定义。Naval Ravikant 是硅谷狂热的数字货币支持者，所以，他的话另有所指。从前后文来看，他所谓的资产并不等于是传统意义上的房产、股票、收藏，而是偏向于他反复提及的：软件和媒体。</p>
</li>
<li><p>出租时间概念，许多人理解为打工，认为打工就是出租自己的时间以换取金钱。其实并非如此，Naval 所指的出租时间概念，指的是一个人的财富增长，是否直接关系到他的时间。一个小卖部的老板，他并不为谁打工，但是他的财富增长需要他长时间守在店里，因此，他依然是出租时间换钱。但一个淘宝点卡店老板则不同，他的点卡销售是全自动的，不需要 24 小时守着，而且也不需要只做这一样生意。这就是Naval所谓互联网拓宽了个人职业生涯的一个例子。</p>
</li>
<li><p>equity 我翻译为产权，不是一个很好的翻法。但是 Naval 前文提到 assets，很明显，作为投资人他非常清楚地知道这两个字眼之间的区别。equity 无论是翻译为股票、权益或者是资产，原文说“You must own equity — a piece of a business — to gain your financial freedom.”，这是和出租时间概念做对应的。出租时间的人，在商业链条里作为生产资料出现，不拥有任何产权，也就无法通过商业行为获利，所以，我这里勉强翻译为产权。</p>
</li>
<li><p>specific knowledge 我翻译为独到知识，没有翻译为特定知识、专业知识或者是特殊知识。原因是在我的理解中，specific knowledge 不是书本知识，也不是学校教授的知识，更不可能在网上免费获取。一方面，它只能提供自己实践来获取；另一方面，它只能通过前人口耳相传。这种知识是做成一件事情的关键，属于知识体系中不共的那一部分。所以，我翻译为独到知识。</p>
</li>
<li><p>“Give me a lever long enough, and a place to stand, and I will move the earth.” — Archimedes 这话不像是阿基米德说的。更像是一次抬杠的结果：</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">“给我一个支点，我就能撬起地球！”</span><br><span class="line"></span><br><span class="line">“那么，您站在哪儿呢？”</span><br><span class="line"></span><br><span class="line">“好吧，给我一个支点，再给我一个站立的地方，我就能撬起地球。”</span><br><span class="line"></span><br><span class="line">“那么，您用空气就能撬起地球了？”</span><br><span class="line"></span><br><span class="line">“好吧，给我一根足够长的杠杆，一处可以立足的地方，我就可以翘起地球！”</span><br><span class="line"></span><br><span class="line">“那么，阿基米德先生，支点又不需要了吗？”</span><br><span class="line"></span><br><span class="line">“滚！”</span><br></pre></td></tr></table></figure>
<ol start="6">
<li><p>accountability 我本想翻译为“靠谱程度”，想想还是算了。</p>
</li>
<li><p>号称是“四十条语录”，但是我就找见了 39 条。</p>
</li>
<li><p>结合上下文看，Leverage 一词始终翻译为“杠杆”其实也不大对头。Naval 一再强调代码、博客、播客、视频节目，我觉得 Leverage 在他那里，有些时候应该相当于是个人影响力的代名词，或者可以简单理解为放大器。</p>
</li>
</ol>
<h1 id="三、参考："><a href="#三、参考：" class="headerlink" title="三、参考："></a>三、参考：</h1><ol>
<li><a href="https://www.yuque.com/ruanyf/weekly/issue-107">科技爱好者周刊-107期</a></li>
<li><a href="https://new.qq.com/omn/20200413/20200413A0U72C00.html">如何不靠运气致富(和菜头翻译)</a></li>
</ol>
]]></content>
      <categories>
        <category>RandomThoughts</category>
      </categories>
      <tags>
        <tag>财富</tag>
      </tags>
  </entry>
  <entry>
    <title>sql行转列，列转行</title>
    <url>/20170613-sql%E8%A1%8C%E8%BD%AC%E5%88%97%EF%BC%8C%E5%88%97%E8%BD%AC%E8%A1%8C/</url>
    <content><![CDATA[<p>有时候需要行转列或者列转行</p>
<p>在Oracle 11g中，Oracle 又增加了2个查询：pivot（行转列） 和unpivot（列转行）</p>
<p>下面是在mysql中的操作：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> age  <span class="operator">|</span> weigth <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+--------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>      <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+--------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#根据ID分组</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> group_concat(age) <span class="keyword">from</span> test <span class="keyword">group</span> <span class="keyword">by</span> id;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span> group_concat(age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span>                 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">#不分组</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> group_concat(age) <span class="keyword">from</span> test;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span> group_concat(age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>STAR面试/简历</title>
    <url>/20240818-star-interview/</url>
    <content><![CDATA[<h1 id="0-背景"><a href="#0-背景" class="headerlink" title="0. 背景"></a>0. 背景</h1><p>有天早上，许久没联系的同事说要找我看看简历。<br>于是约着周六在公主坟附近的星巴克聊了 2 小时。<br>然后今天在《技术领导力:程序员如何才能带好团队》看到 STAR 面试，<br>就是就想着挖个坑讲讲。</p>
<h1 id="1-STAR-介绍"><a href="#1-STAR-介绍" class="headerlink" title="1. STAR 介绍"></a>1. STAR 介绍</h1><p>STAR 是 SITUATION(背景), TASK(任务)、ACTION(行动)和RESULT(结果)四个英文单词的首字母组合。<br>在招聘面试中, 仅通过应聘者的简历无法全面了解应聘者的知识、经验、技能、工作风格、性格特点等，而使用STAR技巧则可以对应聘者做出全面而客观的评价。</p>
<h2 id="1-1-背景-SITUATION"><a href="#1-1-背景-SITUATION" class="headerlink" title="1.1 背景(SITUATION)"></a>1.1 背景(SITUATION)</h2><span id="more"></span>
<p>通过不断提出与工作业绩有关的背景问题，<br>可以全面了解该应聘者获得优秀业绩的前提因素，<br>从而获知所取得的业绩有多少是与应聘者个人有直接关联的，有多少是与市场的状况、行业的特点有关的。</p>
<h2 id="1-2-任务-TASK"><a href="#1-2-任务-TASK" class="headerlink" title="1.2 任务(TASK)"></a>1.2 任务(TASK)</h2><p>每项任务的具体内容是什么。<br>通过这些可以了解应聘者的工作经历和经验，<br>以确定他所从事的工作与获得的经验是否适合现在的职位。</p>
<h2 id="1-3-行动-ACTION"><a href="#1-3-行动-ACTION" class="headerlink" title="1.3 行动(ACTION)"></a>1.3 行动(ACTION)</h2><p>了解他是如何完成工作的，都采取了哪些行动，所采取的行动是如何帮助他完成工作的。<br>通过这些，可以进一步了解他的工作方式、思维方式和行为方式。</p>
<h2 id="1-4-结果-RESULT"><a href="#1-4-结果-RESULT" class="headerlink" title="1.4 结果(RESULT)"></a>1.4 结果(RESULT)</h2><p>每项任务在采取了行动之后的结果是什么，是好还是不好，好是因为什么，不好又是因为什么。</p>
<h1 id="2-简历"><a href="#2-简历" class="headerlink" title="2. 简历"></a>2. 简历</h1><p>一般来讲，看简历第一页前面一部分，就决定是要要留下。<br>所以我们该怎么去呈现呢？</p>
<p>我觉得 STAR 法则也是很值得参考的。<br>要讲清楚背景：业务+技术，<br>然后讲自己是负哪一块(单纯实现?还是设计&#x2F;实现&#x2F;推动&#x2F;带头)<br>再讲讲技术方案是怎么来的？为什么会这么选？都有哪些备选方案？当前有哪些不足？以及怎么改进？<br>最后讲一讲业务技术上的收益(用户体验&#x2F;提效&#x2F;GMV&#x2F;收入等等)</p>
<p>还有就是得站在招聘者的角度去思考。<br>假如是自己招人，你希望招什么样的人？优秀的工程师有什么特质？<br>思考这些之后，那么怎么结合实际，把自己的优点呈现出来</p>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>成长</tag>
      </tags>
  </entry>
  <entry>
    <title>su  Authentication failure</title>
    <url>/20170401-su%20%20Authentication%20failure/</url>
    <content><![CDATA[<p>想要获取root权限，提示如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@ubuntu:/var/lib$ su</span><br><span class="line">Password: </span><br><span class="line">su: Authentication failure</span><br></pre></td></tr></table></figure>
<p>解决办法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@ubuntu:$ sudo passwd root</span><br><span class="line">Enter new UNIX password: </span><br><span class="line">Retype new UNIX password: </span><br><span class="line">passwd: password updated successfully</span><br><span class="line">hisen@ubuntu:$ su</span><br><span class="line">Password: </span><br><span class="line">root@ubuntu:# cd mysql</span><br></pre></td></tr></table></figure>
<p>重新设置一下密码即可，我这边装的时候设置的用户是：hisen</p>
<p>刚刚重新设置的密码就是你装系统的时候设置的用户密码。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>给群晖 NAS DS918+ 添加 RTL-8156B 2.5G 无线网卡</title>
    <url>/20221119-synology-DS918-add-2500M-RTL8156B-usb-network-cart/</url>
    <content><![CDATA[<h1 id="0-前言"><a href="#0-前言" class="headerlink" title="0. 前言"></a>0. 前言</h1><p>就这个群晖的网卡，困扰了我两天。<br>因为按照之后没法在系统控制面板里面找到对应的网卡。<br>就连 GitHub 上驱动的作者都说不支持 RTL-8156B(详见：<a href="https://github.com/bb-qq/r8152/issues/205">GitHub-issue</a>) 的外置网卡。<br>但是我想那么多人都买了这种网卡，并且成功了，于是周末到处搜，最终找到了办法。</p>
<p>可能这是 DS918+ 之类才会遇到的问题</p>
<h1 id="1-获取-root-权限"><a href="#1-获取-root-权限" class="headerlink" title="1. 获取 root 权限"></a>1. 获取 root 权限</h1><p>搜索引擎很多</p>
<h1 id="2-安装驱动"><a href="#2-安装驱动" class="headerlink" title="2. 安装驱动"></a>2. 安装驱动</h1><h2 id="2-1-查询群晖架构"><a href="#2-1-查询群晖架构" class="headerlink" title="2.1 查询群晖架构"></a>2.1 查询群晖架构</h2><p><a href="https://kb.synology.com/en-global/DSM/tutorial/What_kind_of_CPU_does_my_NAS_have">群晖官网查询NASCPU架构</a></p>
<h2 id="2-2-下载对应驱动"><a href="#2-2-下载对应驱动" class="headerlink" title="2.2 下载对应驱动"></a>2.2 下载对应驱动</h2><p><a href="https://github.com/bb-qq/r8152/releases">https://github.com/bb-qq/r8152/releases</a><br>我这里是 DM7 的系统，下载的最新版本<br>下载到 PC 上即可，不用下载到 NAS</p>
<span id="more"></span>

<h2 id="2-3-安装"><a href="#2-3-安装" class="headerlink" title="2.3 安装"></a>2.3 安装</h2><p>下载完成，在群晖套件中心，手动安装，选择刚刚下载的驱动文件安装<br>第一次安装会失败(GitHub 上也有说明)，需要执行如下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> install -m 4755 -o root -D /var/packages/r8152/target/r8152/spk_su /opt/sbin/spk_su</span><br></pre></td></tr></table></figure>
<p>修改之后，再次安装即可完成。</p>
<h1 id="3-修改配置"><a href="#3-修改配置" class="headerlink" title="3. 修改配置"></a>3. 修改配置</h1><p>由于群晖918+等型号对 lan 口限制了最大 2 个，这里需要修改两个配置文件。<br>都是找到 maxlanport&#x3D;“2” 修改数字为大于 2 的数字即可。</p>
<h2 id="3-1-其一"><a href="#3-1-其一" class="headerlink" title="3.1 其一"></a>3.1 其一</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc.defaults/synoinfo.conf</span><br><span class="line"><span class="comment"># 我这里的修改</span></span><br><span class="line">maxlanport=“4”</span><br></pre></td></tr></table></figure>
<h2 id="3-2-其二"><a href="#3-2-其二" class="headerlink" title="3.2 其二"></a>3.2 其二</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/synoinfo.conf</span><br><span class="line"><span class="comment"># 这个文件有点大，好好找找，我的是在 77% 左右</span></span><br><span class="line">maxlanport=<span class="string">&quot;4&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="4-信息中心-网络"><a href="#4-信息中心-网络" class="headerlink" title="4. 信息中心-网络"></a>4. 信息中心-网络</h1><p>群晖 DS918+，USB 外置网卡安装好驱动，设置好 maxlan 之后，<br>系统命令行可以识别网卡，并且可以获取 IPv6 地址，但是没有 IPv4 的地址</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@HiSEN-DS:~# ifconfig</span><br><span class="line">eth2      Link encap:Ethernet  HWaddr 00:xx:xx:xx:xx:03  </span><br><span class="line">          inet6 addr: fd7e:a5c4:268d:0:2e0:ffff:fe68:80/64 Scope:Global</span><br><span class="line">          inet6 addr: fe80::2e0:ffff:fe68:80/64 Scope:Link</span><br><span class="line">          inet6 addr: 2408:8207:ffff:6700:2e0:ffff:fe68:80/64 Scope:Global</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:4 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:9 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000</span><br><span class="line">          RX bytes:1175 (1.1 KiB)  TX bytes:1446 (1.4 KiB)</span><br></pre></td></tr></table></figure>
<h1 id="5-控制面板-网络-网络界面"><a href="#5-控制面板-网络-网络界面" class="headerlink" title="5. 控制面板-网络-网络界面"></a>5. 控制面板-网络-网络界面</h1><p>设置局域网 3 (外置网卡) 为自动获取 IP 后，网络正常，系统控制面积显示正常</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@DS:~# ifconfig</span><br><span class="line">eth2      Link encap:Ethernet  HWaddr 00:xx:xx:xx:xx:03</span><br><span class="line">          inet addr:10.0.0.xxx  Bcast:10.0.0.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fd7e:a5c4:268d:0:2e0:ffff:fe68:80/64 Scope:Global</span><br><span class="line">          inet6 addr: fe80::2e0:ffff:fe68:80/64 Scope:Link</span><br><span class="line">          inet6 addr: 2408:8207:ffff:6700:2e0:ffff:fe68:80/64 Scope:Global</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:1419 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:312 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000</span><br><span class="line">          RX bytes:465252 (454.3 KiB)  TX bytes:71449 (69.7 KiB)</span><br></pre></td></tr></table></figure>

<h1 id="6-参考"><a href="#6-参考" class="headerlink" title="6. 参考"></a>6. 参考</h1><p><a href="https://flatworm-unique.gitee.io/2021/06/DSM-8156B-drivers/">群晖DSM系统“套件法”安装8156B芯片网卡驱动</a><br><a href="https://fu.chiphello.com/2021/06/a-knotty-problem-2.5g/">升級2.5G網卡的一些疑難雜症</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>NAS</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机科学的自我修炼</title>
    <url>/20210219-teach-or-improve-yourself-computer-science/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>在近两年高并发系统 DevOps 的过程中，<br>遇到了很多底层的问你题，eg: 网络、硬件、虚拟机等，<br>有些现象虽然知其然，但是不知其所以然，书到用时方恨少！<br>抱着深入学习的心态这两年看了一些相关书籍：</p>
<blockquote>
</blockquote>
<p>《计算机网络：自顶向下方法》<br>《操作系统精髓与设计原理》<br>《Java性能优化权威指南》<br>《Redis运维与开发》<br>《性能之巅》</p>
<p><strong>收获甚大</strong> 所以想继续深入学习<br>误打误撞，看到了之前在 GitHub 关注的一个『自学计算机科学』仓库，很赞同下面这个观点</p>
<p>软件工程师分为两种：</p>
<ol>
<li>一种充分理解了计算机科学，从而有能力应对充满挑战的创造性工作；</li>
<li>另一种仅仅凭着对一些高级工具的熟悉而勉强应付。</li>
</ol>
<p>这两种人都自称软件工程师，都能在职业生涯早期挣到差不多的工资。<br>然而，随着时间流逝，第一种工程师不断成长，所做的事情将会越来越有意义且更为高薪，<br>不论是有价值的商业工作、突破性的开源项目、技术上的领导力或者高质量的个人贡献。</p>
<h1 id="一、资源"><a href="#一、资源" class="headerlink" title="一、资源"></a>一、资源</h1><h2 id="1-1-摘要"><a href="#1-1-摘要" class="headerlink" title="1.1 摘要"></a>1.1 摘要</h2><span id="more"></span>
<table>
<thead>
<tr>
<th>科目</th>
<th>为何要学</th>
<th>最佳书籍</th>
<th>最佳视频</th>
</tr>
</thead>
<tbody><tr>
<td>编程</td>
<td>不要做一个“永远没彻底搞懂”诸如递归等概念的程序员。</td>
<td>《计算机程序的构造和解释》</td>
<td>Brian Harvey’s Berkeley CS 61A</td>
</tr>
<tr>
<td>计算机架构</td>
<td>如果你对于计算机如何工作没有具体的概念，那么你所做出的所有高级抽象都是空中楼阁。</td>
<td>《深入理解计算机系统》</td>
<td>Berkeley CS 61C</td>
</tr>
<tr>
<td>算法与数据结构</td>
<td>如果你不懂得如何使用栈、队列、树、图等常见数据结构，遇到有难度的问题时，你将束手无策。</td>
<td>《算法设计手册》</td>
<td>Steven Skiena’s lectures</td>
</tr>
<tr>
<td>数学知识</td>
<td>计算机科学基本上是应用数学的一个“跑偏的”分支，因此学习数学将会给你带来竞争优势。</td>
<td>《计算机科学中的数学》</td>
<td>Tom Leighton’s MIT 6.042J</td>
</tr>
<tr>
<td>操作系统</td>
<td>你所写的代码，基本上都由操作系统来运行，因此你应当了解其运作的原理。</td>
<td>《操作系统导论》</td>
<td>Berkeley CS 162</td>
</tr>
<tr>
<td>计算机网络</td>
<td>互联网已然势不可挡：理解工作原理才能解锁全部潜力。</td>
<td>《计算机网络：自顶向下方法》</td>
<td>Stanford CS 144</td>
</tr>
<tr>
<td>数据库</td>
<td>对于多数重要程序，数据是其核心，然而很少人理解数据库系统的工作原理。</td>
<td>《Readings in Database Systems》 （暂无中译本）</td>
<td>Joe Hellerstein’s Berkeley CS 186</td>
</tr>
<tr>
<td>编程语言与编译器</td>
<td>若你懂得编程语言和编译器如何工作，你就能写出更好的代码，更轻松地学习新的编程语言。</td>
<td>《Crafting Interpreters》</td>
<td>Alex Aiken’s course on Lagunita</td>
</tr>
<tr>
<td>分布式系统</td>
<td>如今，多数 系统都是分布式的。</td>
<td>《数据密集型应用系统设计》</td>
<td>MIT 6.824</td>
</tr>
</tbody></table>
<h2 id="1-2-详情"><a href="#1-2-详情" class="headerlink" title="1.2 详情"></a>1.2 详情</h2><p>内容值得一看，真心建议多花功夫学好底层知识。<br>原文：<a href="https://teachyourselfcs.com/">Teach Yourself Computer Science</a><br>翻译：<a href="https://github.com/keithnull/TeachYourselfCS-CN/blob/master/TeachYourselfCS-CN.md">自学计算机科学</a></p>
<p>来自亚马逊 CTO 的博文也值得一看，操作系统经典书籍<br><a href="https://www.allthingsdistributed.com/2020/07/the-os-classics.html">The OS Classics</a></p>
<h1 id="三、相关资源"><a href="#三、相关资源" class="headerlink" title="三、相关资源"></a>三、相关资源</h1><p><a href="https://hisen.me/20200805-software-engineer-interview-guide/">软件工程师面试指引</a></p>
]]></content>
      <categories>
        <category>Tech</category>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>cs</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL查询违反最左匹配原则，但 explain 显示走索引的疑惑</title>
    <url>/20200915-the-puzzle-of-mysql-using-index-which-violation-of-leftmost-matching-principle/</url>
    <content><![CDATA[<h1 id="零、本文背景"><a href="#零、本文背景" class="headerlink" title="零、本文背景"></a>零、本文背景</h1><p>有个朋友抛出一个问题，<em>明显不符合最左匹配原则的 SQL，居然走索引了</em><br>兜兜转转，嘀咕了好几天，期间也和几个朋友讨论了一下<br>都没有结果，最后还是在 MySQL 的官方文档中找到了原因<br>记录下，也算是一次不错的探索。</p>
<h1 id="一、问题描述"><a href="#一、问题描述" class="headerlink" title="一、问题描述"></a>一、问题描述</h1><h2 id="1-1-表结构"><a href="#1-1-表结构" class="headerlink" title="1.1 表结构"></a>1.1 表结构</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> `people_new` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `last_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">  `first_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">  `bob` <span class="type">date</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`),</span><br><span class="line">  KEY `index_union` (`last_name`,`first_name`,`bob`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">2</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;人员-新&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="1-2-数据"><a href="#1-2-数据" class="headerlink" title="1.2 数据"></a>1.2 数据</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from people_new;</span><br><span class="line">+----+-----------+------------+------------+</span><br><span class="line">| id | last_name | first_name | bob        |</span><br><span class="line">+----+-----------+------------+------------+</span><br><span class="line">|  1 |  hisen    | yuan       | 2008-08-08 |</span><br><span class="line">+----+-----------+------------+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h2 id="1-3-SQL-分析"><a href="#1-3-SQL-分析" class="headerlink" title="1.3 SQL 分析"></a>1.3 SQL 分析</h2><p>可以看到 <strong>Using index</strong><br>但是 <strong>possible_keys</strong> null 而 <strong>key</strong> 显示 index_union</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; explain select * from people_new  where bob = &#x27;2008-08-08&#x27; and first_name = &#x27;yuan&#x27;;</span><br><span class="line">+----+-------------+------------+------------+-------+---------------+-------------+---------+------+------+----------+--------------------------+</span><br><span class="line">| id | select_type | table      | partitions | type  | possible_keys | key         | key_len | ref  | rows | filtered | Extra                    |</span><br><span class="line">+----+-------------+------------+------------+-------+---------------+-------------+---------+------+------+----------+--------------------------+</span><br><span class="line">|  1 | SIMPLE      | people_new | NULL       | index | NULL          | index_union | 1537    | NULL |    1 |   100.00 | Using where; Using index |</span><br><span class="line">+----+-------------+------------+------------+-------+---------------+-------------+---------+------+------+----------+--------------------------+</span><br><span class="line">1 row in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure>

<h1 id="二、原因"><a href="#二、原因" class="headerlink" title="二、原因"></a>二、原因</h1><span id="more"></span>
<p>1.1 的表结构显示，除了 id，其余三个属性都在 <strong>联合索引</strong> 中<br>所以通过任何字段查询，返回的字段都被索引覆盖了，构成 <strong>覆盖索引</strong> ，<br>由于扫描全部索引会快于全表扫描，所以这时候 sql 不管是不是最左匹配都会走索引(应该是『全索引扫描』)。</p>
<p>3.1 的表结构中，除了 id ，还有 area 不在联合索引当中，此时破坏了 <strong>覆盖索引</strong> ，故不走索引。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">If the index is a covering index for the queries and can be used to satisfy all data required from the table,</span><br><span class="line">only the index tree is scanned. In this case, the Extra column says Using index.</span><br><span class="line">An index-only scan usually is faster than ALL because the size of the index usually is smaller than the table data.</span><br></pre></td></tr></table></figure>
<p>详情：<a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain-extra-information">dev.mysql.com</a></p>
<h1 id="三、验证"><a href="#三、验证" class="headerlink" title="三、验证"></a>三、验证</h1><h2 id="3-1-修改后的表结构"><a href="#3-1-修改后的表结构" class="headerlink" title="3.1 修改后的表结构"></a>3.1 修改后的表结构</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> `people_new` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `last_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">  `first_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">  `bob` <span class="type">date</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">  `area` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`),</span><br><span class="line">  KEY `index_union` (`last_name`,`first_name`,`bob`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">2</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;人员-新&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-2-修改表结构后的数据"><a href="#3-2-修改表结构后的数据" class="headerlink" title="3.2 修改表结构后的数据"></a>3.2 修改表结构后的数据</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from people_new;</span><br><span class="line">+----+-----------+------------+------------+------+</span><br><span class="line">| id | last_name | first_name | bob        | area |</span><br><span class="line">+----+-----------+------------+------------+------+</span><br><span class="line">|  1 |  hisen    | yuan       | 2008-08-08 | NULL |</span><br><span class="line">+----+-----------+------------+------------+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-2-SQL-分析"><a href="#3-2-SQL-分析" class="headerlink" title="3.2 SQL 分析"></a>3.2 SQL 分析</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; explain select * from people_new  where bob = &#x27;2008-08-08&#x27; and first_name = &#x27;yuan&#x27;;</span><br><span class="line">+----+-------------+------------+------------+------+---------------+------+---------+------+------+----------+-------------+</span><br><span class="line">| id | select_type | table      | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |</span><br><span class="line">+----+-------------+------------+------------+------+---------------+------+---------+------+------+----------+-------------+</span><br><span class="line">|  1 | SIMPLE      | people_new | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    1 |   100.00 | Using where |</span><br><span class="line">+----+-------------+------------+------------+------+---------------+------+---------+------+------+----------+-------------+</span><br><span class="line">1 row in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure>

<h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><p>有时候多和同行交流也能学到很多。<br>带着问题去看官方文档收获会比较大。<br>遇到问题，找到原因，解决问题，印象会深刻。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>index</tag>
      </tags>
  </entry>
  <entry>
    <title>工作的第一个十年</title>
    <url>/20250719-the-first-decade-of-work/</url>
    <content><![CDATA[<h1 id="简短概述"><a href="#简短概述" class="headerlink" title="简短概述"></a>简短概述</h1><p>十年前，本科毕业，成为北漂一族。</p>
<ul>
<li>2015年6月13日 14:31 落地时发了个朋友圈;</li>
</ul>
<p>十年后，成家立业，成功负债累累。</p>
<ul>
<li>2017 买房、2022 买房、2023 结婚、2025 如意晋升;</li>
</ul>
<p>喜欢阅读，偶尔运动，工作上追求做得更好，<br>一路走来，感谢所遇到的人和事助我更好地成长，<br>继续努力，以后继续力所能及帮助身边有需要的人。</p>
<h1 id="工作总结"><a href="#工作总结" class="headerlink" title="工作总结"></a>工作总结</h1><p>十年间经历了 6 个公司，大多数 1 ~ 2 年( <del>有点草率</del> )，目前这段 4+ 年属最长。<br>年均性价比最高的应该是 2018 ~ 2021，因为那会真正负反馈充足。</p>
<span id="more"></span>
<p>反馈：</p>
<ol>
<li>广度：创业公司需要做很多琐碎的事情，知识面会广一些；</li>
<li>深度：在某电商公司做订单系统，IO 密集型 QPS 压测上百万那种，技术要求比较高；</li>
<li>薪酬：不管是在创业公司、还是在电商公司，薪水以及晋升都反馈较明显，努力就有收获；</li>
</ol>
<p>在职场他人给的评价是技术功底好，我更愿称之为喜欢刨根问底。<br>遇到问题不绕着走，记录好每一次疑难杂症的现场，有机会就好好剖析。<br>偏好『<a href="/20210219-teach-or-improve-yourself-computer-science/">计算机科学基础</a>』，掌握原理，以不变应万变。<br>作为『个人贡献者』的时候，写好文档、记录问题、抓非功能特性、追求代码的可读性、可维护性。<br>在带团队之后通过 CR ，发现 case 解决 case 的时候，引导他们做好的设计、写好的代码，慢慢磨合。</p>
<p>最意外的是有个校招的同学感谢我的指导和严要求让他成长加速；<br>虽然有时候说话比较直，当时心理不好受，但相比前两年在其它组放养好多了；</p>
<p>多次参加公司培训，每次都收获颇丰( 了解新的概念、了解自己、学习沟通管理技能 )。</p>
<h1 id="阅读习惯"><a href="#阅读习惯" class="headerlink" title="阅读习惯"></a>阅读习惯</h1><p>这十年『最欣慰』的就是在持续阅读。<br>自从上班通勤在地铁上看到有人 kindle 阅读，于是跟风买了个，后来慢慢养成了习惯( <a href="/20200201-how-i-fell-in-love-with-reading/">详见</a> )。<br>持续的阅读让我觉得很充实，没有浪费时间，仿佛每天都在进步。持续学习的感觉是真好。<br>这是 <a href="/booklist/">阅读书单</a>，一年少的也有 30+，多的 60+，应该没拖国人后腿。<br>一般阅读我都做笔记，可惜散落在各处暂未收敛( 锤子便签、魅族便签、苹果便签、有道云笔记 )。<br>好在大部分阅读完的书籍都会整理发布微博( <a href="https://weibo.com/hisenyuan">@hisenyuan</a> )，目前微博数量 456 ( 少量非读书笔记 )。<br>后续我比较倾向于把所有数据整合在一起，总结之后发到博客和微博, 这样也锻炼了输出能力，后续也方便回顾。<br>关于输出可以看 <a href="/20240303-about-write-blog/">为什么要写博客？</a>，我很认同里面的观点，也在尽量践行( 工作&#x2F;个人文档 均 OK )。</p>
<blockquote>
<p>无聊时翻一番微博，看看阅读量，以及历史的内容，搜索查找都比较方便。<br>甚至在和朋友聊起 xxx 的时候，可以快速找到对应内容进行回顾，或者展示一下 <del>优越感</del>。</p>
</blockquote>
<h1 id="年度总结"><a href="#年度总结" class="headerlink" title="年度总结"></a>年度总结</h1><ul>
<li><a href="/20191229-Looking-back-to-2019-looking-forward-to-2020/">回顾 2019，展望 2020</a></li>
<li><a href="/20220102-Looking-back-to-2021-looking-forward-to-2022/">回顾 2021，展望 2022</a></li>
<li><a href="/20231231-Looking-back-to-2023-looking-forward-to-2024/">回顾 2023，展望 2024</a><blockquote>
<p>可惜没有一直记录，定期总结反思很重要。</p>
</blockquote>
</li>
</ul>
<h1 id="好人好事"><a href="#好人好事" class="headerlink" title="好人好事"></a>好人好事</h1><h2 id="好人"><a href="#好人" class="headerlink" title="好人"></a>好人</h2><p>来京第一个待的地方是 <em>北京南站</em> 附近的西罗园小区，亲戚老哥接济了 1月+。<br>找工作的过程中一直管吃管住，给人带来不少麻烦。甚是感激~</p>
<p>还有其它很多给予过支持和指导的人虽未列举，但铭记于心!</p>
<h2 id="好事"><a href="#好事" class="headerlink" title="好事"></a>好事</h2><p>由于来自南方乡村、县城都是十几线了；<br>在北京的人比较少，所以老乡交流会比较多；<br>加上好些亲戚在这边，他们很优秀是我的榜样，跟着他们接触了很多优秀的老乡；<br>在这过程中开了眼界、感受了来自身边的榜样的力量，激励我努力前行。</p>
<p>有幸参与过县里组织的”结对子”活动( 北京在校生找已经工作的导师 )；<br>挺好的一个想法，但是人在年前的时候很难抓住那些好的机会和资源，遭受社会毒打之后可能好些 ~</p>
<p>这些年持续对外有输出和指导，有些不错的结果，成就感满满。</p>
<h1 id="爱好"><a href="#爱好" class="headerlink" title="爱好"></a>爱好</h1><ul>
<li><p>羽毛球：</p>
<ul>
<li>装备：尤尼克斯 弓箭 11、尤尼克斯 DUORA 双刃 10；</li>
<li>频率：基本每周 1 次；</li>
</ul>
</li>
<li><p>自行车：</p>
<ul>
<li>装备：捷安特 propel 公路车；</li>
<li>频率：偶尔；</li>
</ul>
</li>
<li><p>户外：徒步、爬山、露营等; 频率较低；</p>
</li>
<li><p>水族：</p>
<ul>
<li>鱼缸<ul>
<li>尺寸：100 * 60 * 80 ( 单位 cm )</li>
<li>生物：阿塔巴布(埃及神仙鱼) * 6、L333 * 2、L600 * 2、红头力关刀鱼 * 15；</li>
<li>设备：干湿分离底滤、变频水泵、变频加热棒、变频造浪泵、自动喂食器；</li>
</ul>
</li>
<li>龟缸：<ul>
<li>尺寸：100 * 60 * 35 ( 单位 cm )</li>
<li>生物：鳄鱼龟、体重5Kg+；</li>
<li>设备：干湿分离底滤、变频水泵；</li>
</ul>
</li>
<li>虾缸<ul>
<li>尺寸：60 * 25 * 25 ( 单位 cm )</li>
<li>生物：极火虾若干(已经繁殖多代)、苹果螺若干、孔雀鱼多条; 浮萍若干；</li>
<li>设备：无。不喂食、无过滤；</li>
</ul>
</li>
</ul>
</li>
<li><p>绿植：小叶簕竹、龟背竹、仙洞龟背竹、绿萝、酒瓶兰、水杨梅、生石花、仙人指、芦荟、太阳花；</p>
</li>
<li><p>蔬菜：辣椒、丝瓜、韭菜、薄荷;</p>
</li>
<li><p>养鸟：玄凤、虎皮。( 同事赠予的，由于家人过敏、已出手。 )</p>
</li>
</ul>
<h1 id="努力突破信息茧房"><a href="#努力突破信息茧房" class="headerlink" title="努力突破信息茧房"></a>努力突破信息茧房</h1><p>尽量避免推荐系统的投喂，目前我尽量避开头条系时间消耗类产品。<br>日常随机输入有：</p>
<ul>
<li><a href="https://www.ruanyifeng.com/blog/weekly/">科技爱好者周刊</a>：感谢阮一峰老师</li>
<li><a href="https://weibo.com/tombkeeper">tombkeeper</a> : 网络安全大拿、刚开始他的微博基本上看不懂、现在满满懂一些</li>
<li><a href="https://hisen.me/">我的追踪列表</a>：日常追踪网络内容</li>
</ul>
<h1 id="后续方向"><a href="#后续方向" class="headerlink" title="后续方向"></a>后续方向</h1><ul>
<li>牢抓基本功</li>
<li>提升软技能</li>
<li>探索新趋势</li>
<li>坚持练体能</li>
</ul>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>总结</tag>
        <tag>成长</tag>
      </tags>
  </entry>
  <entry>
    <title>缓存那些事儿 - 从组件到实践</title>
    <url>/20190429-things-about-caching/</url>
    <content><![CDATA[<h1 id="一、为什么用缓存"><a href="#一、为什么用缓存" class="headerlink" title="一、为什么用缓存"></a>一、为什么用缓存</h1><h2 id="1-1-空间换时间："><a href="#1-1-空间换时间：" class="headerlink" title="1.1 空间换时间："></a>1.1 空间换时间：</h2><p>缓存是针对读多写少的场景典型的以空间换时间的操作<br>空间：内存<br>时间：读内存速度快(相对于读磁盘)</p>
<h2 id="1-2-局部性原理："><a href="#1-2-局部性原理：" class="headerlink" title="1.2 局部性原理："></a>1.2 局部性原理：</h2><p>这个世界很多事情都符合 2&#x2F;8 原则<br>把热点数据缓存起来就大大提高系统效率</p>
<h1 id="二、缓存组件介绍"><a href="#二、缓存组件介绍" class="headerlink" title="二、缓存组件介绍"></a>二、缓存组件介绍</h1><h2 id="2-1-Ehcache"><a href="#2-1-Ehcache" class="headerlink" title="2.1 Ehcache"></a>2.1 Ehcache</h2><ol>
<li>快速，针对大型高并发系统场景，Ehcache 的多线程机制有相应的优化改善;</li>
<li>简单，很小的 jar 包，简单配置就可直接使用，单机场景下无需过多的其他服务依赖;</li>
<li>支持多种的缓存策略，灵活;</li>
<li>缓存数据有两级：内存和磁盘，与一般的本地内存缓存相比，有了磁盘的存储空间，将可以支持更大量的数据缓存需求;</li>
<li>具有缓存和缓存管理器的侦听接口，能更简单方便的进行缓存实例的监控管理;</li>
<li>支持多缓存管理器实例，以及一个实例的多个缓存区域;</li>
</ol>
<h2 id="2-2-Guava"><a href="#2-2-Guava" class="headerlink" title="2.2 Guava"></a>2.2 Guava</h2><ol>
<li>自动将 entry 节点加载进缓存结构中；</li>
<li>当缓存的数据超过设置的最大值时，使用 LRU 算法移除；</li>
<li>具备根据 entry 节点上次被访问或者写入时间计算它的过期机制；</li>
<li>缓存的 key 被封装在 WeakReference 引用内；</li>
<li>缓存的 Value 被封装在W eakReference 或 SoftReference 引用内；</li>
<li>统计缓存使用过程中命中率、异常率、未命中率等统计数据;</li>
</ol>
<span id="more"></span>

<h2 id="2-3-Memcache"><a href="#2-3-Memcache" class="headerlink" title="2.3 Memcache"></a>2.3 Memcache</h2><ol>
<li>memcache 使用预分配内存池的方式管理内存;</li>
<li>所有数据存储在物理内存里;</li>
<li>非阻塞 I&#x2F;O 复用模型，纯 KV 存取操作;</li>
<li>多线程，效率高，会遇到锁等，上下文切换问题;</li>
<li>只支持简单 KV 数据类型;</li>
<li>数据不支持持久化;</li>
</ol>
<h2 id="2-4-Redis"><a href="#2-4-Redis" class="headerlink" title="2.4 Redis"></a>2.4 Redis</h2><ol>
<li>临时申请空间，可能导致碎片;</li>
<li>有 VM 机制，能存储更多数据，超过内存空间后会导致 swap，降低效率;</li>
<li>非阻塞 I&#x2F;O 复用模型，支持额外 CPU 计算：排序、聚合，会影响 I&#x2F;O 性能;</li>
<li>单线程，无锁，无上下文切换，单实例无法利用多核性能;</li>
<li>支持多种数据类型：string &#x2F; hash &#x2F; list &#x2F; set &#x2F; sorted set</li>
<li>数据支持持久化：AOF(语句增量) &#x2F; RDB(fork全量)</li>
<li>天然支持高可用分布式方案 sentinel + cluster (故障自动转移+集群)</li>
</ol>
<h1 id="三、正确使用缓存"><a href="#三、正确使用缓存" class="headerlink" title="三、正确使用缓存"></a>三、正确使用缓存</h1><h2 id="3-1-读场景"><a href="#3-1-读场景" class="headerlink" title="3.1 读场景"></a>3.1 读场景</h2><p>先读缓存、再读DB<br>如果是并发读缓存失效，使用分布式锁只允许单次查询，其它等待，超时返回失败</p>
<h2 id="3-2-写场景"><a href="#3-2-写场景" class="headerlink" title="3.2 写场景"></a>3.2 写场景</h2><p>cache 指的是删除『缓存』<br>db 指的是『更新&#x2F;删除数据库』</p>
<h3 id="3-2-1-先-cache-后-db"><a href="#3-2-1-先-cache-后-db" class="headerlink" title="3.2.1 先 cache 后 db"></a>3.2.1 先 cache 后 db</h3><p>删除缓存成功，更新数据库失败，不影响数据准确性。<br>如果在 cache 与 db 短暂的时间内<br>有访问查询动作(先查缓存，后查 db 并且设置缓存)<br>那么还缓存中还是会存在过期的数据</p>
<h3 id="3-2-2-先-db-后-cache"><a href="#3-2-2-先-db-后-cache" class="headerlink" title="3.2.2 先 db 后 cache"></a>3.2.2 先 db 后 cache</h3><p>如果 db 成功，cache 失败，会导致数据不一致。<br>可以让 db cache 在一个事务，cache 失败回滚 db，保证一致性。</p>
<h3 id="3-2-3-方案总结"><a href="#3-2-3-方案总结" class="headerlink" title="3.2.3 方案总结"></a>3.2.3 方案总结</h3><p>其实本质上就是个分布式事务问题<br>怎么保证两个操作同时成功&#x2F;失败<br>通过本地事务 &#x2F; 补偿机制 实现会比较好</p>
<h1 id="四、缓存问题集合"><a href="#四、缓存问题集合" class="headerlink" title="四、缓存问题集合"></a>四、缓存问题集合</h1><h2 id="4-1-缓存穿透"><a href="#4-1-缓存穿透" class="headerlink" title="4.1 缓存穿透"></a>4.1 缓存穿透</h2><p>解决方案：当查询到某数据不存在时，缓存假数据，例如：(key,key#);</p>
<h2 id="4-2-缓存雪崩"><a href="#4-2-缓存雪崩" class="headerlink" title="4.2 缓存雪崩"></a>4.2 缓存雪崩</h2><p>缓存高可用(集群+主备)<br>循环一致性 Hash，节点组成一个环，如果一个节点挂了，顺着往下走;</p>
<h1 id="五、参考链接"><a href="#五、参考链接" class="headerlink" title="五、参考链接"></a>五、参考链接</h1><ol>
<li><a href="https://mp.weixin.qq.com/s/V1hGa6D9aGrP6PiCWEmc0w">架构师之路18年精选100篇 | 缓存部分 - 58沈剑 </a></li>
<li><a href="https://tech.meituan.com/2017/03/17/cache-about.html">缓存那些事 | 美团技术博客</a></li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>cache</tag>
      </tags>
  </entry>
  <entry>
    <title>关于部署软系统的思考</title>
    <url>/20200627-thinking-of-deploy-soft-system/</url>
    <content><![CDATA[<p>在 敏捷 + devops 盛行的年代<br>软件部署的频率一般都比较高，一周一迭代、一周两迭代<br>这就需要有良好的工具来支持，更需要良好的机制来避免人为犯错</p>
<p>工作当中会遇到很多部署导致的问题<br>其中大部分的问题原因是配置问题</p>
<p>关于部署</p>
<ol>
<li>开发的时候记录大致改动点</li>
<li>上线之前按检查列表(团队或个人定义一些常规检查项目)挨个检查</li>
<li>上线之前写上线步骤列表，部署时做一个人肉机器人，按步骤操作即可</li>
<li>上线之前写好验证步骤，验证需要的各种权限</li>
<li>以上做完了最好找相关人员核对一遍，以免遗漏(互备很重要)</li>
<li>灰度发布(应用启动期间性能抖动问题值得研究)</li>
</ol>
<p>互备很重要，哪怕对方没有介入开发，简单的按正常流程问你几个问题，也许就会发现漏了什么。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>soft</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis Cluster slot 分布不均匀问题排查</title>
    <url>/20210518-troubleshooting-unbalanced-of-redis-cluster-slots/</url>
    <content><![CDATA[<h1 id="零、背景"><a href="#零、背景" class="headerlink" title="零、背景"></a>零、背景</h1><p>在压测过程中发现有部分 redis cluster 节点内存占用比其它节点高(来自监控)</p>
<p>内存倾斜的隐患</p>
<ol>
<li>更早达到容量瓶颈，触发淘汰策略</li>
<li>承担更多的负载( 读 &#x2F; 写 )，导致节点压力增大，可能触发宕机。</li>
</ol>
<h1 id="一、问题"><a href="#一、问题" class="headerlink" title="一、问题"></a>一、问题</h1><p>redis cluster slot 分配不均匀<br>redis cluster 集群内存分配算法的缺陷<br>问题算法：单节点内存 &#x3D; 集群总内存 &#x2F; 节点数</p>
<p>合理算法：单节点内存 &#x3D; (集群总内容 &#x2F; slot 数量) * 当前节点 slot 数量</p>
<h1 id="二、排查"><a href="#二、排查" class="headerlink" title="二、排查"></a>二、排查</h1><h2 id="2-1-key-分布问题？"><a href="#2-1-key-分布问题？" class="headerlink" title="2.1 key 分布问题？"></a>2.1 key 分布问题？</h2><span id="more"></span>
<p>key 根据 crc16 计算之后比较均匀，排除 key 分布不均<br>在 key 均匀的情况下，考虑 slot 分配问题</p>
<h2 id="2-2-slot-分布问题？"><a href="#2-2-slot-分布问题？" class="headerlink" title="2.2 slot 分布问题？"></a>2.2 slot 分布问题？</h2><p>查找 slot 分布<br>redis 控制台执行：cluster slots<br>取最后一个节点的 rely 日志如下(日志含义见参考链接)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(0)(0)10137</span><br><span class="line">   (1)10463</span><br><span class="line">   (2)(0)192.25.238.97</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)1ab1735417e34e1fb38aa19958e2375498158be8</span><br><span class="line">   (3)(0)192.25.239.118</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)2b444bb8ece6edcf4881cfacb60def2eb3bfba85</span><br><span class="line">(1)(0)6540</span><br><span class="line">   (1)6866</span><br><span class="line">   (2)(0)192.168.184.118</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)464c059fd4354b72cd277a7aaf6159a2682e47ff</span><br><span class="line">   (3)(0)192.168.198.232</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)c4ae0536b5a9157b43516e26c4c77ca9e431005a</span><br><span class="line">(2)(0)1308</span><br><span class="line">   (1)1634</span><br><span class="line">   (2)(0)192.168.197.41</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)bb0b682b4eed16f773ed7b0d2cf430ac4e776624</span><br><span class="line">   (3)(0)192.25.222.250</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)098251c97fb147b7aee8143ced13c742ec3115a9</span><br><span class="line">(3)(0)8502</span><br><span class="line">   (1)8828</span><br><span class="line">   (2)(0)192.168.184.111</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)3680ab0d0961e4dda6f9a35eb4c72cbcc04bba3b</span><br><span class="line">   (3)(0)192.168.176.75</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)99d64ca4bf375460537a296ce0bdab2374c8487c</span><br><span class="line">(4)(0)14388</span><br><span class="line">   (1)14714</span><br><span class="line">   (2)(0)192.25.239.116</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)37d438fc43097bab896e04589b10659c2898c56b</span><br><span class="line">   (3)(0)192.168.184.113</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)2697f554dac4c6b6452239b5f3f192052504431f</span><br><span class="line">(5)(0)1962</span><br><span class="line">   (1)2288</span><br><span class="line">   (2)(0)192.168.198.241</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)7c323af2d42df59cb172c1f2989fdb47972c4b6b</span><br><span class="line">   (3)(0)192.168.184.112</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)94f67ff376efbecf3d84905dbfe6d9e8a5c9cf83</span><br><span class="line">(6)(0)0</span><br><span class="line">   (1)326</span><br><span class="line">   (2)(0)192.168.197.9</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)510edbf404ed2b24aeeff53f9d8f43c6404d62c0</span><br><span class="line">   (3)(0)192.168.198.249</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)a150d1f3671d8a5e42c238e900a23031693ddd32</span><br><span class="line">(7)(0)12426</span><br><span class="line">   (1)12752</span><br><span class="line">   (2)(0)192.168.198.240</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)cb2c653239757df27da883dc024e87a8f11890f0</span><br><span class="line">   (3)(0)192.168.197.41</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)ed4a2925e913bc2773cd3a4c13d48deac7f423fa</span><br><span class="line">(8)(0)4251</span><br><span class="line">   (1)4577</span><br><span class="line">   (2)(0)192.25.239.105</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)f2eb3bb1afc0d9345173d1eb2aaa675161f5d675</span><br><span class="line">   (3)(0)192.168.198.242</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)67a2926615eb6e4e4f850f59f78f670010ef573a</span><br><span class="line">(9)(0)9156</span><br><span class="line">   (1)9482</span><br><span class="line">   (2)(0)192.25.239.107</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)4806e385ba1b193b48c0c6a8dd35e5d8a5738257</span><br><span class="line">   (3)(0)192.25.239.105</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)c1490e0c9963628972be63339f032c63191f1897</span><br><span class="line">(10)(0)6867</span><br><span class="line">   (1)7193</span><br><span class="line">   (2)(0)192.168.184.115</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)2339d951c551c45daf84c147acaf6e6854f66f8c</span><br><span class="line">   (3)(0)192.25.222.250</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)cd6e7d09828b8d795afe671c39a0312b3d6859fe</span><br><span class="line">(11)(0)2616</span><br><span class="line">   (1)2942</span><br><span class="line">   (2)(0)192.168.198.234</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)e5bfd81c7a0df2ec29b3ac4ce188795881b2bc1e</span><br><span class="line">   (3)(0)192.25.238.96</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)513edbe433f180924500db83ef155426e7f2f040</span><br><span class="line">(12)(0)5559</span><br><span class="line">   (1)5885</span><br><span class="line">   (2)(0)192.168.198.252</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)515990729e830f0f75e3dc8179438d43c6c7c9b7</span><br><span class="line">   (3)(0)192.25.238.92</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)5328403d6ecd5272c51250977cc1af7de3f16407</span><br><span class="line">(13)(0)15369</span><br><span class="line">   (1)15695</span><br><span class="line">   (2)(0)192.168.176.78</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)a140264d0aefdbb9b99c961c0c223266fa90129d</span><br><span class="line">   (3)(0)192.168.197.32</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)5fbc13a478470e14006500e38fa032472ec0da50</span><br><span class="line">(14)(0)12753</span><br><span class="line">   (1)13079</span><br><span class="line">   (2)(0)192.168.198.249</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)120c04813a4f2db04bfc890874a5cf4e7ce47e15</span><br><span class="line">   (3)(0)192.168.197.9</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)e8ca0053b9a99684f683202d68994cf8b28f26e0</span><br><span class="line">(15)(0)4905</span><br><span class="line">   (1)5231</span><br><span class="line">   (2)(0)192.25.239.120</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)e1a5f230ad1a7716c4e04bc785fcb001e7841b7f</span><br><span class="line">   (3)(0)192.168.176.76</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)c370b87def3a5533ca436ac17ed22d2d5ef64cf7</span><br><span class="line">(16)(0)15696</span><br><span class="line">   (1)16022</span><br><span class="line">   (2)(0)192.168.197.24</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)ebad5e02b596b81431e7e35d80687b94eb4f495b</span><br><span class="line">   (3)(0)192.168.176.77</span><br><span class="line">      (1)5013</span><br><span class="line">      (2)96771bd26c4f0f3af5a1cb3de4de6467e07f1a6d</span><br><span class="line">(17)(0)11118</span><br><span class="line">   (1)11444</span><br><span class="line">   (2)(0)192.168.198.147</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)5e16b0661d43a03254fe0c9a97a21beada5665eb</span><br><span class="line">   (3)(0)192.168.184.109</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)c132bdd8ab5c38d4cce4bee4ffc1a298e75d5538</span><br><span class="line">(18)(0)16023</span><br><span class="line">   (1)16383</span><br><span class="line">   (2)(0)192.168.176.76</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)e9b9b9354d6c77a980c0da35bef89b26042b716d</span><br><span class="line">   (3)(0)192.168.198.146</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)1ca744d6e5c24d3f2c64eca1dec65eea8545ce8b</span><br><span class="line">(19)(0)4578</span><br><span class="line">   (1)4904</span><br><span class="line">   (2)(0)192.25.239.104</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)0aea965323c78cdefb3e8b4e03955b9651c719b6</span><br><span class="line">   (3)(0)192.168.198.240</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)365350cfa7621749e2c696d84d32d2228122fdc6</span><br><span class="line">(20)(0)10464</span><br><span class="line">   (1)10790</span><br><span class="line">   (2)(0)192.168.198.232</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)2fe68c5065aefc24ddcc747071dd65c6cadd427b</span><br><span class="line">   (3)(0)192.168.184.118</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)bdc2191de10b7d825f359922e3e31ce328c0a972</span><br><span class="line">(21)(0)14061</span><br><span class="line">   (1)14387</span><br><span class="line">   (2)(0)192.168.198.231</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)7a47f437951b03a95460924ffd349b3ecfb05bc7</span><br><span class="line">   (3)(0)192.168.184.114</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)bfebcd3837ccf9df6989be91951087cb7351404c</span><br><span class="line">(22)(0)9810</span><br><span class="line">   (1)10136</span><br><span class="line">   (2)(0)192.168.184.116</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)3caff203db4214bea1f2bcbc2935bb3e2273ac72</span><br><span class="line">   (3)(0)192.25.223.2</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)d2fe724704165a35eef6541f75cb2ba5245472fa</span><br><span class="line">(23)(0)327</span><br><span class="line">   (1)653</span><br><span class="line">   (2)(0)192.25.238.90</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)6254a81f003cce2cb66222dc312c0ad4ee0a900a</span><br><span class="line">   (3)(0)192.25.223.2</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)7781d87ca77b51fcd07c8d0956ab350e3db3ba1c</span><br><span class="line">(24)(0)9483</span><br><span class="line">   (1)9809</span><br><span class="line">   (2)(0)192.168.198.254</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)a0acf25a9487c3fa6fc74af8ba57cc50d1b1a95c</span><br><span class="line">   (3)(0)192.25.239.119</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)e05f23f53bad3f8ccc7ae4f9080426e289350557</span><br><span class="line">(25)(0)12099</span><br><span class="line">   (1)12425</span><br><span class="line">   (2)(0)192.168.184.110</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)39d6559849aa2d00b560cb554cfa79a30ee3ede1</span><br><span class="line">   (3)(0)192.168.198.247</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)fe6696fa4333b4776ed5ee38b93380a21755eaa0</span><br><span class="line">(26)(0)3924</span><br><span class="line">   (1)4250</span><br><span class="line">   (2)(0)192.168.198.180</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)ba944b0643a2ad68033d129d78c1dee805d2191a</span><br><span class="line">   (3)(0)192.25.239.121</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)b5b020b3105be1e4a49c57d54647da6797a0a3cc</span><br><span class="line">(27)(0)14715</span><br><span class="line">   (1)15041</span><br><span class="line">   (2)(0)192.168.198.147</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)937e58683236b2708fdc6ef77dd08e66ef7e7ad5</span><br><span class="line">   (3)(0)192.25.239.120</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)274760f1e7e84bd14593b43f95965546f4cb34f5</span><br><span class="line">(28)(0)1635</span><br><span class="line">   (1)1961</span><br><span class="line">   (2)(0)192.168.198.239</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)ae4dc5d4d544dde49f177554c89e2001727d99e4</span><br><span class="line">   (3)(0)192.168.198.250</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)bea5260033bac6fb7ab67a444f9a1d0e8c9f93b9</span><br><span class="line">(29)(0)5886</span><br><span class="line">   (1)6212</span><br><span class="line">   (2)(0)192.25.239.116</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)7c9f26573b5a79b77d9089ed7e5783f47f6d030d</span><br><span class="line">   (3)(0)192.25.239.104</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)5c999bc681e6751ec576049db73c3bee2717f8b6</span><br><span class="line">(30)(0)3270</span><br><span class="line">   (1)3596</span><br><span class="line">   (2)(0)192.168.198.179</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)addeda3c397b1d6ca21996be33435f4a65ca7686</span><br><span class="line">   (3)(0)192.168.198.231</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)1d78a81025acdc123f04680a30a80cff6258e909</span><br><span class="line">(31)(0)2289</span><br><span class="line">   (1)2615</span><br><span class="line">   (2)(0)192.25.239.117</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)b8ff018e1810697710963e0c4a17faca2b3b6421</span><br><span class="line">   (3)(0)192.168.184.111</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)f7cc831c676ec19560f6ea779f86971bd227ba7f</span><br><span class="line">(32)(0)6213</span><br><span class="line">   (1)6539</span><br><span class="line">   (2)(0)192.168.184.113</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)ee943d8aec010e34fe1b573826d65cc9e1f14fce</span><br><span class="line">   (3)(0)192.168.198.242</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)bfa424b2f9d4e476c3985025f5bf8bdb6625b74a</span><br><span class="line">(33)(0)654</span><br><span class="line">   (1)980</span><br><span class="line">   (2)(0)192.25.239.106</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)fa13eedd26af4e0364f56b1604cef9865afde98d</span><br><span class="line">   (3)(0)192.168.198.251</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)ea87dd7cbf8b8cbeee37a3d482493b5fc41a755b</span><br><span class="line">(34)(0)2943</span><br><span class="line">   (1)3269</span><br><span class="line">   (2)(0)192.25.239.118</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)150932a7e4f0020b99c50312c8cec9d07d7aabcf</span><br><span class="line">   (3)(0)192.25.239.121</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)816d511dcab3f7d9e2068401ba5958e01f2212dd</span><br><span class="line">(35)(0)8175</span><br><span class="line">   (1)8501</span><br><span class="line">   (2)(0)192.168.198.148</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)34d51673796ab652da7e312cff119296dae1d3bb</span><br><span class="line">   (3)(0)192.168.197.28</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)e1f48544722bbb62d1fb8910a6a4b00d9ccbd09b</span><br><span class="line">(36)(0)981</span><br><span class="line">   (1)1307</span><br><span class="line">   (2)(0)192.168.197.32</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)41ea02b87652650c3ba2f085849fb6ac2169d897</span><br><span class="line">   (3)(0)192.168.197.28</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)9717393eb89ab32126263741fd250198e378023c</span><br><span class="line">(37)(0)5232</span><br><span class="line">   (1)5558</span><br><span class="line">   (2)(0)192.168.184.109</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)96a728eece26f6f200b26ff9ddecae3fb5b8df11</span><br><span class="line">   (3)(0)192.25.239.117</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)69f84dd28d8c254732a4f0d5e5fd56c60c58b7fa</span><br><span class="line">(38)(0)3597</span><br><span class="line">   (1)3923</span><br><span class="line">   (2)(0)192.168.198.146</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)526a0bc43f480738c704ea745f5377258c0e3cdb</span><br><span class="line">   (3)(0)192.168.176.78</span><br><span class="line">      (1)5010</span><br><span class="line">      (2)f54b7898236acf827c53277f22fc3dcadcd37602</span><br><span class="line">(39)(0)15042</span><br><span class="line">   (1)15368</span><br><span class="line">   (2)(0)192.168.197.37</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)57ceee2905d66bd5863acae5422bf9e39afa971d</span><br><span class="line">   (3)(0)192.168.198.179</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)55192b8693c15df7f11cffc788f2043275886002</span><br><span class="line">(40)(0)10791</span><br><span class="line">   (1)11117</span><br><span class="line">   (2)(0)192.25.222.249</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)3c9b5f682360324951435b987489fbc2e4e5bfc3</span><br><span class="line">   (3)(0)192.168.198.251</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)2dcf8603ecbdf43d18112dcaf06d3f9321bc2e0c</span><br><span class="line">(41)(0)7194</span><br><span class="line">   (1)7520</span><br><span class="line">   (2)(0)192.168.184.112</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)8a77d41c2bb0a0672654baecfdee52592bb04050</span><br><span class="line">   (3)(0)192.25.238.96</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)8632629188cb269a900677ec0dc395cb292c1e2e</span><br><span class="line">(42)(0)8829</span><br><span class="line">   (1)9155</span><br><span class="line">   (2)(0)192.168.198.241</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)37684e5201b0fb50eaf184235a87f2e6a359dd01</span><br><span class="line">   (3)(0)192.168.184.115</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)4684a38fa0b4df0b21f0d777b91300afcace551a</span><br><span class="line">(43)(0)7848</span><br><span class="line">   (1)8174</span><br><span class="line">   (2)(0)192.168.184.114</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)a6f9c01f4b3b2df4b4993f5745b78d1307d6ea81</span><br><span class="line">   (3)(0)192.168.197.37</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)51e3568c115be10067d9e808d094f71f96c92647</span><br><span class="line">(44)(0)13734</span><br><span class="line">   (1)14060</span><br><span class="line">   (2)(0)192.168.198.182</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)6acca7f88ea98f8ba073f423707d7692592053f3</span><br><span class="line">   (3)(0)192.25.238.90</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)84965ce2c21634a7ce9405374e36e80fa0e4521b</span><br><span class="line">(45)(0)13407</span><br><span class="line">   (1)13733</span><br><span class="line">   (2)(0)192.168.184.117</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)2fad26dc888fc776dec4fd33e167c860bd76d64e</span><br><span class="line">   (3)(0)192.25.239.181</span><br><span class="line">      (1)5090</span><br><span class="line">      (2)c91e8c9f8aea8424683258e18c5aa93ec45bb216</span><br><span class="line">(46)(0)11772</span><br><span class="line">   (1)12098</span><br><span class="line">   (2)(0)192.168.199.1</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)77c4678d6eddc2f8eb328fa02705d99a6c27a1ca</span><br><span class="line">   (3)(0)192.25.239.176</span><br><span class="line">      (1)5074</span><br><span class="line">      (2)21106c8a361da9c3cf494857e168c5b640eca234</span><br><span class="line">(47)(0)7521</span><br><span class="line">   (1)7847</span><br><span class="line">   (2)(0)192.25.223.1</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)ef990477dd7eb4b3c9915bf31b300e87d8fa9b29</span><br><span class="line">   (3)(0)192.25.239.106</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)b0a2975c5cc56a69b3bc63b348a88252fa09ec1a</span><br><span class="line">(48)(0)13080</span><br><span class="line">   (1)13406</span><br><span class="line">   (2)(0)192.168.198.182</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)01baf618cc0945c5a379a37ff92e4b1e1eeefac8</span><br><span class="line">   (3)(0)192.168.184.116</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)041464f26f3e7bdb277d0624ba7003bb447f227b</span><br><span class="line">(49)(0)11445</span><br><span class="line">   (1)11771</span><br><span class="line">   (2)(0)192.25.239.107</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)0495711f467db7ef747eeb9a24f16b7a5ce0c4ff</span><br><span class="line">   (3)(0)192.168.198.234</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)34d285e446013db478a030f3172fce256b6d4ba8</span><br><span class="line"> reply from: 192.168.197.41:2048</span><br></pre></td></tr></table></figure>
<p>通过 awk 计算每个节点管理的槽 ( slot ) 数量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 把上面的日志粘贴到 slots 文件中</span><br><span class="line">$ vi /tmp/slots</span><br><span class="line"># 计算每个节点的槽数量并且排序，输出结果</span><br><span class="line">$ cat /tmp/slots | awk &#x27;&#123;if((NR % 8 == 1) || (NR % 8 == 2)) print $0&#125;&#x27; | awk &#x27;&#123;if(NR % 2 == 1) print $0,getline,$0&#125;&#x27; | sed &#x27;s/)/ /g&#x27; | awk &#x27;&#123;print $6,$3,$6-$3&#125;&#x27; | sort -k 3 -r | head -n 3</span><br><span class="line">16383 16023 360</span><br><span class="line">9809 9483 326</span><br><span class="line">980 654 326</span><br><span class="line"></span><br><span class="line"># 根据槽号反向查找</span><br><span class="line">$ cat /tmp/slots| grep 16023 -A8</span><br><span class="line">(18)(0)16023</span><br><span class="line">   (1)16383</span><br><span class="line">   (2)(0)192.168.176.76</span><br><span class="line">      (1)2049</span><br><span class="line">      (2)e9b9b9354d6c77a980c0da35bef89b26042b716d</span><br><span class="line">   (3)(0)192.168.198.146</span><br><span class="line">      (1)2048</span><br><span class="line">      (2)1ca744d6e5c24d3f2c64eca1dec65eea8545ce8b</span><br><span class="line">(19)(0)4578</span><br></pre></td></tr></table></figure>
<p>由于本案例当中，大部分节点都是包含 326 个 slot，问题节点明显偏多 360</p>
<h3 id="2-2-1-相关命令解释"><a href="#2-2-1-相关命令解释" class="headerlink" title="2.2.1 相关命令解释"></a>2.2.1 相关命令解释</h3><p>awk NR 代表行号<br>awk getline 获取下一行，并且赋值到 $0 (本意是代表当前行数据)。<br>sort -k 3 -r，以第三列排序(-k 3)，倒序输出(-r)<br>head -n 3，输出前三行</p>
<h1 id="三、结论"><a href="#三、结论" class="headerlink" title="三、结论"></a>三、结论</h1><p>根据上述假设，经过验证，发现确实是由于 slot 分配不均匀导致</p>
<h1 id="四、改进"><a href="#四、改进" class="headerlink" title="四、改进"></a>四、改进</h1><p>人工手动调整 slot 较多节点的内存，使之达到与其它节点内存占用水平。<br>提示：redis 可以通过修改参数( maxmemory，单位 byte )调整最大内存。</p>
<h1 id="五、参考"><a href="#五、参考" class="headerlink" title="五、参考"></a>五、参考</h1><ul>
<li><a href="https://blog.csdn.net/u010627840/article/details/105089785/">redis cluser slots 报文解析</a></li>
<li><a href="https://www.cnblogs.com/hana-alice/p/9759104.html">awk getline 函数</a></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>ubuntu安装docker-ce并配置国内源和加速器</title>
    <url>/20170417-ubuntu%E5%AE%89%E8%A3%85docker-ce%E5%B9%B6%E9%85%8D%E7%BD%AE%E5%9B%BD%E5%86%85%E6%BA%90%E5%92%8C%E5%8A%A0%E9%80%9F%E5%99%A8/</url>
    <content><![CDATA[<h2 id="一、配置ubuntu国内镜像，这里推荐阿里云，右上角搜索：换阿里云源"><a href="#一、配置ubuntu国内镜像，这里推荐阿里云，右上角搜索：换阿里云源" class="headerlink" title="一、配置ubuntu国内镜像，这里推荐阿里云，右上角搜索：换阿里云源"></a>一、配置ubuntu国内镜像，这里推荐阿里云，右上角搜索：换阿里云源</h2><h2 id="二、安装docker"><a href="#二、安装docker" class="headerlink" title="二、安装docker"></a>二、安装docker</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install \</span><br><span class="line">     linux-image-extra-$(uname -r) \</span><br><span class="line">     linux-image-extra-virtual</span><br></pre></td></tr></table></figure>
<p>安装docker包</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install \</span><br><span class="line">     apt-transport-https \</span><br><span class="line">     ca-certificates \</span><br><span class="line">     curl \</span><br><span class="line">     software-properties-common </span><br></pre></td></tr></table></figure>
<p>添加docker官方GPG秘钥,留意最后那个符号也要复制</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>
<p>安装稳定版仓库</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line">     &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span><br><span class="line">     $(lsb_release -cs) \</span><br><span class="line">     stable&quot;</span><br></pre></td></tr></table></figure>
<p>再次更新源</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
<p>安装docker-ce</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install docker-ce</span><br></pre></td></tr></table></figure>

<h2 id="三、给docker添加国内加速器"><a href="#三、给docker添加国内加速器" class="headerlink" title="三、给docker添加国内加速器"></a>三、给docker添加国内加速器</h2><p>在阿里云申请一个账号，打开连接<a href="https://cr.console.aliyun.com/#/accelerator" target="_blank">https://cr.console.aliyun.com/#/accelerator</a> </p>
<p>拷贝您的专属加速器地址（每个人专属的，登陆需要密码），然后</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/systemd/system/multi-user.target.wants/docker.service</span><br></pre></td></tr></table></figure>
<p>可以看到如下内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line"># the default is not to use systemd for cgroups because the delegate issues still</span><br><span class="line"># exists and systemd currently does not support the cgroup feature set required</span><br><span class="line"># for containers run by docker</span><br><span class="line">#下面这行是默认的，我注释了，添加了下面一行</span><br><span class="line">#ExecStart=/usr/bin/dockerd -H fd://</span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// --registry-mirror=https://9s3ekxxx.mirror.aliyuncs.com</span><br><span class="line">ExecReload=/bin/kill -s HUP $MAINPID</span><br><span class="line">LimitNOFILE=1048576</span><br></pre></td></tr></table></figure>
<p>找到 ExecStart&#x3D; 这一行，在这行最后添加加速器地址 –registry-mirror&#x3D;&lt;加速器地址&gt;</p>
<p>如：ExecStart&#x3D;&#x2F;usr&#x2F;bin&#x2F;dockerd -H fd:&#x2F;&#x2F;  –registry-mirror&#x3D;<a href="https://xxxxxx.mirror.aliyuncs.com/">https://xxxxxx.mirror.aliyuncs.com</a></p>
<h2 id="四、重新加载配置并且重新启动"><a href="#四、重新加载配置并且重新启动" class="headerlink" title="四、重新加载配置并且重新启动"></a>四、重新加载配置并且重新启动</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl daemon-reload</span><br><span class="line">$ sudo systemctl restart docker</span><br></pre></td></tr></table></figure>
<p>至此docker安装及国内加速器都好了，开始你的docker之旅吧。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure>
<p>看到如下信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@ubuntu:/$ sudo docker run hello-world</span><br><span class="line">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">78445dd45222: Pull complete </span><br><span class="line">Digest: sha256:c5515758d4c5e1e838e9cd307f6c6a0d620b5e07e6f927b07d05f6d12a1ac8d7</span><br><span class="line">Status: Downloaded newer image for hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://cloud.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/engine/userguide/</span><br></pre></td></tr></table></figure>
<p>到此就圆满结束</p>
<p>最后给个彩蛋，阿里云一键安装脚本，执行下面命令即可安装最新版docker</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh -</span><br></pre></td></tr></table></figure>
<p>详情：<a href="http://mirrors.aliyun.com/help/docker-engine" target="_blank">http://mirrors.aliyun.com/help/docker-engine</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机存储单位 - 以及常识</title>
    <url>/20201030-understanding-computer-storage-unit/</url>
    <content><![CDATA[<h1 id="一、常见单位"><a href="#一、常见单位" class="headerlink" title="一、常见单位"></a>一、常见单位</h1><table>
<thead>
<tr>
<th>单位</th>
<th>英文全称</th>
<th>中文全称</th>
<th>转换</th>
</tr>
</thead>
<tbody><tr>
<td>b</td>
<td>bit</td>
<td>位</td>
<td>-</td>
</tr>
<tr>
<td>B</td>
<td>Byte</td>
<td>字节</td>
<td>1B&#x3D;8b</td>
</tr>
<tr>
<td>KB</td>
<td>Kilo Byte</td>
<td>千字节</td>
<td>1KB&#x3D;1024B</td>
</tr>
<tr>
<td>MB</td>
<td>Mega Byte</td>
<td>兆字节</td>
<td>1MB&#x3D;1024KB</td>
</tr>
<tr>
<td>GB</td>
<td>Giga Byte</td>
<td>千兆</td>
<td>1GB&#x3D;1024MB</td>
</tr>
<tr>
<td>TB</td>
<td>Trillion Byte</td>
<td>万亿字节</td>
<td>1TB&#x3D;1024GB</td>
</tr>
<tr>
<td>PB</td>
<td>Peta Byte</td>
<td>千万亿字节</td>
<td>1PB&#x3D;1024TB</td>
</tr>
<tr>
<td>EB</td>
<td>Exa Byte</td>
<td>百亿亿字节</td>
<td>1EB&#x3D;1024PB</td>
</tr>
<tr>
<td>ZB</td>
<td>Zetta Byte</td>
<td>十万亿亿字节</td>
<td>1ZB&#x3D;1024EB</td>
</tr>
<tr>
<td>YB</td>
<td>Yotta Byte</td>
<td>一亿亿亿字节</td>
<td>1YB&#x3D;1024ZB</td>
</tr>
<tr>
<td>BB</td>
<td>Bronto Byte</td>
<td>一千亿亿亿字节</td>
<td>1BB&#x3D;1024YB</td>
</tr>
<tr>
<td>NB</td>
<td>Nona Byte</td>
<td></td>
<td>1NB&#x3D;1024BB</td>
</tr>
<tr>
<td>DB</td>
<td>Dogga Byte</td>
<td></td>
<td>1DB&#x3D;1024NB</td>
</tr>
<tr>
<td>CB</td>
<td>Corydon Byte</td>
<td></td>
<td>1CB&#x3D;1024DB</td>
</tr>
<tr>
<td>进制除了 Byte 与 bit 之间是 8，其它的都是 1024，但是目前很多时候习惯用 1000，比如 1T ≈ 1000G;</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="二、带宽-网速"><a href="#二、带宽-网速" class="headerlink" title="二、带宽&#x2F;网速"></a>二、带宽&#x2F;网速</h1><h2 id="2-1-带宽"><a href="#2-1-带宽" class="headerlink" title="2.1 带宽"></a>2.1 带宽</h2><p>运营商(ISP)带宽宣传常见的有：50M、100M、500M、1000M…<br>注意：这是传输速率，而不是下载速度。</p>
<span id="more"></span>
<p>它们的单位其实是：bps (全称 bit per second，b&#x2F;s)<br>50M 中 M 的含义是：million 即 百万。<br>翻译过来就是：50Mbps &#x3D; 50,000,000 b&#x2F;s;</p>
<h2 id="2-2-网速"><a href="#2-2-网速" class="headerlink" title="2.2 网速"></a>2.2 网速</h2><p>各种下载软件，比如迅雷会现在下载速度：12M&#x2F;s<br>这个 12M 的单位是 byte 也就是字节。<br>由表常见单位可知，1byte &#x3D; 8bit</p>
<p>所以由带宽传输速率转换为下载速度一般需要除以 8<br>即 100M 带宽，理论上最大的下载速度为：100Mbps &#x2F; 8 &#x3D; 12.5Mbyte &#x2F; s(俗称网速 12.5M)；</p>
<h1 id="三、字节占用"><a href="#三、字节占用" class="headerlink" title="三、字节占用"></a>三、字节占用</h1><p>关于字节的占用，最明显的就是文本编辑器，写入文本后保存，在文件管理器中能看到具体占用了多少存储空间。<br>问：一个英文(或标点)占用多少字节？一个汉字(或标点)占用多少字节？<br>答：与所使用的编码有关系，具体如下表：</p>
<table>
<thead>
<tr>
<th>编码</th>
<th>英文</th>
<th>汉字</th>
</tr>
</thead>
<tbody><tr>
<td>ASCII</td>
<td>1byte</td>
<td>2byte</td>
</tr>
<tr>
<td>UTF-8</td>
<td>1byte</td>
<td>3byte</td>
</tr>
<tr>
<td>Unicode</td>
<td>2byte</td>
<td>2byte</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>try redis - redis官方教程练习</title>
    <url>/20170519-try%20redis%20-%20redis%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E7%BB%83%E4%B9%A0/</url>
    <content><![CDATA[<p>这里主要是介绍了几种redis支持的数据结构，以及操作方法</p>
<p>官网地址：<a href="http://try.redis.io/" target="_blank">http://try.redis.io/</a></p>
<p>我的redis是安装在linux虚拟机，通过Xshell操作，显示可能跟cmd不大一样</p>
<p>但是操作都是一样的</p>
<p>具体操作如下：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#连接redis客户端</span><br><span class="line">hisen@ubuntu:~$ redis-cli</span><br><span class="line">#存放数据</span><br><span class="line">127.0.0.1:6379&gt; set &#x27;connections&#x27; &#x27;10&#x27;</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get connections</span><br><span class="line">&quot;10&quot;</span><br><span class="line">#自增1方法：incr</span><br><span class="line">127.0.0.1:6379&gt; incr connections</span><br><span class="line">(integer) 11</span><br><span class="line">127.0.0.1:6379&gt; incr connections</span><br><span class="line">(integer) 12</span><br><span class="line">#删除</span><br><span class="line">127.0.0.1:6379&gt; del conncetions</span><br><span class="line">(integer) 0</span><br><span class="line">#不存在才存放数据 setnx：SET-if-not-exists</span><br><span class="line">127.0.0.1:6379&gt; SETNX hisen hello</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; get hisen</span><br><span class="line">&quot;hello&quot;</span><br><span class="line">127.0.0.1:6379&gt; SETNX hisen hello</span><br><span class="line">(integer) 0</span><br><span class="line">#添加数据</span><br><span class="line">127.0.0.1:6379&gt; set resource:lock &quot;redis demo&quot;</span><br><span class="line">OK</span><br><span class="line">#设置超时时间，单位秒</span><br><span class="line">127.0.0.1:6379&gt; expire resource:lock 120</span><br><span class="line">(integer) 1</span><br><span class="line">#查看剩余时间</span><br><span class="line">127.0.0.1:6379&gt; ttl resource:lock</span><br><span class="line">(integer) 85</span><br><span class="line">127.0.0.1:6379&gt; ttl resource:lock</span><br><span class="line">(integer) 81</span><br><span class="line">127.0.0.1:6379&gt; ttl resource:lock</span><br><span class="line">(integer) 57</span><br><span class="line"></span><br><span class="line">#List集合</span><br><span class="line">#放在list最后（right 右边）</span><br><span class="line">127.0.0.1:6379&gt; rpush friends &quot;Alice&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; rpush friends &quot;Bob&quot;</span><br><span class="line">(integer) 2</span><br><span class="line">#放在最前（left 左边）</span><br><span class="line">127.0.0.1:6379&gt; lpush friends &quot;Sam&quot;</span><br><span class="line">(integer) 3</span><br><span class="line">#获取所有数据</span><br><span class="line">127.0.0.1:6379&gt; lrange friends 0 -1</span><br><span class="line">1) &quot;Sam&quot;</span><br><span class="line">2) &quot;Alice&quot;</span><br><span class="line">3) &quot;Bob&quot;</span><br><span class="line">#获取下标0-1的数据</span><br><span class="line">127.0.0.1:6379&gt; lrange friends 0 1</span><br><span class="line">1) &quot;Sam&quot;</span><br><span class="line">2) &quot;Alice&quot;</span><br><span class="line">#获取下标1-2的数据</span><br><span class="line">127.0.0.1:6379&gt; lrange friends 1 2</span><br><span class="line">1) &quot;Alice&quot;</span><br><span class="line">2) &quot;Bob&quot;</span><br><span class="line">#获取长度</span><br><span class="line">127.0.0.1:6379&gt; llen friends</span><br><span class="line">(integer) 3</span><br><span class="line">#删除第一个数据（左边）</span><br><span class="line">127.0.0.1:6379&gt; lpop friends</span><br><span class="line">&quot;Sam&quot;</span><br><span class="line">#删除最后一个数据（右边）</span><br><span class="line">127.0.0.1:6379&gt; rpop friends</span><br><span class="line">&quot;Bob&quot;</span><br><span class="line">127.0.0.1:6379&gt; llen friends</span><br><span class="line">(integer) 1</span><br><span class="line">#输出所有</span><br><span class="line">127.0.0.1:6379&gt; lrange friends 0 -1</span><br><span class="line">1) &quot;Alice&quot;</span><br><span class="line"></span><br><span class="line">#Set集合</span><br><span class="line">#添加</span><br><span class="line">127.0.0.1:6379&gt; sadd superpowers &quot;flight&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; sadd superpowers &quot;x-ray vision&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; sadd superpowers &quot;reflexes&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">#删除</span><br><span class="line">127.0.0.1:6379&gt; srem superpowers &quot;reflexes&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">#判断数据是否存在set中</span><br><span class="line">127.0.0.1:6379&gt; sismember superpowers &quot;flight&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">#输出所有</span><br><span class="line">127.0.0.1:6379&gt; smembers superpowers</span><br><span class="line">1) &quot;flight&quot;</span><br><span class="line">2) &quot;x-ray vision&quot;</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; sadd birdpowers &quot;pecking&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; sadd birdpowers &quot;flight&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">#合并两个SET，会过滤重复</span><br><span class="line">127.0.0.1:6379&gt; sunion superpowers birdpowers</span><br><span class="line">1) &quot;pecking&quot;</span><br><span class="line">2) &quot;flight&quot;</span><br><span class="line">3) &quot;x-ray vision&quot;</span><br><span class="line"></span><br><span class="line">#有序集合，按照数字排序</span><br><span class="line">127.0.0.1:6379&gt; zadd hackers 1940 &quot;Alan Kay&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; zadd hackers 1906 &quot;Grace Hopper&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; zadd hackers 1953 &quot;Richard Stallman&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; zadd hackers 1965 &quot;Yukihiro Mastsumoto&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; zadd hackers 1916 &quot;Claude Shannon&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; zadd hackers 1969 &quot;Linus Torvalds&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; ZADD hackers 1957 &quot;Sophie Wilson&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; ZADD hackers 1912 &quot;Alan Turing&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">#输出</span><br><span class="line">127.0.0.1:6379&gt; zrange hackers 2 4</span><br><span class="line">1) &quot;Claude Shannon&quot;</span><br><span class="line">2) &quot;Alan Kay&quot;</span><br><span class="line">3) &quot;Richard Stallman&quot;</span><br><span class="line">127.0.0.1:6379&gt; zrange hackers 0 -1</span><br><span class="line">1) &quot;Grace Hopper&quot;</span><br><span class="line">2) &quot;Alan Turing&quot;</span><br><span class="line">3) &quot;Claude Shannon&quot;</span><br><span class="line">4) &quot;Alan Kay&quot;</span><br><span class="line">5) &quot;Richard Stallman&quot;</span><br><span class="line">6) &quot;Sophie Wilson&quot;</span><br><span class="line">7) &quot;Yukihiro Mastsumoto&quot;</span><br><span class="line">8) &quot;Linus Torvalds&quot;</span><br><span class="line">127.0.0.1:6379&gt; </span><br><span class="line"></span><br><span class="line">#哈希集合</span><br><span class="line">127.0.0.1:6379&gt; hset user:1000 name &quot;hisen&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; hset user:1000 email &quot;hisen@hisen.com&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; hset user:1000 pwassword &quot;pswd&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; hgetall user:1000</span><br><span class="line">1) &quot;name&quot;</span><br><span class="line">2) &quot;hisen&quot;</span><br><span class="line">3) &quot;email&quot;</span><br><span class="line">4) &quot;hisen@hisen.com&quot;</span><br><span class="line">5) &quot;pwassword&quot;</span><br><span class="line">6) &quot;pswd&quot;</span><br><span class="line"></span><br><span class="line">#自增</span><br><span class="line">27.0.0.1:6379&gt; hset user:1000 visits 10</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; hset user:1000 visits 1</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; hincrby user:1000 visits 1</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; hincrby user:1000 visits 1</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; hincrby user:1000 visits 10</span><br><span class="line">(integer) 13</span><br><span class="line">127.0.0.1:6379&gt; hdel user:1000 visits</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; hincrby user:1000 visits 1</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>二进制的应用</title>
    <url>/20210726-use-of-binary/</url>
    <content><![CDATA[<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>之前京东组里有同事使用二进制优化支付密码打标性能(大促 QPS 数百万)，节省内存资源。<br>随说：存二进制报文小，传输快，反序列化快(之前存 JSON 对象)，节省缓存。</p>
<p>目前公司遇到个套餐打标，也通过二进制实现简单高效得解决掉了。<br>随说：目前倒不是要求性能，只是这么设计扩展性好，操作简单。</p>
<p><strong>知识点</strong>：二进制、与运算</p>
<h1 id="二、设计"><a href="#二、设计" class="headerlink" title="二、设计"></a>二、设计</h1><p>打标，无非就是识别某个东西是不是包含某些属性。<br>那么有什么好的办法能做到通用与高效？<br>如果固定映射，扩展性不好，查询逻辑费劲，存储成本偏高。</p>
<p>目前相对较好的方案是通过二进制位来做标记，再结合与运算，快速找出数据。<br>随说：Java MySQL 均支持与运算</p>
<table>
<thead>
<tr>
<th align="center">套餐</th>
<th align="center">VIP1</th>
<th align="center">VIP2</th>
<th align="center">VIP3</th>
<th align="center">标记值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">7</td>
</tr>
<tr>
<td align="center">B</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">6</td>
</tr>
<tr>
<td align="center">C</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">4</td>
</tr>
</tbody></table>
<p>如上表所示，相应套餐的购买资格标记。</p>
<span id="more"></span>
<p>A 套餐所有会有均可购买<br>B 套餐 VIP3 不能购买<br>C 套餐仅 VIP1 可购买</p>
<p>对相关标记进行入库处理：A&#x3D;7，B&#x3D;6，C&#x3D;4；</p>
<p>正常思维，需要存三个字段，没有扩展性，性能还差。<br>使用二进制，结合与运算，降本(计算、传输、匹配)增效(性能提升)。</p>
<h1 id="三、代码"><a href="#三、代码" class="headerlink" title="三、代码"></a>三、代码</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">7</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">    List&lt;Integer&gt; suit = Lists.newArrayList(a, b, c);</span><br><span class="line">    System.out.printf(<span class="string">&quot;支持 VIP1 (0100=4)的套餐:&quot;</span> + Arrays.toString(suit.stream().filter(e -&gt; (<span class="number">4</span> &amp; e) != <span class="number">0</span>).toArray()));</span><br><span class="line">    System.out.printf(<span class="string">&quot;支持 VIP2 (0010=2)的套餐:&quot;</span> + Arrays.toString(suit.stream().filter(e -&gt; (<span class="number">2</span> &amp; e) != <span class="number">0</span>).toArray()));</span><br><span class="line">    System.out.printf(<span class="string">&quot;支持 VIP3 (0001=1)的套餐:&quot;</span> + Arrays.toString(suit.stream().filter(e -&gt; (<span class="number">1</span> &amp; e) != <span class="number">0</span>).toArray()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//        支持 VIP1 (0100=4)的套餐:[7, 6, 4]</span></span><br><span class="line"><span class="comment">//        支持 VIP2 (0010=2)的套餐:[7, 6]</span></span><br><span class="line"><span class="comment">//        支持 VIP3 (0001=1)的套餐:[7]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><p>系统流量小的时候<br>粗糙烂制也不是不能用<br>但是当系统流量大了就得想办法优化：CPU、传输、存储<br>很多时候往往利用简单的原理解决大的问题，只是很多时候限于认知不知道可以这么用。</p>
<p>说到底还是要知其然，更要知其所以然。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>小四：你尽力了吗？【转】</title>
    <url>/20240718-xiao-si_did-you-do-your-best/</url>
    <content><![CDATA[<blockquote>
<p>安全大佬小四<br>2000年写过一篇《你尽力了吗》的学习方法，网上不好找，<br>我把文字版搜到放在下面了(20多年后再来看这篇其实挺一般的 :) )</p>
</blockquote>
<blockquote>
<p>发信人: cloudsky (小四), 信区: Security<br>标 题: 你尽力了吗<br>发信站: 武汉白云黄鹤站 (Mon Apr 17 19:52:54 2000), 站内信件</p>
</blockquote>
<p>很多人问如何入门如何入门，我却不知道要问的是入什么门。<br>很少把某些好文章耐心从头看完，我这次就深有体会。<br>比如袁哥的 sniffer 原理，一直以为自己对 sniffer 原理很清楚的，所以也就不曾仔细看过袁哥的这篇。<br>后来有天晚上和袁哥讨论，如何通过端口读写直接获取 mac 地址，<br>为什么 antisniff 可以获得真正的 mac 地址，<br>而不受更改mac地址技术的影响，如何在 linux 下获得真正的 mac 地址。<br>我一直对 linux 下的端口读写心存疑虑，总觉得在保护模式下的端口都做了内存映象等等。<br>结果袁哥问了我一句，你仔细看我写的文章没有。<br>我楞，最近因为要印刷月刊，我整理以前的很多文档，<br>被迫认真过滤它们，才发现袁哥的文章让我又有新认识。</p>
<p>再后来整理到 tt 的几篇缓冲区溢出的，尤其是上面的关于 Solaris 可装载内核模块，那就更觉得惭愧了。</p>
<span id="more"></span>
<p>以前说书非借不能读，现在是文章留在硬盘上却不读。<br>其实本版已经很多经典文章了，也推荐了不少经典书籍了，有几个好好看过呢。<br>W.Richard.Stevens 的 UNP 我算是认真看过加了不少旁注，APUE就没有那么认真了，而卷II的一半认真看过，写过读书笔记，卷III就没有看一页。<br>道格拉斯的卷I、卷III是认真看过几遍，卷II就只断续看过。<br>而很多技术文章，如果搞到手了就懒得再看，却不知道这浪费了多少资源，忽略了多少资源。<br>BBS 是真正能学到东西的地方吗？<br>rain 说不是的，我说也不是的。不过这里能开阔人的视野，能得到对大方向的指引，足够了。</p>
<p>我一直都希望大家从这里学到的不是技术本身，而是学习方法和一种不再狂热的淡然。<br>很多技术，明天就会过时，如果你掌握的是学习方法，那你还有下一个机会，如果你掌握的仅仅是这个技术本身，你就没有机会了。<br>其实我对系统安全是真不懂，因为我一直都喜欢看程序写程序却不喜欢也没有能力攻击谁谁的主机&#x2F;站点。<br>我所能在这里做的是，为大家提供一个方向，一种让你的狂热归于淡然的说教。<br>如果你连《WindowsNT设备驱动程序编写》、《win9x系统编程》都没有看过，却要写个什么隐藏自己的木马，搞笑。<br>如果你看都不看汇编语言，偏要问 exploit code 的原理，那我无法回答也不想回答你。<br>总有人责问，要讨个说法纭纭，说什么提问却没有回答。<br>不回答已经是正确的处理方式了，至少没有回你一句，看书去，对不对，至少没有扰乱版面让你生闷气。<br>Unix 的 man 手册你要都看完了，想不会Unix都不行了。<br>微软的 MSDN、Platform SDK DOC你要看完了，你想把 Win 编程想象得稍微困难点都找不到理由。<br>还是那句话，一个程序员做到 W.Richard.Stevens 那个份上，做到逝世后还能叫全世界的顶级 hacker 们专门著文怀念，但生前却不曾著文攻击，想想看，那是一种什么样的境界，那是一份什么样的淡然。<br>我们可以大肆讨论技术问题，可以就技术问题进行激烈的卓有成效的讨论，却无意进行基础知识、资源信息的版面重复。<br>我刚在前面贴了一堆 isbase 的文章，开头就是主页标识，却在后面立刻问什么主页在哪里？<br>前面刚刚讨论过如何修改 mac 地址，后面马上又来一个，前后相差不过3篇文章。</p>
<p>选择沉默已经是很多朋友忍耐力的优异表现了。很多东西都是可以举一反三的。<br>vertex 的 lids，被 packetstorm 天天追踪更新，你要是看了 THC 的那三篇，觉得理解一个就理解了一堆，都是内核模块上的手脚。<br>你不看你怎么知道。我不想在这里陷入具体技术问题的讨论中去，你要是觉得该做点什么了，就自己去看自己去找。<br>没有什么人摆什么架子，也没有什么人生来就是干这个的。<br>你自己问自己，尽力了吗？</p>
]]></content>
      <categories>
        <category>Growth</category>
      </categories>
      <tags>
        <tag>cs</tag>
      </tags>
  </entry>
  <entry>
    <title>zookeeper &amp; dubbo搭建 - 在IDEA上运行阿里巴巴Dubbo-demo</title>
    <url>/20170419-zookeeper%20&amp;%20dubbo%E6%90%AD%E5%BB%BA%20-%20%E5%9C%A8IDEA%E4%B8%8A%E8%BF%90%E8%A1%8C%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Dubbo-demo/</url>
    <content><![CDATA[<img src="http://wx3.sinaimg.cn/mw690/b2e389b6ly1ferrzk70zwj20nb0diadw.jpg" />

<h2 id="IDEA上搭建dubbo服务的简单过程"><a href="#IDEA上搭建dubbo服务的简单过程" class="headerlink" title="IDEA上搭建dubbo服务的简单过程"></a>IDEA上搭建dubbo服务的简单过程</h2><p>只是简单的让例子在IntelliJ IDEA跑起来</p>
<p>目前是最新的版本：2.5.4-SNAPSHOT</p>
<p>本文档更新时间：2017年04月19日01:08:02</p>
<h2 id="一-、安装zookeeper"><a href="#一-、安装zookeeper" class="headerlink" title="一 、安装zookeeper"></a>一 、安装zookeeper</h2><p>参考链接：<a href="http://hisen.me/20170224-Ubuntu-16-LTS-%E5%AE%89%E8%A3%85zookeeper%E5%B9%B6%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/" target="_blank">ubuntu apt-get安装zookeeper</a></p>
<h2 id="二、Idea-clone本项目"><a href="#二、Idea-clone本项目" class="headerlink" title="二、Idea clone本项目"></a>二、Idea clone本项目</h2><p>导出项目之后，配置一下tomcat，添加dubbo-admin：war到tomcat中</p>
<p>项目github地址：<a href="https://github.com/hisen-yuan/dubbo" target="_blank">https://github.com/hisen-yuan/dubbo</a></p>
<h2 id="三、启动tomcat，即可访问dubbo管理后台"><a href="#三、启动tomcat，即可访问dubbo管理后台" class="headerlink" title="三、启动tomcat，即可访问dubbo管理后台"></a>三、启动tomcat，即可访问dubbo管理后台</h2><p>默认账号：root</p>
<p>默认密码：root</p>
<h2 id="四、启动服务提供者-消费者demo"><a href="#四、启动服务提供者-消费者demo" class="headerlink" title="四、启动服务提供者&amp;消费者demo"></a>四、启动服务提供者&amp;消费者demo</h2><ol>
<li>修改dubbo-demo-consumer配置文件中的注册中心地址</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/dubbo/dubbo-demo/dubbo-demo-consumer/src/test/resources/dubbo.properties</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#dubbo.registry.address=multicast://224.5.6.7:1234</span><br><span class="line">#使用本地的zookeeper做注册中心</span><br><span class="line">dubbo.registry.address=zookeeper://127.0.0.1:2181</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改ubbo-demo-provider配置文件中的注册中心地址</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/dubbo/dubbo-demo/dubbo-demo-provider/src/test/resources/dubbo.properties</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#dubbo.registry.address=multicast://224.5.6.7:1234</span><br><span class="line">#使用本地的zookeeper做注册中心</span><br><span class="line">dubbo.registry.address=zookeeper://127.0.0.1:2181</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>分别启动dubbo-demo下ubbo-demo-provider、dubbo-demo-consumer下的测试方法</li>
</ol>
<p>即可在后台看到有服务在运行</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>zookeeper</tag>
        <tag>dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title>《Go语言程序设计》 - ch1/lissajous - GIF动画</title>
    <url>/20180908-%E3%80%8AGo%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E3%80%8B%20-%20ch1:lissajous%20-%20GIF%E5%8A%A8%E7%94%BB/</url>
    <content><![CDATA[<h2 id="一、程序说明"><a href="#一、程序说明" class="headerlink" title="一、程序说明"></a>一、程序说明</h2><ol>
<li>可以以web的方式查看，也可以生成一个图片</li>
<li>直接go run输出的是一丢乱码(图片)</li>
<li>需要go build 然后运行程序(具体看代码里面注释)</li>
</ol>
<p>具体的内容可以看下面的程序代码(虽然是抄书)</p>
<h2 id="二、程序代码"><a href="#二、程序代码" class="headerlink" title="二、程序代码"></a>二、程序代码</h2><span id="more"></span>
<h3 id="2-1-基本程序"><a href="#2-1-基本程序" class="headerlink" title="2.1 基本程序"></a>2.1 基本程序</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;image&quot;</span></span><br><span class="line">	<span class="string">&quot;image/color&quot;</span></span><br><span class="line">	<span class="string">&quot;image/gif&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;math&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> palette = []color.Color&#123;color.White, color.Black&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	whiteIndex = <span class="number">0</span> <span class="comment">// 画板中的第一种颜色</span></span><br><span class="line">	blackIndex = <span class="number">1</span> <span class="comment">// 画板中的下一种颜色</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().UTC().UnixNano())</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(os.Args) &gt; <span class="number">1</span> &amp;&amp; os.Args[<span class="number">1</span>] == <span class="string">&quot;web&quot;</span> &#123;</span><br><span class="line">		handler := <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">			lissajous(w)</span><br><span class="line">		&#125;</span><br><span class="line">		http.HandleFunc(<span class="string">&quot;/&quot;</span>, handler)</span><br><span class="line">		log.Fatal(http.ListenAndServe(<span class="string">&quot;localhost:8000&quot;</span>, <span class="literal">nil</span>))</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	lissajous(os.Stdout)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lissajous</span><span class="params">(out io.Writer)</span></span> &#123;</span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		cycles  = <span class="number">5</span>     <span class="comment">// 完整的x振荡器变化的个数</span></span><br><span class="line">		res     = <span class="number">0.001</span> <span class="comment">// 角度分辨率</span></span><br><span class="line">		size    = <span class="number">100</span>   <span class="comment">// 图像画布包含</span></span><br><span class="line">		nframes = <span class="number">64</span>    <span class="comment">// 动画中的帧数</span></span><br><span class="line">		delay   = <span class="number">8</span>     <span class="comment">// 以10ms为单位的帧间延迟</span></span><br><span class="line">	)</span><br><span class="line"></span><br><span class="line">	freq := rand.Float64() * <span class="number">3.0</span> <span class="comment">// y振荡器的相对频率</span></span><br><span class="line">	anim := gif.GIF&#123;LoopCount: nframes&#125;</span><br><span class="line">	phase := <span class="number">0.0</span> <span class="comment">// phase difference</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; nframes; i++ &#123;</span><br><span class="line">		rect := image.Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>*size+<span class="number">1</span>, <span class="number">2</span>*size+<span class="number">1</span>)</span><br><span class="line">		img := image.NewPaletted(rect, palette)</span><br><span class="line">		<span class="keyword">for</span> t := <span class="number">0.0</span>; t &lt; cycles*<span class="number">2</span>*math.Pi; t += res &#123;</span><br><span class="line">			x := math.Sin(t)</span><br><span class="line">			y := math.Sin(t*freq + phase)</span><br><span class="line">			img.SetColorIndex(size+<span class="type">int</span>(x*size+<span class="number">0.5</span>),size+<span class="type">int</span>(y*size+<span class="number">0.5</span>),blackIndex)</span><br><span class="line">		&#125;</span><br><span class="line">		phase +=<span class="number">0.1</span></span><br><span class="line">		anim.Delay = <span class="built_in">append</span>(anim.Delay,delay)</span><br><span class="line">		anim.Image = <span class="built_in">append</span>(anim.Image,img)</span><br><span class="line">	&#125;</span><br><span class="line">	gif.EncodeAll(out,&amp;anim) <span class="comment">// 注意：忽略编码错误（直接运行输出的是一堆乱码）</span></span><br><span class="line">	<span class="comment">// go build lissajous.go</span></span><br><span class="line">	<span class="comment">// ./lissajous &gt;out.gif # 生成一个图片</span></span><br><span class="line">	<span class="comment">// ./lissajous web # 开启一个web服务，可以浏览器访问 localhost:8000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-改进型程序，也是课后练习"><a href="#2-2-改进型程序，也是课后练习" class="headerlink" title="2.2 改进型程序，也是课后练习"></a>2.2 改进型程序，也是课后练习</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;image&quot;</span></span><br><span class="line">	<span class="string">&quot;image/color&quot;</span></span><br><span class="line">	<span class="string">&quot;image/gif&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;math&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 颜色代码数组</span></span><br><span class="line"><span class="keyword">var</span> palette = []color.Color&#123;color.Black, color.RGBA&#123;<span class="number">199</span>, <span class="number">237</span>, <span class="number">204</span>, <span class="number">0xff</span>&#125;, color.RGBA&#123;<span class="number">102</span>, <span class="number">53</span>, <span class="number">204</span>, <span class="number">0xff</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().UTC().UnixNano())</span><br><span class="line">	<span class="comment">// 判断传入参数 如果有web,就启动一个web服务器</span></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(os.Args) &gt; <span class="number">1</span> &amp;&amp; os.Args[<span class="number">1</span>] == <span class="string">&quot;web&quot;</span> &#123;</span><br><span class="line">		handler := <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">			lissajous(w)</span><br><span class="line">		&#125;</span><br><span class="line">		http.HandleFunc(<span class="string">&quot;/&quot;</span>, handler)</span><br><span class="line">		log.Fatal(http.ListenAndServe(<span class="string">&quot;localhost:8000&quot;</span>, <span class="literal">nil</span>))</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	lissajous(os.Stdout)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lissajous</span><span class="params">(out io.Writer)</span></span> &#123;</span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		cycles  = <span class="number">5</span>     <span class="comment">// 完整的x振荡器变化的个数</span></span><br><span class="line">		res     = <span class="number">0.001</span> <span class="comment">// 角度分辨率</span></span><br><span class="line">		size    = <span class="number">100</span>   <span class="comment">// 图像画布包含</span></span><br><span class="line">		nframes = <span class="number">64</span>    <span class="comment">// 动画中的帧数</span></span><br><span class="line">		delay   = <span class="number">8</span>     <span class="comment">// 以10ms为单位的帧间延迟</span></span><br><span class="line">	)</span><br><span class="line"></span><br><span class="line">	freq := rand.Float64() * <span class="number">3.0</span> <span class="comment">// y振荡器的相对频率</span></span><br><span class="line">	anim := gif.GIF&#123;LoopCount: nframes&#125;</span><br><span class="line">	phase := <span class="number">0.0</span> <span class="comment">// phase difference</span></span><br><span class="line">	<span class="keyword">for</span> index,i :=<span class="number">0</span>, <span class="number">1</span>; i &lt; nframes; i++ &#123;</span><br><span class="line">		rect := image.Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>*size+<span class="number">1</span>, <span class="number">2</span>*size+<span class="number">1</span>)</span><br><span class="line">		img := image.NewPaletted(rect, palette)</span><br><span class="line">		<span class="keyword">for</span> t := <span class="number">0.0</span>; t &lt; cycles*<span class="number">2</span>*math.Pi; t += res &#123;</span><br><span class="line">			x := math.Sin(t)</span><br><span class="line">			y := math.Sin(t*freq + phase)</span><br><span class="line">			img.SetColorIndex(size+<span class="type">int</span>(x*size+<span class="number">0.5</span>), size+<span class="type">int</span>(y*size+<span class="number">0.5</span>), <span class="type">uint8</span>(index))</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 控制变色频率，生成颜色数组下标</span></span><br><span class="line">		index = i % <span class="number">3</span></span><br><span class="line">		phase += <span class="number">0.1</span></span><br><span class="line">		anim.Delay = <span class="built_in">append</span>(anim.Delay, delay)</span><br><span class="line">		anim.Image = <span class="built_in">append</span>(anim.Image, img)</span><br><span class="line">	&#125;</span><br><span class="line">	gif.EncodeAll(out, &amp;anim) <span class="comment">// 注意：忽略编码错误（直接运行输出的是一堆乱码）</span></span><br><span class="line">	<span class="comment">// go build lissajous.go</span></span><br><span class="line">	<span class="comment">// ./lissajous &gt;out.gif # 生成一个图片</span></span><br><span class="line">	<span class="comment">// ./lissajous web # 开启一个web服务，可以浏览器访问 localhost:8000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>《穿布鞋的马云》 - 部分文字摘录</title>
    <url>/20180908-%E3%80%8A%E7%A9%BF%E5%B8%83%E9%9E%8B%E7%9A%84%E9%A9%AC%E4%BA%91%E3%80%8B%20-%20%E9%83%A8%E5%88%86%E6%96%87%E5%AD%97%E6%91%98%E5%BD%95/</url>
    <content><![CDATA[<p>《穿布鞋的马云》 2018.10.01 ~ 2018.10.02</p>
<p>国庆假期没有什么安排，看了几部电影之后感觉蛮愧疚，又浪费了大把的时间</p>
<p>于是乎在书架上找了本决定看起来压力不那么大的书来看</p>
<p>这本书感觉整体上写的一般，可能定位就是通俗易懂吧</p>
<p>但是对于了解一些细节，还是很有帮助</p>
<p>由于目前待在创业公司，看到很多文字的时候还是很有感触的</p>
<p><strong>如果你想成功，积极乐观地看待任何问题</strong></p>
<p>以下为摘抄：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">马云在校教书，兼职创业:海博翻译社</span><br><span class="line"></span><br><span class="line">92派:1992年后创业的企业家</span><br><span class="line"></span><br><span class="line">想清楚干什么，然后就要清楚该干什么;知道该干什么之后，要明白自己不该干什么</span><br><span class="line">——&gt;能干多久？想干多久？这件事情该干多久就多久。</span><br><span class="line"></span><br><span class="line">记住自己第一天的梦想，至关重要。</span><br><span class="line"></span><br><span class="line">海博翻译社的网页是第一个外国人能在互联网上搜到的第一个中国的网页。</span><br><span class="line"></span><br><span class="line">1995年是全世界互联网商用的第一年。</span><br><span class="line"></span><br><span class="line">只有启蒙才会有更大的市场。</span><br><span class="line"></span><br><span class="line">资本永远不能控制一家公司，资本只能为创业服务，而不能控制公司。</span><br><span class="line"></span><br><span class="line">一个创业公司的创始人能够取得权威媒体的认可，也是一件惊人的事情。</span><br><span class="line"></span><br><span class="line">创业者最重要的是创造条件，如果等到时机成熟的话，一定轮不到我们。</span><br><span class="line"></span><br><span class="line">有了理想之后，我觉得，最重要的是给自己一个承诺，承诺自己要把这个事情做出来。</span><br><span class="line"></span><br><span class="line">如果你不行动，不给自己的梦想一个实践的机会，你永远没有机会。</span><br><span class="line"></span><br><span class="line">创立阿里巴巴之前，三家公司马云得到的创业智慧:</span><br><span class="line">第一，选对创业项目很重要</span><br><span class="line">第二，即便是几个人的小公司，管理制度的建设也很重要</span><br><span class="line">第三，资本控制了你的公司时，你是没有希望的。</span><br><span class="line">第四，创业团队没有相同的理念和共同的目标会导致分裂。</span><br><span class="line">第五，对国有股东有了近距离的认识。</span><br><span class="line"></span><br><span class="line">1998年，阿里巴巴做bbs，长城是最早的bbs，xxx到此一游。</span><br><span class="line"></span><br><span class="line">阿里巴巴，在美国看到的名字，是“open sesame”芝麻开门的意思。</span><br><span class="line"></span><br><span class="line">合作都是团队做出来的，如果别人把你当英雄，你千万不要把自己当英雄，如果自己把自己当英雄必然要走下坡路。</span><br><span class="line"></span><br><span class="line">有几种人是难以在团队中培养的，一种是懂资本的人才，其他是财务、法律人才。因为这样的人才不仅要懂专业，而且需要经验。一般的公司多半是在上市之前引进这样的人才。</span><br><span class="line"></span><br><span class="line">在我擅长的世界里，我非常自信，非常自如。我没有想过要大包大揽，我知道自己的角色是什么。</span><br><span class="line"></span><br><span class="line">对于公众舆论而言，公司只能用一个声音说话，太多声音，只会让这个公司的形象变的模糊。</span><br><span class="line"></span><br><span class="line">世界上最不缺的就是钱，缺的是能用资本创造价值的企业家和企业家精神。</span><br><span class="line"></span><br><span class="line">1999.10高盛投资阿里巴巴使得后者可以对媒体讲一个好的故事:全世界最好的投资银行看好阿里巴巴的长期发展。它让外界对这家初创公司刮目相看。</span><br><span class="line"></span><br><span class="line">永远不要让资本说话，让资本赚钱。</span><br><span class="line"></span><br><span class="line">1999.10，拿到高盛500万(40%)投资的马云，随后孙正义想4000万占有49%的股份，后来3000万美元得到30%的股份，再后来，马云马云觉得钱太多反悔，最后孙正义投资2000万获得20%股份。</span><br><span class="line"></span><br><span class="line">在所有的创业公司发展中，扩张规模是最容易犯错误的时候，而这时犯的错还都是不小的错误。</span><br><span class="line"></span><br><span class="line">人多财务成本高，这并不是主要的，重要的是那些闲人会让全心全意投入加班加点的人感到不平衡，久而久之，公司的文化风气就不行了。</span><br><span class="line"></span><br><span class="line">2009.10 西湖论剑，马云请金庸拉拢当时互联网行业的佼佼者参与。前来的有:金庸，新浪王志东，搜狐张朝阳，网易丁磊，my8848王俊涛，加拿大驻华大使，英国驻沪总理事及50多家国际跨国公司在华代表</span><br><span class="line"></span><br><span class="line">在创业初期要寻找这些梦之队:没有成功，渴望成功，平凡，团结，有共同理想的人。</span><br><span class="line"></span><br><span class="line">2003年每天收入100万元，2004年每天盈利100万元，2005年每天纳税100万元。</span><br><span class="line"></span><br><span class="line">拥有好的业绩和产品，同事技巧性地为自己选定一个对标物，这会让你的公司和产品赢得大量关注。</span><br><span class="line"></span><br><span class="line">“裸奔”和淘宝的倒立与武侠一样，都是极易被识别的与众不同的公司文化符号，也极易产生传播效应。</span><br><span class="line"></span><br><span class="line">好的商人不在于他的梦想多么伟大，但是他的梦想必须是独特的，任何一个成功的企业家，从第一天起都有一个独特的梦想。</span><br><span class="line"></span><br><span class="line">2005.8.11雅虎中国并入阿里巴巴。资产技术+10亿美元，获得阿里40%股份。</span><br><span class="line"></span><br><span class="line">一个公司如果并购另外一个公司的话，文化融合是一件很难的事情。</span><br><span class="line"></span><br><span class="line">聪明是智慧者的天敌，傻瓜用嘴说话，聪明的人用脑子说话，智慧的人用心讲话。所以永远要记住，不要把自己当成最聪明的人，最聪明的人相信总有别人比自己更聪明。</span><br><span class="line"></span><br><span class="line">作为一个领导人，应该控制自己的情绪，很多时候发脾气是无能的表现，合理的情绪控制对于团队的和谐，稳定军心有很大作用。</span><br><span class="line"></span><br><span class="line">改变别人，先改变自己;要完善世界，先完善自己;要帮助好别人，先帮助自己;如果你不能帮助好自己，那一切都是瞎扯。</span><br><span class="line"></span><br><span class="line">人与人之间最本质的区别不是技能、专业、能力、情商，而是人生的使命感和价值观，而企业同理。</span><br><span class="line"></span><br><span class="line">先付出，再得到。</span><br><span class="line"></span><br><span class="line">没有使命感，人生会找不到奋斗的意义;</span><br><span class="line">没价值诶观，奋斗的方式会扭曲。</span><br><span class="line"></span><br><span class="line">80后，90后，我觉得是我的产品，我们没有理由、权利和责任区批判我们的产品，我们唯一有的权利和责任是完善我们的产品。</span><br><span class="line"></span><br><span class="line">真正的幸福感是你知道自己在做什么，知道别人在做什么，你会逐渐从痛苦中找到那些快乐。</span><br><span class="line"></span><br><span class="line">如果你想成功，积极乐观地看待任何问题</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>穿布鞋的马云</tag>
      </tags>
  </entry>
  <entry>
    <title>《重塑大脑，重塑人生》读后感 + 摘抄</title>
    <url>/20190903-%E3%80%8A%E9%87%8D%E5%A1%91%E5%A4%A7%E8%84%91%EF%BC%8C%E9%87%8D%E5%A1%91%E4%BA%BA%E7%94%9F%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F%20+%20%E6%91%98%E6%8A%84/</url>
    <content><![CDATA[<h1 id="一、内容简介"><a href="#一、内容简介" class="headerlink" title="一、内容简介"></a>一、内容简介</h1><p>这是一本人类大脑可塑性研究先驱与翘楚的故事书，正是让我们用触觉看到世界的巴赫-利塔这类先驱，使得我们正在成为来自地球的神。</p>
<h1 id="二、读后感"><a href="#二、读后感" class="headerlink" title="二、读后感"></a>二、读后感</h1><p>这本书对我来讲还是很棒的，刷新了我对大脑的认知;<br>以前还停留在左右脑分工上，殊不知这是日本鬼子整出来的不严谨的概念;<br>看完书，感觉对个人技术、学习方面都有帮助，增加信心，因为之前错过了学校的大把学习时间;<br>运动和学习是互补的，前者产生新的神经干细胞，后者使它们的寿命延长;</p>
<p>这本书我是很推荐看的;<br>犹如最近看完的reids英文版文档;<br>每天看一点点，持续的刺激大脑相关区域，收获还是可以;<br>之前也咨询过英语比较好的同事;<br>反馈说目前想提高，就拿着领域内的文档硬看，坚持下来会有收获的;</p>
<p>每次看完书都会发个微博，避开朋友圈的尴尬，扩大散播范围，与更多的同好交流;</p>
<h1 id="三、内容摘要"><a href="#三、内容摘要" class="headerlink" title="三、内容摘要"></a>三、内容摘要</h1><p>《重塑大脑，重塑人生》0822～0901<br>在持续不断噪声环境中长大的孩子都好动和吵闹，白噪声对大脑发育也有影响。</p>
<span id="more"></span>
<p>大脑重塑性和多巴胺有关，多巴胺可以使达成目标的那个行为的神经回路固话，连接得更紧。</p>
<p>有人说A片提供的是健康的快乐，使人从性的紧张中解放，其实A片提供的是上瘾、耐药性，他会降低快乐的感受。</p>
<p>所以学习没有一蹴而就之事，它是要下苦功的，我们的每一个经验都在改变大脑的连联结。</p>
<p>一定要指出一点：台湾地区一直受日本的影响，社会上流行着日本人说的右脑革命、右脑开发的谬论。婴儿发展初期，大脑两边很相似，只是后期专职分化了。因此绝对没有日本人七田真说的“右脑先发展到三岁才长出脑梁到左脑”</p>
<p>上学太早对身心情绪发展不好。</p>
<p>大脑每做一次不同的活动时，这些活动都改变了大脑的结构，每次练习都改变了大脑神经回路，使他更适合手边的作业，假如某些部件坏掉了，其他部件有时可以接管这项工作。(有时候头皮有反应、头胀、有点不舒服的感觉就是这个原因？)</p>
<p>大脑比我们能想象的还更开放。</p>
<p>大脑练习：找出弱点区域然后强化这个区域的功能。</p>
<p>一个认知能力的测试可以帮人们更加了解自己的大脑。</p>
<p>他们发现小猫的大脑有关键期：从3～8周，在这期间接受刺激才会正常地发展。</p>
<p>人的大脑也有关键期，例如语言发展有关键期，始于出生，终止于8岁到青春期之间。</p>
<p>当大脑在分配处理的资源时，大脑地图遵循的法则是竞争。资源不足时，大家会抢珍贵的资源，用进废退是唯一的法则。</p>
<p>当我们年龄越大，我们使用母语的频率就越高，母语占据我们语言地图的空间就越大，这也是因为我们的大脑有可塑性，我们学新语言才这么难。</p>
<p>使用双语的孩子两种语言的语音都共享一个大的语言地图。</p>
<p>但事实上，当我们学会一个坏习惯时，它占据了大脑地铁的空间，每次我们重复这个坏习惯，它又占据多点，让好习惯难以立足，这是为什么戒掉一个坏习惯比学它时难10倍，也是为什么同年的教育这么重要：最好一开始就教对，不要等到坏习惯已经做大有竞争优势了再去拔除它。</p>
<p>训练让神经元效率更高。</p>
<p>当动物有动机要学习时，大脑会弹性地对学习的需求作出反应。</p>
<p>一心多用不会使你的大脑地图产生永久改变。</p>
<p>多巴胺增强回馈报酬<br>乙酰胆碱帮助大脑加深印象，增强记忆。</p>
<p>都是噪声惹的祸：越靠近机场、公路的孩子智商越低。(持续的背景噪声对听觉皮质有很大的刺激)</p>
<p>把20～20000Hz的声音集合起来就是所谓的白噪声，昼夜播放白噪声会使人失去理智，进而发疯。</p>
<p>打开成年人的关键期：关键是要有激励，多巴胺、乙酰胆碱。</p>
<p>有些人只有在看色情影片时才会勃起，他们很少会想不举根他们爱看色情影片有关系。</p>
<p>恋人可以通过以下方式突破耐受性：浪漫的度个假，尝试新奇的活动，穿新的活动，想办法让对方惊喜。</p>
<p>我们的大脑就是演化来对新奇的东西起反应了。</p>
<p>当一个人成为父亲时，会分泌血管压缩素，会改变我们的大脑使你变得适合做父亲。</p>
<p>催产素通常是在草原田鼠交配时分泌(人性交也会)，这使它们白头偕老，不会花心。</p>
<p>没有安全感的男人在做完爱后，会迅速离开，因为他害怕留下来，会被她影响；女人比较容易爱上与她性交的男人。</p>
<p>爱情的“去学习”也使我们改变了对自己形象的看法。在爱上一个很有权利欲、喜欢操控和贬低别人以抬高自我的人后，会失去所有的自我，变成自我怀疑、对自己没有信心的人。</p>
<p>《洛丽塔》</p>
<p>把猴子一只手神经切断，另外一只手绑起来，结果后面猴子用切断了神经的手进食。</p>
<p>“大量练习”(两周内集中训练)是为了引发启动大脑的可塑性改变，帮助大脑重新组织。</p>
<p>利用大脑可塑性停止忧虑、偏执想法、强迫性行为和坏习惯。</p>
<p>强迫症是：<br>你越做，就越想做；<br>越不做就越不会去想做。</p>
<p>幻肢是来自大脑的重组，脸和手的神经比较靠近。</p>
<p>有些女性的耳朵、锁骨和胸骨受到刺激会感到性兴奋，这三者的大脑地图都跟乳头的大脑地图紧邻；有些因阴茎癌而把阴茎切除的男性不但体验到幻阴茎，而且阴茎还会勃起。(性器官的大脑地图是在脚的旁边)</p>
<p>成功切除幻肢，通过镜子让患者看到幻肢，然后就会有信号传回大脑。</p>
<p>控制阀门理论，用电流刺激抑制痛的神经元，帮助疼痛阀门关闭。这个理论让西方科学家比较能接受针灸。</p>
<p>仅仅用想象和视觉错觉来重建构造大脑地图，没有打针、吃药、电流刺激，就将其痛苦、难以忍受的长期痛苦减轻或治愈了</p>
<p>经颅磁刺激可以无痛刺激脑神经。</p>
<p>实验表明，心智练习(靠想象)是用最少的实际练习来学习新肢体技术的有效方式。</p>
<p>用进废退的大脑需要外界刺激来维持它的地图。(心智下棋的例子最多)</p>
<p>专家不存储答案，但是存储重要的事实和策略，用长期记忆来解决问题是很多领域专家的共同特点。</p>
<p>从神经科学的观点来看，想象一个动作和执行其实没有很大差别。</p>
<p>一个人想象他在使用自己的肌肉可以增加肌肉的强度。</p>
<p>要发展一个新的回路，就必须阻挡或管制它的竞争者，即那些通常最常使用这个回路的信息。例如；想提高触觉等能力，就蒙住眼睛。</p>
<p>通常我们会重组我们的记忆以符合新的环境。</p>
<p>孩子要了解情绪，调节情绪，而产生社会化联结，必须在关键期经历几百次互动(母亲通过触觉 听觉 视觉 表现情绪)</p>
<p>两三岁以前靠内隐记忆，非语言的，例如骑自行车。<br>两三岁以后外显记忆开始发展，收集各种事实，事件，需要语言支持。</p>
<p>有几十个研究显示睡眠帮助我们巩固学习和记忆，而这影响大脑的可塑性改变。</p>
<p>婴儿时期的快速眼动睡眠是大脑可塑性发展的必要条件。</p>
<p>我们常常不自觉得被过去重要人际关系的魅影缠绕而影响现在的人际关系。</p>
<p>计算机听觉训练程序可以帮助老年人训练大脑。</p>
<p>不要因为小事而钻牛角尖，因为压力会产生皮质激素，而这会杀死海马回的神经细胞，海马回有助于短期记忆转为长期记忆</p>
<p>海马回中有神经干细胞。</p>
<p>在刺激丰富的环境中(球类、跑步机等各种玩具)生长的老鼠海马回容积增大15%，神经元数目增加了15%。长期丰富刺激环境对老年人的大脑神经再生有巨大影响。</p>
<p>为了使大脑保持最佳状态，我们必须学习新东西，而不是每天重复已经做的很熟练的事情，终身学习是很有必要的。</p>
<p>运动和学习是互补的，前者产生新的神经干细胞，后者使它们的寿命延长。</p>
<p>学一种新乐器、玩桥牌、打麻将、阅读和跳舞都可以帮助神经元的活化(需要全神贯注的活动才行)。</p>
<p>大脑最怕的就是人呆在相同的环境不动，这样会使大脑萎缩加速，单调不动会减少多巴胺的分泌，破坏维持大脑可塑性的注意力系统。</p>
<p>只有做自己想做的事情才会产生强烈的动机。</p>
<p>半个大脑也可以活的很好。</p>
<p>洗脑遵循了神经可塑性原则，可以用奖励、严厉惩罚以及大量训练的方式达到制约目的。</p>
<p>刚会走路的婴儿每天看电视的时间每增加一小时，他们在7岁时有注意力缺失问题的概率就会增加10%</p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>读书</tag>
      </tags>
  </entry>
  <entry>
    <title>业务安全的资源层攻防介绍</title>
    <url>/20191023-%E4%B8%9A%E5%8A%A1%E5%AE%89%E5%85%A8%E7%9A%84%E8%B5%84%E6%BA%90%E5%B1%82%E6%94%BB%E9%98%B2%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<p>一些简单的黑产攻防介绍</p>
<ol>
<li>修改前置摄像头，直接播放本地视频或者图片(色情诈骗、网约车司机人脸识别);</li>
<li>恶意注册靶机系统：黑卡猫池、群控、云控、箱控(12个主板，模拟120台手机);</li>
<li>模拟点击脚本在黑产中使用比例逐年增高，主要是效果好很难区分是否为真实用户;</li>
<li>ROS软路由(可管理250个IP)、秒拨(每次拨号IP改变);</li>
</ol>
<span id="more"></span>
<ol start="5">
<li>黑产变现的渠道主要有：羊毛、引流(注册账号发布信息);</li>
<li>很多黑产行为在单个平台来讲都是一次性活动;</li>
<li>改机工具：类沙箱，可以更改大量手机信息，提供快照功能，方便上下游复现现场环境，权限高，欺骗效果好;</li>
<li>针对改机工具一般都进行恶意环境检测，指令集中是否有hook、cpu架构、文件目录等;</li>
<li>防护方针：增加黑产的量化攻击成本(时间、资金);</li>
<li>给出模糊的错误提示，而不是准确的，否则黑产很容易试出策略;</li>
<li>不要在注册环节就大量拦截，要考虑用户体验，也要收集黑产行为信息，杀量化攻击;</li>
<li>忘记密码可能会被利用，找回密码的机制要严格审核(匹配通讯录等);</li>
<li>黑产资源成本高，全网来讲资源重复利用率高;</li>
<li>IP资源、定位、手机、脚本、改机工具、云控等方便规模化，精细化运作;</li>
</ol>
<p>从中不难看出源头是黑卡、被利用的宽带账号、也有可能是路由器、物联网设备等;<br>运营商加强实名认证<br>宽带拨号频率限制<br>网络设备安全加固，关闭特殊权限端口，禁用弱密码</p>
<p>打击网络黑产交易，防止黑产规模化，产业化趋势;</p>
<p>蜜罐系统收集黑产IP<br>提供IP代理给黑产使用了解对方信息</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>安全</tag>
      </tags>
  </entry>
  <entry>
    <title>为什么要使用队列 - Java</title>
    <url>/20170801-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E9%98%9F%E5%88%97%20-%20Java/</url>
    <content><![CDATA[<h2 id="一、Java中的队列：Queue接口"><a href="#一、Java中的队列：Queue接口" class="headerlink" title="一、Java中的队列：Queue接口"></a>一、Java中的队列：Queue接口</h2><p>Queue接口与List、Set同一级别，都是继承了Collection接口。LinkedList实现了Queue接口。Queue接口窄化了对LinkedList的方法的访问权限（即在方法中的参数类型如果是Queue时，就完全只能访问Queue接口所定义的方法 了，而不能直接访问 LinkedList的非Queue的方法），以使得只有恰当的方法才可以使用。BlockingQueue 继承了Queue接口。</p>
<p>队列是一种数据结构．它有两个基本操作：在队列尾部加入一个元素，和从队列头部移除一个元素（注意不要弄混队列的头部和尾部）就是说，队列以一种先进先出的方式管理数据，如果你试图向一个 已经满了的阻塞队列中添加一个元素或者是从一个空的阻塞队列中移除一个元索，将导致线程阻塞．在多线程进行合作时，阻塞队列是很有用的工具。工作者线程可以定期地把中间结果存到阻塞队列中而其他工作者线程把中间结果取出并在将来修改它们。队列会自动平衡负载。如果第一个线程集运行得比第二个慢，则第二个 线程集在等待结果时就会阻塞。如果第一个线程集运行得快，那么它将等待第二个线程集赶上来。下表显示了jdk1.5中的阻塞队列的操作：</p>
<table>
<thead>
<tr>
<th align="left">排序方法</th>
<th align="left">平均情况</th>
<th align="left">最好情况</th>
</tr>
</thead>
<tbody><tr>
<td align="left">add</td>
<td align="left">增加一个元素</td>
<td align="left">如果队列已满，则抛出一个IllegalSlabEepeplian异常</td>
</tr>
<tr>
<td align="left">remove</td>
<td align="left">移除并返回队列头部的元素</td>
<td align="left">如果队列为空，则抛出一个NoSuchElementException异常</td>
</tr>
<tr>
<td align="left">element</td>
<td align="left">返回队列头部的元素</td>
<td align="left">如果队列为空，则抛出一个NoSuchElementException异常</td>
</tr>
<tr>
<td align="left">offer</td>
<td align="left">添加一个元素并返回true</td>
<td align="left">如果队列已满，则返回false</td>
</tr>
<tr>
<td align="left">poll</td>
<td align="left">移除并返问队列头部的元素</td>
<td align="left">如果队列为空，则返回null</td>
</tr>
<tr>
<td align="left">peek</td>
<td align="left">返回队列头部的元素</td>
<td align="left">如果队列为空，则返回null</td>
</tr>
<tr>
<td align="left">put</td>
<td align="left">返回队列头部的元素</td>
<td align="left">如果队列满，则阻塞</td>
</tr>
<tr>
<td align="left">take</td>
<td align="left">返回队列头部的元素</td>
<td align="left">如果队列为空，则阻塞</td>
</tr>
</tbody></table>
<h2 id="二、消息队列"><a href="#二、消息队列" class="headerlink" title="二、消息队列"></a>二、消息队列</h2><p>介绍：</p>
<p>消息队列中间件是分布式系统中重要的组件，主要解决应用耦合，异步消息，流量削锋等问题。</p>
<p>实现高性能，高可用，可伸缩和最终一致性架构。</p>
<p>是大型分布式系统不可缺少的中间件。</p>
<p>目前在生产环境，使用较多的消息队列有ActiveMQ，RabbitMQ，ZeroMQ，Kafka，MetaMQ，RocketMQ等。</p>
<p>场景：异步处理、应用解耦、流量削锋、日志处理</p>
<hr>
<p>以上就是关于为什么要使用队列的大致说明</p>
<hr>
<p>参考：</p>
<ol>
<li><a href="http://blog.csdn.net/kangbin825/article/details/53966618" target="_blank">Java中队列的使用</a></li>
<li><a href="http://blog.csdn.net/he90227/article/details/50800646" target="_blank">消息队列的使用场景</a></li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>队列</tag>
      </tags>
  </entry>
  <entry>
    <title>企业邮箱签名模版</title>
    <url>/20170317-%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1%E7%AD%BE%E5%90%8D%E6%A8%A1%E7%89%88/</url>
    <content><![CDATA[<p>下面是源码，有些邮箱可以直接用html源码设置。</p>
<p>我用得是网易邮箱大师，把代码存为本地网页打开全选复制</p>
<p>粘贴到邮箱大师的签名里面即可！亲测有效，还挺好看的<br><img src="http://wx3.sinaimg.cn/mw690/b2e389b6ly1fdptblhmqoj20f90iojt1.jpg" /></p>
<p><strong>代码如下：</strong></p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;&lt;/head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">   &lt;style&gt;.g &#123;clear:both; height:0;&#125;.mailsign &#123;font-size:12px; color:#808080; margin:0 35px; line-height:22px;&#125;.logo &#123;width:305px; height:35px; margin:20px 0 10px -15px;&#125;.name &#123;font-weight:700; font-size:14px; float:left; color:#808080; height:30px; line-height:30px;&#125;.position &#123;float:left; margin-left:15px; color:#808080; height:30px; line-height:30px;&#125;.company1 &#123;clear:both; font-weight:700; font-size:14px; color:#808080; margin-top:10px;&#125;.company2 &#123;clear:both; font-weight:700; font-size:14px; color:#808080; margin-bottom:10px;&#125;.add&#123;&#125;.add .zip &#123; margin-left:5px; color:#a0a0a0; font-size:10px;&#125;.tel &#123;&#125;.fax &#123;&#125;.phone &#123;&#125;.website &#123;&#125;.website a &#123;color:#808080; text-decoration:none !important;&#125;.eng &#123;&#125;.state &#123;color:#a0a0a0; margin-top:20px; padding:15px; border:1px solid #CCC; border-radius:10px&#125;.state h4 &#123; margin:0;&#125;.state p &#123;margin:0; font-size:7.5pt;&#125;&lt;/style&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;div class=&quot;mailsign&quot;&gt;</span><br><span class="line">   &lt;hr /&gt;</span><br><span class="line">    &lt;div class=&quot;g&quot;&gt;</span><br><span class="line">     &lt;div class=&quot;name&quot;&gt;</span><br><span class="line">      &lt;t id=&quot;tname&quot;&gt;</span><br><span class="line">       HiSEN</span><br><span class="line">      &lt;/t&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">     &lt;div class=&quot;position&quot;&gt;</span><br><span class="line">      &lt;t id=&quot;tposition&quot;&gt;</span><br><span class="line">       中级Java开发工程师</span><br><span class="line">      &lt;/t&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;g&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;company1&quot;&gt;</span><br><span class="line">     HiSEN网络在线技术有限公司</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;company2&quot;&gt;</span><br><span class="line">     &lt;t id=&quot;tcompany&quot;&gt;</span><br><span class="line">      技术部</span><br><span class="line">     &lt;/t&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;add&quot;&gt;</span><br><span class="line">     &lt;span&gt;地址/Add ：&lt;/span&gt;</span><br><span class="line">     &lt;t id=&quot;tadd&quot;&gt;</span><br><span class="line">      北京朝阳区xxx</span><br><span class="line">     &lt;/t&gt;</span><br><span class="line">    &lt;div class=&quot;mob&quot;&gt;</span><br><span class="line">     &lt;span&gt;手机/Mob：&lt;/span&gt;</span><br><span class="line">     &lt;t id=&quot;tmob&quot;&gt;</span><br><span class="line">      15555555555</span><br><span class="line">     &lt;/t&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;website&quot;&gt;</span><br><span class="line">     &lt;span&gt;网址/URL    ：&lt;/span&gt;</span><br><span class="line">     &lt;a href=&quot;http://hisen.me/&quot; target=&quot;_blank&quot;&gt;hisen.me&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;state&quot;&gt;</span><br><span class="line">     &lt;h4&gt;保密声明：&lt;/h4&gt;</span><br><span class="line">     &lt;p&gt;此文件中可能含有机密类信息，仅限于上方提到的人员使用。若非以上人员或负责将该信息传送给上述人员的职员或代理人，严禁对此文件作任何形式的汇报、散布、传播及复制。若非此文件的指定收件人，请立即以邮件形式联系发件人并销毁所有原始文件的拷贝。&lt;/p&gt;</span><br><span class="line">     &lt;h4&gt;CONFIDENTIALITY NOTICE:&lt;/h4&gt;</span><br><span class="line">     &lt;p&gt;The information contained in this transmission may contain privileged and confidential information and is intended only for the use of the person(s) named above. If you are not the intended recipient, or an employee or agent responsible for delivering this message to the intended recipient, any review, dissemination, distribution or duplication of this communication is strictly prohibited. If you are not the intended recipient, please contact the sender immediately by reply e-mail and destroy all copies of the original message.&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt; </span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>RandomThoughts</category>
      </categories>
      <tags>
        <tag>模版</tag>
      </tags>
  </entry>
  <entry>
    <title>修改路由表：网线接内网、无线走外网 - 以及带来的问题</title>
    <url>/20171031-%E4%BF%AE%E6%94%B9%E8%B7%AF%E7%94%B1%E8%A1%A8%EF%BC%9A%E7%BD%91%E7%BA%BF%E6%8E%A5%E5%86%85%E7%BD%91%E3%80%81%E6%97%A0%E7%BA%BF%E8%B5%B0%E5%A4%96%E7%BD%91%20-%20%E4%BB%A5%E5%8F%8A%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#删除原有的规则</span><br><span class="line">route delete 0.0.0.0</span><br><span class="line"></span><br><span class="line">#新增外网 172.16.188.254为网关(修改之前先看好)</span><br><span class="line">route add 0.0.0.0 mask 0.0.0.0 172.16.188.254 metric 30  -p</span><br><span class="line"></span><br><span class="line">#新增内网 16.0.0.0为内网网段 17.82.200.254为网关</span><br><span class="line">route add 16.0.0.0 mask 255.0.0.0 17.82.200.254 metric 10 -p</span><br></pre></td></tr></table></figure>

<p>带来的问题就是：<br>内网的数据库，在启动之后。时不时会自动断开，导致影响正常工作，时不时得重启程序才能测试</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>软件</tag>
      </tags>
  </entry>
  <entry>
    <title>利用IDEA写Hexo博客的一些技巧</title>
    <url>/20170303-%E5%88%A9%E7%94%A8IDEA%E5%86%99Hexo%E5%8D%9A%E5%AE%A2%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<p>今天偶然看到有人说用idea写博客</p>
<p>刚开始我觉得这样会很麻烦，后来想想以前写博客也是醉了</p>
<p>先新建一个 _post 的快捷方式</p>
<p>进去，然后到博客根目录</p>
<p>打开Git Bash，然后执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo n &quot;你要写的文章题目&quot;</span><br></pre></td></tr></table></figure>
<p>然后在 _post 快捷方式打开刚刚新建的markdown文件，用markdownpad打开编辑。。。</p>
<p>编辑完了回到Git Bash。。。。想想就很麻烦</p>
<hr>
<p>于是乎用IDEA打开博客根目录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sources -&gt; _post -&gt; new -&gt; Edit File Templates</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>name：markdown extension：md<br>内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: $&#123;NAME&#125;</span><br><span class="line">keywords: []</span><br><span class="line">date: $&#123;DATE&#125; $&#123;TIME&#125;</span><br><span class="line">tags: []</span><br><span class="line">categories:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>接下来apply -&gt; *.md -&gt; 下面选择markdown</p>
<p>以后新建markdown文件就会默认带上这个模版</p>
<p>效果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">title: 利用IDEA写Hexo博客的一些技巧</span><br><span class="line">keywords: []</span><br><span class="line">date: 2017/3/3 10:51</span><br><span class="line">tags: []</span><br><span class="line">categories: Tech</span><br></pre></td></tr></table></figure>

<p>接下来到了发布的时间，于是我们可以设置一下Terminal（在setting里面），设置为bash（git目录下）</p>
<p>设置完了之后Alt + F12 调出 Terminal 即可进行git操作</p>
<p>到此，大功告成，我要去更新博客了</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>利用Java构造二叉树 - 前序、中序、后续、层次遍历</title>
    <url>/20171113-%E5%88%A9%E7%94%A8Java%E6%9E%84%E9%80%A0%E4%BA%8C%E5%8F%89%E6%A0%91%20-%20%E5%89%8D%E5%BA%8F%E3%80%81%E4%B8%AD%E5%BA%8F%E3%80%81%E5%90%8E%E7%BB%AD%E3%80%81%E5%B1%82%E6%AC%A1%E9%81%8D%E5%8E%86/</url>
    <content><![CDATA[<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>最多有两棵子树的有序树，称为二叉树。二叉树是一种特殊的树。</p>
<h2 id="性质"><a href="#性质" class="headerlink" title="性质"></a>性质</h2><p>这里规定二叉树的根结点的层次为1。</p>
<ol>
<li>性质1：则二叉树的第i 层最多有2i-1个结点（在此二叉树的层次从1开始，i≥1）</li>
<li>性质2：深度为k的二叉树最多有2k-1个结点。(k≥1)</li>
<li>性质3：对任何一棵二叉树T, 如果其叶结点个数为n0, 度为2的非叶结点个数为n2, 则有<br>      n0 &#x3D; n2 + 1</li>
<li>性质4：具有 n(n&gt;0)个结点的完全二叉树的深度为⎣log2n⎦+1；⎦x⎦表示不超过x的最大整数。</li>
<li>性质5：如果对一棵有n个结点的完全二叉树的结点按层序编号（从第1层到第⎣l og2n⎦ +1层，每层从左到右）,则对任一结点i（1≤i≤n),有：<br>5.1 (1)如果i&#x3D;1，则结点i无双亲，是二叉树的根；如果i&gt;1，则其双亲是结点⎣i&#x2F;2⎦。<br>5.2 (2) 如果2i&lt;&#x3D;n, 则结点i的左孩子结点是2i；否则，结点i为叶子结点，无左孩子结点。<br>5.3 (3)如果2i＋1&lt;&#x3D;n，则结点i的右孩子是结点2i＋1; 否则，结点i为叶子结点，无右孩子结点。</li>
</ol>
<h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><p><a href="https://github.com/hisenyuan/IDEAPractice/tree/master/src/main/Java/com/hisen/interview/tiger20171110/btree" target="_blank">https://github.com/hisenyuan/btree</a></p>
<h2 id="二叉链表的实现"><a href="#二叉链表的实现" class="headerlink" title="二叉链表的实现"></a>二叉链表的实现</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hisen.interview.tiger20171110.btree;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : yhx</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2017/11/10 18:42</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@descriptor</span> : 二叉树的 - 二叉链表实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkBTree</span> <span class="keyword">implements</span> <span class="title class_">BTree</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Object data;</span><br><span class="line">  <span class="keyword">private</span> BTree lChild;</span><br><span class="line">  <span class="keyword">private</span> BTree rChild;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">LinkBTree</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.clearTree();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">LinkBTree</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.data = data;</span><br><span class="line">    <span class="built_in">this</span>.rChild = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>.lChild = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLfetTree</span><span class="params">(BTree lChild)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.lChild = lChild;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> BTree <span class="title function_">getLfetTree</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> lChild;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addRightTree</span><span class="params">(BTree rChild)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.rChild = rChild;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> BTree <span class="title function_">getRightTree</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> rChild;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clearTree</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.data = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>.rChild = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>.lChild = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDeep</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> deep(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">getRootData</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasLeftTree</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (lChild != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasRightTree</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (rChild != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmptyTree</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((lChild == <span class="literal">null</span> &amp;&amp; rChild == <span class="literal">null</span> &amp;&amp; data == <span class="literal">null</span>) || <span class="built_in">this</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isLeaf</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (lChild == <span class="literal">null</span> &amp;&amp; rChild == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeLeftTree</span><span class="params">()</span> &#123;</span><br><span class="line">    lChild = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeRightTree</span><span class="params">()</span> &#123;</span><br><span class="line">    rChild = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> BTree <span class="title function_">getRoot</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRootData</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.data = data;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> size(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">(BTree bTree)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (bTree == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bTree.isLeaf()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (bTree.getLfetTree() == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> size(bTree.getRightTree()) + <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bTree.getRightTree() == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> size(bTree.getLfetTree()) + <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size(bTree.getLfetTree()) + size(bTree.getRightTree()) + <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 计算二叉树的高度</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">deep</span><span class="params">(BTree bTree)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (bTree.isEmptyTree()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bTree.isLeaf()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (bTree.getLfetTree() == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> deep(bTree.getRightTree()) + <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bTree.getRightTree() == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> deep(bTree.getLfetTree()) + <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(deep(bTree.getLfetTree()), deep(bTree.getRightTree())) + <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二叉树的各种遍历"><a href="#二叉树的各种遍历" class="headerlink" title="二叉树的各种遍历"></a>二叉树的各种遍历</h2><p>遍历方式：前序、中序、后序、层次</p>
<span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hisen.interview.tiger20171110.btree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : yhx</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2017/11/13 12:15</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@descriptor</span> : 二叉树的遍历</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderBTree</span> <span class="keyword">implements</span> <span class="title class_">Visit</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 前序遍历</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> root 根节点</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preOrder</span><span class="params">(BTree root)</span> &#123;</span><br><span class="line">    visit(root);</span><br><span class="line">    <span class="keyword">if</span> (root.getLfetTree() != <span class="literal">null</span>) &#123;</span><br><span class="line">      preOrder(root.getLfetTree());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root.getRightTree() != <span class="literal">null</span>) &#123;</span><br><span class="line">      preOrder(root.getRightTree());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 中序遍历</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> root 根节点</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(BTree root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root.getLfetTree() != <span class="literal">null</span>) &#123;</span><br><span class="line">      inOrder(root.getLfetTree());</span><br><span class="line">    &#125;</span><br><span class="line">    visit(root);</span><br><span class="line">    <span class="keyword">if</span> (root.getRightTree() != <span class="literal">null</span>) &#123;</span><br><span class="line">      inOrder(root.getRightTree());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 后序遍历</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> root 根节点</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postOrder</span><span class="params">(BTree root)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root.getLfetTree() != <span class="literal">null</span>) &#123;</span><br><span class="line">      postOrder(root.getLfetTree());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root.getRightTree() != <span class="literal">null</span>) &#123;</span><br><span class="line">      postOrder(root.getRightTree());</span><br><span class="line">    &#125;</span><br><span class="line">    visit(root);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 层次遍历 - 利用队列</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> bTree 根节点</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">levelOrder</span><span class="params">(BTree bTree)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (bTree == <span class="literal">null</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LinkedList&lt;BTree&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">BTree</span> <span class="variable">current</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// 将根节点入队列</span></span><br><span class="line">    queue.offer(bTree);</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty())&#123;</span><br><span class="line">      <span class="comment">// 队头元素出队列</span></span><br><span class="line">      current = queue.poll();</span><br><span class="line">      visit(current);</span><br><span class="line">      <span class="comment">// 如果左节点不为空，入队列</span></span><br><span class="line">      <span class="keyword">if</span> (current.getLfetTree() != <span class="literal">null</span>)&#123;</span><br><span class="line">        queue.offer(current.getLfetTree());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 如果右节点不为空，入队列</span></span><br><span class="line">      <span class="keyword">if</span> (current.getRightTree() != <span class="literal">null</span>)&#123;</span><br><span class="line">        queue.offer(current.getRightTree());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 访问二叉树的节点</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> bTree 树的节点</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(BTree bTree)</span> &#123;</span><br><span class="line">    System.out.print(bTree.getRootData() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://blog.csdn.net/luoweifu/article/details/9077521">http://blog.csdn.net/luoweifu/article/details/9077521</a></p>
<p><a href="http://blog.csdn.net/snow_7/article/details/51815787">http://blog.csdn.net/snow_7/article/details/51815787</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>二叉树</tag>
        <tag>数据结构</tag>
      </tags>
  </entry>
  <entry>
    <title>各系统查询数据时间分布情况统计-日志处理</title>
    <url>/20191025-%E5%90%84%E7%B3%BB%E7%BB%9F%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E6%97%B6%E9%97%B4%E5%88%86%E5%B8%83%E6%83%85%E5%86%B5%E7%BB%9F%E8%AE%A1-%E6%97%A5%E5%BF%97%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<h1 id="一、说明"><a href="#一、说明" class="headerlink" title="一、说明"></a>一、说明</h1><p>做这件事的目的是为了了解一条数据库记录从创建到使用的一个情况;<br>查询分布时间计算方式采用Top Percentile方式，就是按一定排序的数据，前面xx%的最大值是多少;<br>TP999 1ms 代表某接口99.9%的响应都在1ms之内;</p>
<p>最终的目的也就是为了知道数据多久之后可以打入冷宫，使用廉价存储;<br>冷热数据分级处理有利于在性能和成本上达到一定的平衡;<br>如把内存缓存时间设置为tp90所处的时间，那么90%的数据都能快速返回，其它少量数据回源处理;</p>
<p>关键字<br>Java格式化输出<br>Java8<br>stream<br>parallelStream<br>分组<br>排序<br>DoubleSummaryStatistics数据分析<br>TP999</p>
<h1 id="二、效果"><a href="#二、效果" class="headerlink" title="二、效果"></a>二、效果</h1><p>日志源数据预览</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">19-10-24.14:47:12.721 [THREAD-22000-18-T-17] INFO  FacadeImpl        - response yw:jiaoyi, orderId:123456, time:2019-10-24T14:46:44</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>yw</th>
<th>count</th>
<th>min(ms)</th>
<th>max(ms)</th>
<th>tp50(ms)</th>
<th>tp90(ms)</th>
<th>tp99(ms)</th>
<th>tp999(ms)</th>
</tr>
</thead>
<tbody><tr>
<td>hisen</td>
<td>1000</td>
<td>1</td>
<td>10000</td>
<td>20</td>
<td>60</td>
<td>90</td>
<td>130</td>
</tr>
<tr>
<td>hisen-1</td>
<td>200</td>
<td>2</td>
<td>16000</td>
<td>16</td>
<td>50</td>
<td>70</td>
<td>110</td>
</tr>
</tbody></table>
<p>ps 输出是格式化的数据，并不是表格，可以通过:</p>
<p>world-&gt;粘贴输出文本-&gt;插入-&gt;表格-&gt;文本转换成表格-&gt;空格</p>
<p>即可完成文字到表格转换</p>
<p>这种过程可能比较low，但是也需要时间去处理，过程中还得配合linux命令等整合文本;</p>
<h1 id="三、代码"><a href="#三、代码" class="headerlink" title="三、代码"></a>三、代码</h1><p>完整：<a href="https://github.com/hisenyuan/IDEAPractice/blob/master/src/main/Java/com/hisen/utils/CallerAnalyze.Java">github-CallerAnalyze.Java</a><br>摘要如下：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @author hisenyuan</span><br><span class="line"> * @date 2019-10-25 23:20</span><br><span class="line"> */</span><br><span class="line">public class CallerAnalyze &#123;</span><br><span class="line">    public static void main(String[] args) throws IOException &#123;</span><br><span class="line">        String filePath = &quot;/Users/hisenyuan/yw/yw.log&quot;;</span><br><span class="line">        ArrayList&lt;CallerTimeVo&gt; callerTimeVos = getCallerTimeVos(filePath);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;size:&quot; + callerTimeVos.size());</span><br><span class="line">        System.out.printf(&quot;%-20s%-20s%-20s%-20s%-20s%-20s%-20s%-20s&quot;, &quot;yw&quot;, &quot;count&quot;, &quot;min(ms)&quot;, &quot;max(ms)&quot;, &quot;tp50(ms)&quot;, &quot;tp90(ms)&quot;, &quot;tp99(ms)&quot;, &quot;tp999(ms)&quot;);</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Map&lt;String, List&lt;CallerTimeVo&gt;&gt; callerMap = callerTimeVos.parallelStream().collect(Collectors.groupingBy(CallerTimeVo::getCaller));</span><br><span class="line"></span><br><span class="line">        callerMap.entrySet()</span><br><span class="line">                .stream()</span><br><span class="line">                .sorted(Comparator.comparingInt(value -&gt; value.getValue().size()))</span><br><span class="line">                .forEach(stringListEntry -&gt; &#123;</span><br><span class="line">                    String caller = stringListEntry.getKey();</span><br><span class="line">                    System.out.printf(&quot;%-20s&quot;, caller);</span><br><span class="line">                    List&lt;Long&gt; sorted = stringListEntry.getValue()</span><br><span class="line">                            .parallelStream()</span><br><span class="line">                            .map(CallerTimeVo::getDuration)</span><br><span class="line">                            .sorted(Long::compareTo)</span><br><span class="line">                            .collect(Collectors.toList());</span><br><span class="line">                    calTime(sorted);</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    private static ArrayList&lt;CallerTimeVo&gt; getCallerTimeVos(String filePath) throws IOException &#123;</span><br><span class="line">        ArrayList&lt;CallerTimeVo&gt; callerTimeVos = Lists.newArrayList();</span><br><span class="line">        Files.asCharSource(new File(filePath), Charset.forName(&quot;UTF-8&quot;)).readLines(new LineProcessor&lt;String&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public boolean processLine(String line) &#123;</span><br><span class="line">                // 处理每一行</span><br><span class="line">                CallerTimeVo vo = getCreateTimeVo(line);</span><br><span class="line">                callerTimeVos.add(vo);</span><br><span class="line">                // false 会中断操作</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public String getResult() &#123;</span><br><span class="line">                return null;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        return callerTimeVos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>基本排序算法的时间/空间复杂度表</title>
    <url>/20170120-%E5%9F%BA%E6%9C%AC%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4-%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E8%A1%A8/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th align="left">排序方法</th>
<th align="left">平均情况</th>
<th align="left">最好情况</th>
<th align="left">最坏情况</th>
<th align="left">辅助空间</th>
<th align="left">稳定性</th>
</tr>
</thead>
<tbody><tr>
<td align="left">冒泡排序</td>
<td align="left">O(n²)</td>
<td align="left">O(nlogn)</td>
<td align="left">O(n²)</td>
<td align="left">O(1)</td>
<td align="left">稳定</td>
</tr>
<tr>
<td align="left">简单选择</td>
<td align="left">O(n²)</td>
<td align="left">O(n²)</td>
<td align="left">O(n²)</td>
<td align="left">O(1)</td>
<td align="left">稳定</td>
</tr>
<tr>
<td align="left">直接插入</td>
<td align="left">O(n²)</td>
<td align="left">O(n)</td>
<td align="left">O(n²)</td>
<td align="left">O(1)</td>
<td align="left">稳定</td>
</tr>
<tr>
<td align="left">希尔排序</td>
<td align="left">O(nlogn)~O(n²)</td>
<td align="left">O(n^1.3)</td>
<td align="left">O(n²)</td>
<td align="left">O(1)</td>
<td align="left">不稳定</td>
</tr>
<tr>
<td align="left">堆排序</td>
<td align="left">O(nlogn)</td>
<td align="left">O(nlogn)</td>
<td align="left">O(nlogn)</td>
<td align="left">O(1)</td>
<td align="left">不稳定</td>
</tr>
<tr>
<td align="left">归并排序</td>
<td align="left">O(nlogn)</td>
<td align="left">O(nlogn)</td>
<td align="left">O(nlogn)</td>
<td align="left">O(n)</td>
<td align="left">不稳定</td>
</tr>
<tr>
<td align="left">快速排序</td>
<td align="left">O(nlogn)</td>
<td align="left">O(nlogn)</td>
<td align="left">O(n²)</td>
<td align="left">O(nlogn)~O(n)</td>
<td align="left">不稳定</td>
</tr>
</tbody></table>
<p>以上</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>算法</tag>
        <tag>排序</tag>
      </tags>
  </entry>
  <entry>
    <title>多线程基础 &amp; 进阶 丨 系统架构 - CSDN博主：说好不能打脸</title>
    <url>/20170818-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%20&amp;%20%E8%BF%9B%E9%98%B6%20-%20CSDN%E5%8D%9A%E4%B8%BB%EF%BC%9A%E8%AF%B4%E5%A5%BD%E4%B8%8D%E8%83%BD%E6%89%93%E8%84%B8/</url>
    <content><![CDATA[<p>发现一个不错的技术博客，分享一下</p>
<p>有时间多学习<br><a href="http://blog.csdn.net/yinwenjie/article/category/6039439">多线程基础 &amp; 进阶</a><br><a href="http://blog.csdn.net/yinwenjie/article/category/5585451">系统架构</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>多线程</tag>
      </tags>
  </entry>
  <entry>
    <title>多线程：优雅的使用ExecutorService进行压力测试</title>
    <url>/20180714-%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%9A%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8ExecutorService%E8%BF%9B%E8%A1%8C%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<p>很多时候写功能或者接口需要进行压力测试，<br>今天发现jwt在生成token的时候，如果输入都是一样的<br>仅有一个签发时间不一样，生成的token是有可能是一样的</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCreate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ThreadFactory</span> <span class="variable">namedThreadFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadFactoryBuilder</span>().setNameFormat(<span class="string">&quot;hisenyuan&quot;</span>).build();</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">                <span class="number">20</span>,</span><br><span class="line">                <span class="number">50</span>,</span><br><span class="line">                <span class="number">10000L</span>,</span><br><span class="line">                TimeUnit.MILLISECONDS,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="number">10240</span>),</span><br><span class="line">                namedThreadFactory,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy());</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// 需要提交的内容</span></span><br><span class="line">            pool.execute(<span class="built_in">this</span>::createTokenTest);</span><br><span class="line">        &#125;</span><br><span class="line">        pool.shutdown();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (!pool.awaitTermination(<span class="number">500</span>, TimeUnit.MILLISECONDS)) &#123;</span><br><span class="line">                LOGGER.debug(<span class="string">&quot;Waiting for terminate&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            LOGGER.error(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>如何学习NIO - NIO简单的例子</title>
    <url>/20170227-%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0NIO-NIO%E7%AE%80%E5%8D%95%E7%9A%84%E4%BE%8B%E5%AD%90/</url>
    <content><![CDATA[<p>这里参照一些例子写了个简单的CS模型</p>
<p>例子代码：<a href="https://github.com/hisen-yuan/Practice/tree/master/src/com/hisen/nio/cs" target="_blank">NIO应用之简单的CS模型</a></p>
<p>可以用来简单的理解一下Java nio</p>
<hr>
<p>深入的理解可以看看下面的链接。</p>
<p>Java NIO 系列教程:<a href="http://www.iteye.com/magazines/132-Java-NIO" target="_blank">点击查看</a></p>
<p>如何学习Java的NIO？:<a href="https://www.zhihu.com/question/29005375" target="_blank">点击查看</a></p>
<hr>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>nio</tag>
      </tags>
  </entry>
  <entry>
    <title>如何成为专业的技术从业者 - 《程序员的职业素养》 - Bob大叔出品</title>
    <url>/20191008-%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E4%B8%93%E4%B8%9A%E7%9A%84%E6%8A%80%E6%9C%AF%E4%BB%8E%E4%B8%9A%E8%80%85%20-%20%E3%80%8A%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%81%8C%E4%B8%9A%E7%B4%A0%E5%85%BB%E3%80%8B/</url>
    <content><![CDATA[<p>很不错的一本书，作为程序员都值得去看一看，170+页周末一天可以看完， 还包括做笔记</p>
<p>医学专业已经建立起一套严密的辅导体系<br>软件行业建立一种包含学徒期、实习期、和长期指引的机制已是迫在眉睫</p>
<p>有人指导大多数人都可以快速的成长，节省很多走弯路的时间<br>当然，事在人为，只是说掌握了书中的那些要领，成为专业人员的几率更高，做更好的自己<br>如果从小学开始就一直有人引路并且自己也愿意跟着走的话，应该会很棒，现在也不晚，抓住时间就好</p>
<p>主要内容：<br>专业主义<br>学会说“不”，学会说“是”<br>编码的正确姿势<br>TDD<br>卡塔练习很重要，肌肉反应<br>验收测试(各方都一致同一的检验方式)<br>测试策略，自动化测试是趋势<br>时间管理，番茄工作法，注意力点数<br>预估的概念以及方法<br>压力，避免与面对<br>协作，学会与人交流<br>团队与项目，有凝聚力的团队战斗力强<br>软件开发如医生一样培训更佳<br>合适的工具事半功倍</p>
<span id="more"></span>
<p>豆瓣链接：<a href="https://book.douban.com/subject/11614538/">《代码简洁之道:程序员的职业素养》</a></p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>read</tag>
      </tags>
  </entry>
  <entry>
    <title>如何检测Linux VPS系统架构是Xen、KVM还是OpenVZ</title>
    <url>/20170208-%E5%A6%82%E4%BD%95%E6%A3%80%E6%B5%8BLinux-VPS%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E6%98%AFXen%E3%80%81KVM%E8%BF%98%E6%98%AFOpenVZ/</url>
    <content><![CDATA[<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root]# virt-what</span><br><span class="line">xen</span><br><span class="line">xen-hvm</span><br></pre></td></tr></table></figure>

<h2 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget http://people.redhat.com/~rjones/virt-what/files/virt-what-1.12.tar.gz</span><br><span class="line">tar zxvf virt-what-1.12.tar.gz</span><br><span class="line">cd virt-what-1.12/</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">virt-what</span><br></pre></td></tr></table></figure>

<h2 id="Ubuntu-debian"><a href="#Ubuntu-debian" class="headerlink" title="Ubuntu&#x2F;debian"></a>Ubuntu&#x2F;debian</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt-get install virt-what</span><br><span class="line">virt-what</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>如何线程安全的使用HashMap</title>
    <url>/20171114-%E5%A6%82%E4%BD%95%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BD%BF%E7%94%A8HashMap/</url>
    <content><![CDATA[<h2 id="线程不安全的原因"><a href="#线程不安全的原因" class="headerlink" title="线程不安全的原因"></a>线程不安全的原因</h2><ol>
<li>HashMap底层是一个Entry数组，一旦发生Hash冲突的的时候，HashMap采用拉链法解决碰撞冲突.</li>
<li>put方法也不是同步的</li>
<li>扩容的方法也不是同步的</li>
</ol>
<p>参考：<a href="https://www.cnblogs.com/qiumingcheng/p/5259892.html">https://www.cnblogs.com/qiumingcheng/p/5259892.html</a></p>
<h2 id="如何线程安全的使用"><a href="#如何线程安全的使用" class="headerlink" title="如何线程安全的使用"></a>如何线程安全的使用</h2><span id="more"></span>
<ol>
<li>Hashtable</li>
<li>ConcurrentHashMap</li>
<li>SynchronizedMap</li>
</ol>
<p>####例子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//Hashtable</span><br><span class="line">Map&lt;String, String&gt; hashtable = new Hashtable&lt;&gt;();</span><br><span class="line">//synchronizedMap</span><br><span class="line">Map&lt;String, String&gt; synchronizedHashMap = Collections.synchronizedMap(new HashMap&lt;String, String&gt;());</span><br><span class="line">//ConcurrentHashMap</span><br><span class="line">Map&lt;String, String&gt; concurrentHashMap = new ConcurrentHashMap&lt;&gt;();</span><br></pre></td></tr></table></figure>
<p>####性能对比<br>使用ExecutorService来并发运行5个线程，每个线程添加&#x2F;获取500K个元素。</p>
<p>从数据可以看出，ConcurrentHashMap效率最高</p>
<p>代码如下</p>
<!--more-->
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hisen.collection.map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> Java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> Java.util.Hashtable;</span><br><span class="line"><span class="keyword">import</span> Java.util.Map;</span><br><span class="line"><span class="keyword">import</span> Java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"><span class="keyword">import</span> Java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> Java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> Java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : yhx</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2017/11/14 23:36</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@descriptor</span> : 测试不同的Map - 使用ExecutorService来并发运行5个线程，每个线程添加/获取500K个元素。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CrunchifyConcurrentHashMapVsSynchronizedMap</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">THREAD_POOL_SIZE</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Integer&gt; crunchifyHashTableObject = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Integer&gt; crunchifySynchronizedMapObject = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Integer&gt; crunchifyConcurrentHashMapObject = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="comment">// Test with Hashtable Object</span></span><br><span class="line">    crunchifyHashTableObject = <span class="keyword">new</span> <span class="title class_">Hashtable</span>&lt;&gt;();</span><br><span class="line">    crunchifyPerformTest(crunchifyHashTableObject);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Test with synchronizedMap Object</span></span><br><span class="line">    crunchifySynchronizedMapObject = Collections.synchronizedMap(<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Integer&gt;());</span><br><span class="line">    crunchifyPerformTest(crunchifySynchronizedMapObject);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Test with ConcurrentHashMap Object</span></span><br><span class="line">    crunchifyConcurrentHashMapObject = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">    crunchifyPerformTest(crunchifyConcurrentHashMapObject);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试结果</span></span><br><span class="line"><span class="comment">     Test start for:class Java.util.Hashtable</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 2953 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 4649 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 2736 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 2628 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 2621 ms</span></span><br><span class="line"><span class="comment">     For class Java.util.Hashtable the average time is 3117 ms</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     Test start for:class Java.util.Collections$SynchronizedMap</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 3036 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 2881 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 2692 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 3020 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 2806 ms</span></span><br><span class="line"><span class="comment">     For class Java.util.Collections$SynchronizedMap the average time is 2887 ms</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     Test start for:class Java.util.concurrent.ConcurrentHashMap</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 4378 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 1126 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 1008 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 935 ms</span></span><br><span class="line"><span class="comment">     2500K entried added/retrieved in 1069 ms</span></span><br><span class="line"><span class="comment">     For class Java.util.concurrent.ConcurrentHashMap the average time is 1703 ms</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">crunchifyPerformTest</span><span class="params">(Map&lt;String, Integer&gt; crunchifyThreads)</span></span><br><span class="line">      <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Test start for:&quot;</span> + crunchifyThreads.getClass());</span><br><span class="line">    <span class="type">long</span> <span class="variable">avgTime</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">      <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"></span><br><span class="line">      <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newFixedThreadPool(THREAD_POOL_SIZE);</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; THREAD_POOL_SIZE; j++) &#123;</span><br><span class="line">        executorService.execute(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; <span class="number">500000</span>; k++) &#123;</span><br><span class="line">              <span class="type">Integer</span> <span class="variable">crunchifyRandomNumber</span> <span class="operator">=</span> (<span class="type">int</span>) Math.ceil(Math.random() * <span class="number">550000</span>);</span><br><span class="line">              <span class="comment">// Retrieve value. We are not using it anywhere</span></span><br><span class="line">              <span class="type">Integer</span> <span class="variable">crunchifyValue</span> <span class="operator">=</span> crunchifyThreads.get(String.valueOf(crunchifyRandomNumber));</span><br><span class="line">              <span class="comment">// Put value</span></span><br><span class="line">              crunchifyThreads.put(String.valueOf(crunchifyRandomNumber), crunchifyRandomNumber);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// Make sure executor stops</span></span><br><span class="line">      executorService.shutdown();</span><br><span class="line">      <span class="comment">// Blocks until all tasks have completed execution after a shutdown request</span></span><br><span class="line">      executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);</span><br><span class="line">      <span class="type">long</span> <span class="variable">entTime</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">      <span class="type">long</span> <span class="variable">totalTime</span> <span class="operator">=</span> (entTime - startTime) / <span class="number">1000000L</span>;</span><br><span class="line">      avgTime += totalTime;</span><br><span class="line">      System.out.println(<span class="string">&quot;2500K entried added/retrieved in &quot;</span> + totalTime + <span class="string">&quot; ms&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;For &quot;</span> + crunchifyThreads.getClass() + <span class="string">&quot; the average time is &quot;</span> + avgTime / <span class="number">5</span> + <span class="string">&quot; ms\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>HashMap</tag>
      </tags>
  </entry>
  <entry>
    <title>安全的重叠构造器 - 最佳实践：Build Pattern</title>
    <url>/20180128-%E5%AE%89%E5%85%A8%E7%9A%84%E9%87%8D%E5%8F%A0%E6%9E%84%E9%80%A0%E5%99%A8%20-%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%EF%BC%9ABuild%20Pattern/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">effective Java # 2</span><br></pre></td></tr></table></figure>
<p>Builder模式，不直接生成想要的对象，而是让客户端利用所有必要的参数调用构造器，</p>
<p>得到一个builder对象。然后客户端在builder对象上调用类似于setter的方法，</p>
<p>来设置每个相关可选的参数，最后调用无参的build来生成不可变的对象。</p>
<p>完整代码+测试：<a href="https://github.com/hisenyuan/IDEAPractice/tree/master/src/main/Java/com/hisen/interview/effective/no2buildpatter" target="_blank">github:完整代码+测试</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NutritionFacts</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> servingSize;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> servings;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> calories;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> fat;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> sodium;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> carbohydrate;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">NutritionFacts</span><span class="params">(Builder builder)</span> &#123;</span><br><span class="line">    servingSize = builder.servingSize;</span><br><span class="line">    servings = builder.servings;</span><br><span class="line">    calories = builder.calories;</span><br><span class="line">    fat = builder.fat;</span><br><span class="line">    sodium = builder.sodium;</span><br><span class="line">    carbohydrate = builder.carbohydrate;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Required parameters</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> servingSize;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> servings;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">calories</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">fat</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">carbohydrate</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">sodium</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Builder</span><span class="params">(<span class="type">int</span> servingSize, <span class="type">int</span> servings)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.servingSize = servingSize;</span><br><span class="line">      <span class="built_in">this</span>.servings = servings;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">calories</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">      calories = val;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">fat</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.fat = val;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">carbohydrate</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.carbohydrate = val;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">sodium</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.sodium = val;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> NutritionFacts <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">NutritionFacts</span>(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;NutritionFacts&#123;&quot;</span> +</span><br><span class="line">        <span class="string">&quot;servingSize=&quot;</span> + servingSize +</span><br><span class="line">        <span class="string">&quot;, servings=&quot;</span> + servings +</span><br><span class="line">        <span class="string">&quot;, calories=&quot;</span> + calories +</span><br><span class="line">        <span class="string">&quot;, fat=&quot;</span> + fat +</span><br><span class="line">        <span class="string">&quot;, sodium=&quot;</span> + sodium +</span><br><span class="line">        <span class="string">&quot;, carbohydrate=&quot;</span> + carbohydrate +</span><br><span class="line">        <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>定时任务的一点思考 - Java</title>
    <url>/20181027-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%9A%84%E4%B8%80%E7%82%B9%E6%80%9D%E8%80%83%20-%20Java/</url>
    <content><![CDATA[<h2 id="一、背景交代"><a href="#一、背景交代" class="headerlink" title="一、背景交代"></a>一、背景交代</h2><ol>
<li>部署方式：多点</li>
<li>业务概要：处理一批数据，可以失败重试</li>
</ol>
<h2 id="二、实现方式"><a href="#二、实现方式" class="headerlink" title="二、实现方式"></a>二、实现方式</h2><ol>
<li>主表入一条控制数据，两个控制字段：next，process(0:空闲,1:处理中)，子表具体处理业务</li>
<li>定时任务只扫描主表，通过其他业务字段，加上主表两个控制字段(now&gt;netx,process&#x3D;0)，捞出需要处理的数据</li>
<li>当开始处理数据时候，先更新process&#x3D;1，如果更新成功，说明拿到锁(假装是一个分布式锁，因为两台机器)</li>
<li>如果拿到3的锁，则开始处理子表的业务数据，一次查100条(limit 0,100 desc update_time)，直到子表全部处理完成</li>
<li>如果遇到错误，把错误数据的id存起来，更新子表重试次数，和更新时间，如果达到最大失败次数，更改状态(让4查不出这条数据)</li>
<li>如果遇到当前处理数据的id存在List中，那么说明当前所有的数据都处理过一次了，退出(如果不判断，失败后会无限循环，直到全部成功)</li>
</ol>
<h2 id="三、伪代码"><a href="#三、伪代码" class="headerlink" title="三、伪代码"></a>三、伪代码</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">process</span><span class="params">(MainTable mainTable)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 锁控制表</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">lock</span> <span class="operator">=</span> service.lock(mainTable);</span><br><span class="line">    LOGGER.info(<span class="string">&quot;lockFlag:,&quot;</span>, lock, <span class="string">&quot;,mainTableId:&quot;</span>, mainTable.getId());</span><br><span class="line">    <span class="keyword">if</span> (!lockFlag) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;Long&gt; repeatIds = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// 2. 根据主表id，下次扫描时间，每次查询100条</span></span><br><span class="line">    List&lt;SubTable&gt; subTables;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">      <span class="comment">//扫描子表中的数据</span></span><br><span class="line">        subTables = service.querySub(mainTable.getId(), <span class="number">100</span>);</span><br><span class="line">        <span class="keyword">for</span> (SubTable sub : subTables) &#123;</span><br><span class="line">            <span class="keyword">if</span> (repeatIds.contains(batch.getId())) &#123;</span><br><span class="line">                subTables = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 处理业务</span></span><br><span class="line">            handle(mainTable, subTables, repeatIds);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span> (!CollectionUtils.isEmpty(subTables));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. 检查是否全部终态</span></span><br><span class="line">    checkHandleDone(mainTable);</span><br><span class="line">    <span class="comment">// 7. 释放锁</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">unLock</span> <span class="operator">=</span> service.unLock(mainTable);</span><br><span class="line">    LOGGER.info(<span class="string">&quot;lockFlag:,&quot;</span>, unLock, <span class="string">&quot;,mainTableId:&quot;</span>, mainTable.getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>定时任务</tag>
      </tags>
  </entry>
  <entry>
    <title>Java实现Singleton最佳方法 - Enum</title>
    <url>/20180127-%E5%AE%9E%E7%8E%B0Singleton%E6%9C%80%E4%BD%B3%E6%96%B9%E6%B3%95%20-%20Enum/</url>
    <content><![CDATA[<p>effective Java：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">单元素的枚举类型已经成为实现Singleton的最佳方法</span><br></pre></td></tr></table></figure>
<p>理由：</p>
<ol>
<li>因为枚举单例有序列化和线程安全的保证</li>
<li>避免反射和并发困扰</li>
</ol>
<p>单例模式模式：<a href="https://github.com/hisenyuan/IDEAPractice/tree/master/src/main/Java/com/hisen/interview/effective/no3enumsingleton" target="_blank">完整代码+测试</a></p>
<p>主要代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnumSingleton</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">EnumSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> EnumSingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Singleton.INSTANCE.getInstance();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">enum</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line">    <span class="keyword">private</span> EnumSingleton singleton;</span><br><span class="line"></span><br><span class="line">    Singleton() &#123;</span><br><span class="line">      singleton = <span class="keyword">new</span> <span class="title class_">EnumSingleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> EnumSingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>尝试使用NIO读取文件</title>
    <url>/20170601-%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8NIO%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<p>具体代码如下，这里获取出来的文件大小是准确的</p>
<p>FileInputStream方式获取出来的大小会有差异</p>
<p>NIO与IO的对比详见：<a href="https://github.com/hisen-yuan/IDEAPractice/blob/9b237de2874042b896c134a911c5965b46c4ce25/src/main/Java/com/hisen/nio/copyFile/NIOCopy.Java" target="_blank">NIOCopy.Java</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line">   * 利用NIO进行读写文件</span><br><span class="line">   *</span><br><span class="line">   * @param oldFileName 原文件的路径</span><br><span class="line">   * @param newFileName 新文件的路径</span><br><span class="line">   */</span><br><span class="line">  public static void nioCopy(String oldFileName, String newFileName) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      FileChannel fileChannelIn = new FileInputStream(new File(oldFileName)).getChannel();</span><br><span class="line">      FileChannel fileChannelOut = new FileOutputStream(new File(newFileName)).getChannel();</span><br><span class="line">      //获取文件大小</span><br><span class="line">      long size = fileChannelIn.size();</span><br><span class="line">      System.out.printf(&quot;文件大小为：%s byte \n&quot;,size);</span><br><span class="line">      //缓冲</span><br><span class="line">      ByteBuffer byteBuffer = ByteBuffer.allocate(1024);</span><br><span class="line"></span><br><span class="line">      long start = System.currentTimeMillis();</span><br><span class="line">      while (fileChannelIn.read(byteBuffer) != -1) &#123;</span><br><span class="line">        //准备写</span><br><span class="line">        byteBuffer.flip();</span><br><span class="line">        fileChannelOut.write(byteBuffer);</span><br><span class="line">        //准备读</span><br><span class="line">        byteBuffer.clear();</span><br><span class="line">      &#125;</span><br><span class="line">      long end = System.currentTimeMillis();</span><br><span class="line">      System.out.printf(&quot;NIO方式复制完成，耗时 %s 秒\n&quot;,(end-start)/1000);</span><br><span class="line">      //关闭</span><br><span class="line">      fileChannelIn.close();</span><br><span class="line">      fileChannelOut.close();</span><br><span class="line">    &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>布隆过滤器 丨 简介 - Java demo</title>
    <url>/20170907-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%20%E4%B8%A8%20%E7%AE%80%E4%BB%8B%20-%20Java%20demo/</url>
    <content><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>布隆过滤器的作用是加快判定一个元素是否在集合中出现的方法。</p>
<p>因为其主要是过滤掉了大部分元素间的精确匹配，故称为过滤器。</p>
<hr>
<p>其应用场景为需要频繁在一个海量的集合中查找某个元素是否存在。</p>
<p>并且通常，这个值不在集合中。</p>
<p>比如Google chrome用此方法检查一个url是否在恶意url库中。</p>
<h2 id="简单的例子"><a href="#简单的例子" class="headerlink" title="简单的例子"></a>简单的例子</h2><p>假设有一些字符串，假设有一个字符串a，要在集合B中查找其是否在集合B中。最笨的方法是遍历集合B中的每个元素bi，精确匹配a是否等于bi。若集合B中有N个元素，则最坏情况下需要执行N次精确匹配。</p>
<p>一个改进的方法是将a和B中每个字符串按照特定规则映射为数字，称为hash值。规则可以任意设置。比如取各字符串的首字母和尾字母的编码之乘积，取奇数个字符的编码执行异或，等。将比较字符串问题变成一个比较数字的问题。比较字符串需要从头到尾比较，而数字的比较会快很多。</p>
<p>需要注意的是，当两个字符串相同时，采用相同的映射规则得到的数字一定相同。但当两个字符串不同时，得到的字符串不一定不同。所以，当我们发现两个字符串的hash值相同时，两个字符串不一定相同，所以需要进一步去精确匹配两个字符串是否相同。但采用hash值方法已经能够过滤掉一部分以前需要精确匹配的计算量。仅当hash值相同（假设hash值通过字符串首尾字母计算得来，则当两个字符串首尾字母相同时hash值相同）时才去比较字符串本身。若选择hash值合理，则性能将大幅提高。</p>
<p>布隆过滤器通过将一个字符串使用多个不同的hash值计算方法，映射为多个不同的hash值，当所有这些hash值完全相同时，才认为两个字符串相同。从而进一步降低了放生hash值相同的可能性，从而进一步提高了过滤的性能。</p>
<h2 id="Java代码实现"><a href="#Java代码实现" class="headerlink" title="Java代码实现"></a>Java代码实现</h2><p>算法使用了md5值来生成n个不同的hash值</p>
<span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hisen.interview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> Java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> Java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> Java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 布隆过滤器 - 测试某个元素不存在集合中</span></span><br><span class="line"><span class="comment"> * Created by hisenyuan on 2017/9/7 at 8:50.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BloomFilter</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">NUM_SLOTS</span> <span class="operator">=</span> <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">8</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">NUM_HASH</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">BigInteger</span> <span class="variable">bitmap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">BloomFilter</span> <span class="variable">bf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BloomFilter</span>();</span><br><span class="line">    ArrayList&lt;String&gt; contents = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    contents.add(<span class="string">&quot;sldkjelsjf&quot;</span>);</span><br><span class="line">    contents.add(<span class="string">&quot;ggl;ker;gekr&quot;</span>);</span><br><span class="line">    contents.add(<span class="string">&quot;wieoneomfwe&quot;</span>);</span><br><span class="line">    contents.add(<span class="string">&quot;sldkjelsvrnlkjf&quot;</span>);</span><br><span class="line">    contents.add(<span class="string">&quot;ksldkflefwefwefe&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; contents.size(); i++) &#123;</span><br><span class="line">      bf.adElement(contents.get(i));</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(bf.check(<span class="string">&quot;sldkjelsvrnlkjf&quot;</span>));</span><br><span class="line">    System.out.println(bf.check(<span class="string">&quot;sldkjelsvrnkjf&quot;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">adElement</span><span class="params">(String message)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; NUM_HASH; i++) &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">hashCode</span> <span class="operator">=</span> getHash(message, i);</span><br><span class="line">      <span class="keyword">if</span> (!bitmap.testBit(hashCode)) &#123;</span><br><span class="line">        bitmap = bitmap.or(<span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;1&quot;</span>).shiftLeft(hashCode));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">check</span><span class="params">(String message)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; NUM_HASH; i++) &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">hashCode</span> <span class="operator">=</span> getHash(message,i);</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.bitmap.testBit(hashCode))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getHash</span><span class="params">(String message, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="type">MessageDigest</span> <span class="variable">md5</span> <span class="operator">=</span> MessageDigest.getInstance(<span class="string">&quot;md5&quot;</span>);</span><br><span class="line">      message = message + String.valueOf(i);</span><br><span class="line">      <span class="type">byte</span>[] bytes = message.getBytes();</span><br><span class="line">      md5.update(bytes);</span><br><span class="line">      <span class="type">BigInteger</span> <span class="variable">bi</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(md5.digest());</span><br><span class="line">      <span class="keyword">return</span> Math.abs(bi.intValue()) % NUM_SLOTS;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>常见算法：Java求最小公倍数和最大公约数三种算法</title>
    <url>/20171021-%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95%EF%BC%9AJava%E6%B1%82%E6%9C%80%E5%B0%8F%E5%85%AC%E5%80%8D%E6%95%B0%E5%92%8C%E6%9C%80%E5%A4%A7%E5%85%AC%E7%BA%A6%E6%95%B0%E4%B8%89%E7%A7%8D%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>最小公倍数：<br>数论中的一种概念，两个整数公有的倍数成为他们的公倍数</p>
<p>其中一个最小的公倍数是他们的最小公倍数</p>
<p>同样地，若干个整数公有的倍数中最小的正整数称为它们的最小公倍数</p>
<hr>
<p>求最小公倍数算法：</p>
<p>最小公倍数&#x3D;两整数的乘积÷最大公约数</p>
<hr>
<p>求最大公约数算法：</p>
<h3 id="1-辗转相除法"><a href="#1-辗转相除法" class="headerlink" title="(1) 辗转相除法"></a>(1) 辗转相除法</h3><p>有两整数a和b：</p>
<ol>
<li>a%b得余数c</li>
<li>若c&#x3D;0，则b即为两数的最大公约数</li>
<li>若c≠0，则a&#x3D;b，b&#x3D;c，再回去执行<strong>1</strong></li>
</ol>
<p>例如:求27和15的最大公约数过程为</p>
<ol>
<li>27÷15余12</li>
<li>5÷12余3</li>
<li>12÷3余0</li>
</ol>
<p>因此，3即为最大公约数</p>
<hr>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 最大公约数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getGCD</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> getGCD(n, m % n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 最小公倍数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> m</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLCM</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="variable">mn</span> <span class="operator">=</span> m * n;</span><br><span class="line">  <span class="keyword">return</span> mn / getGCD(m, n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 辗转相除求最大公约数</span></span><br><span class="line"><span class="comment">   * 有两整数a和b：</span></span><br><span class="line"><span class="comment">   * ① a%b得余数c</span></span><br><span class="line"><span class="comment">   * ② 若c=0，则b即为两数的最大公约数</span></span><br><span class="line"><span class="comment">   * ③ 若c≠0，则a=b，b=c，再回去执行①</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">divisionGCD</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="keyword">while</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line">      a = m % n;</span><br><span class="line">      m = n;</span><br><span class="line">      n = a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 相减法求最大公约数</span></span><br><span class="line"><span class="comment">   * 有两整数a和b：</span></span><br><span class="line"><span class="comment">   * ① 若a&gt;b，则a=a-b</span></span><br><span class="line"><span class="comment">   * ② 若a&lt;b，则b=b-a</span></span><br><span class="line"><span class="comment">   * ③ 若a=b，则a（或b）即为两数的最大公约数</span></span><br><span class="line"><span class="comment">   * ④ 若a≠b，则再回去执行①</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">subtractionGCD</span><span class="params">(<span class="type">int</span> m,<span class="type">int</span> n)</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(m != n)&#123;</span><br><span class="line">      <span class="keyword">if</span> (m&gt;n)&#123;</span><br><span class="line">        m = m-n;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        n = n - m;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>性能指标的含义与计算方式:TP50、TP90、TP99、TP999</title>
    <url>/20190801-%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87%E7%9A%84%E5%90%AB%E4%B9%89%E4%B8%8E%E8%AE%A1%E7%AE%97%E6%96%B9%E5%BC%8F:TP50%E3%80%81TP90%E3%80%81TP99%E3%80%81TP999/</url>
    <content><![CDATA[<h1 id="零、本文背景"><a href="#零、本文背景" class="headerlink" title="零、本文背景"></a>零、本文背景</h1><p>一个接口的关键指标应该就是响应速度，要想提高响应速度，结果在缓存中最好;<br>那么怎么确定一个合理的缓存时间，以平衡性能与成本呢？<br>我们可以通过记录业务请求，看读取缓存的时间分布，比如 99% 的请求都是 1天内;</p>
<p>近期在做日志分析，找到比较理想的一个缓存过期时间，使 90% 的查询都能被缓存覆盖;<br>发现有些同学不太懂 TP 指标，故写文记录一下。</p>
<h1 id="一、性能指标含义"><a href="#一、性能指标含义" class="headerlink" title="一、性能指标含义"></a>一、性能指标含义</h1><p>常见指标：TP50、TP80、TP90、TP99、TP999<br>正式解释：TP&#x3D;Top Percentile，Top百分数，是一个<strong>统计学</strong>术语，与平均数、中位数都是一类;<br><strong>通俗理解</strong>：TP99 100ms，99%的查询都能在100ms内返回;<br><strong>本质理解</strong>：它是一个分位值，看数据的一个分布;</p>
<h1 id="二、性能指标计算"><a href="#二、性能指标计算" class="headerlink" title="二、性能指标计算"></a>二、性能指标计算</h1><p>计算方式：拿到所有请求耗时，升序排序，取 99% 位置的数据，就是 TP99;<br>比如说：拿 100 次请求的耗时，升序排序，取第 99 个的数据，就是TP99的值;</p>
<p>具体的代码方式就是，先算出耗时，放入 List ，然后排序，按指定的下标取值即可;</p>
<p>代码如下：</p>
<span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">calTime</span><span class="params">(List&lt;Long&gt; timeDurations)</span> &#123;</span><br><span class="line">    timeDurations.sort(Long::compareTo);</span><br><span class="line">    <span class="type">double</span> <span class="variable">tp50</span> <span class="operator">=</span> timeDurations.size() * <span class="number">0.5</span>;</span><br><span class="line">    <span class="type">double</span> <span class="variable">tp90</span> <span class="operator">=</span> timeDurations.size() * <span class="number">0.9</span>;</span><br><span class="line">    <span class="type">double</span> <span class="variable">tp99</span> <span class="operator">=</span> timeDurations.size() * <span class="number">0.99</span>;</span><br><span class="line">    <span class="type">double</span> <span class="variable">tp999</span> <span class="operator">=</span> timeDurations.size() * <span class="number">0.999</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 基础统计，包含max、min、count、avg信息;</span></span><br><span class="line">    <span class="type">DoubleSummaryStatistics</span> <span class="variable">doubleSummaryStatistics</span> <span class="operator">=</span> timeDurations.stream().mapToDouble(Long::longValue).summaryStatistics();</span><br><span class="line">    System.out.println(JSON.toJSONString(doubleSummaryStatistics));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Math.ceil() 向上取整</span></span><br><span class="line">    System.out.println(<span class="string">&quot;tp50:&quot;</span> + timeDurations.get((<span class="type">int</span>) Math.ceil(tp50)));</span><br><span class="line">    System.out.println(<span class="string">&quot;tp90:&quot;</span> + timeDurations.get((<span class="type">int</span>) Math.ceil(tp90)));</span><br><span class="line">    System.out.println(<span class="string">&quot;tp99:&quot;</span> + timeDurations.get((<span class="type">int</span>) Math.ceil(tp99)));</span><br><span class="line">    System.out.println(<span class="string">&quot;tp999:&quot;</span> + timeDurations.get((<span class="type">int</span>) Math.ceil(tp999)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>手机平板电脑原样显示html效果 - html知识</title>
    <url>/20170208-%E6%89%8B%E6%9C%BA%E5%B9%B3%E6%9D%BF%E7%94%B5%E8%84%91%E5%8E%9F%E6%A0%B7%E6%98%BE%E7%A4%BAhtml%E6%95%88%E6%9E%9C-html%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<p>有时候可能你会发现<br>在电脑上显示300x300大小的东西看起来很正常<br>但是用手机去访问的话，就出现等比例缩小了<br>但是300x300的大小完全不用缩小<br>直接等大不是更好？</p>
<p>在head加上这两行代码，可以做到原样输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=Edge,chrome=1&quot;&gt;</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>数组中只有一个数出现奇数次 | 利用异或最高效</title>
    <url>/20190404-%E6%95%B0%E7%BB%84%E4%B8%AD%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AA%E6%95%B0%E5%87%BA%E7%8E%B0%E5%A5%87%E6%95%B0%E6%AC%A1%20%7C%20%E5%88%A9%E7%94%A8%E5%BC%82%E6%88%96%E6%9C%80%E9%AB%98%E6%95%88/</url>
    <content><![CDATA[<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>题意：一个数组有奇数个元素，其中只有一个元素出现一次，其它都出现了2次</p>
<p>方案A：利用hashMap存储出现的次数，然后遍历，复杂度O(3&#x2F;2N)&#x3D;O(N);<br>方案B：利用bitmap,根据数组元素的大小确定位置，做取反(0-&gt;1-&gt;0);<br>方案C：利用异或的特性快速找出，最简单，高效;</p>
<h1 id="二、异或"><a href="#二、异或" class="headerlink" title="二、异或"></a>二、异或</h1><p>a^a&#x3D;0<br>0^a&#x3D;a<br>异或支持：交换率、结合率<br>因此：<br>a^b^c^b^c&#x3D;a^(b^b)^(c^c)&#x3D;a</p>
<h1 id="三、代码"><a href="#三、代码" class="headerlink" title="三、代码"></a>三、代码</h1><span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] mayDup = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> mayDup[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; mayDup.length; i++) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;res^mayDup[i]: &quot;</span> + res + <span class="string">&quot;^&quot;</span> + mayDup[i]);</span><br><span class="line">        res ^= mayDup[i];</span><br><span class="line">        System.out.println(<span class="string">&quot;=&quot;</span> + res);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="四、后记"><a href="#四、后记" class="headerlink" title="四、后记"></a>四、后记</h1><p>这只是一个场景的妙用，实际当中很难遇到这种情况。<br>所以不管什么时候还是得多去刷题，没事刷几道，熟然生巧。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>技巧</tag>
      </tags>
  </entry>
  <entry>
    <title>最近在看的Java系列文章 - 计算机程序的思维逻辑</title>
    <url>/20170814-%E6%9C%80%E8%BF%91%E5%9C%A8%E7%9C%8B%E7%9A%84Java%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%20-%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%80%9D%E7%BB%B4%E9%80%BB%E8%BE%91/</url>
    <content><![CDATA[<h2 id="计算机程序的思维逻辑"><a href="#计算机程序的思维逻辑" class="headerlink" title="计算机程序的思维逻辑"></a>计算机程序的思维逻辑</h2><p>这个系列的文章还不错</p>
<p><a href="http://mp.weixin.qq.com/s/u_WmkE5meMWuZ81G5gHhBQ">目录—微信公众号</a></p>
<p><a href="https://juejin.im/user/5791632a165abd00584bb496">目录—掘金(1-6缺失)</a></p>
<h2 id="相关笔记或者代码"><a href="#相关笔记或者代码" class="headerlink" title="相关笔记或者代码"></a>相关笔记或者代码</h2><p><a href="https://github.com/hisen-yuan/IDEAPractice/tree/master/src/main/Java/com/hisen/programLogicOfThinking">相关笔记或者代码 - github地址</a></p>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>版权归原作者所有</p>
<p>感觉文章不错，一边看一边实践。</p>
<p>有时候从头开始学习也会有另一番风味。</p>
<p>兴趣是最好的老师，唯有坚持才是实现梦想的唯一途径。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>有道云笔记支持的markdown语法 - hexo试一试</title>
    <url>/20170807-%E6%9C%89%E9%81%93%E4%BA%91%E7%AC%94%E8%AE%B0%E6%94%AF%E6%8C%81%E7%9A%84markdown%E8%AF%AD%E6%B3%95%20-%20hexo%E8%AF%95%E4%B8%80%E8%AF%95/</url>
    <content><![CDATA[<h2 id="markdown语法"><a href="#markdown语法" class="headerlink" title="markdown语法"></a>markdown语法</h2><p>分割线</p>
<hr>
<ol>
<li>列表1</li>
<li>列表2</li>
<li>列表3</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//插入代码</span><br><span class="line">public void main(String[] args)&#123;</span><br><span class="line">    System.out.println(&quot;Hello World!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6><p><del>删除线</del></p>
<blockquote>
<p>引用，只能写在一行</p>
</blockquote>
<ul>
<li><input disabled="" type="checkbox"> 未勾选</li>
<li><input checked="" disabled="" type="checkbox"> 勾选的</li>
</ul>
<p><a href="http://www.714.hk/">梦殇国际</a></p>
<p><img src="http://www.714.hk/logo.png" alt="image"></p>
<h2 id="markdown源码"><a href="#markdown源码" class="headerlink" title="markdown源码"></a>markdown源码</h2><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">markdown语法</span><br><span class="line">--</span><br><span class="line"></span><br><span class="line">分割线</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">1. 列表1</span><br><span class="line">2. 列表2</span><br><span class="line">3. 列表3</span><br><span class="line"></span><br><span class="line">//插入代码</span><br><span class="line">public void main(String[] args)&#123;</span><br><span class="line">    System.out.println(&quot;Hello World!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">###### 六级标题</span><br><span class="line"></span><br><span class="line">~~删除线~~</span><br><span class="line"></span><br><span class="line">&gt; 引用，只能写在一行</span><br><span class="line"></span><br><span class="line">- [ ] 未勾选</span><br><span class="line">- [x] 勾选的</span><br><span class="line"></span><br><span class="line">[梦殇国际](http://www.714.hk)</span><br><span class="line"></span><br><span class="line">![image](http://www.714.hk/logo.png)</span><br></pre></td></tr></table></figure>]]></content>
  </entry>
  <entry>
    <title>查看linux进程 - 多重方式</title>
    <url>/20170227-%E6%9F%A5%E7%9C%8Blinux%E8%BF%9B%E7%A8%8B-%E5%A4%9A%E9%87%8D%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<p>可以使用ps命令。<br>它能显示当前运行中进程的相关信息，包括进程的PID。</p>
<p>Linux和UNIX都支持ps命令，显示所有运行中进程的相关信息。</p>
<p>ps命令能提供一份当前进程的<strong>快照</strong>。如果想状态可以自动刷新，可以使用top命令。</p>
<h2 id="ps命令"><a href="#ps命令" class="headerlink" title="ps命令"></a>ps命令</h2><p>输入下面的ps命令，显示所有运行中的进程：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ps aux | less</span><br></pre></td></tr></table></figure>
<p><strong>这个命令按  q  退出</strong><br>后面加了“<strong>| less</strong>”就会分页显示，如果去掉会一次性显示出所有结果</p>
<p>输出：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@hisen-server:~$ ps aux | less</span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root         1  0.2  0.5  37956  6028 ?        Ss   09:03   0:02 /sbin/init</span><br><span class="line">root         2  0.0  0.0      0     0 ?        S    09:03   0:00 [kthreadd]</span><br><span class="line">root         3  0.0  0.0      0     0 ?        S    09:03   0:00 [ksoftirqd/0]</span><br><span class="line">root         4  0.0  0.0      0     0 ?        S    09:03   0:00 [kworker/0:0]</span><br><span class="line">root         5  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [kworker/0:0H]</span><br><span class="line">root         6  0.0  0.0      0     0 ?        S    09:03   0:00 [kworker/u2:0]</span><br><span class="line">root         7  0.0  0.0      0     0 ?        S    09:03   0:00 [rcu_sched]</span><br><span class="line">root         8  0.0  0.0      0     0 ?        S    09:03   0:00 [rcu_bh]</span><br><span class="line">root         9  0.0  0.0      0     0 ?        S    09:03   0:00 [migration/0]</span><br><span class="line">root        10  0.0  0.0      0     0 ?        S    09:03   0:00 [watchdog/0]</span><br><span class="line">root        11  0.0  0.0      0     0 ?        S    09:03   0:00 [kdevtmpfs]</span><br><span class="line">root        12  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [netns]</span><br><span class="line">root        13  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [perf]</span><br><span class="line">root        14  0.0  0.0      0     0 ?        S    09:03   0:00 [khungtaskd]</span><br><span class="line">root        15  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [writeback]</span><br><span class="line">root        16  0.0  0.0      0     0 ?        SN   09:03   0:00 [ksmd]</span><br><span class="line">root        17  0.0  0.0      0     0 ?        SN   09:03   0:00 [khugepaged]</span><br><span class="line">root        18  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [crypto]</span><br><span class="line">root        19  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [kintegrityd]</span><br><span class="line">root        20  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [bioset]</span><br><span class="line">root        21  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [kblockd]</span><br><span class="line">root        22  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [ata_sff]</span><br><span class="line">root        23  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [md]</span><br><span class="line">root        24  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [devfreq_wq]</span><br><span class="line">root        25  0.0  0.0      0     0 ?        S    09:03   0:00 [kworker/u2:1]</span><br><span class="line">root        26  0.0  0.0      0     0 ?        S    09:03   0:00 [kworker/0:1]</span><br><span class="line">root        28  0.0  0.0      0     0 ?        S    09:03   0:00 [kswapd0]</span><br><span class="line">root        29  0.0  0.0      0     0 ?        S&lt;   09:03   0:00 [vmstat]</span><br><span class="line">root        30  0.0  0.0      0     0 ?        S    09:03   0:00 [fsnotify_mark]</span><br><span class="line">root        31  0.0  0.0      0     0 ?        S    09:03   0:00 [ecryptfs-kthrea]</span><br><span class="line">:</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="查看系统中的每个进程"><a href="#查看系统中的每个进程" class="headerlink" title="查看系统中的每个进程"></a>查看系统中的每个进程</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ps -A</span><br><span class="line">ps -e</span><br></pre></td></tr></table></figure>
<p>-A：显示所有进程</p>
<p>a：显示终端中包括其它用户的所有进程</p>
<p>x：显示无控制终端的进程</p>
<h2 id="显示进程的树状图"><a href="#显示进程的树状图" class="headerlink" title="显示进程的树状图"></a>显示进程的树状图</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pstree</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hisen@hisen-server:~$ pstree</span><br><span class="line">systemd─┬─accounts-daemon─┬─&#123;gdbus&#125;</span><br><span class="line">        │                 └─&#123;gmain&#125;</span><br><span class="line">        ├─acpid</span><br><span class="line">        ├─agetty</span><br><span class="line">        ├─atd</span><br><span class="line">        ├─cron</span><br><span class="line">        ├─dbus-daemon</span><br><span class="line">        ├─dhclient</span><br><span class="line">        ├─2*[iscsid]</span><br><span class="line">        ├─Java───14*[&#123;Java&#125;]</span><br><span class="line">        ├─lvmetad</span><br><span class="line">        ├─lxcfs───2*[&#123;lxcfs&#125;]</span><br><span class="line">        ├─mdadm</span><br><span class="line">        ├─polkitd─┬─&#123;gdbus&#125;</span><br><span class="line">        │         └─&#123;gmain&#125;</span><br><span class="line">        ├─redis-server───2*[&#123;redis-server&#125;]</span><br><span class="line">        ├─rsyslogd─┬─&#123;in:imklog&#125;</span><br><span class="line">        │          ├─&#123;in:imuxsock&#125;</span><br><span class="line">        │          └─&#123;rs:main Q:Reg&#125;</span><br><span class="line">        ├─snapd───5*[&#123;snapd&#125;]</span><br><span class="line">        ├─sshd───sshd───sshd───bash───pstree</span><br><span class="line">        ├─systemd───(sd-pam)</span><br><span class="line">        ├─systemd-journal</span><br><span class="line">        ├─systemd-logind</span><br><span class="line">        ├─systemd-timesyn───&#123;sd-resolve&#125;</span><br><span class="line">        └─systemd-udevd</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>浅谈volatile</title>
    <url>/20190612-%E6%B5%85%E8%B0%88volatile/</url>
    <content><![CDATA[<h1 id="一、volatile是什么"><a href="#一、volatile是什么" class="headerlink" title="一、volatile是什么"></a>一、volatile是什么</h1><p>volatile是Java提供的一种轻量级的同步机制<br>保证变量的修改其它线程立马可见，解决部分并发问题</p>
<h1 id="二、volatile局限性"><a href="#二、volatile局限性" class="headerlink" title="二、volatile局限性"></a>二、volatile局限性</h1><p>无法解决复合操作，例如 i++ i–这种操作<br>原因：i++操作分三步</p>
<ol>
<li>读取i&#x3D;1；</li>
<li>i&#x3D;i+1&#x3D;2；</li>
<li>i&#x3D;2写入主存<br>有可能在3写入之前，其它线程已经对i进行了修改，比如改为100了，结果覆盖写入了2</li>
</ol>
<h1 id="三、volatile原理"><a href="#三、volatile原理" class="headerlink" title="三、volatile原理"></a>三、volatile原理</h1><p>volatile底层依靠指令重排序来实现内存可见性的<br>具体的规则如下</p>
<ol>
<li>当第二个操作是voaltile写时，无论第一个操作是什么，都不能进行重排序</li>
<li>当第一个操作是volatile读时，不管第二个操作是什么，都不能进行重排序</li>
<li>当第一个操作是volatile写时，第二个操作是volatile读时，不能进行重排序</li>
</ol>
<span id="more"></span>
<h1 id="四、-参考"><a href="#四、-参考" class="headerlink" title="四、 参考"></a>四、 参考</h1><p><a href="https://www.cnblogs.com/chengxiao/p/6528109.html">https://www.cnblogs.com/chengxiao/p/6528109.html</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器出现：Reimage Repair - zh.reimageplus.com</title>
    <url>/20170705-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%87%BA%E7%8E%B0%EF%BC%9AReimage%20Repair%20-%20zh.reimageplus.com/</url>
    <content><![CDATA[<p>近期使用chrome出现打开一些网站老是弹出莫名其妙的网址</p>
<p>最终指向的都是Reimage Repair，网址zh.reimageplus.com<br><img src="http://wx2.sinaimg.cn/mw690/b2e389b6gy1fh9ch85t3lj20sb0h8acu.jpg" alt="Reimage Repair" /><br>网上一查，貌似因为插件被污染的原因</p>
<p>我关闭chrome所有的插件，一个一个排查，最后找到了一个插件出问题</p>
<p>本来还想去举报，发现这个插件被下架了</p>
<p>问题排查</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">右上角菜单按钮 ---更多工具 --- 扩展程序 --- 关闭所有插件</span><br><span class="line">然后一个个打开，测试某些网页是否还会继续跳出那恶心的东西</span><br><span class="line">然后就找到问题了。</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>病毒</tag>
      </tags>
  </entry>
  <entry>
    <title>笔记 - 读后感：《第一本Docker书》</title>
    <url>/20180127-%E7%AC%94%E8%AE%B0%20-%20%E8%AF%BB%E5%90%8E%E6%84%9F%EF%BC%9A%E3%80%8A%E7%AC%AC%E4%B8%80%E6%9C%ACDocker%E4%B9%A6%E3%80%8B/</url>
    <content><![CDATA[<p>忘记开始是在什么地方看到docker这个东西</p>
<p>后面觉得挺好玩，也试了很多次，找过很多的教程。</p>
<p>搭建了一个zookeeper的集群(docker-compose)</p>
<p>然后当我需要搭建redis集群的时候，发现里面很多的概念还不是很懂</p>
<p>比如：volume network</p>
<p>然后加了docker的群，遇到了在以前idea群里面熟的一个人</p>
<p>花了一天的时间看完他传的一本书，昨天买的几本书晚上也到了。<br>（docker从入门到实践、Java并发编程的艺术、effective Java中文版 2）</p>
<p>这本书总体来说还行，就是过时了，还在用link，毕竟三年前的东西</p>
<p>有些例子也报错，主要是ruby相关的不行，提醒需要2.2以上的版本</p>
<p>下面是随便做的一点笔记</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 所有容器，不加-a只显示正在运行的；-1 列出最后一次运行的</span><br><span class="line">docker ps -a</span><br><span class="line"># 启动一个已经停止的容器(id，--name 都可以)</span><br><span class="line">docker start hisen_container</span><br><span class="line"># 进入容器(容器重启之后进入交换行)</span><br><span class="line">docker attach hisen_container</span><br><span class="line"># 创建一个守护式容器</span><br><span class="line">docker -d</span><br><span class="line"># 查看日志 可选 -f 类似tail -f Ctrl+c 退出</span><br><span class="line">docker logs hisen_container</span><br><span class="line"># 查看容器内的进程</span><br><span class="line">docker top hisen_container</span><br><span class="line"># 在容器内部运行进程</span><br><span class="line">docker exec -d hisen_container touch /etc/new_conf_file</span><br><span class="line"># 停止守护式容器</span><br><span class="line">docker stop hisen_container</span><br><span class="line"># 自动重启容器</span><br><span class="line">docker run --restart=always ....</span><br><span class="line">=on-failure:5 当容器退出代码为非0时，docker会自动重启，最多重试5次</span><br><span class="line"># 深入容器,会以json串显示更多容器信息</span><br><span class="line">docker inspect hisen_container </span><br><span class="line"># 删除容器，要先stop才行</span><br><span class="line">docker rm hisen_container</span><br><span class="line"># 删除所有容器 -a:所有容器 -q:只返回容器的ID</span><br><span class="line">docker rm &#x27;docker ps -a -q&#x27;</span><br><span class="line"># 启动新的名字为other_hisen_container的容器，并且进入bash shell</span><br><span class="line">docker run -i -t --name other_hisen_container ubuntu /bin/bash</span><br><span class="line"># docker文件系统层</span><br><span class="line">可写容器</span><br><span class="line">镜像(比如tomcat)</span><br><span class="line">基础镜像(比如ubuntu)</span><br><span class="line">引导文件系统(容器组、命名空间、设备映射)</span><br><span class="line">内核</span><br><span class="line"># docker简单构成</span><br><span class="line">顶层的读写层+底部不可变的可读层还有一些配置，就成了一个容器。</span><br><span class="line"># 列出所有镜像</span><br><span class="line">docker images</span><br><span class="line"># 仓库名:tag 如果没有指定，默认latest</span><br><span class="line"># 推荐使用Dockerfile构建镜像</span><br><span class="line">FROM ubuntu:14.04</span><br><span class="line">MAINTAINER hisenyuan &quot;hisenyuan@gmail.com&quot;</span><br><span class="line">RUN apt-get update \</span><br><span class="line">&amp;&amp; apt-getinstall -y nginx \</span><br><span class="line">&amp;&amp; echo &#x27;Hi,I am in your container&#x27; \</span><br><span class="line">   /usr/share/nginx/html/index.html</span><br><span class="line">EXPOSE 80</span><br><span class="line"># 构建镜像，在上面的dockerfile目录</span><br><span class="line">docker build -t=&quot;hisenyuan/static_web&quot; .</span><br><span class="line"># 查看构建过程，以及镜像的每一层</span><br><span class="line">docker history 791397495f7a</span><br><span class="line"># 运行构建的镜像 -p端口映射 nginx -g &quot;daemon off;&quot; 前台运行nginx</span><br><span class="line">docker run -d -p 80:80 --name static_web hisenyuan/static_web nginx -g &quot;daemon off;&quot;</span><br><span class="line"># Dockerfile指令</span><br><span class="line">RUN 镜像构建的时候才会执行</span><br><span class="line">CMD 启动一个容器的时候要运行的命令，如有多个，只会生效最后一个，前面的多个会被忽略</span><br><span class="line">ENTRYPOINT 例子:ENTRYPOINT [&quot;/usr/sbin/nginx&quot;,&quot;-g&quot;,&quot;daemon off;&quot;],这个命令不容易覆盖，CMD容易被RUN覆盖</span><br><span class="line">WORKDIR 设定工作目录，ENTRYPOINT CMD 会在这个目录执行</span><br><span class="line">ENV 设置构建时的环境变量，设置之后可以在后续的RUN命令使用</span><br><span class="line">USER 设置运行的用户</span><br><span class="line">VOLUME 向基于镜像创建的容器添加卷。</span><br><span class="line">1.卷可以在容器间共享和重用</span><br><span class="line">2.一个容器不是必须和其他容器共享卷</span><br><span class="line">3.对卷的修改是立即生效的</span><br><span class="line">4.对卷的修改不会对更新镜像产生影响</span><br><span class="line">5.卷会一直存在，直到没有任何容器再使用他</span><br><span class="line">VOLUME [&quot;/opt/project&quot;] 创建一个名为/opt/project的挂载点</span><br><span class="line">ADD 添加上下文目录的文件到构架容器中，如果是压缩包，会自动解压。会使构建缓存无效</span><br><span class="line">COPY 类似ADD、只会在上下文复制文件、也不会解压</span><br><span class="line">ONBUILD 为镜像添加触发器，当一个镜像被用作其他镜像的基础镜像时，该镜像中的触发器将会被执行。</span><br><span class="line"># 删除镜像，会删除这个镜像的每一层</span><br><span class="line">docker rmi hisenyuan/static_web</span><br><span class="line"># 运行一个registry</span><br><span class="line">docker run -p 5000:5000 registry</span><br><span class="line"># 推送镜像到registry</span><br><span class="line">docker tag 791397495f7a yourip:5000/hisenyuan/static_web #打标签</span><br><span class="line">docker push yourip:5000/hisenyuan/static_web #推送到本地注册容器</span><br><span class="line">docker run -t -i docker yourip:5000/hisenyuan/static_web /bin/bash #从registry运行一个容器</span><br><span class="line"></span><br><span class="line">==========第五章 在测试中使用docker==========</span><br><span class="line">5.1 使用docker测试静态网站</span><br><span class="line">5.1.1 sample网站的初始Dockerfile</span><br><span class="line">hisen@docker1:~/docker$ mkdir sample</span><br><span class="line">hisen@docker1:~/docker$ cd sample/</span><br><span class="line">hisen@docker1:~/docker/sample$ touch Dockerfile</span><br><span class="line">hisen@docker1:~/docker/sample$ mkdir nginx &amp;&amp; cd nginx</span><br><span class="line">hisen@docker1:~/docker/sample/nginx$ vi global.conf</span><br><span class="line">server &#123;</span><br><span class="line">        listen          0.0.0.0:80;</span><br><span class="line">        server_name     _;</span><br><span class="line"></span><br><span class="line">        root            /var/www/html/website;</span><br><span class="line">        index           index.html index.htm;</span><br><span class="line"></span><br><span class="line">        access_log      /var/log/nginx/default_access.log;</span><br><span class="line">        error_log       /var/log/nginx/default_error.log;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hisen@docker1:~/docker/sample/nginx$ vi nginx.conf</span><br><span class="line">user www-data;</span><br><span class="line">worker_processes 4;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line">daemon off;</span><br><span class="line"></span><br><span class="line">events &#123;  &#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">  sendfile on;</span><br><span class="line">  tcp_nopush on;</span><br><span class="line">  tcp_nodelay on;</span><br><span class="line">  keepalive_timeout 65;</span><br><span class="line">  types_hash_max_size 2048;</span><br><span class="line">  include /etc/nginx/mime.types;</span><br><span class="line">  default_type application/octet-stream;</span><br><span class="line">  access_log /var/log/nginx/access.log;</span><br><span class="line">  error_log /var/log/nginx/error.log;</span><br><span class="line">  gzip on;</span><br><span class="line">  gzip_disable &quot;msie6&quot;;</span><br><span class="line">  include /etc/nginx/conf.d/*.conf;</span><br><span class="line">&#125;</span><br><span class="line">hisen@docker1:~/docker/sample/nginx$ vi Dockerfile</span><br><span class="line">FROM ubuntu:14.04</span><br><span class="line">MAINTAINER hisenyuan &quot;hisenyuan@gmail.com&quot;</span><br><span class="line">ENV REFRESHED_AT 2018-01-27</span><br><span class="line">RUN apt-get update \</span><br><span class="line"> &amp;&amp; apt-get -y -q install nginx \</span><br><span class="line"> &amp;&amp; mkdir -p /var/www/html</span><br><span class="line">ADD nginx/global.conf /etc/nginx/conf.d/</span><br><span class="line">ADD nginx/nginx.conf /etc/nginx/nginx.conf</span><br><span class="line">EXPOSE 80</span><br><span class="line">hisen@docker1:~/docker/sample/nginx/website$ vi index.html</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;Test website&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;h1&gt;This is a test website&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">hisen@docker1:~/docker/sample/nginx$ docker build -t hisenyuan/nginx .</span><br><span class="line">hisen@docker1:~/docker/sample/nginx$ docker run -d -p 8080:80 --name website \</span><br><span class="line">&gt; -v $PWD/website:/var/www/html/website \</span><br><span class="line">&gt; hisenyuan/nginx nginx # 因为已经在配置文件指定了daemon off，所以能直接启动</span><br><span class="line"># -v 指定了卷的源目录，挂载本地$PWD/website到容器/var/www/html/website目录，conf配置文件指定了工作目录</span><br><span class="line"></span><br><span class="line"># 修改之后，刷新浏览器，立马就生效</span><br><span class="line">hisen@docker1:~/docker/sample/nginx$ vi $PWD/website/index.html</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Test website - hisenyuan&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;This is a test website&lt;/h1&gt;</span><br><span class="line">&lt;h2&gt;2018年1月27日 13:20:13&lt;/h2&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">5.2 使用docker构建并测试web应用程序</span><br><span class="line">5.2.1 构建sinatra应用程序</span><br><span class="line"># 创建Dockerfile</span><br><span class="line">hisen@docker1:~/docker/sinatra$ vi Dockerfile</span><br><span class="line">FROM ubuntu:14.04</span><br><span class="line">MAINTINER hisenyuan &quot;hisenyuan@gmail.com&quot;</span><br><span class="line">ENV REFRESHED 2018-01-27</span><br><span class="line">RUN apt-get upate \</span><br><span class="line"> &amp;&amp; apt-get -y install ruby ruby-dev build-essential redis-tools \</span><br><span class="line"> &amp;&amp; gem install --no-rdoc --no-ri sinatra json redis \</span><br><span class="line"> &amp;&amp; mkdir -p /opt/webapp</span><br><span class="line">EXPOSE 4567</span><br><span class="line"></span><br><span class="line"># 代码网站：https://dockerbook.com/code/5/sinatra/webapp/</span><br><span class="line">wget --cut-dir=3 -nH -r --no-parent https://dockerbook.com/code/5/sinatra/webapp/</span><br><span class="line"></span><br><span class="line">5.3 docker用于持续集成</span><br><span class="line"></span><br><span class="line">==========第六章 使用docker构建服务==========</span><br><span class="line">6.1 构建第一个应用</span><br><span class="line">==========第七章 Consul、服务发现与注册==========</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>笔记本在BIOS Setup里面设置双显卡模式</title>
    <url>/20170509-%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%9C%A8BIOS%20Setup%E9%87%8C%E9%9D%A2%E8%AE%BE%E7%BD%AE%E5%8F%8C%E6%98%BE%E5%8D%A1%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>我的本子是双显卡的，英特尔的核芯显卡和英伟达的独显</p>
<p>但是之前完全没有把独显用上，在英伟达的设置里选择使用显卡感觉也没有用</p>
<p>后来找到在BIOS里面设置，貌似管用，联想的机子可以看看</p>
<p>其他的机子应该也差不多</p>
<p>连接：<a href="http://iknow.lenovo.com/detail/dc_102471.html" target="_blank">http://iknow.lenovo.com/detail/dc_102471.html</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">6. IdeaPad Z380/Z480/Z580/U310/U410，Lenovo G480A/V370A/V470A/V570A</span><br><span class="line">依次选择“Configuration”、“Graphic Device”，其中有两个选项：Optimus表示可切换显卡模式；</span><br><span class="line">UMA Only表示集显模式。选择好后，按F10并根据提示保存退出即可。</span><br></pre></td></tr></table></figure>
<p>我的默认居然是：UMA Only</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>软件</tag>
      </tags>
  </entry>
  <entry>
    <title>线上事故记录 - 死锁</title>
    <url>/20180809-%E7%BA%BF%E4%B8%8A%E4%BA%8B%E6%95%85%E8%AE%B0%E5%BD%95%20-%20%E6%AD%BB%E9%94%81/</url>
    <content><![CDATA[<h1 id="一、背景描述"><a href="#一、背景描述" class="headerlink" title="一、背景描述"></a>一、背景描述</h1><p>在支付业务当中，每一笔交易都得进行记账。</p>
<p>两种情况：</p>
<ol>
<li>第一步先冻结，交易成功，解冻并扣款(A账户-&gt;B账户-&gt;C账户);</li>
<li>第一步先冻结，交易失败，解冻并归还(A账户-&gt;B账户-&gt;A账户);</li>
</ol>
<p>上面的两种情况各自都是在一个事物当中。</p>
<h1 id="二、问题描述"><a href="#二、问题描述" class="headerlink" title="二、问题描述"></a>二、问题描述</h1><p>在同一个商户进行并发操作的时候，交易有成功有失败；</p>
<ol>
<li>成功的时候钱是：A账户-&gt;B账户;</li>
<li>失败的时候钱是：B账户-&gt;A账户;</li>
</ol>
<p>因为在各自的事物当中更新两条记录的信息，并且使用了for update（innodb引擎）<br>ß<br>在某一瞬间：成功的先锁A账户，失败的先锁了B记录</p>
<p>接下来就两个事物各自持有对方想要的资源，并且不释放已经占有的资源，就造成了死锁</p>
<h1 id="三、解决方法"><a href="#三、解决方法" class="headerlink" title="三、解决方法"></a>三、解决方法</h1><p>在程序里面，更新两个账户的钱的时候，始终先更新ID更小的那条记录，那样不管多少个事务同时进来</p>
<p>都会按照固定的顺序去持有资源，比如先A再B，这样就不会出现各自持有对方想要的资源</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ID ACCOUNT</span><br><span class="line">10 A</span><br><span class="line">11 B</span><br></pre></td></tr></table></figure>
<p>每个事务都是先锁定A再锁定B，拿不到锁就一直等待</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
  </entry>
  <entry>
    <title>网关、快捷支付，代收代付，账户托管，二维码扫码支付</title>
    <url>/20170213-%E7%BD%91%E5%85%B3%E3%80%81%E5%BF%AB%E6%8D%B7%E6%94%AF%E4%BB%98%EF%BC%8C%E4%BB%A3%E6%94%B6%E4%BB%A3%E4%BB%98%EF%BC%8C%E8%B4%A6%E6%88%B7%E6%89%98%E7%AE%A1%EF%BC%8C%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%89%AB%E7%A0%81%E6%94%AF%E4%BB%98/</url>
    <content><![CDATA[<h2 id="一、网关支付"><a href="#一、网关支付" class="headerlink" title="一、网关支付"></a>一、网关支付</h2><p>这是在线支付的最普遍形式。<br>大致支付过程：第三方支付公司作为代理（网关），接入一堆银行。用户在网关页面（可以在商户端，也可以第三方支付平台端）选择银行，页面跳转到第三方支付平台，然后重定向到对应的银行，用户在银行电子银行官网，采用网银（个人网银或企业网银）完成支付。</p>
<p>网关支付分为：B2C、B2B两类。<br>涉及的概念：网银支付、银行卡支付。</p>
<p>我们一般说的网关支付是指在PC上的在线支付，由于国内银行基本上都要求安装对应的安全控件，且需要银行的网银客户端，这也是大家经常抱怨网银不支持MAC&#x2F;Linux等操作系统、不支持除IE外的浏览器等兼容性问题。<br>在手机端也有类似网关支付的形态，但由于操作过程较为麻烦，体验不好，一般都采用快捷支付等支付形式。</p>
<h2 id="二、快捷支付"><a href="#二、快捷支付" class="headerlink" title="二、快捷支付"></a>二、快捷支付</h2><span id="more"></span>
<p>快捷支付一般是指首次需要验证卡要素，生成协议号或者TOKEN,后面支付直接凭协议号扣款。走的交易形式是消费。快捷支付相比于我们原先说的无磁无密支付[MOTO]在限额上有劣势，体验上有优势。<br>一个相当于长期关系，MOTO相当于一次性关系，每次来都要输入卡要素。</p>
<h2 id="三、代收代付"><a href="#三、代收代付" class="headerlink" title="三、代收代付"></a>三、代收代付</h2><p>代收代付业务是我社利用自身的结算便利，接受客户的委托代为办理指定款项的收付事宜的业务。</p>
<p>由中介公司或第三方代为收取和支付费用。</p>
<p>顾名思义，代收代付是指先付出去，然后再收回来，金额必须相等。</p>
<p>比如代办运输业务，如果是收取一定比率的手续费，就改变了性质。</p>
<p>代收代付业务分录：</p>
<p>代付时，借：其他应收款  贷：银行存款</p>
<p>收回时，借：银行存款    贷：其他应收款</p>
<h2 id="四、账户托管"><a href="#四、账户托管" class="headerlink" title="四、账户托管"></a>四、账户托管</h2><p>待完善</p>
<h2 id="五、二维码扫码支付"><a href="#五、二维码扫码支付" class="headerlink" title="五、二维码扫码支付"></a>五、二维码扫码支付</h2><p>微信扫码业务流程说明：</p>
<ol>
<li>商户后台系统根据用户选购的商品生成订单。</li>
<li>用户确认支付后调用微信支付【统一下单API】生成预支付交易；</li>
<li>微信支付系统收到请求后生成预支付交易单，并返回交易会话的二维码链接code_url。</li>
<li>商户后台系统根据返回的code_url生成二维码。</li>
<li>用户打开微信“扫一扫”扫描二维码，微信客户端将扫码内容发送到微信支付系统。</li>
<li>微信支付系统收到客户端请求，验证链接有效性后发起用户支付，要求用户授权。</li>
<li>用户在微信客户端输入密码，确认支付后，微信客户端提交授权。</li>
<li>微信支付系统根据用户授权完成支付交易。</li>
<li>微信支付系统完成支付交易后给微信客户端返回交易结果，并将交易结果通过短信、微信消息提示用户。微信客户端展示支付交易结果页面。</li>
<li>微信支付系统通过发送异步消息通知商户后台系统支付结果。商户后台系统需回复接收情况，通知微信后台系统不再发送该单的支付通知。</li>
<li>未收到支付通知的情况，商户后台系统调用【查询订单API】。</li>
<li>商户确认订单已支付后给用户发货。</li>
</ol>
<p>日后需要用到这方面的东西，先整理一番</p>
<p>系统的学习或者理解之后再来说说深层次的东西。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>支付</tag>
      </tags>
  </entry>
  <entry>
    <title>聊聊MySQL的隔离级别 | MySQL隔离级别原理</title>
    <url>/20190413-%E8%81%8A%E8%81%8AMySQL%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/</url>
    <content><![CDATA[<p>这是之前的一个帖子：<a href="https://hisen.me/20171114-oracle%20-%20mysql%20-%20%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%BB%8B%E7%BB%8D/" target="_blank">oracle - mysql - 数据库事务隔离级别介绍</a><br>写的不全面， 按现在的理解，重新写一个；</p>
<h1 id="一、名词解释"><a href="#一、名词解释" class="headerlink" title="一、名词解释"></a>一、名词解释</h1><p>脏读：在一个查询事务过程中，读到了其它事务没有提交的数据；<br>不可重复读：一个事务查询过程中，多次查询得到了不一致的结果，原因是：有别的更新事务提交了；<br>幻读：一个事务查询过程中，多次查询得到了不一致的结果，原因是：有别的删除事务&#x2F;插入事务提交了；</p>
<h1 id="二、数据库隔离级别"><a href="#二、数据库隔离级别" class="headerlink" title="二、数据库隔离级别"></a>二、数据库隔离级别</h1><p>| name | 名称 | 脏读 | 不可重复读 | 幻读 | 加锁读 |<br>|:—–|:—–|:—–|:—–|:—–|:—–| :—–|<br>| Read uncommitted |  读未提交 | Yes | Yes | Yes | No |<br>| Read committed | 读已提交 | No | Yes | Yes  | No |<br>| Repeatable read | 可重复读 | No | No | Yes  | No |<br>| Serializable | 序列化 | No | No | No | Yes |</p>
<p>默认的隔离级别为：RR，原因：5.1之后版本，如果Binlogog开启语句级别，必须为RR，RC可能会导致Binlog数据错误(<a href="https://blog.csdn.net/shudaqi2010/article/details/79958222">详情</a>);</p>
<h1 id="三、控制方式"><a href="#三、控制方式" class="headerlink" title="三、控制方式"></a>三、控制方式</h1><p>读未提交：每次都是读数据最新的版本(包括事务未提交的数据)；<br>读已提交：MVCC控制；<br>可重复读：MVCC控制；<br>序列化：在读取的每一行上加锁，只能按顺序进行读写；</p>
<h1 id="四、InnoDB-MVCC-多版本并发控制-原理"><a href="#四、InnoDB-MVCC-多版本并发控制-原理" class="headerlink" title="四、InnoDB MVCC(多版本并发控制)原理"></a>四、InnoDB MVCC(多版本并发控制)原理</h1><span id="more"></span>
<p>InnoDB引擎下的MVCC，是通过在每一行上增加两个隐藏列实现的；<br>每发生一个新的事务，系统版本都会递增；<br>当UPDATE数据的时候，都是先copy出来一行操作，不影响原表数据，提交之后才影响；</p>
<p>一个保存创建时间(非时间值，而是系统版本号)；<br>一个保存删除时间(非时间值，而是系统版本号)；</p>
<h2 id="4-1-SELECT"><a href="#4-1-SELECT" class="headerlink" title="4.1 SELECT"></a>4.1 SELECT</h2><p>当前查询事务系统ID：5<br>结果条件：</p>
<ol>
<li>CREATE VERSION &lt;&#x3D; 5(RR级别为 &lt;&#x3D; 5,RC级别应该是直接取最大值)；</li>
<li>DELETE VERSION &#x3D;&#x3D; null or DELETE VERSION &gt; 5 (RR级别应该只有为空，RC级别可能有 &gt; 5的情况)；</li>
</ol>
<p>1可以保证读取到的行，在事务开始之前就已经存在，要么是事务自身插入或者修改的；<br>2可以保证读取到的行，在事务开始之前未被删除；</p>
<h2 id="4-2-INSERT"><a href="#4-2-INSERT" class="headerlink" title="4.2 INSERT"></a>4.2 INSERT</h2><p>为新插入的每一行保存当前系统版本号作为CREATE VERSION；</p>
<h2 id="4-3-DELETE"><a href="#4-3-DELETE" class="headerlink" title="4.3 DELETE"></a>4.3 DELETE</h2><p>为删除的每一行保存当前系统版本号作为DELETE VERSION；</p>
<h2 id="4-4-UPDATE"><a href="#4-4-UPDATE" class="headerlink" title="4.4 UPDATE"></a>4.4 UPDATE</h2><p>插入一行新的记录，保存当前系统版本号作为CREATE VERSION；<br>同事保存当前系统版本号到原来的行上作为DELETE VERSION；</p>
<h1 id="五、参考："><a href="#五、参考：" class="headerlink" title="五、参考："></a>五、参考：</h1><ol>
<li>《高性能MySQL》</li>
<li><a href="https://www.cnblogs.com/huanongying/p/7021555.html" target="_blank">MySQL的四种事务隔离级别</a>(ps:此处有测试截图，比较直观)</li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>解决：eclipse下*.properties显示Unicode乱码</title>
    <url>/20170208-%E8%A7%A3%E5%86%B3%EF%BC%9Aeclipse%E4%B8%8B-properties%E6%98%BE%E7%A4%BAUnicode%E4%B9%B1%E7%A0%81/</url>
    <content><![CDATA[<p>eclipse的*.properties文件，默认的编码方式是iso-8859-1</p>
<p>Window -&gt; preferences -&gt; general -&gt; Contents Types -&gt; Text(展开)<br> -&gt; Java Aroperties File(点击) -&gt; *.properties(locked)(点击)<br> -&gt; 把iso-8859-1改为 UTF-8 -&gt; Update -&gt; OK</p>
<p>然后就可以正常显示中文了</p>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>乱码</tag>
        <tag>properties</tag>
      </tags>
  </entry>
  <entry>
    <title>解决：html rendering error - MarkdownPad 2</title>
    <url>/20170119-%E8%A7%A3%E5%86%B3%EF%BC%9Ahtml-rendering-error-MarkdownPad-2/</url>
    <content><![CDATA[<p>MarkdownPad 2在windows 10上会遇到这个错误</p>
<p>官方发布了这个问题的解决办法</p>
<p>详见：<a href="http://markdownpad.com/faq.html" target="_blank">点击前往</a> 页面中搜索：This view has crashed</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>windows 10系统 需要下载 一个  awesomium_v1.6.6_sdk_win</p>
<p>这是一个 HTML UI ENGINE</p>
<p>下载地址：<a href="http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe" target="_blank">http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe</a></p>
]]></content>
      <tags>
        <tag>MarkdownPad</tag>
        <tag>html rendering error</tag>
      </tags>
  </entry>
  <entry>
    <title>计算长度最大的子串长度(按空格分割) - 多种方式</title>
    <url>/20190326-%E8%AE%A1%E7%AE%97%E9%95%BF%E5%BA%A6%E6%9C%80%E5%A4%A7%E7%9A%84%E5%AD%90%E4%B8%B2%E9%95%BF%E5%BA%A6(%E6%8C%89%E7%A9%BA%E6%A0%BC%E5%88%86%E5%89%B2)/</url>
    <content><![CDATA[<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>今天中午一个朋友问我一个问题没来得及回，现在折腾一下;<br>问题：有一个包含以N个空格分割的字符串，求最大子串的长度，要求时间空间复杂度最优;</p>
<h1 id="二、方案："><a href="#二、方案：" class="headerlink" title="二、方案："></a>二、方案：</h1><ol>
<li>朋友给人方案：直接split分割遍历数组，找出最大值;</li>
<li>面试官的方案：使用StringTokenizer，找出最大值;</li>
<li>我想到的方案：indexOf计算index差值，找出最大值;</li>
</ol>
<h1 id="三、结果："><a href="#三、结果：" class="headerlink" title="三、结果："></a>三、结果：</h1><p>封装的代码比较复杂，目前来看不在么好分析时间复杂度和空间复杂度；<br>于是就直观得对比了一下时间；</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//        output</span><br><span class="line">//        use(nano): 15486049, by 方案3</span><br><span class="line">//        use(nano): 66060102, by 方案2</span><br><span class="line">//        use(nano): 80844275, by 方案1</span><br></pre></td></tr></table></figure>
<p>有时间再深入了解下StringTokenizer的源码</p>
<h1 id="四、代码对比"><a href="#四、代码对比" class="headerlink" title="四、代码对比"></a>四、代码对比</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">oriStr</span> <span class="operator">=</span> <span class="string">&quot;aa aa aaaa aaa a a a aa aa a&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100000</span>;</span><br><span class="line"><span class="comment">// 自定义实现</span></span><br><span class="line"><span class="keyword">final</span> <span class="type">long</span> <span class="variable">start1</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; times; i++) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">splitStr</span> <span class="operator">=</span> <span class="string">&quot; &quot;</span>;</span><br><span class="line">    findMaxLength(oriStr, splitStr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">final</span> <span class="type">long</span> <span class="variable">end1</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用 StringTokenizer</span></span><br><span class="line"><span class="keyword">final</span> <span class="type">long</span> <span class="variable">start2</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; times; i++) &#123;</span><br><span class="line">    findMaxLength4StringTokenizer(oriStr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">final</span> <span class="type">long</span> <span class="variable">end2</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用 Split</span></span><br><span class="line"><span class="keyword">final</span> <span class="type">long</span> <span class="variable">start3</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; times; i++) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">splitStr</span> <span class="operator">=</span> <span class="string">&quot; &quot;</span>;</span><br><span class="line">    findMaxLength4Split(oriStr, splitStr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">final</span> <span class="type">long</span> <span class="variable">end3</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;use(nano): &quot;</span> + (end1 - start1) + <span class="string">&quot;, by findMaxLength&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;use(nano): &quot;</span> + (end2 - start2) + <span class="string">&quot;, by findMaxLength4StringTokenizer&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;use(nano): &quot;</span> + (end3 - start3) + <span class="string">&quot;, by findMaxLength4Split&quot;</span>);</span><br><span class="line"><span class="comment">//        output</span></span><br><span class="line"><span class="comment">//        use(nano): 15486049, by findMaxLength</span></span><br><span class="line"><span class="comment">//        use(nano): 66060102, by findMaxLength4StringTokenizer</span></span><br><span class="line"><span class="comment">//        use(nano): 80844275, by findMaxLength4Split</span></span><br></pre></td></tr></table></figure>
<h1 id="五、完整代码"><a href="#五、完整代码" class="headerlink" title="五、完整代码"></a>五、完整代码</h1><span id="more"></span>
<p>github也有：<a href="https://github.com/hisenyuan/IDEAPractice/blob/master/src/main/Java/com/hisen/interview/TestStringTokenizer.Java">https://github.com/hisenyuan/IDEAPractice/blob/master/src/main/Java/com/hisen/interview/TestStringTokenizer.Java</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> hisenyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 计算长度最大的子串长度(按空格分割), 自定义实现比较优</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2019/3/26 20:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStringTokenizer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">oriStr</span> <span class="operator">=</span> <span class="string">&quot;aa aa aaaa aaa a a a aa aa a&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100000</span>;</span><br><span class="line">        <span class="comment">// 自定义实现</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> <span class="variable">start1</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; times; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">splitStr</span> <span class="operator">=</span> <span class="string">&quot; &quot;</span>;</span><br><span class="line">            findMaxLength(oriStr, splitStr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> <span class="variable">end1</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 利用 StringTokenizer</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> <span class="variable">start2</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; times; i++) &#123;</span><br><span class="line">            findMaxLength4StringTokenizer(oriStr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> <span class="variable">end2</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 利用 Split</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> <span class="variable">start3</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; times; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">splitStr</span> <span class="operator">=</span> <span class="string">&quot; &quot;</span>;</span><br><span class="line">            findMaxLength4Split(oriStr, splitStr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> <span class="variable">end3</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;use(nano): &quot;</span> + (end1 - start1) + <span class="string">&quot;, by findMaxLength&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;use(nano): &quot;</span> + (end2 - start2) + <span class="string">&quot;, by findMaxLength4StringTokenizer&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;use(nano): &quot;</span> + (end3 - start3) + <span class="string">&quot;, by findMaxLength4Split&quot;</span>);</span><br><span class="line"><span class="comment">//        output</span></span><br><span class="line"><span class="comment">//        use(nano): 15486049, by findMaxLength</span></span><br><span class="line"><span class="comment">//        use(nano): 66060102, by findMaxLength4StringTokenizer</span></span><br><span class="line"><span class="comment">//        use(nano): 80844275, by findMaxLength4Split</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">findMaxLength4StringTokenizer</span><span class="params">(String oriStr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxLength</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">StringTokenizer</span> <span class="variable">stringTokenizer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringTokenizer</span>(oriStr);</span><br><span class="line">        <span class="keyword">while</span> (stringTokenizer.hasMoreElements()) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> stringTokenizer.nextToken().length();</span><br><span class="line">            maxLength = length &gt; maxLength ? length : maxLength;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;max: &quot; + maxLength);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">findMaxLength</span><span class="params">(String oriStr, String splitStr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">maxIndex</span> <span class="operator">=</span> oriStr.lastIndexOf(splitStr);</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxLength</span> <span class="operator">=</span> oriStr.length() - maxIndex;</span><br><span class="line">        <span class="keyword">while</span> (index &lt; maxIndex) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">currentIndex</span> <span class="operator">=</span> oriStr.indexOf(splitStr, index);</span><br><span class="line">            <span class="type">int</span> <span class="variable">currLength</span> <span class="operator">=</span> currentIndex - index;</span><br><span class="line">            maxLength = currLength &gt; maxLength ? currLength : maxLength;</span><br><span class="line">            index = currentIndex + splitStr.length();</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;max: &quot; + maxLength);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">findMaxLength4Split</span><span class="params">(String oriStr, String splitStr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxLength</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">final</span> String[] strings = oriStr.split(splitStr);</span><br><span class="line">        <span class="keyword">for</span> (String str : strings) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> str.length();</span><br><span class="line">            maxLength = length &gt; maxLength ? length : maxLength;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;max: &quot; + maxLength);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>认识Java I/O | BIO NIO AIO | 同步与异步 | 阻塞与非阻塞 | I/O多路复用</title>
    <url>/20190413-%E8%AE%A4%E8%AF%86Java%20IO%20%7C%20BIO-NIO-AIO/</url>
    <content><![CDATA[<h1 id="一、名词解释"><a href="#一、名词解释" class="headerlink" title="一、名词解释"></a>一、名词解释</h1><h2 id="1-1-同步与异步"><a href="#1-1-同步与异步" class="headerlink" title="1.1 同步与异步"></a>1.1 同步与异步</h2><p>同步与异步主要是针对CPU来说的</p>
<ol>
<li>同步：CPU必须等着结果返回，这期间不能干别的;</li>
<li>异步：CPU不必等着结果返回，这期间可以干别的;</li>
</ol>
<h2 id="1-2-阻塞与非阻塞"><a href="#1-2-阻塞与非阻塞" class="headerlink" title="1.2 阻塞与非阻塞"></a>1.2 阻塞与非阻塞</h2><p>阻塞与非阻塞主要是针对I&#x2F;O来说的</p>
<ol>
<li>阻塞：I&#x2F;O线程会挂起，需等待结果;</li>
<li>非阻塞：I&#x2F;O线程不必挂起，不等待结果;</li>
</ol>
<h2 id="1-3-伪异步I-O"><a href="#1-3-伪异步I-O" class="headerlink" title="1.3 伪异步I&#x2F;O"></a>1.3 伪异步I&#x2F;O</h2><p>本质上还是同步阻塞I&#x2F;O<br>不过是在服务器把socket链接封装成Task提交给线程池处理<br>因为有队列，所以可以突破C:S&#x3D;1:1的比例</p>
<h2 id="1-4-I-O多路复用"><a href="#1-4-I-O多路复用" class="headerlink" title="1.4 I&#x2F;O多路复用"></a>1.4 I&#x2F;O多路复用</h2><p>通过把多个I&#x2F;O的阻塞复用到一个阻塞上，从而使得系统在单线程情况下可以处理多个客户端的请求。<br>类似于linux的epoll、select</p>
<h2 id="1-5-多路复用器"><a href="#1-5-多路复用器" class="headerlink" title="1.5 多路复用器"></a>1.5 多路复用器</h2><p>Selector，核心是通过Selector来轮询注册在其上的Channel<br>当发现有Channel就绪就返回Channel的选择键集合，进行I&#x2F;O操作；</p>
<h1 id="二、不同I-O模型对比表格"><a href="#二、不同I-O模型对比表格" class="headerlink" title="二、不同I&#x2F;O模型对比表格"></a>二、不同I&#x2F;O模型对比表格</h1><span id="more"></span>
<p>| 对比项 | 同步阻塞I&#x2F;O(BIO) | 伪异步IO | 非阻塞I&#x2F;O(NIO) | 异步I&#x2F;O(AIO) |<br>|:—–|:—–|:—–|:—–|:—–|:—–|<br>| 客户端个数:I&#x2F;O线程数 | 1:1 | M:N(M&gt;&#x3D;N) | M:1 | M:O |<br>| I&#x2F;O类型(是否同步) | 同步 | 同步 | 同步(I&#x2F;O多路复用) | 异步 |<br>| I&#x2F;O类型(是否阻塞) | 阻塞 | 阻塞 | 阻塞 | 非阻塞 |<br>| API使用难度 | 简单 | 简单 | 非常复杂 | 复杂 |<br>| 调试难度 | 简单 | 简单 | 复杂 | 复杂 |<br>| 可靠性 | 非常差 | 差 | 高 | 高 |<br>| 吞吐量 | 低 | 中 | 高 | 高 |</p>
<h1 id="三、参考"><a href="#三、参考" class="headerlink" title="三、参考"></a>三、参考</h1><ol>
<li>《Netty权威指南 2th》</li>
</ol>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>记录一次面试过程中交流的一些题</title>
    <url>/20170126-%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E9%9D%A2%E8%AF%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E4%BA%A4%E6%B5%81%E7%9A%84%E4%B8%80%E4%BA%9B%E9%A2%98/</url>
    <content><![CDATA[<p>以下是面试一家支付类公司的过程当中遇到的面试题</p>
<p>主要是交流比较多，不是先笔试</p>
<p>直接是把这些问题带入到具体的情景当中去</p>
<p>可能这样更能考验出一个人真正的技术水平</p>
<p>1，很多文件，读出数字，加1写回，谈谈你的想法</p>
<p>2，能继承string类?</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">不可以，因为String类有final修饰符，而final修饰的类是不能被继承的，实现细节不允许改变。</span><br></pre></td></tr></table></figure>
<p>3，能有个包名一样的String类?如果有一样的会调用哪个？</p>
<p>4，一个主线程等待其他线程完成，如果其中有线程出错怎么办？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">把线程可能会出现的问题处理掉</span><br><span class="line">出错了能保证让他重新执行</span><br></pre></td></tr></table></figure>

<p>5，Oracle默认端口？</p>
<pre><code>1521
</code></pre>
<p>6，b继承a，b的对象能强转成a嘛？</p>
<pre><code>不能把一个对象强制转换成另外一个对象
</code></pre>
<p>7，数据库去重，删除所有重复记录，只留下一条</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELETE</span><br><span class="line">FROM EMP E</span><br><span class="line">WHERE E.ROWID &gt;</span><br><span class="line">    (SELECT MIN(X.ROWID)</span><br><span class="line">     FROM EMP X</span><br><span class="line">     WHERE X.EMP_NO = E.EMP_NO);</span><br></pre></td></tr></table></figure>

<span id="more"></span>
<p>8，try c里面，没打印出错误来，是为什么？</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.可能是程序执行是正确的</span><br><span class="line">2.可能存在调用，但是调用的方法里面出现了错误，没有抛出或者是运行时错误</span><br></pre></td></tr></table></figure>

<p>9，JAVA数据类型</p>
<table>
<thead>
<tr>
<th align="left">简单类型</th>
<th align="left">二进制位数</th>
<th align="left">封装器类</th>
</tr>
</thead>
<tbody><tr>
<td align="left">boolean</td>
<td align="left">1</td>
<td align="left">Boolean</td>
</tr>
<tr>
<td align="left">byte</td>
<td align="left">8</td>
<td align="left">Byte</td>
</tr>
<tr>
<td align="left">char</td>
<td align="left">16</td>
<td align="left">Character</td>
</tr>
<tr>
<td align="left">short</td>
<td align="left">16</td>
<td align="left">Short</td>
</tr>
<tr>
<td align="left">Int</td>
<td align="left">32</td>
<td align="left">Integer</td>
</tr>
<tr>
<td align="left">long</td>
<td align="left">64</td>
<td align="left">Long</td>
</tr>
<tr>
<td align="left">float</td>
<td align="left">32</td>
<td align="left">Float</td>
</tr>
<tr>
<td align="left">double</td>
<td align="left">64</td>
<td align="left">Double</td>
</tr>
<tr>
<td align="left">void</td>
<td align="left">–</td>
<td align="left">Void</td>
</tr>
</tbody></table>
<p>10，银行金额字段</p>
<pre><code>金融数字是BigDecimal类型
</code></pre>
<p>11，用什么解析XML，有什么优缺点</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DOM4J(Document Object Model for Java)</span><br><span class="line">虽然DOM4J代表了完全独立的开发结果，但最初，它是JDOM的一种智能分支。</span><br><span class="line">它合并了许多超出基本XML文档表示的功能，</span><br><span class="line">包括集成的XPath支持、XML Schema支持以及用于大文档或流化文档的基于事件的处理。</span><br><span class="line">它还提供了构建文档表示的选项，它通过DOM4J API和标准DOM接口具有并行访问功能。</span><br><span class="line">从2000下半年开始，它就一直处于开发之中。</span><br><span class="line"></span><br><span class="line">为支持所有这些功能，DOM4J使用接口和抽象基本类方法。</span><br><span class="line">DOM4J大量使用了API中的Collections类，但是在许多情况下，</span><br><span class="line">它还提供一些替代方法以允许更好的性能或更直接的编码方法。</span><br><span class="line">直接好处是，虽然DOM4J付出了更复杂的API的代价，但是它提供了比JDOM大得多的灵活性。</span><br><span class="line"></span><br><span class="line">在添加灵活性、XPath集成和对大文档处理的目标时，</span><br><span class="line">DOM4J的目标与JDOM是一样的：针对Java开发者的易用性和直观操作。</span><br><span class="line">它还致力于成为比JDOM更完整的解决方案，实现在本质上处理所有Java/XML问题的目标。</span><br><span class="line">在完成该目标时，它比JDOM更少强调防止不正确的应用程序行为。</span><br><span class="line"></span><br><span class="line">DOM4J是一个非常非常优秀的Java XML API，</span><br><span class="line">具有性能优异、功能强大和极端易用使用的特点，同时它也是一个开放源代码的软件。</span><br><span class="line">如今你可以看到越来越多的Java软件都在使用DOM4J来读写XML，</span><br><span class="line">特别值得一提的是连Sun的JAXM也在用DOM4J.</span><br><span class="line"></span><br><span class="line">【优点】</span><br><span class="line">①大量使用了Java集合类，方便Java开发人员，同时提供一些提高性能的替代方法。</span><br><span class="line">②支持XPath。</span><br><span class="line">③有很好的性能。</span><br><span class="line"></span><br><span class="line">【缺点】</span><br><span class="line">①大量使用了接口，API较为复杂。</span><br></pre></td></tr></table></figure>

<p>12，阿贾克斯熟悉吗？能发起请求下载文档吗？返回类型有哪些，遇到错误怎么提示用户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">不能发起文档下载，返回的类型只有字符型，</span><br><span class="line">出错了alert出错误</span><br></pre></td></tr></table></figure>

<p>13，jquery选择器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">jQuery 元素选择器</span><br><span class="line">jQuery 使用 CSS 选择器来选取 HTML 元素。</span><br><span class="line">$(&quot;p&quot;) 选取 &lt;p&gt; 元素。</span><br><span class="line">$(&quot;p.intro&quot;) 选取所有 class=&quot;intro&quot; 的 &lt;p&gt; 元素。</span><br><span class="line">$(&quot;p#demo&quot;) 选取所有 id=&quot;demo&quot; 的 &lt;p&gt; 元素。</span><br><span class="line"></span><br><span class="line">jQuery 属性选择器</span><br><span class="line">jQuery 使用 XPath 表达式来选择带有给定属性的元素。</span><br><span class="line">$(&quot;[href]&quot;) 选取所有带有 href 属性的元素。</span><br><span class="line">$(&quot;[href=&#x27;#&#x27;]&quot;) 选取所有带有 href 值等于 &quot;#&quot; 的元素。</span><br><span class="line">$(&quot;[href!=&#x27;#&#x27;]&quot;) 选取所有带有 href 值不等于 &quot;#&quot; 的元素。</span><br><span class="line">$(&quot;[href$=&#x27;.jpg&#x27;]&quot;) 选取所有 href 值以 &quot;.jpg&quot; 结尾的元素。</span><br></pre></td></tr></table></figure>

<p>14，空指针异常，怎么定位错误</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">定位到出现错误的行数</span><br><span class="line">看看附近的各种调用是否存可能出现空指针异常，再慢慢排除</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Java</tag>
        <tag>面试</tag>
      </tags>
  </entry>
  <entry>
    <title>该Java语句创建了多少个对象？</title>
    <url>/20170120-%E8%AF%A5Java%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA%E4%BA%86%E5%A4%9A%E5%B0%91%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%9F/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">String str = new String(&quot;Java&quot;);</span><br></pre></td></tr></table></figure>
<p>答案：最少一个，最多两个</p>
<ol>
<li>Java中有常量池的概念，常量池和类文件相关，其数据存放的区域是在方法区中（方法区是jvm中内存模型的概念）</li>
<li>因为当你使用关键字new的时候是一定会生成一个String类的实例，当你使用直接量的方式定义了一个字符串时，假如这个字符串在常量池中，则不会去实例化String，反之则会生成一个String类的实例，并置入常量池</li>
</ol>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>读取文件路径相关问题</title>
    <url>/20190716-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="零、本文由来"><a href="#零、本文由来" class="headerlink" title="零、本文由来"></a>零、本文由来</h1><p>感觉从业这么久以来，读取文件路径相关问题一直是一个痛<br>用的很少，之前也解决过相关的问题<br>但是得用这种路径</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">src/test/resources/test/test.txt</span><br></pre></td></tr></table></figure>
<p>上面这种路径如果在代码中的话，src&#x2F;test&#x2F;resources是不会存在的，会出现问题<br>本次学到了一个新的方法，Class.getResourceAsStream();<br>需要的路径在资源文件夹下面即可，填写路径：&#x2F;test&#x2F;test.txt<br>打包最终的路径会在：WEB-INF&#x2F;classes&#x2F;test&#x2F;test.txt</p>
<p>ps：因maven打包配置不同，最终resources资源文件夹下的路径是不同的，注意src的坑即可</p>
<h1 id="一、文件结构"><a href="#一、文件结构" class="headerlink" title="一、文件结构"></a>一、文件结构</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">│   └── test</span><br><span class="line">│       ├── Java</span><br><span class="line">│       │   └── mq</span><br><span class="line">│       │       └── Test.Java</span><br><span class="line">│       └── resources</span><br><span class="line">│           ├── test</span><br><span class="line">│           │   └── test.txt</span><br></pre></td></tr></table></figure>
<h1 id="二、读取代码"><a href="#二、读取代码" class="headerlink" title="二、读取代码"></a>二、读取代码</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith(value = SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&#123;&quot;/spring-config.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Test.class.getResourceAsStream(<span class="string">&quot;/test/test.txt&quot;</span>);</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        <span class="keyword">while</span> ((len = inputStream.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            bos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        bos.close();</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> bos.toString();</span><br><span class="line">        System.out.println(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>阿里巴巴Java开发手册，摘要&amp;下载链接</title>
    <url>/20170213-%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%EF%BC%8C%E6%91%98%E8%A6%81-%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5/</url>
    <content><![CDATA[<p>阿里巴巴Java开发手册</p>
<p>看了几个小时，感觉还是不错</p>
<p>都按规范来写，可以避免很多错误</p>
<h2 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接"></a>下载链接</h2><span id="more"></span>
<p><a href="http://techforum-img.cn-hangzhou.oss-pub.aliyun-inc.com/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8Cv1.0.1.pdf" target="_target">点击下载</a></p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>面试题收集 - Java - 2017</title>
    <url>/20170808-%E9%9D%A2%E8%AF%95%E9%A2%98%E6%94%B6%E9%9B%86%20-%20Java%20-%202017/</url>
    <content><![CDATA[<p>我只是收集一下题目，检查一下自己。</p>
<h2 id="京东平台产品研发部-Java"><a href="#京东平台产品研发部-Java" class="headerlink" title="京东平台产品研发部 - Java"></a>京东平台产品研发部 - Java</h2><p>背景：一年工作经验，做电子政务</p>
<ol>
<li>一个数组 i[] &#x3D; [-1000 ~ 1000] 中的任意一些数字，求乘积最大的三个数。</li>
<li>static都能用在哪里？</li>
<li>1M 等于多少个1</li>
<li>面向对象的特性</li>
<li>写出两种单例模式</li>
<li>HashMap有哪些方法</li>
<li>HashMap的底层实现</li>
<li>List和Set的区别</li>
<li>重载和重写的区别，多态如何体现</li>
<li>判断字符串是否含有此Url：<a href="http://www.jd.com/">www.jd.com</a></li>
<li></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Long l1 = new Long(1024L);</span><br><span class="line">Long l2 = new Long(1024L);</span><br><span class="line">System.out.println(l1 == l2);//false</span><br><span class="line">Integer i1 = 100;</span><br><span class="line">Integer i2 = 100;</span><br><span class="line">System.out.println(i1 == i2);//true</span><br><span class="line">i1 = 100;</span><br><span class="line">i2 = 100;</span><br><span class="line">System.out.println(i1 == i2);//true</span><br></pre></td></tr></table></figure>
<ol start="12">
<li>Spring自定义注解、拦截器相关</li>
<li>为什么使用注解、有什么好处</li>
<li>Spring中运用了哪些设计模式</li>
<li>Sping和SpringBoot各有什么优缺点</li>
<li>Spring的事物隔离机制</li>
<li>说说AOP、DI、IOC</li>
<li>redis等用过没</li>
<li>缓存和memorycache</li>
<li><a href="http://www.jd.com/...username=">http://www.jd.com/...username=</a>… 为了防止sql注入，怎么写正则。</li>
<li>mybatis如何防止sql注入</li>
<li>mybatis使用变量时怎么表示</li>
<li>使用js遍历json数据</li>
<li>使用Map遍历json数据</li>
<li>elasticsearch相关</li>
<li>你曾经在社区接触过的技术有哪些</li>
<li>项目相关：做了哪些部分、职责、用到哪些技术、设计了哪些</li>
<li>介绍一下RPC调用</li>
</ol>
<h2 id="谷歌淘来的一个总结"><a href="#谷歌淘来的一个总结" class="headerlink" title="谷歌淘来的一个总结"></a>谷歌淘来的一个总结</h2><p><a href="http://blog.csdn.net/moneyshi/article/details/50786786">面试题总结 —— JAVA高级工程师</a></p>
<h2 id="部分答案"><a href="#部分答案" class="headerlink" title="部分答案"></a>部分答案</h2><span id="more"></span>
<ol>
<li>一个数组 i[] &#x3D; [-1000 ~ 1000] 中的任意一些数字，求乘积最大的三个数。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * 功能：求解一维无序数组中三个数字乘积最大值（正负零均存在）</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getMaxThreeNum</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="comment">// 首先对数组进行升序排序</span></span><br><span class="line">   <span class="comment">// 1. 数组左端是0，那么不存在负数，最大值为：i[-1]*i[-2]*i[-3]</span></span><br><span class="line">   <span class="comment">// 2. 数组左端是正数，同上</span></span><br><span class="line">   <span class="comment">// 3. 数组左端是负数，那么可能会负负得正，由于是升序，最大值为：i[0]*i[1]*i[-1]</span></span><br><span class="line">   <span class="comment">// 4. 去上面两个的最大值即可</span></span><br><span class="line">   <span class="type">int</span>[] i = &#123;<span class="number">0</span>,-<span class="number">10</span>, -<span class="number">9</span>, -<span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">   Arrays.sort(i);</span><br><span class="line">   <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> i.length;</span><br><span class="line">   <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> i[<span class="number">0</span>] * i[<span class="number">1</span>] * i[length - <span class="number">1</span>];</span><br><span class="line">   <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> i[length - <span class="number">1</span>] * i[length - <span class="number">2</span>] * i[length - <span class="number">3</span>];</span><br><span class="line">   <span class="keyword">if</span> (a &gt; b) &#123;<span class="comment">//-10 * -9 * 7 = 630</span></span><br><span class="line">     System.out.println(i[<span class="number">0</span>] + <span class="string">&quot; * &quot;</span> + i[<span class="number">1</span>] + <span class="string">&quot; * &quot;</span> + i[length - <span class="number">1</span>] + <span class="string">&quot; = &quot;</span> + a);</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     System.out.println(i[length - <span class="number">1</span>] + <span class="string">&quot; * &quot;</span> + i[length - <span class="number">2</span>] + <span class="string">&quot; * &quot;</span> + i[length - <span class="number">3</span>] + <span class="string">&quot; = &quot;</span> + b);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>1M 等于多少个1</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">get1McanHoldInt</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="comment">// int 占用4个字节 4Byte = 4 * 8bit</span></span><br><span class="line">  System.out.println(<span class="number">1</span>*<span class="number">1024</span>*<span class="number">1024</span>/<span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>写出两种单例模式</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//懒汉模式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">LazySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazySingleton</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">// 静态方法，使用当前类本身充当进程锁</span></span><br><span class="line">            <span class="keyword">synchronized</span>(LazySingleton.class)&#123;</span><br><span class="line">                instance = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 饿汉式单例模式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EagerSingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">EagerSingleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EagerSingleton</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">EagerSingleton</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 不需要同步（类加载时已经初始化，不存在多线程的问题）</span></span><br><span class="line">    <span class="comment">// 始终只有一个对象</span></span><br><span class="line">    <span class="keyword">public</span> EagerSingleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="10">
<li>判断字符串是否含有此Url：<a href="http://www.jd.com/">www.jd.com</a></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">isHaveUrl</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;这是京东官网：www.jd.com&quot;</span>;</span><br><span class="line">  <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;.*www.jd.com.*&quot;</span>);</span><br><span class="line">  <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(url);</span><br><span class="line">  <span class="keyword">if</span> (matcher.find())&#123;</span><br><span class="line">    System.out.println(matcher.group());</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;未匹配&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="20">
<li><a href="http://www.jd.com/...username=">http://www.jd.com/...username=</a>… 为了防止sql注入，怎么写正则。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">将包含有 单引号(&#x27;)，分号(;) 和 注释符号(--)的语句给替换掉来防止SQL注入</span><br><span class="line">str.replaceAll(&quot;([&#x27;;])+|(--)+&quot;,&quot;&quot;);</span><br></pre></td></tr></table></figure>
<ol start="21">
<li>mybatis如何防止sql注入</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">防护一：sql语句不在使用$&#123;&#125;表达式，改为#&#123;&#125;</span><br><span class="line">&lt;select id=&quot;getBlogById&quot; resultType=&quot;Blog&quot; parameterType=”int”&gt;</span><br><span class="line">         SELECT id,title,author,content</span><br><span class="line">         FROM blog</span><br><span class="line">WHERE id=#&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">编译后的SQL：SELECT id,title,author,content FROM blog WHERE id = ? (能避免sql注入)</span><br><span class="line"></span><br><span class="line">&lt;select id=&quot;getBlogById&quot; resultType=&quot;Blog&quot; parameterType=”int”&gt;</span><br><span class="line">         SELECT id,title,author,content</span><br><span class="line">         FROM blog</span><br><span class="line">WHERE id=$&#123;id&#125; &lt;!--假如id= 3 --&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">编译后的SQL：SELECT id,title,author,content FROM blog WHERE id = 3 (无法避免sql注入)</span><br><span class="line"></span><br><span class="line">SQL注入只能对编译过程起作用</span><br><span class="line">#&#123;&#125;：相当于JDBC中的PreparedStatement</span><br><span class="line">$&#123;&#125;：是输出变量的值</span><br><span class="line"></span><br><span class="line">#&#123;&#125;是经过预编译的，是安全的；</span><br><span class="line">$&#123;&#125;是未经过预编译的，仅仅是取变量的值，是非安全的，存在SQL注入。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">防护二：采用阿里的druid数据连接池，添加如下配置</span><br><span class="line">&lt;!-- 配置监控统计拦截的filters,和防sql注入 --&gt;</span><br><span class="line">&lt;property name=&quot;filters&quot; value=&quot;stat,wall&quot; /&gt;</span><br><span class="line"></span><br><span class="line">防护三：使用正则表达式过滤输入参数</span><br></pre></td></tr></table></figure>
<ol start="22">
<li>mybatis使用变量时怎么表示</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#与$的区别</span><br><span class="line">1.#是把传入的数据当作字符串，如#field#传入的是id,则sql语句生成是这样，order by &quot;id&quot;,这当然会报错．．</span><br><span class="line">2.$传入的数据直接生成在sql里，如$field$传入的是id,则sql语句生成是这样，order by id, 这就对了．</span><br><span class="line">3.#方式能够很大程度防止sql注入．</span><br><span class="line">4.$方式无法防止sql注入．</span><br><span class="line">5.$方式一般用于传入数据库对象．例如传入表名.</span><br><span class="line">6.一般能用#的就别用$.</span><br></pre></td></tr></table></figure>
<ol start="23">
<li>使用js遍历json数据</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data=[&#123;<span class="attr">name</span>:<span class="string">&quot;a&quot;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,&#123;<span class="attr">name</span>:<span class="string">&quot;b&quot;</span>,<span class="attr">age</span>:<span class="number">11</span>&#125;,&#123;<span class="attr">name</span>:<span class="string">&quot;c&quot;</span>,<span class="attr">age</span>:<span class="number">13</span>&#125;,&#123;<span class="attr">name</span>:<span class="string">&quot;d&quot;</span>,<span class="attr">age</span>:<span class="number">14</span>&#125;];  </span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">var</span> o <span class="keyword">in</span> data)&#123;  </span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;text:&quot;</span>+data[o].<span class="property">name</span>+<span class="string">&quot; value:&quot;</span>+data[o].<span class="property">age</span> );  </span><br><span class="line">      &#125;  </span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>面试</tag>
      </tags>
  </entry>
  <entry>
    <title>业余无线电新手指南</title>
    <url>/20250726-Amateur_Radio_Newbie_Guide/</url>
    <content><![CDATA[<h1 id="1-业余无线电简介"><a href="#1-业余无线电简介" class="headerlink" title="1. 业余无线电简介"></a>1. 业余无线电简介</h1><p>这个我后续再补充~<br>网上有很多介绍，目前也就半桶水。</p>
<h1 id="2-考取操作证"><a href="#2-考取操作证" class="headerlink" title="2. 考取操作证"></a>2. 考取操作证</h1><p>业余无线电操作证分类及技术限制（2025年适用）</p>
<table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>频段权限</strong></th>
<th><strong>功率限制</strong></th>
<th><strong>申领条件</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>A类</strong></td>
<td>30-3000MHz业余频段</td>
<td>≤25瓦</td>
<td>年满18周岁可直接报考(未成年也可以)</td>
</tr>
<tr>
<td><strong>B类</strong></td>
<td>- 30MHz以下：1.8-24.89MHz等短波频段 <br> - 30MHz以上：同A类频段</td>
<td>- 30MHz以下：≤100瓦 <br> - 30MHz以上：≤25瓦</td>
<td>需持A类证满6个月</td>
</tr>
<tr>
<td><strong>C类</strong></td>
<td>兼容A&#x2F;B类所有频段</td>
<td>- 部分短波频段≤1000瓦<br>- 30MHz以上：≤25瓦</td>
<td>需持B类证且设台满2年（设台时间为准）</td>
</tr>
</tbody></table>
<h2 id="2-1-准备"><a href="#2-1-准备" class="headerlink" title="2.1 准备"></a>2.1 准备</h2><p>有简单的笔记，<br>也有小程序可以背题。</p>
<span id="more"></span>
<ol>
<li>HAM模拟考试 ( 推荐,专注背题+模拟考试+错题回顾 )</li>
<li>业余无线电</li>
</ol>
<p>早期单纯背题的话就是一个体力活，最好还是找对应的书(例如《业余无线电通信》)来了解一下背景。<br>不然很多太专业的信息是看不懂的，对于各种天线，我是通过频繁的错题测试来记住。</p>
<p>贴上笔记</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">无线电考试</span><br><span class="line">KMGT：3 6 9 12</span><br><span class="line">munp：-3 -6 -9 -12</span><br><span class="line"></span><br><span class="line">10米波段，白天最强。</span><br><span class="line"></span><br><span class="line">无线电发射机调制部件作用：以原始信号控制射频信号的幅度、频率、相位参数</span><br><span class="line"></span><br><span class="line">音频：16Hz～20kHz</span><br><span class="line"></span><br><span class="line">驻波比：负载与天线的匹配质量</span><br><span class="line"></span><br><span class="line">直立天线：电场垂直于地面</span><br><span class="line"></span><br><span class="line">CQ 分区：23 24 25 26 27</span><br><span class="line">ITU分区：33 42 43 44 45 50</span><br><span class="line"></span><br><span class="line">DTMF：双音多频编码，8 16</span><br><span class="line">CTCSS：亚音调静噪</span><br><span class="line">ARDF：业余无线电测向</span><br><span class="line"></span><br><span class="line">QRZ？谁在呼叫我</span><br><span class="line">RIG：电台设备缩写</span><br><span class="line">XCVR：收发信机</span><br><span class="line">WX：天气</span><br><span class="line">QRN：我遇到天电干扰</span><br><span class="line">QTH：电台位置</span><br><span class="line">ANT：天线</span><br><span class="line">GND：地线、地面</span><br><span class="line">OM：老朋友</span><br><span class="line">QSL：我已收妥</span><br><span class="line"></span><br><span class="line">BEAM：定向天线</span><br><span class="line">DP：偶极天线</span><br><span class="line">GP：垂直接地天线</span><br><span class="line">YAGI：八木天线</span><br><span class="line">VERT/VER：垂直天线</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1/4波长垂直接地天线最大辐射方向：水平没有指向，垂直方向指向水平面</span><br><span class="line"></span><br><span class="line">一个FM话音信号在频谱仪上显示为：一固定垂线，左右相伴。</span><br><span class="line"></span><br><span class="line">dBd：半波</span><br><span class="line">dBi：点源</span><br><span class="line"></span><br><span class="line">超短波视距传播影响因素：收发离地相对高度</span><br><span class="line"></span><br><span class="line">减少同轴电缆感应射频电流：铁氧磁环</span><br><span class="line"></span><br><span class="line">SSB语音调制：长距离弱信号VHF UHF</span><br><span class="line">FM 短距离</span><br><span class="line"></span><br><span class="line">无线电管制：全国(多省)国务院+中央军委，省内无线电管理机构。</span><br><span class="line"></span><br><span class="line">频率容限单位：百万分之几(Hz，赫兹)</span><br><span class="line"></span><br><span class="line">6米业余波段 50～54MHz 主要业务</span><br><span class="line"></span><br><span class="line"> UHF业余无线电430MHz 避免(5 8)</span><br><span class="line">431.9-432.240MHz</span><br><span class="line">435-438MHz</span><br><span class="line">VHF 业余无线电 144MHz 避免(8 6)</span><br><span class="line">144-144.035MHz</span><br><span class="line">145.8-146MHz</span><br><span class="line"></span><br><span class="line">中继台收发共用天线，</span><br><span class="line">上下行频率分别为F1，F2，</span><br><span class="line">防止发射对接收到干扰，F1带阻，F2带阻</span><br><span class="line"></span><br><span class="line">防止 HF业余杂散发射影响电话，</span><br><span class="line">截止不高于 1MHz低通滤波器。</span><br><span class="line"></span><br><span class="line">WFM 宽</span><br><span class="line">NFM 窄</span><br><span class="line">宽听窄，声音小</span><br><span class="line">窄听宽，会失真</span><br><span class="line"></span><br><span class="line">2米波段刚很强，一会变弱，移动位置。</span><br><span class="line"></span><br><span class="line">28MHz UHF VHF 业余单边带：上边带</span><br><span class="line"></span><br><span class="line">5W可以表示为 37dBm</span><br><span class="line">0.25W可以表示为54dBu</span><br><span class="line">0.4kW可表示为86dbu</span><br><span class="line"></span><br><span class="line">接收机区分不同信号的能力：选择性</span><br><span class="line"></span><br><span class="line">安全特低压：24V</span><br><span class="line"></span><br><span class="line">中继电台呼叫：报对方、报自己</span><br><span class="line"></span><br><span class="line">1200MHz业余 10.1 135.7 430</span><br></pre></td></tr></table></figure>
<h2 id="2-2-报名"><a href="#2-2-报名" class="headerlink" title="2.2 报名"></a>2.2 报名</h2><p>关注各个地方无线电协会，例如:<br>北京：北京业余无线电服务中心 (公众号)</p>
<ul>
<li>几乎每个月都会组织考试(如果本地区没有，可以考虑跨地域，全国都可以考)；</li>
<li>准点去报名会比较卡，可以晚点，一般都会有名额；</li>
</ul>
<h2 id="2-3-考试"><a href="#2-3-考试" class="headerlink" title="2.3 考试"></a>2.3 考试</h2><p>考试一般是 30 个题目，对 25 个就行。<br>很多人开考几分钟就好了，毕竟 A 类操作证题目比较简单。</p>
<h2 id="2-4-拿到操作证"><a href="#2-4-拿到操作证" class="headerlink" title="2.4 拿到操作证"></a>2.4 拿到操作证</h2><p>我的情况：</p>
<ul>
<li>2025.6.21 通过考试</li>
<li>2025.7.23 操作证核发</li>
<li>2025.7.25 操作快递到家</li>
</ul>
<h1 id="3-设备登记"><a href="#3-设备登记" class="headerlink" title="3. 设备登记"></a>3. 设备登记</h1><h2 id="3-1-购买设备"><a href="#3-1-购买设备" class="headerlink" title="3.1 购买设备"></a>3.1 购买设备</h2><p>一般都是先在各个平台被种草，记住设备型号，<br>然后去工信部的网站查询是否有『核准代码』<br><span class="exturl" data-url="aHR0cHM6Ly95dGh6eGZ3Lm1paXQuZ292LmNuL3Jlc3VsdFF1ZXJ5">工业和信息化部政务服务平台-结果查询<i class="fa fa-external-link-alt"></i></span></p>
<ul>
<li>查看全量设备：业务分类 &gt; 行政许可 &gt; 无线电和卫星通信</li>
<li>查看特定设备：搜索框输入对应关键词即可</li>
</ul>
<p>我的设备：8800 pro，仅展示，非推荐。</p>
<table>
<thead>
<tr>
<th>全身</th>
<th>主体</th>
</tr>
</thead>
<tbody><tr>
<td><img src="/../images/8800_all.jpg" alt="8800pro-all"></td>
<td><img src="/../images/8800_part.jpg" alt="8800pro-part"></td>
</tr>
</tbody></table>
<h2 id="3-2-查询操作证号"><a href="#3-2-查询操作证号" class="headerlink" title="3.2 查询操作证号"></a>3.2 查询操作证号</h2><p>乌龙：由于我的操作证到手之后，编号部分特别模糊，以至于我以为证件号码就是操作证号。<br>所以我特意提一下『操作证号』查询( 北京设备登记网站上叫”操作证号”，证书上是”编号”)<br>查询方式：</p>
<ol>
<li>进入 <span class="exturl" data-url="aHR0cDovL3d3dy5jcmFjLm9yZy5jbi8=">CRAC-中国无线电协会业余无线电分会<i class="fa fa-external-link-alt"></i></span></li>
<li>滑动到底部，点击『证书查询』，由于这一步是 ip + port 的形式，我就不给怕后续失效。</li>
<li>输入『姓名+身份证号』</li>
<li>得到结果<br><img src="/../images/ham_cert_query.jpeg" alt="查询结果"></li>
</ol>
<p>新版的操作证名称：业余无线电台操作技术能力验证证书<br>证书信息解读：</p>
<ul>
<li>编号：操作证号 &#x2F; 证书编号 ( 叫法有点多，应该统一一下 )</li>
<li>证件号码：S+身份证号</li>
</ul>
<h2 id="3-2-设备登记"><a href="#3-2-设备登记" class="headerlink" title="3.2 设备登记"></a>3.2 设备登记</h2><p>主要是准备好</p>
<ol>
<li>操作证号</li>
<li>设备背面<ul>
<li>全部背面</li>
<li>标签部分</li>
</ul>
</li>
</ol>
<p>一般对图片大小有要求，我是怎么处理的？</p>
<ol>
<li>像素：美图秀秀像素编辑，解锁比例，800*1240(北京的要求,不一定准)</li>
<li>体积：通过 Mac 的另存为，调整质量，使得体积缩小至 100kb</li>
</ol>
<h1 id="4-相关网站"><a href="#4-相关网站" class="headerlink" title="4. 相关网站"></a>4. 相关网站</h1><ul>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5jcmFjLm9yZy5jbi8=">CRAC<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5iand4ZHhoLm9yZy5jbi8=">北京无线电协会<i class="fa fa-external-link-alt"></i></span></li>
</ul>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>HAM</tag>
      </tags>
  </entry>
  <entry>
    <title>《程序员必读之软件架构》读后感</title>
    <url>/20250803-Software-Architecture-for-Developers/</url>
    <content><![CDATA[<h1 id="1-概况"><a href="#1-概况" class="headerlink" title="1. 概况"></a>1. 概况</h1><p>书名：《程序员必读之软件架构》<br>时间：20250704～20250731</p>
<p>这本纸质书放在家里时间挺长，之前看着目录比较简单，一直没有去翻阅。<br>近来看完其它书，偶然翻阅，别有一番风味：行文比较简单。<br>印象深刻的两部分内容是『画图』和『文档』。<br>特别是文档，有一个很好的类比：旅游指南&#x2F;攻略 VS 软件指南。</p>
<ul>
<li>随说：<span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS81MTk0MDQ2OTYxMDkyNzc4">软件指南 VS 旅游指南<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<p>一句话概况：架构代表了重大决策，衡量重要性的则是改变的成本。<br>文章最后有更多架构相关书籍的读后感链接。</p>
<h2 id="1-1-什么是架构？"><a href="#1-1-什么是架构？" class="headerlink" title="1.1 什么是架构？"></a>1.1 什么是架构？</h2><p>名词解释：将产品分解为一系列组件、模块和交互。<br>动词解释：理解你需要构建什么、设定愿景以便进行构建和做出恰当的设计决策。</p>
<ul>
<li>本质：结构 + 愿景</li>
<li>现象：需求驱动架构</li>
</ul>
<h2 id="1-2-架构的好处"><a href="#1-2-架构的好处" class="headerlink" title="1.2 架构的好处"></a>1.2 架构的好处</h2><h3 id="1-2-1-没有架构会怎么样？"><a href="#1-2-1-没有架构会怎么样？" class="headerlink" title="1.2.1 没有架构会怎么样？"></a>1.2.1 没有架构会怎么样？</h3><p>如果没有人思考软件架构，最终结果往往看起来像一团乱码。<br>副作用包括软件系统难以维护、难以改变、难以扩展、难以部署、太慢、不安全、脆弱、不稳定等等。</p>
<h3 id="1-2-2-架构的好处"><a href="#1-2-2-架构的好处" class="headerlink" title="1.2.2 架构的好处"></a>1.2.2 架构的好处</h3><span id="more"></span>
<ul>
<li>让团队有清晰的愿景和路线图；</li>
<li>技术领导力和更好地协调；</li>
<li>更好地回答重要决策、非功能需求、限制和其他问题；</li>
<li>识别和减轻风险的框架；</li>
<li>方法和标准的一致性(结果之一：结构良好的代码库)；</li>
<li>对不同的听众，用不同的抽象来交流解决方案；</li>
</ul>
<h1 id="2-摘抄"><a href="#2-摘抄" class="headerlink" title="2. 摘抄"></a>2. 摘抄</h1><p>这本书主要覆盖的内容：</p>
<ul>
<li>软件架构的本质；</li>
<li>为什么软件架构角色应当包含编码、指导、合作；</li>
<li>开始编码前真正需要思考的事情；</li>
<li>如何用简单的草图让你的软件架构可视化；</li>
<li>为软件生成文档的轻量方法</li>
<li>为什么敏捷和架构并不冲突；</li>
<li>“恰如其分”的预先设计是什么意思；</li>
<li>如何通过风险风暴来识别风险；</li>
</ul>
<p>关于架构的5件事</p>
<ol>
<li>软件架构不是大型预先设计</li>
<li>每个软件团队都需要考虑软件架构</li>
<li>软件架构的角色关乎编码、指导和合作；</li>
<li>无需使用 UML；</li>
<li>好的软件架构是支持敏捷开发的；</li>
</ol>
<p>想在这个行业里有所作为，就需要克制对新鲜玩意都迷恋，开始问一些问题。</p>
<p>很多架构师远离细节的主要原因之一是他们没有时间。</p>
<p>如果你了解如何编程，往往会忍不住对开发者如何编写代码提出建议。<br>不过，如果你没有参与项目的编程，开发者多半会无视你的编码经验。</p>
<p>软件架构师面临的问题</p>
<ol>
<li>和其它可选技术相比，合适吗？</li>
<li>该系统的设计和构建，还有哪些选择？</li>
<li>是否应该采用一种通用的架构模式？</li>
<li>我们是否明白所做决策的利弊？</li>
<li>我们照顾到了品质属性的需求吗？</li>
<li>我们如何证明这种架构行之有效？</li>
</ol>
<p>最优秀的软件设计师都有软件开发背景，<br>但并不意味着他们是团队中最好的程序员，<br>但他们能够在底层细节和大局之间切换。</p>
<p>结对编程有好处，那为什么不结对架构？</p>
<p>支撑软件架构角色的技术知识需要深度与广度并存的知识组合。</p>
<p>每个人都有自己的想法和计划，你在处理时得让他们不反感，并主动地去追求你需要的结果。好的影响力也要求好的倾听和探索能力。</p>
<p>辅导是对人进行学习方面的指引，<br>而非告诉他们怎么做一件事。</p>
<p>每个组织都少不了政治，我们离得越远越好。<br>但你至少应该明白周围发生了什么，<br>这样才能做出更可靠的决策。</p>
<p>责任感：你不能因为失败就责备软件开发团队中的其它人，有责任感对你而言很重要。</p>
<p>授权：在适当的时候授权，但记住，授权的可不是责任。</p>
<p>保持积极，构建正能量回路。<br>你的热情带动了团队，他们的热情也带动了你</p>
<p>软技能有时候比过硬的技术更重要，<br>交付产品的团队才是愉快的，<br>让团队保持积极是你的责任，<br>你的角色在整个团队中不应该低估。</p>
<p>软件架构要引入控制吗？<br>可以的，类似操纵杆，不是非黑即白，较自由<br>先从部分控制开始，倾听反馈，再微调。</p>
<p>我们正在失去技术导师<br>在我们的行业里许多开发者为了在企业晋升机制中有所发展，被迫转向非技术的管理岗位。<br>讽刺的是，被迫离开技术岗位的往往是最优秀和最资深的技术人员，而软件团队中则失去了最有价值的技术领导、架构师和导师。</p>
<p>很多团队连一个对“大局”之类的东西有经验的人都没有，一团乱麻的代码库、不明确的设计、很慢的系统，类似这些都是证明。</p>
<p>任何时候，在高层次上理解需求、约束和原则都至关重要。因为这是设计选型所需的基本知识。</p>
<p>软件架构谈论的是重要的设计决策，其重要性以变动的成本来衡量。<br>随说：<span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS81MTcxOTQ4MDM4Mzk0MDg5">ETC 原则<i class="fa fa-external-link-alt"></i></span> 来自《程序员修炼之道：通向务实的最高境界》</p>
<p>用层来组织代码库使得软件整体结构更易于观察，但不容易改变特性或用户故事，你需要深入多个层(包、命名空间等)探究。<br>随说：组件更容易改变，聚合的。</p>
<p>因为架构和代码之间相互的映射往往非常少，我们要通过组件封装(闭环&#x2F;类似微服务)对齐软件架构和代码，放弃使用层或特性。</p>
<p>只有 10%～20% 的听众在日常工作中经常使用 UML。<br>其实我们很多时候一张白纸、白板或者便利贴就够了，特别是一组人想通过协作来完成设计。<br>(三四个人挤在笔记本屏幕前有点奇怪，不能是投影？)其实最后还是要迁移到电脑系统上。</p>
<p>画图最好要加上图例，不是所有人都懂 UML。</p>
<p>软件架构流程就是为软件项目引入结构和愿景</p>
<ol>
<li>从对个抽象层次看到并理解方案</li>
<li>理解大局，谁使用系统，IT环境依赖</li>
<li>逻辑容器和高层次技术选择(web服务器、DB)</li>
<li>有哪些主要组件，如何使用他们来满足用户故事、用例、功能，等等。</li>
<li>体现组件职责是什么、组件的归属</li>
<li>理解图表表示法、约定、颜色编码</li>
<li>图表之间的可追踪性</li>
<li>业务领域是什么，高层次视角看</li>
<li>理解实现策略(框架、类库、API)</li>
</ol>
<p>代码不会讲完整的故事，我们需要文档辅助。<br>比如技术选型，一些决策过程，业务背景等</p>
<p>代码库 vs 旅游景点必看指南<br>随说：妙啊</p>
<p>旅游指南有实用信息：货币 电力 移民 法律…<br>源代码里面也应该包括实用信息：哪里找到源码、如何构建、如何部署、团队遵循的原则等等。</p>
<p>项目应该有文档去讲述产品如何工作、如何演化。</p>
<p>每个系统都应该有一份软件指南。<br>告知产品如何工作、演化的信息。<br>方面人们熟悉系统、优化系统。</p>
<p>软件指南包含：<br>语境<br>功能性概览<br>质量属性<br>约束<br>原则<br>软件架构<br>外部接口<br>代码<br>数据<br>基础设施架构<br>部署<br>运营和支持<br>决策日志</p>
<p>所有的决策都是依据特定的语境做出的，<br>通常都有取舍。</p>
<p>项目级文档 vs 产品级文档</p>
<p>思考软件架构的过程其实是确定范围，<br>在范围之内可以用任何一种 xDD 来实现。</p>
<p>架构代表了重大决策，衡量重要性的则是改变的成本。</p>
<h1 id="3-架构微博"><a href="#3-架构微博" class="headerlink" title="3. 架构微博"></a>3. 架构微博</h1><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80OTIxMzk3Nzg3MjMwNDU4">《架构之道》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80ODkxODIzMDgyNTcyODMy">《架构师的12项修炼》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80ODM4MDMzNjY3MzkzMjA4">《软件架构：架构模式、特征及实践指南》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80NzkyMDIwNzIyNTE3OTQz">《微服务架构设计模式》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80NjQ3NDExODk4NjQ3OTY2">《凤凰架构》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80NTQ4MjY3MDk2NjcwOTY5">《架构之美》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80NTQzNTQyMjY4MDA3Mjgw">《架构修炼之道》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80NTIyMzI5OTIyOTg3MjU2">《高可用可伸缩微服务架构》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80NDExNzU1MTYzNTU5Mzc5">《高可用架构》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80MzY4Mzg1Mzg0NzIwMzUx">《可伸缩服务架构：框架与中间件》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80MzQ0ODMzODc3OTE4MzE1">《可伸缩架构》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80MzI5NjIxNjI3MTEzOTA3">《大型网站技术架构》<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWliby5jb20vNjIwOTA3OTIzMS80MzE1NDcxMjc4MzU1NDUz">《架构真经》<i class="fa fa-external-link-alt"></i></span></li>
</ul>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>架构</tag>
      </tags>
  </entry>
  <entry>
    <title>怎么获得业余无线电执照？</title>
    <url>/20250825-how_to_get_an_amateur_radio_license_in_beijing/</url>
    <content><![CDATA[<h1 id="1-合法合规"><a href="#1-合法合规" class="headerlink" title="1. 合法合规"></a>1. 合法合规</h1><p>发射业余无线电需要两个证件</p>
<ol>
<li>操作证(驾驶证)</li>
<li>执照(行驶证)</li>
</ol>
<h1 id="2-具体步骤"><a href="#2-具体步骤" class="headerlink" title="2. 具体步骤"></a>2. 具体步骤</h1><ol>
<li>关注”北京业余无线电服务中心”微信公众号</li>
<li>及时关注报名信息，基本上每个月都会组织 A 类考试</li>
<li>开始之前使用『HAM模拟考试』微信小程序</li>
</ol>
<ul>
<li>建议直接开发做题，因为做错了又解析，也有错题记录，后续专门加强；</li>
</ul>
<ol start="4">
<li>报名,可以不参加培训</li>
</ol>
<ul>
<li>一般名额充足，都能报上名；</li>
</ul>
  <span id="more"></span>
<ul>
<li>可以微信公众上的入口进入</li>
<li>也可以 PC 登录平台操作 <span class="exturl" data-url="aHR0cHM6Ly94dC5iand4ZHhoLm9yZy5jbi9zdGF0aWMvbWVtYmVyLyMvc3RhdGljL21lbWJlci91c2VyL2xvZ2lu">协会PC登录地址<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<ol start="5">
<li>考试，30道题基本上十多分钟做完</li>
<li>等待考试成绩出来</li>
<li>等到操作证出来( 可以进平台选择邮寄 )</li>
<li>查询操作证号( 尽快查，知道操作证号就可以设备登记，也就是申请执照+分配呼号 )</li>
</ol>
<ul>
<li>参考<a href="/20250726-Amateur_Radio_Newbie_Guide/">3.2 查询操作证号</a></li>
</ul>
<ol start="9">
<li>设备登记( 网上方便不用人到现场 )</li>
</ol>
<ul>
<li>像素：800*1240 ( 美图像素修改 )</li>
<li>尺寸&amp;格式：苹果的拍照格式非 jpg，需要通过电脑预览图片后导出，顺便选择图片质量即可</li>
<li>建议选择全国设台</li>
</ul>
<ol start="10">
<li>等协会执照通知</li>
</ol>
<ul>
<li>登记完成后，基本上 20 天就可以拿到执照</li>
</ul>
<ol start="11">
<li>可以愉快地通联</li>
</ol>
<h1 id="3-后话"><a href="#3-后话" class="headerlink" title="3. 后话"></a>3. 后话</h1><p>业余无线电涉及的知识很多，慢慢实践吧~<br>我按这个步骤给家里领导跑了一遍流程，挺顺畅。<br>我六月份考试的时候到早些天拿到呼号，流程还是有点不顺畅。</p>
<p>我的节奏<br>2025.6.21 考试<br>2025.7.23 操作证(驾驶证)<br>2025.8.19 执照(行驶证)</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>HAM</tag>
      </tags>
  </entry>
  <entry>
    <title>怎么使用森海克斯 8800PRO 对讲机</title>
    <url>/20250825-how_to_use_senhaix_8800pro/</url>
    <content><![CDATA[<ol>
<li>长按 menu 切换频率模式&#x2F;信道模式</li>
</ol>
<ul>
<li>频率模式：自由输入( eg:438.500 北京直频 )</li>
<li>信道模式：类似于书签，是之前保存好的频率</li>
</ul>
<ol start="2">
<li>森海克斯8800PRO蓝牙写频</li>
</ol>
<ul>
<li>写频软件<ul>
<li>iOS：app store “SHX8800” (我没成功写频，暂时用安卓解决)</li>
</ul>
  <span id="more"></span>
<ul>
<li>安卓：<span class="exturl" data-url="aHR0cHM6Ly93d3cuc2VuaGFpeC5jb20vY2F0ZWdvcnkvZG93bmxvYWRzLzM=">官网下载<i class="fa fa-external-link-alt"></i></span></li>
</ul>
</li>
<li>操作步骤<ul>
<li>对讲机打开蓝牙”数据模式”</li>
<li>手机连接对讲机</li>
<li>读频</li>
<li>基于读频修改记录<ul>
<li>如果不先读频，大概率写入 88% 写入的时候程序会崩溃</li>
</ul>
</li>
<li>修改完成后写入</li>
</ul>
</li>
</ul>
<p>写频里面的一些细节后续有空再补充，<br>写频的目的也就是为了方便录入很多频率。<br>毕竟对讲机操作还是没有 app 操作方便。</p>
]]></content>
      <categories>
        <category>Tech</category>
      </categories>
      <tags>
        <tag>HAM</tag>
      </tags>
  </entry>
</search>
