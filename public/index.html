<!-- build time:Wed Sep 16 2020 09:53:28 GMT+0800 (China Standard Time) --><!doctype html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css"><meta name="keywords" content="hisen,hisenyuan"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0"><meta name="description" content="Java R &amp; D"><meta property="og:type" content="website"><meta property="og:title" content="HiSEN"><meta property="og:url" content="http://hisen.me/index.html"><meta property="og:site_name" content="HiSEN"><meta property="og:description" content="Java R &amp; D"><meta property="og:locale" content="zh-Hans"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="HiSEN"><meta name="twitter:description" content="Java R &amp; D"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",sidebar:{position:"left",display:"post"},fancybox:!0,motion:!0,duoshuo:{userId:"undefined",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:"",labels:""}}</script><link rel="canonical" href="http://hisen.me/"><title>HiSEN - Java R & D | hisen,hisenyuan</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?67bcfe73b301307394c3443503d43472";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><div class="container one-collumn sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">HiSEN</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Personal Technology Blog</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-booklist"><a href="/booklist" rel="section"><i class="menu-item-icon fa fa-fw fa-list-ol"></i><br>书单</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup"><span class="search-icon fa fa-search"></span> <input type="text" id="local-search-input"><div id="local-search-result"></div><span class="popup-btn-close">close</span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200915-the-puzzle-of-mysql-using-index-which-violation-of-leftmost-matching-principle/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200915-the-puzzle-of-mysql-using-index-which-violation-of-leftmost-matching-principle/" itemprop="url">MySQL查询违反最左匹配原则，但 explain 显示走索引的疑惑</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-09-15T21:45:00+08:00">2020-09-15 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据库/" itemprop="url" rel="index"><span itemprop="name">数据库</span> </a></span></span><span id="/20200915-the-puzzle-of-mysql-using-index-which-violation-of-leftmost-matching-principle/" class="leancloud_visitors" data-flag-title="MySQL查询违反最左匹配原则，但 explain 显示走索引的疑惑"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="零、本文背景"><a href="#零、本文背景" class="headerlink" title="零、本文背景"></a>零、本文背景</h1><p>有个朋友抛出一个问题，<em>明显不符合最左匹配原则的 SQL，居然走索引了</em><br>兜兜转转，嘀咕了好几天，期间也和几个朋友讨论了一下<br>都没有结果，最后还是在 MySQL 的官方文档中找到了原因<br>记录下，也算是一次不错的探索。</p><h1 id="一、问题描述"><a href="#一、问题描述" class="headerlink" title="一、问题描述"></a>一、问题描述</h1><h2 id="1-1-表结构"><a href="#1-1-表结构" class="headerlink" title="1.1 表结构"></a>1.1 表结构</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`people_new`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`last_name`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`first_name`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`bob`</span> <span class="built_in">date</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`index_union`</span> (<span class="string">`last_name`</span>,<span class="string">`first_name`</span>,<span class="string">`bob`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">2</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span>=<span class="string">'人员-新'</span></span><br></pre></td></tr></table></figure><h2 id="1-2-数据"><a href="#1-2-数据" class="headerlink" title="1.2 数据"></a>1.2 数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from people_new;</span><br><span class="line">+----+-----------+------------+------------+</span><br><span class="line">| id | last_name | first_name | bob        |</span><br><span class="line">+----+-----------+------------+------------+</span><br><span class="line">|  1 |  hisen    | yuan       | 2008-08-08 |</span><br><span class="line">+----+-----------+------------+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><h2 id="1-3-SQL-分析"><a href="#1-3-SQL-分析" class="headerlink" title="1.3 SQL 分析"></a>1.3 SQL 分析</h2><p>可以看到 <strong>Using index</strong><br>但是 <strong>possible_keys</strong> null 而 <strong>key</strong> 显示 index_union<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from people_new  where bob = &apos;2008-08-08&apos; and first_name = &apos;yuan&apos;;</span><br><span class="line">+----+-------------+------------+------------+-------+---------------+-------------+---------+------+------+----------+--------------------------+</span><br><span class="line">| id | select_type | table      | partitions | type  | possible_keys | key         | key_len | ref  | rows | filtered | Extra                    |</span><br><span class="line">+----+-------------+------------+------------+-------+---------------+-------------+---------+------+------+----------+--------------------------+</span><br><span class="line">|  1 | SIMPLE      | people_new | NULL       | index | NULL          | index_union | 1537    | NULL |    1 |   100.00 | Using where; Using index |</span><br><span class="line">+----+-------------+------------+------------+-------+---------------+-------------+---------+------+------+----------+--------------------------+</span><br><span class="line">1 row in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p></p><h1 id="二、原因"><a href="#二、原因" class="headerlink" title="二、原因"></a>二、原因</h1><div class="post-button text-center"><a class="btn" href="/20200915-the-puzzle-of-mysql-using-index-which-violation-of-leftmost-matching-principle/#more" rel="contents">阅读全文 &raquo;</a></div></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200805-software-engineer-interview-guide/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200805-software-engineer-interview-guide/" itemprop="url">软件工程师面试指引</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-05T09:45:00+08:00">2020-08-05 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span> </a></span></span><span id="/20200805-software-engineer-interview-guide/" class="leancloud_visitors" data-flag-title="软件工程师面试指引"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="零、关于面试"><a href="#零、关于面试" class="headerlink" title="零、关于面试"></a>零、关于面试</h1><p>面试决定因子：70% 能力、20% 缘分、10% 行情。<br>软件工程师这条不归路，永远都走不到头，每天进步一点点，早日走上人生巅峰。</p><h1 id="一、面经-知识点"><a href="#一、面经-知识点" class="headerlink" title="一、面经/知识点"></a>一、面经/知识点</h1><p>仓库中的东西更多是抛砖引玉<br>提供业界比较通用/关注的技术<br>还得贴合自身需要深入去学习</p><p>基础指引：<a href="https://github.com/Snailclimb/JavaGuide" target="_blank" rel="noopener">https://github.com/Snailclimb/JavaGuide</a><br>进阶之路：<a href="https://github.com/doocs/advanced-java" target="_blank" rel="noopener">https://github.com/doocs/advanced-java</a><br>简历打磨：<a href="https://github.com/geekcompany/ResumeSample/blob/master/java.md" target="_blank" rel="noopener">https://github.com/geekcompany/ResumeSample/blob/master/java.md</a><br>编程书籍：<a href="https://github.com/jobbole/awesome-programming-books" target="_blank" rel="noopener">https://github.com/jobbole/awesome-programming-books</a><br>大厂试题：<a href="https://github.com/0voice/interview_internal_reference" target="_blank" rel="noopener">https://github.com/0voice/interview_internal_reference</a></p><p>后续持续更新，多交流，共同成长。</p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200723-Few-people-know-that-they-are-ignorance/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200723-Few-people-know-that-they-are-ignorance/" itemprop="url">王慧文(美团)：很少人知道自己在愚昧之巅</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-23T05:45:00+08:00">2020-07-23 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/随说/" itemprop="url" rel="index"><span itemprop="name">随说</span> </a></span></span><span id="/20200723-Few-people-know-that-they-are-ignorance/" class="leancloud_visitors" data-flag-title="王慧文(美团)：很少人知道自己在愚昧之巅"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="零、写在前面"><a href="#零、写在前面" class="headerlink" title="零、写在前面"></a>零、写在前面</h1><p>早几天在领导 JG 的朋友圈看到这篇文章<br>简单几个字的标题，让我产生了兴趣<br>一来这个标题是挺吸引人，典型的自媒体文章<br>二来JG 之前推过一些书很不错<br>三来一般领导朋友圈都不会推垃圾信息</p><p>全文看来其实感觉还是挺切合我的认知：</p><ol><li>人很难认清自己，很难找到方向，成长路上有他人指点会很棒</li><li>除了遇到的人合读过的书，十年之后你还是你</li><li>多与他人交流，多帮助他人，利人利己</li><li>运动、学习、反馈、重塑大脑</li></ol><p>离开学校<br>大部分时间都是围绕着工作<br>有些人可能觉得当前的工作不满意<br>然后想着学点什么高大上的东西为以后的工作做准备<br>极端情况下这种选择是对的，大部分情况会让自己进退两难<br>正确的选择应该是：过好当下，瞭望远方，持续学习，总结反思，慢慢进步<br>架构师同事 SGLS 说过：做好当下的事情才是最重要的，不管现在是做什么项目，设计和实现是我们自己可以控制的。</p><p>以下为原文<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">审视是一个特别好的词。当一个人开始审视世界、审视经历、审视自己的时候，更容易做出有担当的选择。</span><br><span class="line">作为美团“二号首长”，王慧文选择在2020年底正式“退休”，这不可分说地成为了焦点——</span><br><span class="line">王慧文，是怎么成为“王慧文”的？</span><br></pre></td></tr></table></figure><p></p><h1 id="一、“不自我设限”，造就无边界的王慧文"><a href="#一、“不自我设限”，造就无边界的王慧文" class="headerlink" title="一、“不自我设限”，造就无边界的王慧文"></a>一、“不自我设限”，造就无边界的王慧文</h1><p>什么是促使人成长的本质原因？<br>王慧文一直在渴求突破，也一直在探究这个问题。</p><h2 id="1-人要接受变化，有动荡才有进化"><a href="#1-人要接受变化，有动荡才有进化" class="headerlink" title="1. 人要接受变化，有动荡才有进化"></a>1. 人要接受变化，有动荡才有进化</h2><p>王慧文修行的开端，就是校内网。<br>2006年3月，王慧文、王兴和另外四名同伴绞尽脑汁、黑白颠倒，终于让校内网收获了一百多万用户。<br>王兴开始四处找投资，但在多数投资人眼里看来，他们仍是群“生瓜蛋子”、“杂牌军”，校内网不过是几个大学生做的小打小闹的玩意儿。<br>但在这时，千橡集团董事长陈一舟出现了，他愿意拿出一千多万人民币，收购校内网。《九败一胜：美团创始人王兴创业十年》中这样描述<br></p><div class="post-button text-center"><a class="btn" href="/20200723-Few-people-know-that-they-are-ignorance/#more" rel="contents">阅读全文 &raquo;</a></div></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200712-mysql-page-query/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200712-mysql-page-query/" itemprop="url">MySQL分页查询</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-12T23:18:00+08:00">2020-07-12 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span> </a></span></span><span id="/20200712-mysql-page-query/" class="leancloud_visitors" data-flag-title="MySQL分页查询"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="零、分页查询"><a href="#零、分页查询" class="headerlink" title="零、分页查询"></a>零、分页查询</h1><p>分页查询一般都会想到 offset limit</p><h2 id="问题1"><a href="#问题1" class="headerlink" title="问题1"></a>问题1</h2><p>当不停机需要全量同步数据时<br>有可能会漏掉或者重复处理很多数据<br>因为中途会有数据改动<br>每次分页内的数据与预期的会有出入</p><h2 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h2><p>offset 会进行全表扫描</p><h1 id="一、推荐方案"><a href="#一、推荐方案" class="headerlink" title="一、推荐方案"></a>一、推荐方案</h1><p>通过不变的字段进行排序<br>最好是使用递增的主键索引</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select *</span><br><span class="line">  from hisen</span><br><span class="line">where id &gt; $&#123;lastId&#125;</span><br><span class="line">  order by id</span><br><span class="line">limit $&#123;pageSize&#125;;</span><br></pre></td></tr></table></figure><h1 id="二、参考"><a href="#二、参考" class="headerlink" title="二、参考"></a>二、参考</h1><div class="post-button text-center"><a class="btn" href="/20200712-mysql-page-query/#more" rel="contents">阅读全文 &raquo;</a></div></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200627-thinking-of-deploy-soft-system/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200627-thinking-of-deploy-soft-system/" itemprop="url">关于部署软系统的思考</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-27T22:08:00+08:00">2020-06-27 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/soft/" itemprop="url" rel="index"><span itemprop="name">soft</span> </a></span></span><span id="/20200627-thinking-of-deploy-soft-system/" class="leancloud_visitors" data-flag-title="关于部署软系统的思考"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>在 敏捷 + devops 盛行的年代<br>软件部署的频率一般都比较高，一周一迭代、一周两迭代<br>这就需要有良好的工具来支持，更需要良好的机制来避免人为犯错</p><p>工作当中会遇到很多部署导致的问题<br>其中大部分的问题原因是配置问题</p><p>关于部署</p><ol><li>开发的时候记录大致改动点</li><li>上线之前按检查列表(团队或个人定义一些常规检查项目)挨个检查</li><li>上线之前写上线步骤列表，部署时做一个人肉机器人，按步骤操作即可</li><li>上线之前写好验证步骤，验证需要的各种权限</li><li>以上做完了最好找相关人员核对一遍，以免遗漏(互备很重要)</li><li>灰度发布(应用启动期间性能抖动问题值得研究)</li></ol><p>互备很重要，哪怕对方没有介入开发，简单的按正常流程问你几个问题，也许就会发现漏了什么。</p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200517-specific-knowledge-accountability-leverage/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200517-specific-knowledge-accountability-leverage/" itemprop="url">赢得财富：用独到的知识/责任感/杠杆</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-17T18:12:00+08:00">2020-05-17 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/随说/" itemprop="url" rel="index"><span itemprop="name">随说</span> </a></span></span><span id="/20200517-specific-knowledge-accountability-leverage/" class="leancloud_visitors" data-flag-title="赢得财富：用独到的知识/责任感/杠杆"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="零、读后感"><a href="#零、读后感" class="headerlink" title="零、读后感"></a>零、读后感</h1><p>美国风险投资家 Naval Ravikant 通过一个很长的推特阐明了他的商业观，感觉挺精辟。<br>积累独到的知识(无法批量复制的)，为社会提供他们需要的。<br>财富不是靠出卖时间获得，应该通过杠杆(资本、人力、一本万利的工具&lt;写书等&gt;)去积累。<br>选择一个可以长期从事的行业，寻找一批可以长期共事的人。</p><h1 id="一、原文-及翻译"><a href="#一、原文-及翻译" class="headerlink" title="一、原文(及翻译)"></a>一、原文(及翻译)</h1><ol><li><p>Seek wealth, not money or status. Wealth is having assets that earn while you sleep. Money is how we transfer time and wealth. Status is your place in the social hierarchy.</p><blockquote><p>去寻求财富，而非金钱或地位。财富就是你拥有资产，而资产在你睡觉的时候都还在为你赚钱；金钱是我们转换时间和财富的工具；身份是你在社会等级体系里所处的位置。</p></blockquote></li><li><p>Understand that ethical wealth creation is possible. If you secretly despise wealth, it will elude you.</p><blockquote><p>要明白一件事：一个人完全可以不靠坑蒙拐骗站着赚取财富。如果你在暗中鄙视财富，那么财富也会躲着你。</p></blockquote></li><li><p>Ignore people playing status games. They gain status by attacking people playing wealth creation games.</p><blockquote><p>别去理会那些热衷于玩身份游戏的人，他们通过攻击那些创造财富的人以获得自己的身份。</p></blockquote></li><li><p>You’re not going to get rich renting out your time. You must own equity — a piece of a business — to gain your financial freedom.</p><blockquote><p>你不会通过出租自己的时间而变得富有。你必须拥有产权，也就是生意的一部分，以此才能赢得个人财务自由。</p></blockquote></li></ol><div class="post-button text-center"><a class="btn" href="/20200517-specific-knowledge-accountability-leverage/#more" rel="contents">阅读全文 &raquo;</a></div></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200510-java-deserialize-security-hole/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200510-java-deserialize-security-hole/" itemprop="url">Java 反序列化漏洞</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-10T17:30:00+08:00">2020-05-10 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span> </a></span></span><span id="/20200510-java-deserialize-security-hole/" class="leancloud_visitors" data-flag-title="Java 反序列化漏洞"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>微博目前关注了好几个做安全的大佬<br>不要问我为什么关注<br>问就是想观摩下有钱人的微博！</p><p>其中有一个经常发 Java 相关的内容<br>今天看到一个稍微熟悉一点关于 FastJson 漏洞</p><blockquote><p>窃以为Fastjson入门的最佳篇章非Mi1k7ea这个系列莫属，郑重推荐: <a href="https://www.mi1k7ea.com/tags/" target="_blank" rel="noopener">Mi1k7ea</a>。<br>共有5篇，从第3篇开始，成体系地由旧到新展示了1.2.25之后各版本的补丁绕过，<br>直至思路惊艳的1.2.47绕过方案及1.2.48的修补方案，相当完备。<br>可以看出此君是动手实践派、整理归纳派，要我说，新学东西时就得这套路，无它。</p></blockquote><p>今天看了这两篇文章，不得不说对 Java 是异常的熟悉。<br>想做好安全，想必要对用的东西了如指掌，知道坑在哪里，怎么填坑。</p><ul><li><a href="https://www.mi1k7ea.com/2019/02/06/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/" target="_blank" rel="noopener">Java反序列化漏洞</a></li><li><a href="https://www.mi1k7ea.com/2019/11/03/Fastjson%E7%B3%BB%E5%88%97%E4%B8%80%E2%80%94%E2%80%94%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/" target="_blank" rel="noopener">Fastjson系列一 反序列化漏洞基本原理</a></li></ul><div class="post-button text-center"><a class="btn" href="/20200510-java-deserialize-security-hole/#more" rel="contents">阅读全文 &raquo;</a></div></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200406-draw.io-open-source-drawing-tools-support-web-mac-windows-linux/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200406-draw.io-open-source-drawing-tools-support-web-mac-windows-linux/" itemprop="url">开源画图工具(各种图)：draw.io 支持 Web、macOS、Windows、Linux</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-06T22:30:00+08:00">2020-04-06 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/soft/" itemprop="url" rel="index"><span itemprop="name">soft</span> </a></span></span><span id="/20200406-draw.io-open-source-drawing-tools-support-web-mac-windows-linux/" class="leancloud_visitors" data-flag-title="开源画图工具(各种图)：draw.io 支持 Web、macOS、Windows、Linux"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>draw.io 一个很棒的开源画图工具，可以导出 xml、pdf、html、png 等各种格式<br>其实重点是开源，目前好几个地方看到有在用，之前用网页版，现在用桌面版多些</p><p>网页版：<a href="https://draw.io" target="_blank" rel="noopener">draw.io</a><br>桌面版：<a href="https://github.com/jgraph/drawio-desktop/releases" target="_blank" rel="noopener">github 下载支持：Windows、macOS、Linux、Google Chrome OS</a></p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200406-self4j-logback-log4j-log-properties/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200406-self4j-logback-log4j-log-properties/" itemprop="url">Java 日志配置文件 - self4j 之 logback 和 log4j</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-06T21:50:00+08:00">2020-04-06 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span> </a></span></span><span id="/20200406-self4j-logback-log4j-log-properties/" class="leancloud_visitors" data-flag-title="Java 日志配置文件 - self4j 之 logback 和 log4j"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>写这种博客总感觉很低级<br>但是不得不承认自己从来没有认真的了解过打日志这件事<br>这里开个头，先从常见的日志配置文件开始，后续再深入了解</p><p>“I wish i had” vs “I’m glad i did”<br>人生会不会留下遗憾，在 20 年之后的这两句话中就能看出。<br>希望 20 年后的自己，能够很自豪的说：I’m glad i did.</p><h1 id="一、self4j"><a href="#一、self4j" class="headerlink" title="一、self4j"></a>一、self4j</h1><p>这是一个只定义了标准的日志组件</p><h1 id="二、logback"><a href="#二、logback" class="headerlink" title="二、logback"></a>二、logback</h1><p>常见配置：logback.xml<br></p><div class="post-button text-center"><a class="btn" href="/20200406-self4j-logback-log4j-log-properties/#more" rel="contents">阅读全文 &raquo;</a></div></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://hisen.me/20200226-find-a-good-way-to-learn/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="hisenyuan"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HiSEN"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="HiSEN" src=""></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/20200226-find-a-good-way-to-learn/" itemprop="url">找到好的学习方法</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-26T23:10:00+08:00">2020-02-26 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/随说/" itemprop="url" rel="index"><span itemprop="name">随说</span> </a></span></span><span id="/20200226-find-a-good-way-to-learn/" class="leancloud_visitors" data-flag-title="找到好的学习方法"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数 </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>时间是公平的，对每个人都一样，不同之处在于每个人单位时间的产出值会有差异。<br>一直在寻找适合于自己的学习方法以提高时间的利用效率，以便不影响诗和远方==<br>奈何目前也没有太多满意的答案，或许生命的意义就是在于探索未知而又刺激的世界。<br>分享一些文字，提到了一些好的学习方法，抛砖引玉，共勉。</p><p>《贫穷的本质》告诉我们，贫穷的本质是认知。其实很多时候真的是认知，方法论决定了一个人可以走多远。</p><p>《刻意练习》原地踏步的练习是没意义的，大众眼里一万小时定律基本上是错误的，需要的是有进步练习;</p><p>《学习之道》十个不错的方法：回想、组块、简化、交替、间隔、休息、心理对比、自测、专注、休息;</p><p>《如何阅读一本书》里面有提到主题阅读，不同的人对同一主题会有不同的看法，可以对比吸收;</p><p>《程序员的职业素养》有提到卡塔练习，提高我们的肌肉反应，让写代码像聊天打字一遍的顺畅;</p><p>早些天看到一篇不错的帖子<br>对我感触最深的就是：4<br>标题：如果高效学习有什么秘诀的话，那就都在这里了：）<br></p><div class="post-button text-center"><a class="btn" href="/20200226-find-a-good-way-to-learn/#more" rel="contents">阅读全文 &raquo;</a></div></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></section><nav class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview sidebar-panel sidebar-panel-active"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="hisenyuan"><p class="site-author-name" itemprop="name">hisenyuan</p><p class="site-description motion-element" itemprop="description">Java R & D</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">220</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories"><span class="site-state-item-count">24</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags"><span class="site-state-item-count">106</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/hisenyuan" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub </a></span><span class="links-of-author-item"><a href="http://weibo.com/hisenyuan" target="_blank" title="Weibo"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-globe"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="http://www.714.hk" title="梦殇国际" target="_blank">梦殇国际</a></li></ul></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 - <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">hisenyuan</span></div><div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div><span id="busuanzi_container_site_uv">您是第&nbsp;<span id="busuanzi_value_site_uv"></span>&nbsp;个访问者 </span>&nbsp;&nbsp; | &nbsp;&nbsp;<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="theme-info">主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="https://apps.bdimg.com/libs/fastclick/1.0.0/fastclick.min.js"></script><script type="text/javascript" src="https://apps.bdimg.com/libs/jquery-lazyload/1.9.5/jquery.lazyload.js"></script><script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.min.js"></script><script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.ui.js"></script><script type="text/javascript" src="https://apps.bdimg.com/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),n=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!1,n=r.title.trim().toLowerCase(),s=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),o=decodeURIComponent(r.url),i=-1,l=-1,p=-1;if(""!=n&&a.forEach(function(e,t){i=n.indexOf(e),l=s.indexOf(e),(i>=0||l>=0)&&(c=!0,0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+o+"' class='search-result-title'>"+n+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;u<0&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),n.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script><script>AV.initialize("xHYsdhTdbcEW58Qv52aYKkQh-gzGzoHsz","L3rafXQHUnwDBfSL0KPuzHlT")</script><script>function showTime(e){var t=new AV.Query(e);$(".leancloud_visitors").each(function(){var e=$(this).attr("id").trim();t.equalTo("url",e),t.find({success:function(t){if(0==t.length){var n=$(document.getElementById(e)).text()+": 0";return void $(document.getElementById(e)).text(n)}var o=t[0],n=$(document.getElementById(e)).text()+": "+o.get("time");$(document.getElementById(e)).text(n)},error:function(e,t){console.log("Error: "+t.code+" "+t.message)}})})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var r=new e,s=new AV.ACL;s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),r.setACL(s),r.set("title",o),r.set("url",n),r.set("time",1),r.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></body></html><!-- rebuild by neat -->